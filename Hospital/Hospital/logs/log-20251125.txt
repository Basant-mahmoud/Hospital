2025-11-25 00:37:30.830 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-25 00:37:30.966 +02:00 [DBG] Hosting starting
2025-11-25 00:37:30.997 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 00:37:31.009 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-25 00:37:31.027 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-25 00:37:31.030 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-25 00:37:31.031 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-25 00:37:31.037 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-25 00:37:31.043 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-25 00:37:31.044 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-25 00:37:31.045 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-25 00:37:31.050 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-25 00:37:31.052 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 00:37:31.055 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-25 00:37:31.056 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 00:37:31.060 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-25 00:37:31.061 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-25 00:37:31.063 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-25 00:37:31.064 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-25 00:37:31.069 +02:00 [DBG] Middleware loaded
2025-11-25 00:37:31.071 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-25 00:37:31.072 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-25 00:37:31.169 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-25 00:37:31.292 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-25 00:37:31.293 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-25 00:37:31.295 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-25 00:37:31.296 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-25 00:37:31.296 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-25 00:37:31.297 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-25 00:37:31.394 +02:00 [DBG] Connection id "0HNHBL871B5PC" accepted.
2025-11-25 00:37:31.396 +02:00 [DBG] Connection id "0HNHBL871B5PD" accepted.
2025-11-25 00:37:31.401 +02:00 [DBG] Connection id "0HNHBL871B5PC" started.
2025-11-25 00:37:31.401 +02:00 [DBG] Connection id "0HNHBL871B5PD" started.
2025-11-25 00:37:31.403 +02:00 [DBG] Connection id "0HNHBL871B5PD" received FIN.
2025-11-25 00:37:31.403 +02:00 [DBG] Connection id "0HNHBL871B5PC" received FIN.
2025-11-25 00:37:31.423 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 00:37:31.425 +02:00 [INF] Hosting environment: Development
2025-11-25 00:37:31.427 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-25 00:37:31.429 +02:00 [DBG] Hosting started
2025-11-25 00:37:31.442 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 00:37:31.442 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 00:37:31.644 +02:00 [DBG] Connection id "0HNHBL871B5PC" stopped.
2025-11-25 00:37:31.644 +02:00 [DBG] Connection id "0HNHBL871B5PD" stopped.
2025-11-25 00:37:31.649 +02:00 [DBG] Connection id "0HNHBL871B5PD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:37:31.649 +02:00 [DBG] Connection id "0HNHBL871B5PC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:37:31.749 +02:00 [DBG] Connection id "0HNHBL871B5PE" accepted.
2025-11-25 00:37:31.752 +02:00 [DBG] Connection id "0HNHBL871B5PE" started.
2025-11-25 00:37:31.803 +02:00 [DBG] Connection 0HNHBL871B5PE established using the following protocol: "Tls13"
2025-11-25 00:37:31.897 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-25 00:37:32.011 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-25 00:37:32.038 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-25 00:37:32.039 +02:00 [DBG] Request did not match any endpoints
2025-11-25 00:37:32.082 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-25 00:37:32.083 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-25 00:37:32.105 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-25 00:37:32.107 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-25 00:37:32.113 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 224.5851ms
2025-11-25 00:37:32.154 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-25 00:37:32.154 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-25 00:37:32.177 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-25 00:37:32.179 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 25.0297ms
2025-11-25 00:37:32.207 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.7071ms
2025-11-25 00:37:32.266 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-25 00:37:32.270 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-25 00:37:32.271 +02:00 [DBG] Request did not match any endpoints
2025-11-25 00:37:32.317 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.5833ms
2025-11-25 00:37:33.741 +02:00 [DBG] Connection id "0HNHBL871B5PE" received FIN.
2025-11-25 00:37:33.747 +02:00 [DBG] The connection queue processing loop for 0HNHBL871B5PE completed.
2025-11-25 00:37:33.749 +02:00 [DBG] Connection id "0HNHBL871B5PE" is closed. The last processed stream ID was 7.
2025-11-25 00:37:33.751 +02:00 [DBG] Connection id "0HNHBL871B5PE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:37:33.755 +02:00 [DBG] Connection id "0HNHBL871B5PE" stopped.
2025-11-25 00:37:34.511 +02:00 [DBG] Connection id "0HNHBL871B5PF" accepted.
2025-11-25 00:37:34.512 +02:00 [DBG] Connection id "0HNHBL871B5PF" started.
2025-11-25 00:37:34.518 +02:00 [DBG] Connection 0HNHBL871B5PF established using the following protocol: "Tls13"
2025-11-25 00:37:34.520 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-25 00:37:34.527 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:37:34.529 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-25 00:37:34.532 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:37:34.534 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:37:34.535 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:37:34.538 +02:00 [DBG] The request is a preflight request.
2025-11-25 00:37:34.540 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 20.093ms
2025-11-25 00:37:34.542 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-11-25 00:37:34.547 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:37:34.551 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 00:37:34.552 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:37:34.553 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:37:34.554 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:37:34.555 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:37:34.596 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:37:34.600 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:37:34.634 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 00:37:34.637 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:37:34.639 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:37:34.641 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:37:34.643 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:37:34.645 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:37:34.648 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:37:34.805 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 00:37:34.840 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:37:34.857 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:37:34.860 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 00:37:34.864 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 00:37:34.873 +02:00 [DBG] Connection id "0HNHBL871B5PF", Request id "0HNHBL871B5PF:00000003": started reading request body.
2025-11-25 00:37:34.875 +02:00 [DBG] Connection id "0HNHBL871B5PF", Request id "0HNHBL871B5PF:00000003": done reading request body.
2025-11-25 00:37:34.890 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 00:37:34.892 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:37:34.894 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:37:34.895 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:37:34.905 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:37:34.910 +02:00 [INF] Login called at "2025-11-25T00:37:34.9101671+02:00"
2025-11-25 00:37:34.916 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-11-25 00:37:35.441 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 00:37:35.443 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 00:37:35.445 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 00:37:35.446 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 00:37:35.447 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 00:37:35.552 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 00:37:35.554 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 00:37:35.759 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:37:35.893 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-25 00:37:36.074 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 00:37:36.118 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:37:36.141 +02:00 [DBG] Created DbConnection. (21ms).
2025-11-25 00:37:36.145 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 00:37:53.167 +02:00 [ERR] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 00:37:53.184 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:37:53.295 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 18645.8798ms
2025-11-25 00:37:53.298 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:37:53.370 +02:00 [ERR]  Exception caught: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at Hospital.Infrastructure.Services.AuthService.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AuthService.cs:line 138
   at Hospital.Controllers.AuthController.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital\Controllers\AuthController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:37:53.430 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:37:53.435 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 00:37:53.440 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-25 00:37:53.442 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 500 null application/json 18900.3544ms
2025-11-25 00:37:53.738 +02:00 [DBG] Connection id "0HNHBL871B5PF" received FIN.
2025-11-25 00:37:53.739 +02:00 [DBG] Connection id "0HNHBL871B5PF" is closed. The last processed stream ID was 3.
2025-11-25 00:37:53.739 +02:00 [DBG] The connection queue processing loop for 0HNHBL871B5PF completed.
2025-11-25 00:37:53.740 +02:00 [DBG] Connection id "0HNHBL871B5PF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:37:53.744 +02:00 [DBG] Connection id "0HNHBL871B5PF" stopped.
2025-11-25 00:37:55.426 +02:00 [DBG] Connection id "0HNHBL871B5PG" accepted.
2025-11-25 00:37:55.428 +02:00 [DBG] Connection id "0HNHBL871B5PG" started.
2025-11-25 00:37:55.432 +02:00 [DBG] Connection 0HNHBL871B5PG established using the following protocol: "Tls13"
2025-11-25 00:37:55.434 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-25 00:37:55.442 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:37:55.443 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-25 00:37:55.444 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:37:55.446 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:37:55.446 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:37:55.447 +02:00 [DBG] The request is a preflight request.
2025-11-25 00:37:55.448 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 14.2573ms
2025-11-25 00:37:55.451 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-11-25 00:37:55.453 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:37:55.454 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 00:37:55.455 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:37:55.456 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:37:55.457 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:37:55.458 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:37:55.460 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:37:55.461 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:37:55.462 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 00:37:55.464 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:37:55.465 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:37:55.467 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:37:55.468 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:37:55.469 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:37:55.471 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:37:55.475 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:37:55.477 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:37:55.479 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 00:37:55.480 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 00:37:55.482 +02:00 [DBG] Connection id "0HNHBL871B5PG", Request id "0HNHBL871B5PG:00000003": started reading request body.
2025-11-25 00:37:55.483 +02:00 [DBG] Connection id "0HNHBL871B5PG", Request id "0HNHBL871B5PG:00000003": done reading request body.
2025-11-25 00:37:55.485 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 00:37:55.486 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:37:55.488 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:37:55.489 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:37:55.490 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:37:55.492 +02:00 [INF] Login called at "2025-11-25T00:37:55.4926352+02:00"
2025-11-25 00:37:55.493 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-11-25 00:37:55.538 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:37:55.546 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:37:55.548 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 00:37:55.548 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 00:37:55.551 +02:00 [ERR] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 00:37:55.556 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:37:55.628 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 157.8455ms
2025-11-25 00:37:55.631 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:37:55.646 +02:00 [ERR]  Exception caught: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at Hospital.Infrastructure.Services.AuthService.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AuthService.cs:line 138
   at Hospital.Controllers.AuthController.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital\Controllers\AuthController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:37:55.657 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:37:55.659 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 00:37:55.660 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:37:55.662 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 500 null application/json 211.2955ms
2025-11-25 00:38:02.249 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-25 00:38:02.252 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:38:02.254 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-25 00:38:02.255 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:38:02.255 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:38:02.256 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:38:02.256 +02:00 [DBG] The request is a preflight request.
2025-11-25 00:38:02.257 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 7.8034ms
2025-11-25 00:38:02.259 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-11-25 00:38:02.262 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:38:02.263 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 00:38:02.264 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:02.264 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:38:02.265 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:38:02.266 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:38:02.268 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:38:02.268 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:02.269 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 00:38:02.270 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:38:02.271 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:38:02.273 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:38:02.274 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:38:02.275 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:38:02.276 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:38:02.294 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:38:02.296 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:38:02.297 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 00:38:02.299 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 00:38:02.300 +02:00 [DBG] Connection id "0HNHBL871B5PG", Request id "0HNHBL871B5PG:00000007": started reading request body.
2025-11-25 00:38:02.301 +02:00 [DBG] Connection id "0HNHBL871B5PG", Request id "0HNHBL871B5PG:00000007": done reading request body.
2025-11-25 00:38:02.302 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 00:38:02.303 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:02.304 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:02.305 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:38:02.306 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:02.308 +02:00 [INF] Login called at "2025-11-25T00:38:02.3080390+02:00"
2025-11-25 00:38:02.308 +02:00 [INF] Login attempt for email: Admin@Hospital.com
2025-11-25 00:38:02.322 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:38:02.326 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:38:02.326 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:38:02.327 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:19.084 +02:00 [ERR] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:19.087 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:38:19.140 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 16864.1862ms
2025-11-25 00:38:19.142 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:19.192 +02:00 [ERR]  Exception caught: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at Hospital.Infrastructure.Services.AuthService.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AuthService.cs:line 138
   at Hospital.Controllers.AuthController.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital\Controllers\AuthController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:38:19.207 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:38:19.208 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:19.210 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:38:19.212 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 500 null application/json 16953.1259ms
2025-11-25 00:38:23.743 +02:00 [DBG] Connection id "0HNHBL871B5PG" received FIN.
2025-11-25 00:38:23.744 +02:00 [DBG] Connection id "0HNHBL871B5PG" is closed. The last processed stream ID was 7.
2025-11-25 00:38:23.744 +02:00 [DBG] The connection queue processing loop for 0HNHBL871B5PG completed.
2025-11-25 00:38:23.745 +02:00 [DBG] Connection id "0HNHBL871B5PG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:38:23.747 +02:00 [DBG] Connection id "0HNHBL871B5PG" stopped.
2025-11-25 00:38:30.535 +02:00 [DBG] Connection id "0HNHBL871B5PH" accepted.
2025-11-25 00:38:30.536 +02:00 [DBG] Connection id "0HNHBL871B5PH" started.
2025-11-25 00:38:30.536 +02:00 [DBG] Connection id "0HNHBL871B5PI" accepted.
2025-11-25 00:38:30.536 +02:00 [DBG] Connection id "0HNHBL871B5PH" received FIN.
2025-11-25 00:38:30.544 +02:00 [DBG] Connection id "0HNHBL871B5PI" started.
2025-11-25 00:38:30.546 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 00:38:30.547 +02:00 [DBG] Connection id "0HNHBL871B5PH" stopped.
2025-11-25 00:38:30.549 +02:00 [DBG] Connection id "0HNHBL871B5PH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:38:30.558 +02:00 [DBG] Connection 0HNHBL871B5PI established using the following protocol: "Tls13"
2025-11-25 00:38:30.564 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 65
2025-11-25 00:38:30.566 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:38:30.567 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 00:38:30.568 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:30.569 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:38:30.569 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:38:30.570 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:30.571 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 00:38:30.572 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:38:30.573 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:38:30.575 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:38:30.576 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:38:30.577 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:38:30.578 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:38:30.579 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:38:30.581 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:38:30.582 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 00:38:30.583 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 00:38:30.584 +02:00 [DBG] Connection id "0HNHBL871B5PI", Request id "0HNHBL871B5PI:00000001": started reading request body.
2025-11-25 00:38:30.586 +02:00 [DBG] Connection id "0HNHBL871B5PI", Request id "0HNHBL871B5PI:00000001": done reading request body.
2025-11-25 00:38:30.587 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 00:38:30.588 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:30.589 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:30.590 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:38:30.591 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:30.592 +02:00 [INF] Login called at "2025-11-25T00:38:30.5922315+02:00"
2025-11-25 00:38:30.592 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-11-25 00:38:30.594 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:38:30.596 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:38:30.596 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:38:30.597 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:47.344 +02:00 [ERR] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:47.347 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:38:47.406 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 16828.2252ms
2025-11-25 00:38:47.409 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:47.454 +02:00 [ERR]  Exception caught: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at Hospital.Infrastructure.Services.AuthService.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AuthService.cs:line 138
   at Hospital.Controllers.AuthController.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital\Controllers\AuthController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:38:47.470 +02:00 [DBG] Connection id "0HNHBL871B5PI" completed keep alive response.
2025-11-25 00:38:47.471 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:38:47.472 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:47.473 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:38:47.475 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 500 null application/json 16911.407ms
2025-11-25 00:38:58.790 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 65
2025-11-25 00:38:58.793 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:38:58.794 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 00:38:58.795 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:58.796 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:38:58.797 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:38:58.798 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:58.799 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 00:38:58.801 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:38:58.802 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:38:58.803 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:38:58.804 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:38:58.806 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:38:58.807 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:38:58.808 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:38:58.809 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:38:58.810 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 00:38:58.812 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 00:38:58.813 +02:00 [DBG] Connection id "0HNHBL871B5PI", Request id "0HNHBL871B5PI:00000002": started reading request body.
2025-11-25 00:38:58.814 +02:00 [DBG] Connection id "0HNHBL871B5PI", Request id "0HNHBL871B5PI:00000002": done reading request body.
2025-11-25 00:38:58.816 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 00:38:58.816 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:58.817 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:58.818 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:38:58.819 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:38:58.821 +02:00 [INF] Login called at "2025-11-25T00:38:58.8213349+02:00"
2025-11-25 00:38:58.822 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-11-25 00:38:58.824 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:38:58.826 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:38:58.827 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:38:58.828 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:58.829 +02:00 [ERR] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:58.832 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:38:58.888 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 81.6932ms
2025-11-25 00:38:58.890 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:38:58.905 +02:00 [ERR]  Exception caught: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at Hospital.Infrastructure.Services.AuthService.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AuthService.cs:line 138
   at Hospital.Controllers.AuthController.LoginAsync(LoginModel model) in D:\Hospital\Hospital\Hospital\Controllers\AuthController.cs:line 58
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-25 00:38:58.916 +02:00 [DBG] Connection id "0HNHBL871B5PI" completed keep alive response.
2025-11-25 00:38:58.918 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:38:58.918 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 00:38:58.920 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:38:58.921 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 500 null application/json 131.0483ms
2025-11-25 00:39:23.740 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-25 00:39:23.871 +02:00 [DBG] Hosting starting
2025-11-25 00:39:23.904 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 00:39:23.919 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-25 00:39:23.937 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-25 00:39:23.941 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-25 00:39:23.943 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-25 00:39:23.949 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-25 00:39:23.955 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-25 00:39:23.956 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-25 00:39:23.957 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-25 00:39:23.965 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-25 00:39:23.969 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 00:39:23.972 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-25 00:39:23.975 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 00:39:23.981 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-25 00:39:23.983 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-25 00:39:23.986 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-25 00:39:23.988 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-25 00:39:23.995 +02:00 [DBG] Middleware loaded
2025-11-25 00:39:23.998 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-25 00:39:24.000 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-25 00:39:24.122 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-25 00:39:24.232 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-25 00:39:24.233 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-25 00:39:24.234 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-25 00:39:24.235 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-25 00:39:24.236 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-25 00:39:24.236 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-25 00:39:24.319 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 00:39:24.320 +02:00 [INF] Hosting environment: Development
2025-11-25 00:39:24.321 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-25 00:39:24.321 +02:00 [DBG] Hosting started
2025-11-25 00:39:24.495 +02:00 [DBG] Connection id "0HNHBL98NVIU7" received FIN.
2025-11-25 00:39:24.501 +02:00 [DBG] Connection id "0HNHBL98NVIU7" accepted.
2025-11-25 00:39:24.502 +02:00 [DBG] Connection id "0HNHBL98NVIU7" started.
2025-11-25 00:39:24.520 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 00:39:24.681 +02:00 [DBG] Connection id "0HNHBL98NVIU7" stopped.
2025-11-25 00:39:24.685 +02:00 [DBG] Connection id "0HNHBL98NVIU7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:39:24.809 +02:00 [DBG] Connection id "0HNHBL98NVIU8" accepted.
2025-11-25 00:39:24.830 +02:00 [DBG] Connection id "0HNHBL98NVIU8" started.
2025-11-25 00:39:24.897 +02:00 [DBG] Connection 0HNHBL98NVIU8 established using the following protocol: "Tls13"
2025-11-25 00:39:24.965 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-25 00:39:25.070 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-25 00:39:25.097 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-25 00:39:25.098 +02:00 [DBG] Request did not match any endpoints
2025-11-25 00:39:25.148 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-25 00:39:25.151 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-25 00:39:25.168 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-25 00:39:25.170 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-25 00:39:25.174 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 219.6531ms
2025-11-25 00:39:25.213 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-25 00:39:25.213 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-25 00:39:25.236 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-25 00:39:25.238 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 25.3169ms
2025-11-25 00:39:25.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.3584ms
2025-11-25 00:39:25.329 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-25 00:39:25.332 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-25 00:39:25.333 +02:00 [DBG] Request did not match any endpoints
2025-11-25 00:39:25.373 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.804ms
2025-11-25 00:39:28.405 +02:00 [DBG] Connection id "0HNHBL98NVIU9" accepted.
2025-11-25 00:39:28.407 +02:00 [DBG] Connection id "0HNHBL98NVIU9" started.
2025-11-25 00:39:28.412 +02:00 [DBG] Connection 0HNHBL98NVIU9 established using the following protocol: "Tls13"
2025-11-25 00:39:28.416 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-25 00:39:28.423 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:39:28.424 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-25 00:39:28.428 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:28.429 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:28.431 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:28.434 +02:00 [DBG] The request is a preflight request.
2025-11-25 00:39:28.438 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 21.4803ms
2025-11-25 00:39:28.441 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-11-25 00:39:28.447 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 00:39:28.452 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 00:39:28.455 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:39:28.456 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:28.458 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:28.459 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:28.509 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:28.513 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:39:28.546 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 00:39:28.552 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:28.555 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:28.557 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:28.559 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:28.560 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:28.564 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:39:28.753 +02:00 [DBG] Connection id "0HNHBL98NVIU8" received FIN.
2025-11-25 00:39:28.757 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIU8 completed.
2025-11-25 00:39:28.759 +02:00 [DBG] Connection id "0HNHBL98NVIU8" is closed. The last processed stream ID was 7.
2025-11-25 00:39:28.761 +02:00 [DBG] Connection id "0HNHBL98NVIU8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:39:28.763 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 00:39:28.765 +02:00 [DBG] Connection id "0HNHBL98NVIU8" stopped.
2025-11-25 00:39:28.811 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 00:39:28.828 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:39:28.833 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 00:39:28.836 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 00:39:28.847 +02:00 [DBG] Connection id "0HNHBL98NVIU9", Request id "0HNHBL98NVIU9:00000003": started reading request body.
2025-11-25 00:39:28.849 +02:00 [DBG] Connection id "0HNHBL98NVIU9", Request id "0HNHBL98NVIU9:00000003": done reading request body.
2025-11-25 00:39:28.862 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 00:39:28.864 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:39:28.866 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:39:28.868 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 00:39:28.880 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 00:39:28.886 +02:00 [INF] Login called at "2025-11-25T00:39:28.8860866+02:00"
2025-11-25 00:39:28.894 +02:00 [INF] Login attempt for email: Admin@Hospital.com
2025-11-25 00:39:29.636 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 00:39:29.638 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 00:39:29.640 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 00:39:29.642 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 00:39:29.644 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 00:39:29.794 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 00:39:29.797 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 00:39:30.060 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:30.210 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-25 00:39:30.452 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 00:39:30.511 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:30.547 +02:00 [DBG] Created DbConnection. (35ms).
2025-11-25 00:39:30.553 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.072 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.078 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:31.085 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-11-25 00:39:31.100 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-11-25 00:39:31.111 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 00:39:31.225 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 00:39:31.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:31.340 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.347 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 115ms reading results.
2025-11-25 00:39:31.352 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.360 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (8ms).
2025-11-25 00:39:31.463 +02:00 [DBG] Creating JWT token for user 17ad60f0-c88f-448c-bfd9-b511753e410b
2025-11-25 00:39:31.473 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-25 00:39:31.508 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 00:39:31.511 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.514 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.515 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:31.516 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:31.518 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:39:31.519 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-25 00:39:31.527 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-25 00:39:31.530 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.532 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 00:39:31.533 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.534 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:31.544 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-25 00:39:31.561 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 00:39:31.564 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.566 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.567 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:31.568 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:39:31.569 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:39:31.570 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 00:39:31.578 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 00:39:31.581 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.582 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:39:31.584 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.585 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:31.597 +02:00 [DBG] JWT token created for user 17ad60f0-c88f-448c-bfd9-b511753e410b, expires at "2025-11-24T23:39:31.0000000Z"
2025-11-25 00:39:31.602 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.603 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.604 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:31.605 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:39:31.606 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:31.607 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 00:39:31.610 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 00:39:31.612 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.613 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:39:31.614 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.616 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:31.626 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-25 00:39:31.634 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 00:39:31.636 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.638 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.639 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:31.640 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:31.641 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:39:31.642 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 00:39:31.650 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 00:39:31.653 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.654 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 00:39:31.656 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.657 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:31.678 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:31.685 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 00:39:31.702 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 00:39:31.719 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 00:39:31.722 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 00:39:31.724 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 00:39:31.811 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.812 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.816 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:31.817 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:39:31.823 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-25 00:39:31.824 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] IS NULL;
2025-11-25 00:39:31.842 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] IS NULL;
2025-11-25 00:39:31.849 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.850 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-25 00:39:31.853 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.855 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:31.860 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:31.864 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 00:39:31.894 +02:00 [INF] User Admin@Hospital.com logged in successfully with roles: Admin
2025-11-25 00:39:31.901 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:31.904 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:31.905 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:31.906 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:31.908 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:31.909 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-25 00:39:31.931 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 3365.8371ms
2025-11-25 00:39:31.934 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 00:39:31.938 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:31.942 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:31.945 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-25 00:39:31.947 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 3505.483ms
2025-11-25 00:39:33.754 +02:00 [DBG] Connection id "0HNHBL98NVIU9" received FIN.
2025-11-25 00:39:33.757 +02:00 [DBG] Connection id "0HNHBL98NVIU9" is closed. The last processed stream ID was 3.
2025-11-25 00:39:33.757 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIU9 completed.
2025-11-25 00:39:33.758 +02:00 [DBG] Connection id "0HNHBL98NVIU9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:39:33.760 +02:00 [DBG] Connection id "0HNHBL98NVIU9" stopped.
2025-11-25 00:39:54.140 +02:00 [DBG] Connection id "0HNHBL98NVIUA" accepted.
2025-11-25 00:39:54.145 +02:00 [DBG] Connection id "0HNHBL98NVIUA" started.
2025-11-25 00:39:54.150 +02:00 [DBG] Connection 0HNHBL98NVIUA established using the following protocol: "Tls13"
2025-11-25 00:39:54.156 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-25 00:39:54.156 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:39:54.164 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-25 00:39:54.167 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:39:54.168 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-25 00:39:54.169 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:39:54.170 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:39:54.171 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:54.173 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:54.173 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:54.175 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:54.175 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:54.176 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:54.177 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:54.179 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:54.180 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:54.180 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:54.181 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:39:54.186 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:39:54.186 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 00:39:54.188 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:54.190 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:54.191 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:54.193 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:54.194 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:54.195 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:54.197 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:54.198 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:54.200 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:54.201 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:54.202 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:54.203 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:39:54.405 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:54.405 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:39:54.408 +02:00 [INF] Get All Branch called at "2025-11-25T00:39:54.4081504+02:00"
2025-11-25 00:39:54.409 +02:00 [INF] get all Specialization called at "2025-11-25T00:39:54.4095905+02:00"
2025-11-25 00:39:54.410 +02:00 [INF] Fetching all branches
2025-11-25 00:39:54.411 +02:00 [INF] Fetching all specializations in the system
2025-11-25 00:39:54.448 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:54.448 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:54.454 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-25 00:39:54.455 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-25 00:39:54.460 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 00:39:54.462 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:54.463 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-25 00:39:54.463 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 00:39:54.464 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.465 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-25 00:39:54.465 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.467 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:54.468 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:39:54.469 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:54.469 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 00:39:54.469 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:54.477 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:54.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:39:54.481 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.482 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:39:54.495 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:54.496 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:54.497 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:54.498 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:54.498 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:54.499 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:54.503 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 301.2634ms
2025-11-25 00:39:54.505 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:54.506 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:54.507 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.508 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:39:54.509 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 353.3358ms
2025-11-25 00:39:54.537 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 00:39:54.542 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 5], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 6] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Branch.Address (string) MaxLength(250), 8], [Property: Branch.BranchName (string) Required MaxLength(150), 9], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 10], [Property: Branch.Description (string), 11], [Property: Branch.Email (string) MaxLength(200), 12], [Property: Branch.ImageURL (string) MaxLength(300), 13], [Property: Branch.Phone (string) MaxLength(25), 14], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15] }
            4 -> 5
            5 -> 6
            6 -> 7
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            9 -> 16
            10 -> 26
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 00:39:54.546 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:54.546 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:39:54.547 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.548 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.550 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:54.550 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:39:54.552 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:54.553 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:39:54.576 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:39:54.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:54.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:54.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:54.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:54.667 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:54.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:54.673 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.674 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 96ms reading results.
2025-11-25 00:39:54.676 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.677 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:54.687 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:54.690 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:54.691 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:54.691 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:54.692 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:54.694 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:54.700 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 496.7443ms
2025-11-25 00:39:54.702 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:39:54.703 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:54.704 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.706 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:39:54.707 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 551.1312ms
2025-11-25 00:39:54.907 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:39:54.910 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:39:54.910 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-25 00:39:54.912 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:39:54.913 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:39:54.916 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-25 00:39:54.917 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:54.920 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:39:54.920 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-25 00:39:54.921 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:54.922 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:39:54.924 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:39:54.924 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:54.926 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:39:54.927 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:54.928 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:54.929 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:39:54.930 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:54.930 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:54.932 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:54.932 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:54.933 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:54.934 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:54.935 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:54.936 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:39:54.937 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:54.938 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:39:54.939 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:54.940 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:54.941 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 00:39:54.942 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:54.943 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:39:54.944 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:54.946 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:54.948 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:54.949 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:54.949 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:39:54.950 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:54.952 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:54.953 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:54.955 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:54.957 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:54.958 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:54.959 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:54.961 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:54.962 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:54.963 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:39:54.964 +02:00 [INF] Get All Branch called at "2025-11-25T00:39:54.9647304+02:00"
2025-11-25 00:39:54.966 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:54.968 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:39:54.968 +02:00 [INF] Fetching all branches
2025-11-25 00:39:54.969 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:54.970 +02:00 [INF] get all Specialization called at "2025-11-25T00:39:54.9705990+02:00"
2025-11-25 00:39:54.972 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:39:54.973 +02:00 [INF] Fetching all specializations in the system
2025-11-25 00:39:54.978 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:39:54.981 +02:00 [INF] get all doctor in system called at "2025-11-25T00:39:54.9811482+02:00"
2025-11-25 00:39:54.981 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:54.981 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:54.983 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:39:54.984 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:54.985 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:54.987 +02:00 [DBG] Created DbConnection. (2ms).
2025-11-25 00:39:54.987 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 00:39:54.988 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:54.988 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.989 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:54.992 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)'
2025-11-25 00:39:54.993 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.000 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 00:39:55.001 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:55.003 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-25 00:39:55.003 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:55.004 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 00:39:55.005 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-25 00:39:55.007 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-25 00:39:55.007 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.009 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:39:55.011 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:55.016 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:39:55.016 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-25 00:39:55.024 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.025 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-11-25 00:39:55.027 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.028 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:55.030 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.033 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.034 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:55.034 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.036 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.039 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 00:39:55.039 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 00:39:55.041 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.044 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.045 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 20ms reading results.
2025-11-25 00:39:55.046 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-25 00:39:55.047 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.050 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
            8 -> 38
            9 -> 39
            10 -> 40
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 51], [Property: Schedule.DoctorId (int) Required FK Index, 52], [Property: Schedule.EndTime (DateTime) Required, 53], [Property: Schedule.Shift (AppointmentShift) Required, 54], [Property: Schedule.StartTime (DateTime) Required, 55], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 56] }
            12 -> 49
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, s0.ScheduleId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN Schedules AS s0 ON d.DoctorId == s0.DoctorId
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 00:39:55.049 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:55.050 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-25 00:39:55.053 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:55.054 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:55.056 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:55.057 +02:00 [DBG] Created DbConnection. (3ms).
2025-11-25 00:39:55.057 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:55.060 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:55.061 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.062 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:55.062 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:55.064 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.064 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:55.065 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:55.066 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:55.067 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:55.068 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:55.069 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:39:55.071 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 114.2357ms
2025-11-25 00:39:55.072 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:55.074 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-25 00:39:55.075 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:55.077 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 113.6563ms
2025-11-25 00:39:55.078 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:39:55.079 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:55.081 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:39:55.084 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.087 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:55.088 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-11-25 00:39:55.090 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.092 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 185.0467ms
2025-11-25 00:39:55.093 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-11-25 00:39:55.098 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 187.5397ms
2025-11-25 00:39:55.104 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:39:55.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.109 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.113 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.116 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:39:55.142 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.143 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-25 00:39:55.145 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.146 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:55.160 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:55.162 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:55.163 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:55.164 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:55.165 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:55.166 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:55.185 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 212.7852ms
2025-11-25 00:39:55.187 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:39:55.188 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:55.189 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:55.191 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:39:55.192 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 279.7116ms
2025-11-25 00:39:57.038 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:39:57.041 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:39:57.043 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:39:57.045 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:57.046 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:57.046 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:57.047 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:57.048 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:57.049 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:57.050 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:39:57.052 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:57.053 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:57.054 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:57.056 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:57.057 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:57.058 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:57.061 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:57.063 +02:00 [INF] Get All Branch called at "2025-11-25T00:39:57.0630727+02:00"
2025-11-25 00:39:57.064 +02:00 [INF] Fetching all branches
2025-11-25 00:39:57.065 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:57.067 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:57.068 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:39:57.069 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:57.070 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:57.071 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:57.072 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:39:57.073 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:39:57.074 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:57.079 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:57.081 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:57.082 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:39:57.084 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:57.085 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:57.087 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:57.089 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:57.090 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:57.091 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:57.091 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:57.092 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:57.094 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 35.9183ms
2025-11-25 00:39:57.095 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:57.096 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:57.097 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:57.098 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:39:57.099 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 60.9002ms
2025-11-25 00:39:58.625 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:39:58.633 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:39:58.636 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:39:58.638 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:58.640 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:39:58.641 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:39:58.643 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:39:58.646 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:39:58.649 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:58.650 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:39:58.653 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:39:58.655 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:39:58.657 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:39:58.660 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:39:58.662 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:39:58.665 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:58.670 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:39:58.672 +02:00 [INF] Get All Branch called at "2025-11-25T00:39:58.6722286+02:00"
2025-11-25 00:39:58.675 +02:00 [INF] Fetching all branches
2025-11-25 00:39:58.677 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:39:58.679 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:39:58.680 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 00:39:58.682 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:58.683 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:58.685 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:39:58.687 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:39:58.689 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-25 00:39:58.691 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:58.699 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:39:58.702 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:58.703 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:39:58.706 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:58.707 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:39:58.709 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:39:58.712 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:39:58.713 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:39:58.714 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:39:58.715 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:39:58.716 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:39:58.718 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 53.2472ms
2025-11-25 00:39:58.720 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:39:58.722 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:39:58.724 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:39:58.725 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:39:58.727 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 102.5868ms
2025-11-25 00:39:58.758 +02:00 [DBG] Connection id "0HNHBL98NVIUA" received FIN.
2025-11-25 00:39:58.760 +02:00 [DBG] Connection id "0HNHBL98NVIUA" is closed. The last processed stream ID was 13.
2025-11-25 00:39:58.760 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUA completed.
2025-11-25 00:39:58.762 +02:00 [DBG] Connection id "0HNHBL98NVIUA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:39:58.766 +02:00 [DBG] Connection id "0HNHBL98NVIUA" stopped.
2025-11-25 00:40:00.623 +02:00 [DBG] Connection id "0HNHBL98NVIUB" accepted.
2025-11-25 00:40:00.624 +02:00 [DBG] Connection id "0HNHBL98NVIUB" started.
2025-11-25 00:40:00.628 +02:00 [DBG] Connection 0HNHBL98NVIUB established using the following protocol: "Tls13"
2025-11-25 00:40:00.630 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:40:00.633 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:40:00.635 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:40:00.636 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:40:00.637 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:40:00.638 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:40:00.639 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:40:00.639 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:40:00.640 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:40:00.641 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:40:00.642 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:40:00.643 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:40:00.644 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:40:00.645 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:40:00.647 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:40:00.648 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:40:00.649 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:40:00.652 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:40:00.653 +02:00 [INF] get all doctor in system called at "2025-11-25T00:40:00.6531124+02:00"
2025-11-25 00:40:00.653 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:40:00.654 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:40:00.656 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:40:00.657 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:40:00.658 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:40:00.659 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:40:00.659 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:40:00.660 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:40:00.661 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:40:00.662 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:40:00.672 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:40:00.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.675 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.677 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:40:00.681 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:40:00.682 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:40:00.683 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:40:00.684 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:40:00.685 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:40:00.687 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:40:00.687 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:40:00.688 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:40:00.688 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:40:00.689 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:40:00.690 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 41.3352ms
2025-11-25 00:40:00.691 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:40:00.692 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:40:00.693 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:40:00.694 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:40:00.695 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 64.9052ms
2025-11-25 00:40:03.759 +02:00 [DBG] Connection id "0HNHBL98NVIUB" received FIN.
2025-11-25 00:40:03.760 +02:00 [DBG] Connection id "0HNHBL98NVIUB" is closed. The last processed stream ID was 1.
2025-11-25 00:40:03.760 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUB completed.
2025-11-25 00:40:03.761 +02:00 [DBG] Connection id "0HNHBL98NVIUB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:40:03.763 +02:00 [DBG] Connection id "0HNHBL98NVIUB" stopped.
2025-11-25 00:41:06.010 +02:00 [DBG] Connection id "0HNHBL98NVIUC" accepted.
2025-11-25 00:41:06.017 +02:00 [DBG] Connection id "0HNHBL98NVIUC" started.
2025-11-25 00:41:06.023 +02:00 [DBG] Connection 0HNHBL98NVIUC established using the following protocol: "Tls13"
2025-11-25 00:41:06.029 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:41:06.036 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:41:06.037 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:06.039 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:06.040 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:06.041 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:06.041 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:06.042 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:06.043 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:06.044 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:06.045 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:41:06.046 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:06.047 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:06.049 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:06.050 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:06.052 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:06.053 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:06.066 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:06.067 +02:00 [INF] get all doctor in system called at "2025-11-25T00:41:06.0672365+02:00"
2025-11-25 00:41:06.068 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:41:06.069 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:06.070 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:06.071 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:06.072 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.073 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.074 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:06.075 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:06.076 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:41:06.077 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:06.090 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:06.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.093 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.095 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.097 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.101 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.102 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-25 00:41:06.103 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.104 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:41:06.106 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:06.108 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:06.108 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:06.109 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:06.110 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:06.111 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:06.112 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 59.1145ms
2025-11-25 00:41:06.113 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:06.114 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:06.114 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.115 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:41:06.116 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:41:06.117 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 87.6692ms
2025-11-25 00:41:06.119 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:41:06.122 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:41:06.123 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:06.124 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:06.125 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:06.125 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:06.126 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:06.127 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:06.131 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:41:06.133 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:06.134 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:06.135 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:06.137 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:06.138 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:06.139 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:41:06.141 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:41:06.143 +02:00 [INF] get all schedule called at "2025-11-25T00:41:06.1436462+02:00"
2025-11-25 00:41:06.146 +02:00 [INF] Fetching all schedules
2025-11-25 00:41:06.148 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:06.151 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)'
2025-11-25 00:41:06.153 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-25 00:41:06.155 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 00:41:06.164 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 2], [Property: Schedule.DoctorId (int) Required FK Index, 3], [Property: Schedule.EndTime (DateTime) Required, 4], [Property: Schedule.Shift (AppointmentShift) Required, 5], [Property: Schedule.StartTime (DateTime) Required, 6], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Doctor.Available (bool?), 9], [Property: Doctor.Biography (string), 10], [Property: Doctor.ConsultationFees (decimal) Required, 11], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Doctor.ExperienceYears (int?), 13], [Property: Doctor.ImageURL (string) MaxLength(300), 14], [Property: Doctor.SpecializationId (int) Required FK Index, 15], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 16], [Property: Doctor.UserId (string) Required FK Index, 17] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 18], [Property: User.AccessFailedCount (int) Required, 19], [Property: User.ConcurrencyStamp (string) Concurrency, 20], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.DateOfBirth (DateOnly?), 22], [Property: User.Email (string) Index MaxLength(256), 23], [Property: User.EmailConfirmed (bool) Required, 24], [Property: User.FullName (string) Required MaxLength(150), 25], [Property: User.Gender (GenderType?) MaxLength(10), 26], [Property: User.LockoutEnabled (bool) Required, 27], [Property: User.LockoutEnd (DateTimeOffset?), 28], [Property: User.NormalizedEmail (string) Index MaxLength(256), 29], [Property: User.NormalizedUserName (string) Index MaxLength(256), 30], [Property: User.PasswordHash (string), 31], [Property: User.PhoneNumber (string), 32], [Property: User.PhoneNumberConfirmed (bool) Required, 33], [Property: User.RefreshToken (string), 34], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 35], [Property: User.Role (string) Required MaxLength(50), 36], [Property: User.SecurityStamp (string), 37], [Property: User.TwoFactorEnabled (bool) Required, 38], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 39], [Property: User.UserName (string) MaxLength(256), 40] }
        SELECT s.ScheduleId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 00:41:06.166 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:06.167 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:06.168 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.169 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.170 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:06.171 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:06.172 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:41:06.173 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:41:06.179 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:41:06.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.182 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.185 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:06.187 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.188 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-25 00:41:06.189 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.190 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:41:06.196 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:06.198 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:06.199 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:06.199 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:06.200 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:06.201 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:06.207 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 68.2688ms
2025-11-25 00:41:06.208 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:06.209 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:06.210 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:06.211 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:41:06.212 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 96.6826ms
2025-11-25 00:41:08.774 +02:00 [DBG] Connection id "0HNHBL98NVIUC" received FIN.
2025-11-25 00:41:08.775 +02:00 [DBG] Connection id "0HNHBL98NVIUC" is closed. The last processed stream ID was 3.
2025-11-25 00:41:08.775 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUC completed.
2025-11-25 00:41:08.777 +02:00 [DBG] Connection id "0HNHBL98NVIUC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:41:08.779 +02:00 [DBG] Connection id "0HNHBL98NVIUC" stopped.
2025-11-25 00:41:21.389 +02:00 [DBG] Connection id "0HNHBL98NVIUD" accepted.
2025-11-25 00:41:21.390 +02:00 [DBG] Connection id "0HNHBL98NVIUD" started.
2025-11-25 00:41:21.394 +02:00 [DBG] Connection 0HNHBL98NVIUD established using the following protocol: "Tls13"
2025-11-25 00:41:21.396 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:41:21.398 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:41:21.399 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:21.401 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:21.402 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:21.403 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:21.404 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:21.405 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:21.405 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:21.406 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:21.407 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:41:21.409 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:21.410 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:21.411 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:21.413 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:21.414 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:21.415 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:21.416 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:21.418 +02:00 [INF] get all doctor in system called at "2025-11-25T00:41:21.4180078+02:00"
2025-11-25 00:41:21.418 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:41:21.420 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:21.422 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:21.423 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:21.423 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:21.425 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:21.426 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:21.427 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:21.428 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:41:21.429 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:21.441 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:21.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.444 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.446 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.448 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:21.451 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:21.452 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:41:21.453 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:21.454 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:41:21.456 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:21.458 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:21.458 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:21.459 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:21.459 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:21.461 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:21.462 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 46.6146ms
2025-11-25 00:41:21.463 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:21.463 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:21.464 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:21.465 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:41:21.466 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 70.7133ms
2025-11-25 00:41:22.265 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:41:22.268 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:41:22.269 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:22.270 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:22.271 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:22.272 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:22.273 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:22.274 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:22.275 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:22.276 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:22.277 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:41:22.279 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:22.280 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:22.281 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:22.282 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:22.283 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:22.285 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:22.286 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:22.288 +02:00 [INF] get all doctor in system called at "2025-11-25T00:41:22.2879731+02:00"
2025-11-25 00:41:22.288 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:41:22.289 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:22.292 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:22.293 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:22.294 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.295 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.296 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:22.297 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:22.298 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:41:22.299 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:22.313 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:22.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.317 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.319 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.325 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.327 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-25 00:41:22.328 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.329 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:41:22.331 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:22.332 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:22.333 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:22.334 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:22.334 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:22.336 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:22.337 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 52.2544ms
2025-11-25 00:41:22.338 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:22.339 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:22.340 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.341 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:41:22.342 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:41:22.343 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 77.865ms
2025-11-25 00:41:22.344 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:41:22.348 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:41:22.349 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:22.350 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:22.350 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:22.351 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:22.352 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:22.353 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:22.355 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:41:22.356 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:22.358 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:22.359 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:22.360 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:22.362 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:22.363 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:41:22.364 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:41:22.365 +02:00 [INF] get all schedule called at "2025-11-25T00:41:22.3658589+02:00"
2025-11-25 00:41:22.366 +02:00 [INF] Fetching all schedules
2025-11-25 00:41:22.367 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:22.369 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:22.370 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:22.371 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.372 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.373 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:22.374 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:22.375 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:41:22.376 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:41:22.380 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:41:22.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.384 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.385 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.386 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.387 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:22.388 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.389 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-25 00:41:22.391 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.392 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:41:22.393 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:22.395 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:22.395 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:22.396 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:22.397 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:22.398 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:22.399 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 36.2957ms
2025-11-25 00:41:22.400 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:22.401 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:22.405 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:22.406 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:41:22.407 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 65.8389ms
2025-11-25 00:41:23.776 +02:00 [DBG] Connection id "0HNHBL98NVIUD" received FIN.
2025-11-25 00:41:23.777 +02:00 [DBG] Connection id "0HNHBL98NVIUD" is closed. The last processed stream ID was 5.
2025-11-25 00:41:23.777 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUD completed.
2025-11-25 00:41:23.778 +02:00 [DBG] Connection id "0HNHBL98NVIUD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:41:23.781 +02:00 [DBG] Connection id "0HNHBL98NVIUD" stopped.
2025-11-25 00:41:24.610 +02:00 [DBG] Connection id "0HNHBL98NVIUE" accepted.
2025-11-25 00:41:24.611 +02:00 [DBG] Connection id "0HNHBL98NVIUE" started.
2025-11-25 00:41:24.615 +02:00 [DBG] Connection 0HNHBL98NVIUE established using the following protocol: "Tls13"
2025-11-25 00:41:24.618 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:41:24.621 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:41:24.622 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:24.623 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:24.625 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:24.626 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:24.627 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:24.628 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:24.629 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:24.629 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:24.630 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:41:24.632 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:24.633 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:24.634 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:24.635 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:24.636 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:24.638 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:24.639 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:24.640 +02:00 [INF] get all doctor in system called at "2025-11-25T00:41:24.6403728+02:00"
2025-11-25 00:41:24.641 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:41:24.642 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:24.644 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:24.645 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:24.646 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:24.647 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:24.648 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:24.649 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:24.650 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:41:24.652 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:24.665 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:24.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.668 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.670 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:24.676 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:24.676 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-25 00:41:24.677 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:24.678 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:41:24.680 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:24.681 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:24.682 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:24.682 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:24.683 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:24.684 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:24.685 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 47.7047ms
2025-11-25 00:41:24.686 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:24.687 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:24.688 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:24.689 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:41:24.690 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 72.8863ms
2025-11-25 00:41:28.777 +02:00 [DBG] Connection id "0HNHBL98NVIUE" received FIN.
2025-11-25 00:41:28.778 +02:00 [DBG] Connection id "0HNHBL98NVIUE" is closed. The last processed stream ID was 1.
2025-11-25 00:41:28.778 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUE completed.
2025-11-25 00:41:28.779 +02:00 [DBG] Connection id "0HNHBL98NVIUE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:41:28.781 +02:00 [DBG] Connection id "0HNHBL98NVIUE" stopped.
2025-11-25 00:41:37.175 +02:00 [DBG] Connection id "0HNHBL98NVIUF" accepted.
2025-11-25 00:41:37.176 +02:00 [DBG] Connection id "0HNHBL98NVIUF" started.
2025-11-25 00:41:37.181 +02:00 [DBG] Connection 0HNHBL98NVIUF established using the following protocol: "Tls13"
2025-11-25 00:41:37.184 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:41:37.187 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:41:37.188 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:37.191 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:41:37.192 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:37.194 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:37.195 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:37.196 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:37.197 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:37.198 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:37.199 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:41:37.200 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:37.202 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:37.204 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:37.206 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:37.207 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:37.209 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:37.210 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:41:37.211 +02:00 [INF] get all doctor in system called at "2025-11-25T00:41:37.2119111+02:00"
2025-11-25 00:41:37.212 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:41:37.214 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:37.216 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:37.217 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:37.218 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.220 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.221 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:37.222 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:41:37.224 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:41:37.225 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:37.240 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:41:37.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.244 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.246 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.251 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.252 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.254 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-25 00:41:37.255 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.256 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:41:37.257 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:37.259 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:37.260 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:37.260 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:37.261 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:37.262 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:37.264 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 55.2826ms
2025-11-25 00:41:37.265 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:41:37.266 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:37.267 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.269 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:41:37.270 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:41:37.270 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 86.4552ms
2025-11-25 00:41:37.272 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:41:37.276 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:41:37.277 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:37.278 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:41:37.278 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:41:37.279 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:41:37.280 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:41:37.281 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:37.282 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:41:37.283 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:41:37.285 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:41:37.286 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:41:37.288 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:41:37.290 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:41:37.291 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:41:37.294 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:41:37.296 +02:00 [INF] get all schedule called at "2025-11-25T00:41:37.2964805+02:00"
2025-11-25 00:41:37.297 +02:00 [INF] Fetching all schedules
2025-11-25 00:41:37.298 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:41:37.300 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:41:37.301 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:41:37.302 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.303 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.304 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:41:37.305 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:41:37.306 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:41:37.307 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:41:37.312 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:41:37.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.316 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.318 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:41:37.321 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.322 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-25 00:41:37.323 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.324 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:41:37.326 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:41:37.328 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:41:37.329 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:41:37.329 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:41:37.330 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:41:37.331 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:41:37.333 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 41.7262ms
2025-11-25 00:41:37.334 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:41:37.335 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:41:37.336 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:41:37.337 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:41:37.338 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 69.217ms
2025-11-25 00:41:38.778 +02:00 [DBG] Connection id "0HNHBL98NVIUF" received FIN.
2025-11-25 00:41:38.779 +02:00 [DBG] Connection id "0HNHBL98NVIUF" is closed. The last processed stream ID was 3.
2025-11-25 00:41:38.779 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUF completed.
2025-11-25 00:41:38.780 +02:00 [DBG] Connection id "0HNHBL98NVIUF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:41:38.782 +02:00 [DBG] Connection id "0HNHBL98NVIUF" stopped.
2025-11-25 00:50:44.880 +02:00 [DBG] Connection id "0HNHBL98NVIUG" accepted.
2025-11-25 00:50:44.886 +02:00 [DBG] Connection id "0HNHBL98NVIUG" started.
2025-11-25 00:50:44.890 +02:00 [DBG] Connection 0HNHBL98NVIUG established using the following protocol: "Tls13"
2025-11-25 00:50:44.898 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:50:44.905 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:50:44.906 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:50:44.907 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:50:44.909 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:50:44.910 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:50:44.911 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:50:44.912 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:50:44.912 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:50:44.913 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:50:44.914 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:50:44.916 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:50:44.917 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:50:44.918 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:50:44.920 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:50:44.921 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:50:44.922 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:50:44.924 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:50:44.925 +02:00 [INF] get all doctor in system called at "2025-11-25T00:50:44.9253346+02:00"
2025-11-25 00:50:44.926 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:50:44.927 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:50:44.929 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:50:44.929 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:50:44.930 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:44.974 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:44.976 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:50:44.977 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:50:44.978 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:50:44.979 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:50:44.998 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:50:45.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.001 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.003 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.004 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.007 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.008 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.009 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.010 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-25 00:50:45.012 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.013 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:50:45.015 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:50:45.017 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:50:45.017 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:50:45.018 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:50:45.018 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:50:45.019 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:50:45.021 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 98.4592ms
2025-11-25 00:50:45.022 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:50:45.023 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:50:45.024 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.025 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:50:45.026 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:50:45.026 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 128.9943ms
2025-11-25 00:50:45.028 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:50:45.032 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:50:45.033 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:50:45.034 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:50:45.035 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:50:45.035 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:50:45.036 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:50:45.037 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:50:45.038 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:50:45.039 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:50:45.041 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:50:45.042 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:50:45.043 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:50:45.045 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:50:45.046 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:50:45.047 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:50:45.049 +02:00 [INF] get all schedule called at "2025-11-25T00:50:45.0490298+02:00"
2025-11-25 00:50:45.050 +02:00 [INF] Fetching all schedules
2025-11-25 00:50:45.051 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:50:45.052 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:50:45.053 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:50:45.054 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.055 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.056 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:50:45.057 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:50:45.058 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:50:45.059 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:50:45.064 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:50:45.065 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.067 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.069 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:50:45.071 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.072 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-25 00:50:45.073 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.074 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:50:45.075 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:50:45.077 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:50:45.077 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:50:45.078 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:50:45.078 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:50:45.079 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:50:45.080 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 34.3729ms
2025-11-25 00:50:45.081 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:50:45.082 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:50:45.083 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:50:45.084 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:50:45.085 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 59.7454ms
2025-11-25 00:50:53.887 +02:00 [DBG] Connection id "0HNHBL98NVIUG" received FIN.
2025-11-25 00:50:53.888 +02:00 [DBG] Connection id "0HNHBL98NVIUG" is closed. The last processed stream ID was 3.
2025-11-25 00:50:53.888 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUG completed.
2025-11-25 00:50:53.889 +02:00 [DBG] Connection id "0HNHBL98NVIUG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:50:53.893 +02:00 [DBG] Connection id "0HNHBL98NVIUG" stopped.
2025-11-25 00:51:15.913 +02:00 [DBG] Connection id "0HNHBL98NVIUH" accepted.
2025-11-25 00:51:15.920 +02:00 [DBG] Connection id "0HNHBL98NVIUH" started.
2025-11-25 00:51:15.923 +02:00 [DBG] Connection 0HNHBL98NVIUH established using the following protocol: "Tls13"
2025-11-25 00:51:15.930 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:51:15.937 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:51:15.938 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:15.939 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:15.941 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:15.941 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:15.942 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:15.943 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:15.943 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:15.944 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:15.945 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:51:15.947 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:15.948 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:15.949 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:15.950 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:15.951 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:15.952 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:15.954 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:15.955 +02:00 [INF] get all doctor in system called at "2025-11-25T00:51:15.9550650+02:00"
2025-11-25 00:51:15.955 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:51:15.956 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:15.958 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:15.959 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:15.959 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:15.960 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:15.962 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:15.962 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:15.964 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:51:15.965 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:15.976 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:15.978 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.979 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.981 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.983 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.983 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.984 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:15.985 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:15.986 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:51:15.987 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:15.988 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:51:15.989 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:15.991 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:15.991 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:15.992 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:15.992 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:15.993 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:15.994 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 42.1418ms
2025-11-25 00:51:15.995 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:15.996 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:15.997 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:15.998 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:51:15.999 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:51:16.000 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 70.2074ms
2025-11-25 00:51:16.002 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:51:16.005 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:51:16.006 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:16.007 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:16.008 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:16.009 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:16.009 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:16.010 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:16.011 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:51:16.012 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:16.014 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:16.015 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:16.016 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:16.018 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:16.019 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:51:16.020 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:51:16.021 +02:00 [INF] get all schedule called at "2025-11-25T00:51:16.0216943+02:00"
2025-11-25 00:51:16.022 +02:00 [INF] Fetching all schedules
2025-11-25 00:51:16.024 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:16.025 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:16.026 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:16.027 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:16.028 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:16.029 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:16.030 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:16.031 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:51:16.032 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:51:16.037 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:51:16.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:16.039 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:16.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:16.042 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:16.043 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:16.044 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:16.045 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-25 00:51:16.046 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:16.047 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:51:16.048 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:16.050 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:16.050 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:16.051 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:16.051 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:16.052 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:16.053 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 34.5132ms
2025-11-25 00:51:16.054 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:16.055 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:16.056 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:16.057 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:51:16.058 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 59.388ms
2025-11-25 00:51:18.892 +02:00 [DBG] Connection id "0HNHBL98NVIUH" received FIN.
2025-11-25 00:51:18.893 +02:00 [DBG] Connection id "0HNHBL98NVIUH" is closed. The last processed stream ID was 3.
2025-11-25 00:51:18.893 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUH completed.
2025-11-25 00:51:18.894 +02:00 [DBG] Connection id "0HNHBL98NVIUH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:51:18.899 +02:00 [DBG] Connection id "0HNHBL98NVIUH" stopped.
2025-11-25 00:51:58.256 +02:00 [DBG] Connection id "0HNHBL98NVIUI" accepted.
2025-11-25 00:51:58.261 +02:00 [DBG] Connection id "0HNHBL98NVIUI" started.
2025-11-25 00:51:58.266 +02:00 [DBG] Connection 0HNHBL98NVIUI established using the following protocol: "Tls13"
2025-11-25 00:51:58.273 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:51:58.279 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:51:58.280 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:58.281 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:58.283 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:58.284 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:58.284 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:58.285 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:58.286 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:58.287 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:58.287 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:51:58.289 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:58.290 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:58.291 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:58.293 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:58.294 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:58.295 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:58.296 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:58.297 +02:00 [INF] get all doctor in system called at "2025-11-25T00:51:58.2976594+02:00"
2025-11-25 00:51:58.298 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:51:58.299 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:58.301 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:58.302 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:58.303 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.304 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.305 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:58.306 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:51:58.307 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:51:58.308 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:58.320 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:58.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.323 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.325 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.329 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.330 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:51:58.331 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.332 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:51:58.333 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:58.335 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:58.335 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:58.336 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:58.336 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:58.337 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:58.338 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 43.0919ms
2025-11-25 00:51:58.339 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:58.340 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:58.341 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.342 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:51:58.342 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:51:58.343 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 70.4542ms
2025-11-25 00:51:58.344 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:51:58.347 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:51:58.348 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:58.349 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:58.349 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:58.350 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:58.351 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:58.351 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:58.352 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:51:58.353 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:58.354 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:58.355 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:58.356 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:58.357 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:58.358 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:51:58.359 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:51:58.360 +02:00 [INF] get all schedule called at "2025-11-25T00:51:58.3602716+02:00"
2025-11-25 00:51:58.360 +02:00 [INF] Fetching all schedules
2025-11-25 00:51:58.361 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:58.363 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:58.363 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:58.364 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.365 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.366 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:58.366 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:58.367 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:51:58.368 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:51:58.372 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:51:58.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.375 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.376 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.377 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.379 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.380 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-25 00:51:58.381 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.382 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:51:58.383 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:58.385 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:58.386 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:58.386 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:58.387 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:58.387 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:58.389 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 30.9344ms
2025-11-25 00:51:58.390 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:58.391 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:58.391 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.392 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:51:58.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 50.9627ms
2025-11-25 00:51:58.703 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:51:58.705 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:51:58.706 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:58.707 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:58.709 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:58.710 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:58.710 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:58.711 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:58.712 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:58.713 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:58.714 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:51:58.715 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:58.716 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:58.717 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:58.718 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:58.719 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:58.720 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:58.722 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:58.723 +02:00 [INF] get all doctor in system called at "2025-11-25T00:51:58.7233592+02:00"
2025-11-25 00:51:58.724 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:51:58.725 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:58.726 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:58.727 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:58.727 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.728 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.729 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:58.730 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:58.731 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:51:58.732 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:58.735 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:58.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.739 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.741 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.743 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:58.745 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.746 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:51:58.747 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.748 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:51:58.749 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:58.751 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:58.751 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:58.752 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:58.752 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:58.753 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:58.754 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 33.7326ms
2025-11-25 00:51:58.755 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:58.756 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:58.757 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:58.758 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:51:58.759 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 56.6853ms
2025-11-25 00:51:58.898 +02:00 [DBG] Connection id "0HNHBL98NVIUI" received FIN.
2025-11-25 00:51:58.899 +02:00 [DBG] Connection id "0HNHBL98NVIUI" is closed. The last processed stream ID was 5.
2025-11-25 00:51:58.899 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUI completed.
2025-11-25 00:51:58.900 +02:00 [DBG] Connection id "0HNHBL98NVIUI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:51:58.903 +02:00 [DBG] Connection id "0HNHBL98NVIUI" stopped.
2025-11-25 00:51:59.179 +02:00 [DBG] Connection id "0HNHBL98NVIUJ" accepted.
2025-11-25 00:51:59.180 +02:00 [DBG] Connection id "0HNHBL98NVIUJ" started.
2025-11-25 00:51:59.184 +02:00 [DBG] Connection 0HNHBL98NVIUJ established using the following protocol: "Tls13"
2025-11-25 00:51:59.186 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:51:59.196 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:51:59.197 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:59.198 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:59.199 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:59.200 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:59.200 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:59.201 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:59.202 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:59.203 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:59.204 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:51:59.205 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:59.206 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:59.207 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:59.209 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:59.210 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:59.211 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:59.213 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:59.214 +02:00 [INF] get all doctor in system called at "2025-11-25T00:51:59.2142401+02:00"
2025-11-25 00:51:59.214 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:51:59.216 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:59.218 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:59.218 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:59.219 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.220 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.221 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:59.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:59.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:51:59.224 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:59.236 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:59.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.239 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.241 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.243 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.246 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.247 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-25 00:51:59.248 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.249 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:51:59.251 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:59.252 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:59.253 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:59.254 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:59.254 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:59.255 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:59.257 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 45.5563ms
2025-11-25 00:51:59.258 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:59.259 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:59.260 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.261 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:51:59.261 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:51:59.262 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 76.6947ms
2025-11-25 00:51:59.265 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:51:59.268 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:51:59.269 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:59.270 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:59.271 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:59.271 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:59.272 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:59.273 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:59.274 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:51:59.275 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:59.276 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:59.278 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:59.279 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:59.280 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:59.281 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:51:59.283 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:51:59.284 +02:00 [INF] get all schedule called at "2025-11-25T00:51:59.2841465+02:00"
2025-11-25 00:51:59.284 +02:00 [INF] Fetching all schedules
2025-11-25 00:51:59.286 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:59.287 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:59.288 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:59.289 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.290 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.291 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:59.292 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:59.293 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:51:59.294 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:51:59.303 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:51:59.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.306 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.309 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.311 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.312 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-25 00:51:59.313 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.314 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:51:59.316 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:59.318 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:59.318 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:59.319 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:59.320 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:59.321 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:59.322 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 40.5597ms
2025-11-25 00:51:59.324 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:51:59.325 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:59.326 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.327 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:51:59.329 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 67.2652ms
2025-11-25 00:51:59.527 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:51:59.530 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:51:59.530 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:59.532 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:51:59.534 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:59.535 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:51:59.536 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:51:59.537 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:51:59.537 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:51:59.538 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:59.539 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:51:59.541 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:51:59.542 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:51:59.543 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:51:59.544 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:51:59.545 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:51:59.546 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:59.547 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:51:59.548 +02:00 [INF] get all doctor in system called at "2025-11-25T00:51:59.5487668+02:00"
2025-11-25 00:51:59.549 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:51:59.550 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:51:59.552 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:51:59.553 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:51:59.553 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.554 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.555 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:51:59.556 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:51:59.557 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:51:59.558 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:59.569 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:51:59.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.572 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.574 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:51:59.578 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.579 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:51:59.581 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.582 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:51:59.583 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:51:59.585 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:51:59.586 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:51:59.586 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:51:59.587 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:51:59.588 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:51:59.589 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 42.9559ms
2025-11-25 00:51:59.591 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:51:59.592 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:51:59.593 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:51:59.594 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:51:59.595 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 67.8688ms
2025-11-25 00:52:00.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:52:00.049 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:52:00.051 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:52:00.052 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:52:00.053 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:00.053 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:00.054 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:00.055 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:00.055 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:00.056 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:00.057 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:52:00.058 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:00.059 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:00.060 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:00.061 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:00.062 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:00.063 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:52:00.064 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:52:00.065 +02:00 [INF] get all doctor in system called at "2025-11-25T00:52:00.0656462+02:00"
2025-11-25 00:52:00.066 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:52:00.067 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:00.068 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:00.068 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:52:00.069 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.070 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.071 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:00.072 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:52:00.073 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:52:00.073 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:52:00.085 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:52:00.086 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.087 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.088 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.089 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.090 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.095 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.095 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-25 00:52:00.096 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.097 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:52:00.098 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:00.100 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:00.100 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:00.101 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:00.101 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:00.102 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:00.104 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 40.5778ms
2025-11-25 00:52:00.104 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:00.105 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:00.106 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.107 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:52:00.108 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule - null null
2025-11-25 00:52:00.108 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 62.2688ms
2025-11-25 00:52:00.110 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 00:52:00.113 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 00:52:00.114 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:52:00.115 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:00.116 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:00.116 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:00.117 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:00.117 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:52:00.118 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 00:52:00.120 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:00.120 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:00.121 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:00.123 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:00.123 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:00.125 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:52:00.126 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 00:52:00.127 +02:00 [INF] get all schedule called at "2025-11-25T00:52:00.1270273+02:00"
2025-11-25 00:52:00.127 +02:00 [INF] Fetching all schedules
2025-11-25 00:52:00.128 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:00.129 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:00.130 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:52:00.130 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.131 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.132 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:00.133 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:52:00.134 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:52:00.135 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:52:00.140 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 00:52:00.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.143 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.143 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.144 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.146 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.147 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-25 00:52:00.148 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.149 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:52:00.150 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:00.152 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:00.152 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:00.153 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:00.153 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:00.154 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:00.155 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 30.3416ms
2025-11-25 00:52:00.156 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 00:52:00.157 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:00.158 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.159 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:52:00.160 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 52.2532ms
2025-11-25 00:52:00.429 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:52:00.431 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:52:00.433 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:52:00.434 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:52:00.435 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:00.436 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:00.437 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:00.438 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:00.438 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:00.439 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:00.440 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:52:00.441 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:00.442 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:00.443 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:00.444 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:00.445 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:00.446 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:52:00.447 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:52:00.448 +02:00 [INF] get all doctor in system called at "2025-11-25T00:52:00.4485728+02:00"
2025-11-25 00:52:00.449 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:52:00.450 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:00.451 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:00.452 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:52:00.452 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.453 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.454 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:00.455 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:52:00.456 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:52:00.457 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:52:00.469 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:52:00.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.472 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.474 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:00.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 00:52:00.481 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.482 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 00:52:00.483 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:00.484 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:00.485 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:00.485 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:00.486 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:00.487 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:00.488 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 41.509ms
2025-11-25 00:52:00.489 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:00.489 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:00.490 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.491 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:52:00.492 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 63.1026ms
2025-11-25 00:52:00.820 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:52:00.823 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:52:00.824 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:52:00.825 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:00.826 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:00.827 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:00.828 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:00.828 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:00.830 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:00.831 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:52:00.832 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:00.834 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:00.835 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:00.837 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:00.838 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:00.839 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:00.840 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:00.842 +02:00 [INF] Get All Branch called at "2025-11-25T00:52:00.8422247+02:00"
2025-11-25 00:52:00.843 +02:00 [INF] Fetching all branches
2025-11-25 00:52:00.844 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:00.846 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:00.847 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:52:00.848 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.849 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.850 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:00.851 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 00:52:00.852 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:52:00.854 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:00.858 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:00.860 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.861 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:52:00.863 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.864 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:52:00.865 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:00.868 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:00.869 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:00.869 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:00.870 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:00.871 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:00.872 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 33.073ms
2025-11-25 00:52:00.873 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:00.874 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:00.876 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:00.877 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:52:00.878 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 58.569ms
2025-11-25 00:52:01.143 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:52:01.145 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:52:01.146 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:52:01.147 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:01.149 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:01.149 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:01.150 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:01.151 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:01.152 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:01.153 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:52:01.155 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:01.158 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:01.159 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:01.160 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:01.162 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:01.163 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:01.165 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:01.166 +02:00 [INF] Get All Branch called at "2025-11-25T00:52:01.1665923+02:00"
2025-11-25 00:52:01.167 +02:00 [INF] Fetching all branches
2025-11-25 00:52:01.168 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:01.170 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:01.171 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 00:52:01.172 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.173 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.175 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:01.176 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:52:01.177 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:52:01.178 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:01.184 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:01.185 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.187 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:52:01.188 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.189 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:52:01.191 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:01.193 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:01.194 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:01.194 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:01.195 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:01.196 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:01.197 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 33.936ms
2025-11-25 00:52:01.199 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:01.199 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:01.200 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.202 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:52:01.203 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 60.1986ms
2025-11-25 00:52:01.769 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:52:01.769 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-25 00:52:01.769 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 00:52:01.771 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:52:01.774 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-25 00:52:01.776 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 00:52:01.776 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:52:01.777 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-25 00:52:01.778 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 00:52:01.780 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:01.781 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:52:01.782 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 00:52:01.782 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:01.783 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:01.784 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:01.785 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:01.785 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:01.786 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:01.788 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:01.787 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:01.787 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:01.789 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:01.789 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:01.790 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:01.790 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:01.791 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:52:01.793 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:01.793 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:01.794 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 00:52:01.795 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:52:01.796 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 00:52:01.797 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:01.798 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:01.800 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:01.801 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:01.802 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:01.802 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:01.803 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:01.804 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:01.805 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:01.806 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:01.808 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:01.809 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:01.810 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:01.811 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:01.813 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:01.814 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:52:01.815 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:01.816 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:52:01.818 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:01.818 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:52:01.819 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 00:52:01.820 +02:00 [INF] Get All Branch called at "2025-11-25T00:52:01.8205118+02:00"
2025-11-25 00:52:01.821 +02:00 [INF] get all Specialization called at "2025-11-25T00:52:01.8214034+02:00"
2025-11-25 00:52:01.822 +02:00 [INF] get all doctor in system called at "2025-11-25T00:52:01.8224020+02:00"
2025-11-25 00:52:01.824 +02:00 [INF] Fetching all doctors in the system
2025-11-25 00:52:01.823 +02:00 [INF] Fetching all specializations in the system
2025-11-25 00:52:01.822 +02:00 [INF] Fetching all branches
2025-11-25 00:52:01.825 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:01.825 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:01.826 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:01.827 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:01.829 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:01.830 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:01.830 +02:00 [DBG] Created DbConnection. (3ms).
2025-11-25 00:52:01.831 +02:00 [DBG] Created DbConnection. (2ms).
2025-11-25 00:52:01.831 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 00:52:01.832 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.833 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.834 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.835 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.847 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:01.851 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-25 00:52:01.852 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-25 00:52:01.853 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.854 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:52:01.855 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:01.857 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.859 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-25 00:52:01.862 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:01.863 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-11-25 00:52:01.864 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:52:01.865 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:52:01.866 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-25 00:52:01.868 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:01.877 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:01.879 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 00:52:01.879 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.880 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:52:01.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.882 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 00:52:01.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.885 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.886 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.888 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-25 00:52:01.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.890 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.891 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:01.892 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.895 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:01.896 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.897 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:01.898 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.899 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.899 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:01.900 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:01.902 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:01.903 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-11-25 00:52:01.904 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.905 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:01.906 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.907 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 25ms reading results.
2025-11-25 00:52:01.908 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 92.9673ms
2025-11-25 00:52:01.908 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-25 00:52:01.910 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.911 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:01.913 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:01.914 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-25 00:52:01.915 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:01.917 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:01.918 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:01.919 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.919 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:01.921 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:01.922 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-11-25 00:52:01.923 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:01.923 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:01.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 155.8948ms
2025-11-25 00:52:01.925 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:01.925 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:01.929 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:01.929 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:01.930 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 116.872ms
2025-11-25 00:52:01.931 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:01.932 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:52:01.933 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 117.4227ms
2025-11-25 00:52:01.934 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:01.935 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 00:52:01.936 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.937 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:01.938 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:52:01.938 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:01.939 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 170.5779ms
2025-11-25 00:52:01.940 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 00:52:01.944 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 175.1424ms
2025-11-25 00:52:02.082 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 00:52:02.082 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-25 00:52:02.085 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 00:52:02.087 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-25 00:52:02.088 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 00:52:02.090 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-25 00:52:02.092 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:02.094 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:52:02.095 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:02.096 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 00:52:02.097 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:02.098 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-25 00:52:02.099 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:02.101 +02:00 [INF] CORS policy execution successful.
2025-11-25 00:52:02.102 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:02.103 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 00:52:02.104 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:02.105 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:52:02.106 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 00:52:02.107 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 00:52:02.109 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:02.111 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 00:52:02.113 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:02.114 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 00:52:02.116 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:02.117 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 00:52:02.119 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:02.121 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 00:52:02.123 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:02.124 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 00:52:02.126 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:02.127 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:52:02.129 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 00:52:02.130 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 00:52:02.131 +02:00 [INF] Get All Branch called at "2025-11-25T00:52:02.1314940+02:00"
2025-11-25 00:52:02.133 +02:00 [INF] get all Specialization called at "2025-11-25T00:52:02.1330453+02:00"
2025-11-25 00:52:02.134 +02:00 [INF] Fetching all branches
2025-11-25 00:52:02.134 +02:00 [INF] Fetching all specializations in the system
2025-11-25 00:52:02.136 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:02.136 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 00:52:02.138 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:02.139 +02:00 [DBG] Creating DbConnection.
2025-11-25 00:52:02.140 +02:00 [DBG] Created DbConnection. (2ms).
2025-11-25 00:52:02.140 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 00:52:02.141 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.142 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.143 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.144 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.146 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:02.147 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 00:52:02.148 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-25 00:52:02.149 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 00:52:02.150 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-25 00:52:02.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-25 00:52:02.152 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:02.153 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:52:02.158 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 00:52:02.162 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.163 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 00:52:02.164 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.165 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:52:02.167 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:02.169 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:02.169 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:02.170 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:02.171 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:02.172 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:02.173 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 00:52:02.173 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 47.3226ms
2025-11-25 00:52:02.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:02.176 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 00:52:02.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:02.178 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:02.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:02.180 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:02.182 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-25 00:52:02.183 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:02.185 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 103.0774ms
2025-11-25 00:52:02.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 00:52:02.189 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.190 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-25 00:52:02.192 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.193 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 00:52:02.194 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 00:52:02.196 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 00:52:02.197 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 00:52:02.197 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 00:52:02.198 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 00:52:02.199 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 00:52:02.200 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 72.8865ms
2025-11-25 00:52:02.201 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 00:52:02.202 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 00:52:02.203 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 00:52:02.204 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 00:52:02.205 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 123.6252ms
2025-11-25 00:52:03.898 +02:00 [DBG] Connection id "0HNHBL98NVIUJ" received FIN.
2025-11-25 00:52:03.900 +02:00 [DBG] Connection id "0HNHBL98NVIUJ" is closed. The last processed stream ID was 25.
2025-11-25 00:52:03.900 +02:00 [DBG] The connection queue processing loop for 0HNHBL98NVIUJ completed.
2025-11-25 00:52:03.901 +02:00 [DBG] Connection id "0HNHBL98NVIUJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 00:52:03.903 +02:00 [DBG] Connection id "0HNHBL98NVIUJ" stopped.
2025-11-25 01:09:11.185 +02:00 [DBG] Connection id "0HNHBL98NVIUK" accepted.
2025-11-25 01:09:11.185 +02:00 [DBG] Connection id "0HNHBL98NVIUK" received FIN.
2025-11-25 01:09:11.192 +02:00 [DBG] Connection id "0HNHBL98NVIUK" started.
2025-11-25 01:09:11.193 +02:00 [DBG] Connection id "0HNHBL98NVIUL" accepted.
2025-11-25 01:09:11.200 +02:00 [DBG] Connection id "0HNHBL98NVIUL" started.
2025-11-25 01:09:11.200 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 01:09:11.203 +02:00 [DBG] Connection id "0HNHBL98NVIUK" stopped.
2025-11-25 01:09:11.205 +02:00 [DBG] Connection id "0HNHBL98NVIUK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 01:09:11.205 +02:00 [DBG] Connection 0HNHBL98NVIUL established using the following protocol: "Tls13"
2025-11-25 01:09:11.218 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-25 01:09:11.221 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-25 01:09:11.222 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-25 01:09:11.224 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 01:09:11.225 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 01:09:11.226 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 01:09:11.227 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 01:09:11.231 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 01:09:11.233 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 01:09:11.234 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 01:09:11.236 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 01:09:11.237 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 01:09:11.238 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 01:09:11.240 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 01:09:11.242 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 01:09:11.244 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 01:09:11.246 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-25 01:09:11.247 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 01:09:11.251 +02:00 [DBG] Connection id "0HNHBL98NVIUL", Request id "0HNHBL98NVIUL:00000001": started reading request body.
2025-11-25 01:09:11.252 +02:00 [DBG] Connection id "0HNHBL98NVIUL", Request id "0HNHBL98NVIUL:00000001": done reading request body.
2025-11-25 01:09:11.258 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-25 01:09:11.259 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 01:09:11.260 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 01:09:11.262 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 01:09:11.266 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 01:09:11.268 +02:00 [INF] create event  called at "2025-11-25T01:09:11.2685458+02:00"
2025-11-25 01:09:11.271 +02:00 [INF] Adding new event: event 2 for Branch ID: 2
2025-11-25 01:09:11.273 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 01:09:11.275 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 01:09:11.277 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-25 01:09:11.282 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 01:09:11.284 +02:00 [DBG] Creating DbConnection.
2025-11-25 01:09:11.285 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 01:09:11.285 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:11.336 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:11.338 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:09:11.339 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 01:09:11.340 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:09:11.341 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 01:09:11.348 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 01:09:11.350 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:11.351 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 01:09:11.352 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:11.353 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:09:11.355 +02:00 [WRN] Branch with ID 2 not found
2025-11-25 01:09:11.445 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 205.418ms
2025-11-25 01:09:11.447 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 01:09:11.508 +02:00 [ERR]  Exception caught: Branch with ID 2 not found
System.Collections.Generic.KeyNotFoundException: Branch with ID 2 not found
   at Hospital.Infrastructure.Services.BranchService.GetByIdAsync(Int32 id) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 85
   at Hospital.Infrastructure.Services.EventService.AddAsync(AddEventDto eventdto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\EventService.cs:line 40
   at Hospital.Controllers.EventController.CreateEvent(AddEventDto eventDto) in D:\Hospital\Hospital\Hospital\Controllers\EventController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 01:09:11.532 +02:00 [DBG] Connection id "0HNHBL98NVIUL" completed keep alive response.
2025-11-25 01:09:11.534 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 01:09:11.534 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:11.535 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 01:09:11.537 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 404 null application/json 319.3219ms
2025-11-25 01:09:24.565 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-25 01:09:24.569 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-25 01:09:24.570 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-25 01:09:24.571 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 01:09:24.572 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 01:09:24.573 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 01:09:24.574 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 01:09:24.575 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 01:09:24.577 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 01:09:24.578 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 01:09:24.579 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 01:09:24.581 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 01:09:24.582 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 01:09:24.583 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 01:09:24.585 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 01:09:24.586 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 01:09:24.587 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-25 01:09:24.589 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 01:09:24.590 +02:00 [DBG] Connection id "0HNHBL98NVIUL", Request id "0HNHBL98NVIUL:00000002": started reading request body.
2025-11-25 01:09:24.591 +02:00 [DBG] Connection id "0HNHBL98NVIUL", Request id "0HNHBL98NVIUL:00000002": done reading request body.
2025-11-25 01:09:24.592 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-25 01:09:24.593 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 01:09:24.594 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 01:09:24.596 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 01:09:24.597 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 01:09:24.598 +02:00 [INF] create event  called at "2025-11-25T01:09:24.5988213+02:00"
2025-11-25 01:09:24.599 +02:00 [INF] Adding new event: event 2 for Branch ID: 1
2025-11-25 01:09:24.600 +02:00 [INF] Fetching branch by ID: 1
2025-11-25 01:09:24.602 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 01:09:24.604 +02:00 [DBG] Creating DbConnection.
2025-11-25 01:09:24.605 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 01:09:24.605 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.606 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.608 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:09:24.609 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 01:09:24.610 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:09:24.611 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 01:09:24.616 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 01:09:24.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:09:24.619 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.620 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 01:09:24.622 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.623 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:09:24.644 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Event.EventId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:09:24.661 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:09:24.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:09:24.666 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 01:09:24.679 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 01:09:24.682 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 01:09:24.683 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 01:09:24.683 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 01:09:24.696 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.697 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.698 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:09:24.698 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 01:09:24.699 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:09:24.700 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 01:09:24.714 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 01:09:24.722 +02:00 [DBG] The foreign key property 'Event.EventId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 01:09:24.726 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.727 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-25 01:09:24.729 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.730 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:09:24.734 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:09:24.736 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 01:09:24.737 +02:00 [INF] Event event 2 added successfully with ID 1
2025-11-25 01:09:24.742 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 01:09:24.744 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 01:09:24.745 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 01:09:24.745 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 01:09:24.746 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 01:09:24.747 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 01:09:24.766 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] for address (id=[1],action=[GetEvent],controller=[Event])
2025-11-25 01:09:24.772 +02:00 [DBG] Successfully processed template api/Event/GetEvent for Hospital.Controllers.EventController.GetEvent (Hospital) resulting in /api/Event/GetEvent and ?id=1
2025-11-25 01:09:24.776 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] with result /api/Event/GetEvent?id=1
2025-11-25 01:09:24.780 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 196.8197ms
2025-11-25 01:09:24.782 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 01:09:24.783 +02:00 [DBG] Connection id "0HNHBL98NVIUL" completed keep alive response.
2025-11-25 01:09:24.784 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 01:09:24.785 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:24.786 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 01:09:24.788 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 201 null application/json; charset=utf-8 222.2947ms
2025-11-25 01:09:44.471 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-25 01:09:44.473 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-25 01:09:44.475 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-25 01:09:44.476 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-25 01:09:44.477 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 01:09:44.477 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 01:09:44.478 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-25 01:09:44.482 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 01:09:44.484 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 01:09:44.485 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 01:09:44.486 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 01:09:44.488 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 01:09:44.489 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 01:09:44.490 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 01:09:44.493 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 01:09:44.495 +02:00 [INF] get all  event in system  called at "2025-11-25T01:09:44.4957147+02:00"
2025-11-25 01:09:44.497 +02:00 [INF] Fetching all events in the system
2025-11-25 01:09:44.499 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 01:09:44.501 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()'
2025-11-25 01:09:44.505 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Event>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
        FROM Events AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 01:09:44.507 +02:00 [DBG] Creating DbConnection.
2025-11-25 01:09:44.508 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 01:09:44.509 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:44.510 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:44.511 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:09:44.512 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:09:44.513 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 01:09:44.514 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-25 01:09:44.519 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-25 01:09:44.521 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:44.522 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 01:09:44.524 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:44.525 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:09:44.529 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 01:09:44.531 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 01:09:44.531 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 01:09:44.532 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 01:09:44.533 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 01:09:44.534 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Event.EventDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 01:09:44.536 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 45.4625ms
2025-11-25 01:09:44.537 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-25 01:09:44.538 +02:00 [DBG] Connection id "0HNHBL98NVIUL" completed keep alive response.
2025-11-25 01:09:44.539 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 01:09:44.540 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:09:44.541 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 01:09:44.542 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 200 null application/json; charset=utf-8 70.967ms
2025-11-25 01:10:00.184 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/News/GetAllNewsInSystem - null null
2025-11-25 01:10:00.186 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNewsInSystem'
2025-11-25 01:10:00.186 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)' with route pattern 'api/News/GetAllNewsInSystem' is valid for the request path '/api/News/GetAllNewsInSystem'
2025-11-25 01:10:00.187 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-25 01:10:00.188 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 01:10:00.189 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 01:10:00.189 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-25 01:10:00.193 +02:00 [INF] Route matched with {action = "GetAllNewsInSystem", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNewsInSystem() on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 01:10:00.194 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 01:10:00.195 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 01:10:00.197 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 01:10:00.198 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 01:10:00.199 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 01:10:00.200 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 01:10:00.201 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 01:10:00.204 +02:00 [INF] get all News in system  called at "2025-11-25T01:10:00.2038253+02:00"
2025-11-25 01:10:00.206 +02:00 [INF] Retrieving all news in the system
2025-11-25 01:10:00.209 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 01:10:00.211 +02:00 [DBG] Compiling query expression: 
'DbSet<News>()
    .AsNoTracking()'
2025-11-25 01:10:00.215 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<News>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: News.NewsId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: News.BranchId (int?) FK Index, 1], [Property: News.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: News.Date (DateTime) Required, 3], [Property: News.Description (string), 4], [Property: News.ImageURL (string) MaxLength(300), 5], [Property: News.Title (string) Required MaxLength(150), 6], [Property: News.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT n.NewsId, n.BranchId, n.CreatedAt, n.Date, n.Description, n.ImageURL, n.Title, n.UpdatedAt
        FROM News AS n), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, News>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 01:10:00.216 +02:00 [DBG] Creating DbConnection.
2025-11-25 01:10:00.217 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 01:10:00.218 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:00.219 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:00.220 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:10:00.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 01:10:00.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:10:00.223 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-25 01:10:00.229 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-25 01:10:00.231 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:00.232 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 01:10:00.233 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:00.235 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:10:00.236 +02:00 [INF] No news found in the system
2025-11-25 01:10:00.238 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 01:10:00.239 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 01:10:00.240 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 01:10:00.241 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 01:10:00.241 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 01:10:00.242 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-25 01:10:00.244 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital) in 43.8892ms
2025-11-25 01:10:00.245 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-25 01:10:00.246 +02:00 [DBG] Connection id "0HNHBL98NVIUL" completed keep alive response.
2025-11-25 01:10:00.246 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 01:10:00.248 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:00.249 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 01:10:00.250 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/News/GetAllNewsInSystem - 404 null text/plain; charset=utf-8 66.294ms
2025-11-25 01:10:11.210 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - application/json 203
2025-11-25 01:10:11.213 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/CreateNews'
2025-11-25 01:10:11.214 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)' with route pattern 'api/News/CreateNews' is valid for the request path '/api/News/CreateNews'
2025-11-25 01:10:11.215 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 01:10:11.216 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 01:10:11.216 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 01:10:11.217 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 01:10:11.220 +02:00 [INF] Route matched with {action = "CreateNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateNews(Hospital.Application.DTO.News.AddNewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 01:10:11.222 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 01:10:11.223 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 01:10:11.224 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 01:10:11.226 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 01:10:11.227 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 01:10:11.228 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 01:10:11.230 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 01:10:11.231 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 01:10:11.232 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' using the name '' in request data ...
2025-11-25 01:10:11.234 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 01:10:11.235 +02:00 [DBG] Connection id "0HNHBL98NVIUL", Request id "0HNHBL98NVIUL:00000005": started reading request body.
2025-11-25 01:10:11.236 +02:00 [DBG] Connection id "0HNHBL98NVIUL", Request id "0HNHBL98NVIUL:00000005": done reading request body.
2025-11-25 01:10:11.239 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.AddNewsDto'
2025-11-25 01:10:11.240 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 01:10:11.241 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 01:10:11.242 +02:00 [DBG] Attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 01:10:11.246 +02:00 [DBG] Done attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 01:10:11.248 +02:00 [INF] create News  called at "2025-11-25T01:10:11.2484937+02:00"
2025-11-25 01:10:11.250 +02:00 [INF] Adding a new news item: hiiiiiiiiii
2025-11-25 01:10:11.251 +02:00 [INF] Fetching branch by ID: 1
2025-11-25 01:10:11.252 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 01:10:11.254 +02:00 [DBG] Creating DbConnection.
2025-11-25 01:10:11.255 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 01:10:11.256 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.258 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.259 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:10:11.260 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:10:11.261 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 01:10:11.263 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 01:10:11.268 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 01:10:11.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:10:11.272 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.273 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 01:10:11.275 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.276 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:10:11.282 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'News.NewsId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:10:11.297 +02:00 [DBG] The navigation 'News.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:10:11.299 +02:00 [DBG] Context 'AppDbContext' started tracking 'News' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:10:11.301 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 01:10:11.306 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 01:10:11.307 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 01:10:11.308 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 01:10:11.310 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 01:10:11.312 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.313 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.314 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 01:10:11.315 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 01:10:11.316 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 01:10:11.317 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 01:10:11.324 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 01:10:11.327 +02:00 [DBG] The foreign key property 'News.NewsId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 01:10:11.329 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.330 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-25 01:10:11.332 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.333 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 01:10:11.335 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 01:10:11.337 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 01:10:11.339 +02:00 [INF] News item added successfully with ID: 1
2025-11-25 01:10:11.342 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 01:10:11.344 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 01:10:11.345 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 01:10:11.346 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 01:10:11.346 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 01:10:11.348 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 01:10:11.349 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] for address (id=[1],action=[GetNews],controller=[News])
2025-11-25 01:10:11.350 +02:00 [DBG] Successfully processed template api/News/GetNews for Hospital.Controllers.NewsController.GetNews (Hospital) resulting in /api/News/GetNews and ?id=1
2025-11-25 01:10:11.352 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] with result /api/News/GetNews?id=1
2025-11-25 01:10:11.356 +02:00 [INF] Executed action Hospital.Controllers.NewsController.CreateNews (Hospital) in 128.023ms
2025-11-25 01:10:11.357 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 01:10:11.358 +02:00 [DBG] Connection id "0HNHBL98NVIUL" completed keep alive response.
2025-11-25 01:10:11.359 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 01:10:11.361 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 01:10:11.362 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 01:10:11.364 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - 201 null application/json; charset=utf-8 153.4198ms
2025-11-25 04:33:11.174 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:33:11.628 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:33:11.629 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:33:11.630 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:33:11.630 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:33:11.630 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:33:11.718 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:11.718 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:11.850 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:33:11.854 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:33:11.889 +02:00 [DBG] Created DbConnection. (34ms).
2025-11-25 04:33:11.893 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:33:11.896 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:11.899 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:33:15.414 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:33:15.811 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:33:15.812 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:33:15.813 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:33:15.813 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:33:15.813 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:33:15.891 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:15.891 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:16.001 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:33:16.003 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:33:16.023 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-25 04:33:16.031 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.294 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.298 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:16.302 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-11-25 04:33:16.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2025-11-25 04:33:16.307 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:33:16.324 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:33:16.326 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.331 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (3ms).
2025-11-25 04:33:16.350 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:33:16.350 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:33:16.350 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.355 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.355 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:16.356 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:16.356 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:16.356 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-25 04:33:16.383 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-25 04:33:16.383 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:16.383 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:16.383 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:16.383 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-25 04:33:16.440 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-25 04:33:16.440 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.440 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:16.441 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.442 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:33:16.443 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:33:16.443 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:16.443 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:33:30.889 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:33:31.303 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:33:31.304 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:33:31.304 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:33:31.304 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:33:31.304 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:33:31.397 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:31.397 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:31.530 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:33:31.547 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:33:31.568 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-25 04:33:31.569 +02:00 [DBG] Migrating using database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.572 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.680 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.680 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.681 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.741 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:33:31.742 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:33:31.742 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:33:31.742 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:33:31.742 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:33:31.755 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:31.755 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:33:31.781 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:33:31.781 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:33:31.782 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.791 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.794 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:31.798 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-25 04:33:31.799 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-11-25 04:33:31.802 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-25 04:33:31.916 +02:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-25 04:33:31.917 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:31.917 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:31.917 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:31.917 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 04:33:31.946 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 04:33:31.947 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.951 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (2ms).
2025-11-25 04:33:31.953 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.953 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:33:31.953 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.956 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.956 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:31.956 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:31.956 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:31.957 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:33:31.960 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:33:31.960 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.960 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:31.994 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:31.994 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:31.994 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:31.994 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.995 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:31.995 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-25 04:33:32.006 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-25 04:33:32.006 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.006 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:32.007 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.007 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.007 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:32.007 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:32.007 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:32.007 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:33:32.007 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:33:32.007 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.008 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:32.009 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-25 04:33:32.009 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-25 04:33:32.009 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-25 04:33:32.009 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.009 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.009 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 04:33:32.017 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 04:33:32.018 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.018 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:32.019 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.019 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.019 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:33:32.019 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:33:32.019 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:33:32.019 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 04:33:32.035 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 04:33:32.037 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.037 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:33:32.037 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.037 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:32.045 +02:00 [INF] Applying migration '20251111134048_init-auth'.
2025-11-25 04:33:32.101 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.101 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:32.103 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:33:33.246 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:33:33.247 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:33.247 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.248 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.248 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-25 04:33:33.250 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-25 04:33:33.251 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:33.251 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.251 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.251 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-25 04:33:33.254 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-25 04:33:33.254 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:33.254 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.254 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.254 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-25 04:33:33.256 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-25 04:33:33.257 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:33.257 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.257 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:33.257 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:33.258 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:35.208 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:35.209 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:35.209 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:35.209 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:35.212 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:35.212 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:35.212 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:35.212 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:35.212 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:35.215 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:35.215 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:35.215 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:35.215 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:35.215 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:35.216 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:37.854 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:37.854 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:37.854 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:37.854 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:37.857 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:33:37.857 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:37.857 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:37.857 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:37.857 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-25 04:33:37.860 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-25 04:33:40.368 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:40.368 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:40.368 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:40.368 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:40.372 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:40.372 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:40.372 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:40.372 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:40.372 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:40.377 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:40.377 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:40.377 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:40.377 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:40.377 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:40.379 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:43.143 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:43.143 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:43.143 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:43.143 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:43.146 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:43.146 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:43.146 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:43.146 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:43.146 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:43.150 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:43.150 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:43.150 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:43.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:43.151 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:45.319 +02:00 [INF] Executed DbCommand (2,168ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:45.319 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:45.319 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:45.319 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:45.319 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:45.322 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:33:45.322 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:45.322 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:45.322 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:45.322 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:33:45.324 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:33:45.324 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:45.324 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:45.324 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:45.324 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-25 04:33:47.634 +02:00 [INF] Executed DbCommand (2,310ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-25 04:33:47.634 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:47.634 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:47.634 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:47.634 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-25 04:33:47.636 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-25 04:33:50.096 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.096 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.096 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.096 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-25 04:33:50.101 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-25 04:33:50.101 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.101 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.101 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.101 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-25 04:33:50.103 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-25 04:33:50.103 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.103 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.103 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.103 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-25 04:33:50.104 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-25 04:33:50.104 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.104 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.104 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-25 04:33:50.105 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-25 04:33:50.105 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.105 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.105 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.105 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-25 04:33:50.106 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-25 04:33:50.106 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.106 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.106 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.106 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 04:33:50.107 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 04:33:50.107 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.107 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.107 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:50.107 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-25 04:33:50.108 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-25 04:33:50.108 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:50.108 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.242 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2133ms).
2025-11-25 04:33:52.242 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-25 04:33:52.243 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-25 04:33:52.243 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.244 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.244 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.244 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-25 04:33:52.246 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-25 04:33:52.246 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.246 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.246 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.246 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-25 04:33:52.247 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-25 04:33:52.247 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.247 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.247 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.247 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-25 04:33:52.248 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-25 04:33:52.248 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.248 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.248 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.248 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-25 04:33:52.249 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-25 04:33:52.249 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.249 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.249 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.249 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-25 04:33:52.250 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-25 04:33:52.250 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.250 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.250 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.250 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-25 04:33:52.250 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-25 04:33:52.251 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:52.251 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.251 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:52.251 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-25 04:33:52.252 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-25 04:33:52.252 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.894 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1642ms).
2025-11-25 04:33:53.894 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1642ms).
2025-11-25 04:33:53.894 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-25 04:33:53.895 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-25 04:33:53.896 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.896 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.896 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.896 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-25 04:33:53.896 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-25 04:33:53.896 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.896 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.896 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.896 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-25 04:33:53.897 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-25 04:33:53.897 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.897 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.897 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.897 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-25 04:33:53.898 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-25 04:33:53.898 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.898 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.898 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.898 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-25 04:33:53.899 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-25 04:33:53.899 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.899 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.899 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.899 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-25 04:33:53.900 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-25 04:33:53.900 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.900 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.900 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.900 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-25 04:33:53.901 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-25 04:33:53.901 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:53.901 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.901 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:53.901 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-25 04:33:53.902 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-25 04:33:55.618 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:55.618 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.618 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.619 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-25 04:33:55.620 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-25 04:33:55.620 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:55.620 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.620 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.620 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-25 04:33:55.621 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-25 04:33:55.621 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:55.621 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.621 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.621 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-25 04:33:55.622 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-25 04:33:55.622 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:55.622 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.622 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.622 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 04:33:55.623 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 04:33:55.623 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:55.623 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.623 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.623 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-25 04:33:55.630 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-25 04:33:55.630 +02:00 [DBG] Committing transaction.
2025-11-25 04:33:55.634 +02:00 [DBG] Committed transaction.
2025-11-25 04:33:55.634 +02:00 [DBG] Disposing transaction.
2025-11-25 04:33:55.634 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:55.634 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:55.635 +02:00 [INF] Applying migration '20251111134638__SeedRoles'.
2025-11-25 04:33:55.678 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:55.678 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:55.678 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:33:55.678 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:33:55.678 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:55.678 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.678 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:55.678 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'49d192ca-a1d3-4a84-b46c-8886a40daeaf', N'Admin', N'ADMIN', N'1ad675dd-cace-46fc-b4f1-08b89879decf');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:33:57.377 +02:00 [INF] Executed DbCommand (1,699ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'49d192ca-a1d3-4a84-b46c-8886a40daeaf', N'Admin', N'ADMIN', N'1ad675dd-cace-46fc-b4f1-08b89879decf');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:33:57.377 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:57.377 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:57.377 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:57.377 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'3b855183-d6b3-4cae-8675-eb727f9b440f', N'Doctor', N'DOCTOR', N'a598d151-1f23-4062-893b-bee805614027');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:33:57.386 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'3b855183-d6b3-4cae-8675-eb727f9b440f', N'Doctor', N'DOCTOR', N'a598d151-1f23-4062-893b-bee805614027');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:33:57.386 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:57.386 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:57.386 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:57.386 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'169d1c24-89cd-4c96-b65a-a486ae9e6e18', N'Patient', N'PATIENT', N'01bb150f-bd48-4a4a-b4b5-af9b9afd5407');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:33:57.395 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'169d1c24-89cd-4c96-b65a-a486ae9e6e18', N'Patient', N'PATIENT', N'01bb150f-bd48-4a4a-b4b5-af9b9afd5407');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:33:59.068 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:59.068 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:59.068 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:59.068 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-25 04:33:59.070 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-25 04:33:59.070 +02:00 [DBG] Committing transaction.
2025-11-25 04:33:59.070 +02:00 [DBG] Committed transaction.
2025-11-25 04:33:59.070 +02:00 [DBG] Disposing transaction.
2025-11-25 04:33:59.070 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:59.070 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:33:59.071 +02:00 [INF] Applying migration '20251111153509__SeedRolesAdmin'.
2025-11-25 04:33:59.203 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:59.203 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:33:59.203 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:33:59.203 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:33:59.203 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:33:59.204 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:59.204 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:33:59.204 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'f98fa86b-57cb-4cfe-a282-3a4ec8b94c27', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEOaU/XoQR5IKabHAb+2NhsIINOVRVMcEaS8LbbLJppxEZl46nO+b3yh4FTAh/9hzYg==', N'Admin', '2025-11-25T02:33:59.1523458Z', '2025-11-25T02:33:59.1523463Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'2d021773-1caf-4fd4-8e9b-4b99683b7d5c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-25 04:33:59.231 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'f98fa86b-57cb-4cfe-a282-3a4ec8b94c27', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEOaU/XoQR5IKabHAb+2NhsIINOVRVMcEaS8LbbLJppxEZl46nO+b3yh4FTAh/9hzYg==', N'Admin', '2025-11-25T02:33:59.1523458Z', '2025-11-25T02:33:59.1523463Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'2d021773-1caf-4fd4-8e9b-4b99683b7d5c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-25 04:34:00.380 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:00.380 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.380 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.380 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT 'f98fa86b-57cb-4cfe-a282-3a4ec8b94c27', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-25 04:34:00.392 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT 'f98fa86b-57cb-4cfe-a282-3a4ec8b94c27', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-25 04:34:00.392 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:00.392 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.392 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.392 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-25 04:34:00.393 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-25 04:34:00.394 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:00.394 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:00.394 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:00.394 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:00.394 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:00.394 +02:00 [INF] Applying migration '20251112174524_AddRefreshTokenColumns'.
2025-11-25 04:34:00.410 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:00.410 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:00.410 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:00.411 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:00.411 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:00.411 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.411 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.411 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-25 04:34:00.429 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-25 04:34:00.429 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:00.429 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.429 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.429 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-25 04:34:00.436 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-25 04:34:00.436 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:00.436 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:00.436 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.477 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-25 04:34:01.480 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-25 04:34:01.480 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:01.481 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:01.481 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:01.481 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:01.481 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:01.481 +02:00 [INF] Applying migration '20251113233448_update in banner and service and branch and specilization relations'.
2025-11-25 04:34:01.497 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:01.497 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:01.497 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:01.497 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:01.497 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:01.497 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.497 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.497 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-25 04:34:01.501 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-25 04:34:01.501 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:01.501 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.501 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.501 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-25 04:34:01.503 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-25 04:34:01.503 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:01.503 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.503 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.503 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-25 04:34:01.504 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-25 04:34:01.504 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:01.504 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.504 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.504 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-25 04:34:01.505 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-25 04:34:01.505 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:01.505 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.505 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.505 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-25 04:34:01.506 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-25 04:34:01.506 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:01.506 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.506 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:01.506 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-25 04:34:03.099 +02:00 [INF] Executed DbCommand (1,593ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-25 04:34:03.099 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:03.099 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.099 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.099 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-25 04:34:03.100 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-25 04:34:03.100 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:03.100 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.100 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.100 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-25 04:34:03.101 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-25 04:34:03.101 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:03.101 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.101 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.101 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-25 04:34:03.138 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-25 04:34:03.138 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:03.138 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.138 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.138 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-25 04:34:03.149 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-25 04:34:03.149 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:03.149 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.149 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:03.149 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-25 04:34:04.832 +02:00 [INF] Executed DbCommand (1,683ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-25 04:34:04.832 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:04.832 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:04.832 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:04.832 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-25 04:34:04.834 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-25 04:34:04.834 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:04.834 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:04.834 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:04.834 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-25 04:34:04.836 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-25 04:34:04.836 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:04.836 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:04.836 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:04.836 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-25 04:34:04.837 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-25 04:34:04.837 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:06.754 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1916ms).
2025-11-25 04:34:06.754 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1916ms).
2025-11-25 04:34:06.754 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-25 04:34:06.755 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-25 04:34:06.755 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:06.755 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.755 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.755 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:34:06.756 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:34:06.756 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:06.756 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.756 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.756 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:34:06.757 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:34:06.757 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:06.757 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.757 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.757 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-25 04:34:06.760 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-25 04:34:06.760 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:06.760 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:06.760 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:06.760 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:06.760 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:06.760 +02:00 [INF] Applying migration '20251115194238_add many to many relation between branch and doctor'.
2025-11-25 04:34:06.773 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:06.773 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:06.773 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:06.773 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:06.773 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:06.773 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.773 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.773 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-25 04:34:06.775 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-25 04:34:06.775 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:06.775 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.775 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:06.775 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-25 04:34:08.567 +02:00 [INF] Executed DbCommand (1,792ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-25 04:34:08.567 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:08.567 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.567 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.567 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-25 04:34:08.586 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-25 04:34:08.586 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:08.586 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.586 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.586 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:34:08.589 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:34:08.589 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:08.589 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.589 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.589 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-25 04:34:08.590 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-25 04:34:08.590 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:08.590 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.590 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:08.590 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-25 04:34:08.592 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-25 04:34:08.592 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:10.135 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:10.135 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:10.135 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:10.135 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:10.135 +02:00 [INF] Applying migration '20251115200531_remove relation between branch and user'.
2025-11-25 04:34:10.147 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:10.148 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:10.148 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:10.148 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:10.148 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:10.148 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.148 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.148 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-25 04:34:10.150 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-25 04:34:10.150 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:10.150 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.150 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.150 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-25 04:34:10.151 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-25 04:34:10.151 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:10.151 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.151 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-25 04:34:10.182 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-25 04:34:10.182 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:10.182 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.182 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:10.182 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-25 04:34:10.186 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-25 04:34:10.186 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:10.186 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:10.186 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:10.186 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:10.186 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:10.186 +02:00 [INF] Applying migration '20251116144214_MakeRefreshTokenNullable'.
2025-11-25 04:34:10.202 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:10.202 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:11.942 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:11.942 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:11.942 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:11.942 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:11.942 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:11.942 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-25 04:34:11.965 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-25 04:34:11.965 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:11.965 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:11.965 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:11.965 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-25 04:34:11.968 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-25 04:34:11.968 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:11.968 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:11.968 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:11.968 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:11.968 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:11.968 +02:00 [INF] Applying migration '20251116184844_editPatientModel'.
2025-11-25 04:34:11.981 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:11.981 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:11.981 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:11.981 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:11.981 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:11.981 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:11.981 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:11.981 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-25 04:34:11.999 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-25 04:34:11.999 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:13.788 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1789ms).
2025-11-25 04:34:13.788 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1789ms).
2025-11-25 04:34:13.789 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-25 04:34:13.806 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-25 04:34:13.806 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:13.806 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:13.806 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:13.806 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-25 04:34:13.808 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-25 04:34:13.808 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:13.809 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:13.809 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:13.809 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:13.809 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:13.809 +02:00 [INF] Applying migration '20251116220101_change Timeonly in schedule to DateTime'.
2025-11-25 04:34:13.823 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:13.823 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:13.823 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:13.824 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:13.824 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:13.824 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:13.824 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:13.824 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-25 04:34:13.837 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-25 04:34:13.837 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:13.837 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:13.837 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:13.837 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-25 04:34:15.960 +02:00 [INF] Executed DbCommand (2,123ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-25 04:34:15.960 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:15.960 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:15.960 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:15.960 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-25 04:34:15.961 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-25 04:34:15.961 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:15.961 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:15.961 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:15.961 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:15.962 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:15.962 +02:00 [INF] Applying migration '20251117115532_addPhotoToDoctor'.
2025-11-25 04:34:15.973 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:15.973 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:15.973 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:15.974 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:15.974 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:15.974 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:15.974 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:15.974 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:34:15.975 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:34:15.975 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:15.975 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:15.975 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:15.976 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-25 04:34:15.976 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-25 04:34:15.976 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:15.977 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:15.977 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:15.977 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:15.977 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:15.977 +02:00 [INF] Applying migration '20251118140238_editTimeOnlYToDateTime'.
2025-11-25 04:34:15.988 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:15.988 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:15.988 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:17.979 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:17.979 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:17.979 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:17.979 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:17.979 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-25 04:34:17.998 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-25 04:34:17.998 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:17.998 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:17.998 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:17.998 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-25 04:34:17.999 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-25 04:34:17.999 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:18.000 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:18.000 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:18.000 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:18.000 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:18.000 +02:00 [INF] Applying migration '20251118182335_improve schedule'.
2025-11-25 04:34:18.012 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:18.012 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:18.012 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:18.013 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:18.013 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:18.013 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:18.013 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:18.013 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-25 04:34:18.014 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-25 04:34:18.014 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:18.014 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:18.014 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:18.014 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-25 04:34:18.015 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-25 04:34:18.015 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:18.015 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:18.015 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:18.015 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:19.832 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1816ms).
2025-11-25 04:34:19.832 +02:00 [INF] Applying migration '20251119214128_resetPaswoard'.
2025-11-25 04:34:19.844 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:19.844 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:19.844 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:19.845 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:19.845 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:19.845 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.845 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.845 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:34:19.848 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:34:19.848 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:19.848 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.848 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.848 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-25 04:34:19.849 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-25 04:34:19.849 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:19.849 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.849 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.849 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-25 04:34:19.852 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-25 04:34:19.852 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:19.852 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:19.852 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:19.852 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:19.852 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:19.852 +02:00 [INF] Applying migration '20251120170506_create payment with paymob and update appoiment '.
2025-11-25 04:34:19.866 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:19.866 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:19.866 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:19.867 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:19.867 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:19.867 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.867 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:19.867 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-25 04:34:21.685 +02:00 [INF] Executed DbCommand (1,819ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-25 04:34:21.685 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:21.685 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.685 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.686 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-25 04:34:21.686 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-25 04:34:21.686 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:21.686 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.686 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.686 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-25 04:34:21.689 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-25 04:34:21.689 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:21.691 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:21.691 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:21.691 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:21.691 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:21.691 +02:00 [INF] Applying migration '20251122193859_update appoiment with payment method'.
2025-11-25 04:34:21.703 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:21.703 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:21.703 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:21.703 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:21.703 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:21.703 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.703 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.704 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-25 04:34:21.705 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-25 04:34:21.705 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:21.705 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.705 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:21.705 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-25 04:34:23.757 +02:00 [INF] Executed DbCommand (2,052ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-25 04:34:23.757 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:23.758 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:23.758 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:23.758 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:23.758 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:23.758 +02:00 [INF] Applying migration '20251122203902_convert type of fess in codtor to ba require'.
2025-11-25 04:34:23.773 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:23.773 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:23.773 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:23.773 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:23.773 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:23.773 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:23.773 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:23.773 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-25 04:34:23.794 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-25 04:34:23.794 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:23.794 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:23.794 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:23.794 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-25 04:34:23.794 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-25 04:34:23.795 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:23.795 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:23.795 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:23.795 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:23.795 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:23.795 +02:00 [INF] Applying migration '20251122214638_addImageInBranch'.
2025-11-25 04:34:23.808 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:23.808 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:23.808 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:23.809 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:23.809 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:23.809 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:23.809 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.660 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:34:25.662 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:34:25.662 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:25.662 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.662 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.662 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-25 04:34:25.665 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-25 04:34:25.666 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:25.666 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:25.666 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:25.666 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:25.666 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:25.666 +02:00 [INF] Applying migration '20251124135933_addDateinschudule'.
2025-11-25 04:34:25.680 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:25.680 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:25.680 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:25.680 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:25.680 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:25.680 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.680 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.680 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-25 04:34:25.696 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-25 04:34:25.696 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:25.696 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.696 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.696 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-25 04:34:25.697 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-25 04:34:25.697 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:25.697 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.697 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:25.697 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-25 04:34:25.698 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-25 04:34:27.471 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:27.471 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:27.471 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:27.471 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:27.472 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:27.472 +02:00 [INF] Applying migration '20251124164506_AddShiftToAppointments'.
2025-11-25 04:34:27.484 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:27.484 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:27.484 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:27.485 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:27.485 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:27.485 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.485 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.485 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-25 04:34:27.502 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-25 04:34:27.502 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:27.502 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.502 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.502 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:34:27.504 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:34:27.504 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:27.504 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.504 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.504 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-25 04:34:27.505 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-25 04:34:27.505 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:27.506 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:27.506 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:27.506 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:27.506 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:27.506 +02:00 [INF] Applying migration '20251124182248_editSchedule'.
2025-11-25 04:34:27.518 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:27.518 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:27.518 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:34:27.519 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:34:27.519 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:27.519 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.519 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:27.519 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-25 04:34:29.302 +02:00 [INF] Executed DbCommand (1,783ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-25 04:34:29.302 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:29.302 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:29.302 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:29.302 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:34:29.303 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:34:29.303 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:34:29.303 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:29.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:34:29.303 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-25 04:34:29.305 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-25 04:34:29.306 +02:00 [DBG] Committing transaction.
2025-11-25 04:34:29.306 +02:00 [DBG] Committed transaction.
2025-11-25 04:34:29.306 +02:00 [DBG] Disposing transaction.
2025-11-25 04:34:29.306 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:29.306 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:34:29.307 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:34:29.308 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:29.308 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:34:56.876 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:34:57.267 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:34:57.268 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:34:57.268 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:34:57.268 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:34:57.268 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:34:57.349 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:34:57.349 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:34:57.457 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:34:57.460 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:34:57.481 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-25 04:34:57.485 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:34:57.487 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:34:57.490 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:35:00.009 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:35:00.395 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:35:00.396 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:35:00.396 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:35:00.396 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:35:00.396 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:35:00.475 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:35:00.475 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:35:00.586 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:35:00.590 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:35:00.613 +02:00 [DBG] Created DbConnection. (21ms).
2025-11-25 04:35:00.618 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.756 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.761 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:35:00.765 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-11-25 04:35:00.766 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2025-11-25 04:35:00.771 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:35:00.789 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:35:00.790 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.794 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-25 04:35:00.808 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:35:00.808 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:35:00.808 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.811 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.812 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:35:00.812 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:35:00.812 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:35:00.812 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-25 04:35:00.815 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-25 04:35:00.815 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:35:00.815 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:35:00.815 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:35:00.815 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-25 04:35:00.826 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-25 04:35:00.827 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.827 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:35:00.828 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.828 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:35:00.829 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:35:00.829 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:35:00.829 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:35:31.485 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:35:31.860 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:35:31.861 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:35:31.861 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:35:31.861 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:35:31.861 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:35:31.943 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:35:31.943 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:35:32.072 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:35:32.086 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:36:07.289 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:36:07.670 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:36:07.671 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:36:07.671 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:36:07.672 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:36:07.672 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:36:07.750 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:36:07.750 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:36:07.862 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:36:07.926 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:36:07.926 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:36:07.926 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:36:07.926 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:36:07.926 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:36:07.939 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:36:07.939 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:36:09.688 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:36:59.400 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:36:59.776 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:36:59.777 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:36:59.777 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:36:59.777 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:36:59.778 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:36:59.861 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:36:59.861 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:36:59.974 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:36:59.985 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:37:00.006 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-25 04:37:00.008 +02:00 [DBG] Migrating using database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.012 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.110 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.110 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.111 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.173 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:37:00.173 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:37:00.173 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:37:00.173 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:37:00.173 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:37:00.187 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:37:00.187 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:37:00.211 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:37:00.212 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:37:00.212 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.221 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.225 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.229 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-25 04:37:00.230 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-11-25 04:37:00.233 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-25 04:37:00.334 +02:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-25 04:37:00.335 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.335 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 04:37:00.365 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 04:37:00.366 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.370 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (2ms).
2025-11-25 04:37:00.372 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.372 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:37:00.372 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.375 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.376 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.376 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.376 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.376 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:37:00.379 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:37:00.380 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.380 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:00.412 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.412 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.413 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.413 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.413 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.413 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-25 04:37:00.419 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-25 04:37:00.419 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.419 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:00.419 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.419 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.420 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.420 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.420 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.420 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:37:00.420 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 04:37:00.420 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.420 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:00.422 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-25 04:37:00.422 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-25 04:37:00.566 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (144ms).
2025-11-25 04:37:00.566 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.566 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.566 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 04:37:00.575 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 04:37:00.575 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.575 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:00.576 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.576 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.576 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:37:00.576 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:37:00.576 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:37:00.576 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 04:37:00.583 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 04:37:00.585 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.585 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:37:00.585 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.586 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:00.593 +02:00 [INF] Applying migration '20251111134048_init-auth'.
2025-11-25 04:37:00.646 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.647 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:00.648 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:00.651 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:00.651 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.651 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.652 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.652 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-25 04:37:00.653 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-25 04:37:00.654 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:00.654 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.654 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:00.654 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-25 04:37:00.655 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-25 04:37:02.660 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:02.660 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.660 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.660 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-25 04:37:02.664 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-25 04:37:02.664 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:02.664 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.664 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.664 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:02.665 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:02.665 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:02.665 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.665 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.665 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:02.667 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:02.667 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:02.667 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.667 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:02.667 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:04.963 +02:00 [INF] Executed DbCommand (2,296ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:04.963 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:04.963 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:04.963 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:04.963 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:04.965 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:04.965 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:04.965 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:04.965 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:04.965 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:04.966 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 04:37:07.443 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:07.443 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:07.443 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:07.443 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-25 04:37:07.447 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-25 04:37:07.447 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:07.447 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:07.447 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:07.447 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:07.449 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:07.449 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:07.449 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.106 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2656ms).
2025-11-25 04:37:10.106 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:10.116 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:10.116 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:10.116 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.116 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.116 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:10.124 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:10.124 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:10.124 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.124 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.124 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:10.129 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:10.129 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:10.129 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.129 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:10.129 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:12.607 +02:00 [INF] Executed DbCommand (2,478ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:12.608 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:12.608 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:12.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:12.608 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:12.610 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:12.610 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:12.610 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:12.610 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:12.610 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:12.612 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:14.817 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:14.817 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:14.817 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:14.817 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:37:14.825 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:37:14.825 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:14.826 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:14.826 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:14.826 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-25 04:37:14.833 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-25 04:37:17.100 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:17.101 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.101 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.101 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-25 04:37:17.108 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-25 04:37:17.108 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:17.108 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.108 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.108 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-25 04:37:17.109 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-25 04:37:17.109 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:17.109 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.109 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.109 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-25 04:37:17.110 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-25 04:37:17.110 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:17.110 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.110 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.110 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-25 04:37:17.110 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-25 04:37:17.110 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:17.110 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:17.110 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.415 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-25 04:37:19.416 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-25 04:37:19.416 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.416 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.417 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.417 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-25 04:37:19.418 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-25 04:37:19.418 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.418 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.418 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.418 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 04:37:19.419 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 04:37:19.419 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.419 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.419 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.419 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-25 04:37:19.420 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-25 04:37:19.420 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.420 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.420 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.420 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-25 04:37:19.420 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-25 04:37:19.420 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.420 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.420 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.420 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-25 04:37:19.421 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-25 04:37:19.421 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.421 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.421 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.421 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-25 04:37:19.422 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-25 04:37:19.422 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:19.422 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.422 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:19.422 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-25 04:37:19.422 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-25 04:37:19.422 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.320 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1897ms).
2025-11-25 04:37:21.320 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1897ms).
2025-11-25 04:37:21.320 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-25 04:37:21.322 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-25 04:37:21.322 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.322 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.322 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.322 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-25 04:37:21.323 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-25 04:37:21.323 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.323 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.323 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.323 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-25 04:37:21.323 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-25 04:37:21.323 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.323 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.323 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.324 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-25 04:37:21.324 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-25 04:37:21.324 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.324 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.324 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.324 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-25 04:37:21.325 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-25 04:37:21.325 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.325 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.325 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.325 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-25 04:37:21.325 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-25 04:37:21.325 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.325 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.325 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.325 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-25 04:37:21.326 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-25 04:37:21.326 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:21.326 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.326 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:21.326 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-25 04:37:21.327 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-25 04:37:23.010 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.010 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.010 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.011 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-25 04:37:23.012 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-25 04:37:23.012 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.012 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.012 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.012 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-25 04:37:23.012 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-25 04:37:23.012 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.012 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.012 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.012 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-25 04:37:23.013 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-25 04:37:23.013 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.013 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.013 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.013 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-25 04:37:23.014 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-25 04:37:23.014 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.014 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.014 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.014 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-25 04:37:23.014 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-25 04:37:23.014 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.014 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.014 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.014 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-25 04:37:23.015 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-25 04:37:23.015 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.015 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.015 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.015 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-25 04:37:23.016 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-25 04:37:23.016 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:23.016 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.016 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:23.016 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 04:37:24.691 +02:00 [INF] Executed DbCommand (1,675ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 04:37:24.691 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:24.691 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:24.691 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:24.691 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-25 04:37:24.696 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-25 04:37:24.697 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:24.700 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:24.700 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:24.700 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:24.700 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:24.701 +02:00 [INF] Applying migration '20251111134638__SeedRoles'.
2025-11-25 04:37:24.740 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:24.740 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:24.740 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:24.741 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:24.741 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:24.741 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:24.741 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:24.741 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'7821c460-c0c4-4230-a346-6522c95eac8d', N'Admin', N'ADMIN', N'ea5276a4-2171-4c2d-b856-859c89d45e22');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:37:24.766 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'7821c460-c0c4-4230-a346-6522c95eac8d', N'Admin', N'ADMIN', N'ea5276a4-2171-4c2d-b856-859c89d45e22');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:37:24.766 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:24.766 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:24.766 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:24.766 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'a4a764c1-6509-40aa-8e9b-6263147d103e', N'Doctor', N'DOCTOR', N'ad9b207d-ee6b-4491-b1ae-a7de21722e41');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:37:24.773 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'a4a764c1-6509-40aa-8e9b-6263147d103e', N'Doctor', N'DOCTOR', N'ad9b207d-ee6b-4491-b1ae-a7de21722e41');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:37:26.416 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:26.416 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:26.416 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:26.416 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'661c0d34-7d95-4c79-b8c8-b4ad9beb820c', N'Patient', N'PATIENT', N'67b3eb68-5fc1-435e-9e3a-e86431617b6f');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:37:26.427 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'661c0d34-7d95-4c79-b8c8-b4ad9beb820c', N'Patient', N'PATIENT', N'67b3eb68-5fc1-435e-9e3a-e86431617b6f');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 04:37:26.427 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:26.427 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:26.427 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:26.427 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-25 04:37:26.428 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-25 04:37:26.428 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:26.429 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:26.429 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:26.429 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:26.429 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:26.429 +02:00 [INF] Applying migration '20251111153509__SeedRolesAdmin'.
2025-11-25 04:37:26.545 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:26.545 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:26.545 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:26.546 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:26.546 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:26.546 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:26.546 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:26.546 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'cc3d4bc3-c691-46fa-b458-c951d934b2ed', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEFOXTMCyEho3nh3XJueTadAZcQO8O15t6U03bBRqEnzDrQZ80XgX9AgpDTtbq+xBww==', N'Admin', '2025-11-25T02:37:26.5076726Z', '2025-11-25T02:37:26.5076731Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'433250b1-d9a3-4a51-bcd5-9ab41f5cb070');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-25 04:37:27.954 +02:00 [INF] Executed DbCommand (1,408ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'cc3d4bc3-c691-46fa-b458-c951d934b2ed', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEFOXTMCyEho3nh3XJueTadAZcQO8O15t6U03bBRqEnzDrQZ80XgX9AgpDTtbq+xBww==', N'Admin', '2025-11-25T02:37:26.5076726Z', '2025-11-25T02:37:26.5076731Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'433250b1-d9a3-4a51-bcd5-9ab41f5cb070');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-25 04:37:27.954 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:27.954 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:27.954 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:27.954 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT 'cc3d4bc3-c691-46fa-b458-c951d934b2ed', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-25 04:37:27.961 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT 'cc3d4bc3-c691-46fa-b458-c951d934b2ed', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-25 04:37:27.961 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:27.961 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:27.961 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:27.961 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-25 04:37:27.962 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-25 04:37:29.415 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:29.416 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:29.416 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:29.416 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:29.416 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:29.416 +02:00 [INF] Applying migration '20251112174524_AddRefreshTokenColumns'.
2025-11-25 04:37:29.431 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:29.431 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:29.431 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:29.431 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:29.432 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:29.432 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.432 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.432 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-25 04:37:29.439 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-25 04:37:29.439 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:29.439 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.439 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.439 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-25 04:37:29.441 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-25 04:37:29.441 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:29.441 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.441 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.441 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-25 04:37:29.443 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-25 04:37:29.443 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:29.443 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:29.443 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:29.444 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:29.444 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:29.444 +02:00 [INF] Applying migration '20251113233448_update in banner and service and branch and specilization relations'.
2025-11-25 04:37:29.461 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:29.461 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:29.461 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:29.461 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:29.461 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:29.461 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.461 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.461 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-25 04:37:29.463 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-25 04:37:29.463 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:29.463 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.463 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:29.463 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-25 04:37:30.447 +02:00 [INF] Executed DbCommand (984ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-25 04:37:30.447 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.447 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.447 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.447 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-25 04:37:30.448 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-25 04:37:30.448 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.448 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.448 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.448 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-25 04:37:30.449 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-25 04:37:30.449 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.449 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.449 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.449 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-25 04:37:30.450 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-25 04:37:30.450 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.450 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.450 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.450 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-25 04:37:30.451 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-25 04:37:30.451 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.451 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.451 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.451 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-25 04:37:30.451 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-25 04:37:30.452 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.452 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.452 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.452 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-25 04:37:30.452 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-25 04:37:30.452 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:30.452 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.452 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:30.452 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-25 04:37:30.485 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-25 04:37:32.198 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:32.198 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:32.198 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:32.198 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-25 04:37:32.216 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-25 04:37:32.216 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:32.217 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:32.217 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:32.217 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-25 04:37:32.227 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-25 04:37:32.227 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:32.227 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:32.227 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:32.227 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-25 04:37:32.230 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-25 04:37:33.971 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:33.971 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.971 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.971 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-25 04:37:33.974 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-25 04:37:33.974 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:33.974 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.974 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.974 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-25 04:37:33.974 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-25 04:37:33.974 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:33.974 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.974 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.974 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-25 04:37:33.975 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-25 04:37:33.975 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:33.975 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.975 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.975 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:37:33.976 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:37:33.976 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:33.976 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.976 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:33.976 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:37:33.977 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 04:37:33.977 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:33.977 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.910 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1933ms).
2025-11-25 04:37:35.910 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-25 04:37:35.913 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-25 04:37:35.913 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:35.915 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:35.915 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:35.915 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:35.915 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:35.915 +02:00 [INF] Applying migration '20251115194238_add many to many relation between branch and doctor'.
2025-11-25 04:37:35.927 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:35.927 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:35.927 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:35.928 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:35.928 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:35.928 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.928 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.928 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-25 04:37:35.929 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-25 04:37:35.929 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:35.929 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.929 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.929 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-25 04:37:35.930 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-25 04:37:35.930 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:35.931 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.931 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.931 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-25 04:37:35.946 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-25 04:37:35.946 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:35.946 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.946 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:35.946 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:37:37.507 +02:00 [INF] Executed DbCommand (1,561ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 04:37:37.507 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:37.507 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.507 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.507 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-25 04:37:37.508 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-25 04:37:37.508 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:37.508 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.508 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.508 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-25 04:37:37.510 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-25 04:37:37.510 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:37.512 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:37.512 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:37.512 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:37.512 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:37.512 +02:00 [INF] Applying migration '20251115200531_remove relation between branch and user'.
2025-11-25 04:37:37.524 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:37.524 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:37.524 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:37.524 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:37.524 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:37.524 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.524 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-25 04:37:37.526 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-25 04:37:37.526 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:37.526 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.526 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.526 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-25 04:37:37.527 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-25 04:37:37.527 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:37.527 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.527 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:37.527 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-25 04:37:39.366 +02:00 [INF] Executed DbCommand (1,840ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-25 04:37:39.367 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:39.367 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:39.367 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:39.367 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-25 04:37:39.370 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-25 04:37:39.370 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:39.370 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:39.370 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:39.370 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:39.370 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:39.370 +02:00 [INF] Applying migration '20251116144214_MakeRefreshTokenNullable'.
2025-11-25 04:37:39.386 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:39.386 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:39.386 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:39.386 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:39.386 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:39.386 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:39.386 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:39.386 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-25 04:37:39.401 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-25 04:37:39.401 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:39.401 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:39.401 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:39.401 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-25 04:37:39.401 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-25 04:37:41.070 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:41.071 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:41.071 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:41.071 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:41.071 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:41.071 +02:00 [INF] Applying migration '20251116184844_editPatientModel'.
2025-11-25 04:37:41.083 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:41.083 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:41.083 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:41.083 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:41.083 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:41.083 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:41.083 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:41.083 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-25 04:37:41.100 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-25 04:37:41.101 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:41.101 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:41.101 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:41.101 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-25 04:37:41.111 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-25 04:37:41.111 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:41.112 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:41.112 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:41.112 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-25 04:37:41.113 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-25 04:37:41.113 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:41.113 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:41.113 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:42.914 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:42.915 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:42.915 +02:00 [INF] Applying migration '20251116220101_change Timeonly in schedule to DateTime'.
2025-11-25 04:37:42.928 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:42.928 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:42.929 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:42.929 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:42.929 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:42.929 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:42.929 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:42.929 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-25 04:37:42.946 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-25 04:37:42.946 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:42.946 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:42.946 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:42.946 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-25 04:37:42.957 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-25 04:37:42.957 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:42.957 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:42.957 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:42.957 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-25 04:37:42.960 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-25 04:37:42.960 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:42.960 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:42.960 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:42.960 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:42.960 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:44.847 +02:00 [INF] Applying migration '20251117115532_addPhotoToDoctor'.
2025-11-25 04:37:44.858 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:44.858 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:44.858 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:44.859 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:44.859 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:44.859 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.859 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.859 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:37:44.860 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:37:44.860 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:44.860 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.860 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.860 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-25 04:37:44.863 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-25 04:37:44.863 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:44.864 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:44.864 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:44.864 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:44.864 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:44.864 +02:00 [INF] Applying migration '20251118140238_editTimeOnlYToDateTime'.
2025-11-25 04:37:44.876 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:44.876 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:44.876 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:44.876 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:44.876 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:44.876 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.876 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.876 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-25 04:37:44.892 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-25 04:37:44.892 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:44.892 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.892 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:44.892 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-25 04:37:44.893 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-25 04:37:46.691 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:46.692 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:46.692 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:46.692 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:46.693 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:46.693 +02:00 [INF] Applying migration '20251118182335_improve schedule'.
2025-11-25 04:37:46.704 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:46.705 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:46.705 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:46.705 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:46.705 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:46.705 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.705 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.705 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-25 04:37:46.706 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-25 04:37:46.706 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:46.706 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.706 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.706 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-25 04:37:46.709 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-25 04:37:46.709 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:46.709 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:46.709 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:46.709 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:46.709 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:46.709 +02:00 [INF] Applying migration '20251119214128_resetPaswoard'.
2025-11-25 04:37:46.722 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:46.722 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:46.722 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:46.722 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:46.722 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:46.722 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.722 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:46.725 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 04:37:46.725 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:46.725 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.725 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:46.725 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-25 04:37:46.725 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-25 04:37:48.503 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:48.503 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.503 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.503 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-25 04:37:48.506 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-25 04:37:48.506 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:48.507 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:48.507 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:48.507 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:48.507 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:48.507 +02:00 [INF] Applying migration '20251120170506_create payment with paymob and update appoiment '.
2025-11-25 04:37:48.522 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:48.522 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:48.522 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:48.522 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:48.522 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:48.522 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.522 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.522 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-25 04:37:48.525 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-25 04:37:48.525 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:48.525 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.525 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-25 04:37:48.526 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-25 04:37:48.526 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:48.526 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.526 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:48.526 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-25 04:37:50.511 +02:00 [INF] Executed DbCommand (1,986ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-25 04:37:50.512 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:50.513 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:50.513 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:50.513 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:50.513 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:50.513 +02:00 [INF] Applying migration '20251122193859_update appoiment with payment method'.
2025-11-25 04:37:50.525 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:50.525 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:50.525 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:50.525 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:50.525 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:50.525 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:50.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:50.525 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-25 04:37:50.526 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-25 04:37:50.526 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:50.526 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:50.526 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:50.526 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-25 04:37:50.527 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-25 04:37:50.527 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:50.527 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:50.527 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:50.527 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:50.527 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:50.527 +02:00 [INF] Applying migration '20251122203902_convert type of fess in codtor to ba require'.
2025-11-25 04:37:50.540 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:50.540 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:50.540 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:50.540 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:50.540 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:50.540 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:50.540 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:50.540 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-25 04:37:50.558 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-25 04:37:52.570 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:52.570 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.570 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.570 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-25 04:37:52.574 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-25 04:37:52.574 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:52.574 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:52.574 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:52.574 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:52.574 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:52.575 +02:00 [INF] Applying migration '20251122214638_addImageInBranch'.
2025-11-25 04:37:52.588 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:52.588 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:52.588 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:52.589 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:52.589 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:52.589 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.589 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.589 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:37:52.590 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 04:37:52.590 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:52.590 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.590 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.590 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-25 04:37:52.593 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-25 04:37:52.593 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:52.593 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:52.594 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:52.594 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:52.594 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:52.594 +02:00 [INF] Applying migration '20251124135933_addDateinschudule'.
2025-11-25 04:37:52.607 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:52.607 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:52.607 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:52.607 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:52.607 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:52.607 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:52.608 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-25 04:37:54.331 +02:00 [INF] Executed DbCommand (1,724ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-25 04:37:54.331 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:54.331 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:54.331 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:54.331 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-25 04:37:54.332 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-25 04:37:54.332 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:54.332 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:54.332 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:54.332 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-25 04:37:54.335 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-25 04:37:54.335 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:54.336 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:54.336 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:54.336 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:54.337 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:54.337 +02:00 [INF] Applying migration '20251124164506_AddShiftToAppointments'.
2025-11-25 04:37:54.350 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:54.350 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:54.350 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:54.351 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:54.351 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:54.351 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:54.351 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:54.351 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-25 04:37:54.362 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-25 04:37:56.130 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:56.130 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.130 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.130 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:37:56.131 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:37:56.131 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:56.131 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.131 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.131 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-25 04:37:56.134 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-25 04:37:56.134 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:56.135 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:56.135 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:56.135 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:56.135 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:56.135 +02:00 [INF] Applying migration '20251124182248_editSchedule'.
2025-11-25 04:37:56.149 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:56.149 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:56.149 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:56.149 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:56.149 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:56.149 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.149 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.149 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-25 04:37:56.165 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-25 04:37:56.165 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:56.165 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.165 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.165 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:37:56.166 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 04:37:56.166 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:56.166 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.166 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:56.166 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-25 04:37:56.166 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-25 04:37:57.973 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:57.973 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:57.973 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:57.973 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:57.973 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:57.973 +02:00 [INF] Applying migration '20251125023609_update schedule so it has branchid'.
2025-11-25 04:37:57.986 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:57.986 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:57.986 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:37:57.986 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:37:57.986 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:57.986 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.986 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.986 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-25 04:37:57.988 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-25 04:37:57.988 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:57.988 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.988 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.988 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-25 04:37:57.989 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-25 04:37:57.989 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:57.989 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.989 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.989 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-25 04:37:57.990 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-25 04:37:57.990 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 04:37:57.990 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.990 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 04:37:57.990 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125023609_update schedule so it has branchid', N'8.0.21');
2025-11-25 04:37:57.993 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125023609_update schedule so it has branchid', N'8.0.21');
2025-11-25 04:37:57.993 +02:00 [DBG] Committing transaction.
2025-11-25 04:37:57.993 +02:00 [DBG] Committed transaction.
2025-11-25 04:37:57.993 +02:00 [DBG] Disposing transaction.
2025-11-25 04:37:57.993 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:57.994 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:37:57.995 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:37:57.995 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:37:57.995 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:38:36.287 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-25 04:38:36.455 +02:00 [DBG] Hosting starting
2025-11-25 04:38:36.492 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 04:38:36.505 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-25 04:38:36.519 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-25 04:38:36.521 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-25 04:38:36.523 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-25 04:38:36.531 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-25 04:38:36.541 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-25 04:38:36.543 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-25 04:38:36.544 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-25 04:38:36.551 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-25 04:38:36.556 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 04:38:36.560 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-25 04:38:36.563 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 04:38:36.568 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-25 04:38:36.572 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-25 04:38:36.575 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-25 04:38:36.577 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-25 04:38:36.586 +02:00 [DBG] Middleware loaded
2025-11-25 04:38:36.588 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-25 04:38:36.590 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-25 04:38:36.685 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-25 04:38:36.792 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-25 04:38:36.794 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-25 04:38:36.794 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-25 04:38:36.795 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-25 04:38:36.796 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-25 04:38:36.796 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-25 04:38:36.871 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 04:38:36.872 +02:00 [INF] Hosting environment: Development
2025-11-25 04:38:36.873 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-25 04:38:36.874 +02:00 [DBG] Hosting started
2025-11-25 04:38:37.080 +02:00 [DBG] Connection id "0HNHBPEU4SU9A" accepted.
2025-11-25 04:38:37.081 +02:00 [DBG] Connection id "0HNHBPEU4SU9B" accepted.
2025-11-25 04:38:37.082 +02:00 [DBG] Connection id "0HNHBPEU4SU9A" started.
2025-11-25 04:38:37.083 +02:00 [DBG] Connection id "0HNHBPEU4SU9B" started.
2025-11-25 04:38:37.094 +02:00 [DBG] Connection id "0HNHBPEU4SU9B" received FIN.
2025-11-25 04:38:37.094 +02:00 [DBG] Connection id "0HNHBPEU4SU9A" received FIN.
2025-11-25 04:38:37.115 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 04:38:37.115 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 04:38:37.307 +02:00 [DBG] Connection id "0HNHBPEU4SU9B" stopped.
2025-11-25 04:38:37.307 +02:00 [DBG] Connection id "0HNHBPEU4SU9A" stopped.
2025-11-25 04:38:37.311 +02:00 [DBG] Connection id "0HNHBPEU4SU9B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 04:38:37.311 +02:00 [DBG] Connection id "0HNHBPEU4SU9A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 04:38:37.420 +02:00 [DBG] Connection id "0HNHBPEU4SU9C" accepted.
2025-11-25 04:38:37.422 +02:00 [DBG] Connection id "0HNHBPEU4SU9C" started.
2025-11-25 04:38:37.468 +02:00 [DBG] Connection 0HNHBPEU4SU9C established using the following protocol: "Tls13"
2025-11-25 04:38:37.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-25 04:38:37.713 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-25 04:38:37.744 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-25 04:38:37.745 +02:00 [DBG] Request did not match any endpoints
2025-11-25 04:38:37.789 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-25 04:38:37.790 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-25 04:38:37.810 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-25 04:38:37.811 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-25 04:38:37.816 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 276.9346ms
2025-11-25 04:38:37.879 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-25 04:38:37.879 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-25 04:38:37.933 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-25 04:38:37.934 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 55.8278ms
2025-11-25 04:38:37.973 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.8475ms
2025-11-25 04:38:38.005 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-25 04:38:38.009 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-25 04:38:38.010 +02:00 [DBG] Request did not match any endpoints
2025-11-25 04:38:38.043 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.5919ms
2025-11-25 04:38:41.346 +02:00 [DBG] Connection id "0HNHBPEU4SU9C" received FIN.
2025-11-25 04:38:41.350 +02:00 [DBG] The connection queue processing loop for 0HNHBPEU4SU9C completed.
2025-11-25 04:38:41.352 +02:00 [DBG] Connection id "0HNHBPEU4SU9C" is closed. The last processed stream ID was 7.
2025-11-25 04:38:41.353 +02:00 [DBG] Connection id "0HNHBPEU4SU9C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 04:38:41.355 +02:00 [DBG] Connection id "0HNHBPEU4SU9C" stopped.
2025-11-25 04:39:10.285 +02:00 [DBG] Connection id "0HNHBPEU4SU9D" accepted.
2025-11-25 04:39:10.285 +02:00 [DBG] Connection id "0HNHBPEU4SU9D" received FIN.
2025-11-25 04:39:10.292 +02:00 [DBG] Connection id "0HNHBPEU4SU9D" started.
2025-11-25 04:39:10.301 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" accepted.
2025-11-25 04:39:10.305 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 04:39:10.306 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" started.
2025-11-25 04:39:10.308 +02:00 [DBG] Connection id "0HNHBPEU4SU9D" stopped.
2025-11-25 04:39:10.310 +02:00 [DBG] Connection id "0HNHBPEU4SU9D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 04:39:10.322 +02:00 [DBG] Connection 0HNHBPEU4SU9E established using the following protocol: "Tls13"
2025-11-25 04:39:10.328 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 145
2025-11-25 04:39:10.337 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 04:39:10.342 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 04:39:10.346 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 04:39:10.350 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:39:10.397 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:39:10.400 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 04:39:10.432 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 04:39:10.435 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:39:10.437 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:39:10.438 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:39:10.440 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:39:10.441 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:39:10.445 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 04:39:10.613 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 04:39:10.880 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 04:39:10.896 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 04:39:10.899 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 04:39:10.903 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:39:10.912 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000001": started reading request body.
2025-11-25 04:39:10.914 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000001": done reading request body.
2025-11-25 04:39:10.925 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 04:39:10.926 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 04:39:10.927 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 04:39:10.929 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 04:39:10.940 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 04:39:10.945 +02:00 [INF] Create Branch called at "2025-11-25T04:39:10.9449674+02:00"
2025-11-25 04:39:10.948 +02:00 [INF] Creating new branch with name: adam7
2025-11-25 04:39:11.523 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 04:39:11.525 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 04:39:11.526 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 04:39:11.527 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 04:39:11.528 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 04:39:11.646 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:39:11.648 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 04:39:11.809 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:39:11.862 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-25 04:39:12.662 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:39:12.689 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:39:12.708 +02:00 [DBG] Created DbConnection. (17ms).
2025-11-25 04:39:12.711 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.032 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.036 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:13.050 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-11-25 04:39:13.052 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-11-25 04:39:13.059 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 04:39:13.114 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 04:39:13.127 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.133 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-25 04:39:13.137 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.143 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (5ms).
2025-11-25 04:39:13.185 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:13.253 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:13.260 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:13.274 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:13.284 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:13.286 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:13.287 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:13.357 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.359 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.362 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:13.363 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:13.368 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-25 04:39:13.372 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:39:13.403 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:39:13.414 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:39:13.421 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.422 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-25 04:39:13.424 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.425 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:13.432 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:13.434 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:39:13.436 +02:00 [INF] Branch created successfully with ID: 1
2025-11-25 04:39:13.444 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:39:13.447 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:39:13.447 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:39:13.448 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:39:13.449 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:39:13.450 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 04:39:13.482 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[1],action=[GetById],controller=[Branch])
2025-11-25 04:39:13.487 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/1 and 
2025-11-25 04:39:13.490 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/1
2025-11-25 04:39:13.508 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 3061.916ms
2025-11-25 04:39:13.510 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 04:39:13.512 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:39:13.515 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:39:13.519 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:13.521 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-25 04:39:13.523 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 3194.5719ms
2025-11-25 04:39:19.860 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 04:39:19.864 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 04:39:19.865 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 04:39:19.866 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 04:39:19.867 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:39:19.868 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:39:19.869 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 04:39:19.875 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 04:39:19.876 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:39:19.877 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:39:19.879 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:39:19.880 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:39:19.881 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:39:19.882 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 04:39:19.885 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 04:39:19.886 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 04:39:19.888 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 04:39:19.889 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:39:19.891 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000002": started reading request body.
2025-11-25 04:39:19.892 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000002": done reading request body.
2025-11-25 04:39:19.897 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 04:39:19.898 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 04:39:19.899 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 04:39:19.900 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 04:39:19.904 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 04:39:19.906 +02:00 [INF] create Specialization called at "2025-11-25T04:39:19.9064343+02:00"
2025-11-25 04:39:19.909 +02:00 [INF] Adding specialization: legg
2025-11-25 04:39:19.945 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:39:19.952 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __branchIds_0.Contains(b.BranchId))'
2025-11-25 04:39:20.050 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT b0.value
            FROM OPENJSON(@__branchIds_0) WITH (value int '') AS b0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:39:20.062 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:39:20.063 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 04:39:20.064 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.065 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.066 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:20.067 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:20.072 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-25 04:39:20.073 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 04:39:20.097 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 04:39:20.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:20.106 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.107 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-25 04:39:20.108 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.109 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:20.114 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-25 04:39:20.122 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-25 04:39:20.137 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-25 04:39:20.145 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 04:39:20.208 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 04:39:20.215 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 5], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 6] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Branch.Address (string) MaxLength(250), 8], [Property: Branch.BranchName (string) Required MaxLength(150), 9], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 10], [Property: Branch.Description (string), 11], [Property: Branch.Email (string) MaxLength(200), 12], [Property: Branch.ImageURL (string) MaxLength(300), 13], [Property: Branch.Phone (string) MaxLength(25), 14], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15] }
            4 -> 5
            5 -> 6
            6 -> 7
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            9 -> 16
            10 -> 26
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:39:20.221 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.223 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.224 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:20.225 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:20.226 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:20.228 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 04:39:20.244 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 04:39:20.247 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.248 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:20.249 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.250 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:20.255 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:20.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:20.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:20.293 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:20.298 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:20.299 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:20.300 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:20.301 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:20.310 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.312 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.316 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:39:20.322 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:39:20.324 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:20.324 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:20.326 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:20.327 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 04:39:20.331 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 04:39:20.333 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:39:20.337 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:39:20.340 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.341 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 04:39:20.342 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:20.343 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:20.344 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:20.345 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 04:39:20.348 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 04:39:20.350 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.351 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:20.354 +02:00 [DBG] Committing transaction.
2025-11-25 04:39:20.358 +02:00 [DBG] Committed transaction.
2025-11-25 04:39:20.360 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.361 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:20.363 +02:00 [DBG] Disposing transaction.
2025-11-25 04:39:20.364 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:20.367 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:20.368 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 04:39:20.369 +02:00 [INF] Specialization 'legg' added successfully
2025-11-25 04:39:20.378 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:39:20.380 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:39:20.380 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:39:20.381 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:39:20.382 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:39:20.383 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-25 04:39:20.384 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[1],action=[Get],controller=[Specializations])
2025-11-25 04:39:20.385 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/1 and 
2025-11-25 04:39:20.387 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/1
2025-11-25 04:39:20.392 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 509.5326ms
2025-11-25 04:39:20.393 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 04:39:20.393 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:39:20.394 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:39:20.395 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:20.396 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:39:20.397 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 536.9373ms
2025-11-25 04:39:31.009 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 371
2025-11-25 04:39:31.012 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-25 04:39:31.013 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-25 04:39:31.014 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 04:39:31.016 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:39:31.019 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:39:31.020 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 04:39:31.025 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 04:39:31.026 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:39:31.027 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:39:31.028 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:39:31.030 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:39:31.031 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:39:31.033 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 04:39:31.054 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 04:39:31.056 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 04:39:31.057 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-25 04:39:31.058 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:39:31.067 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000003": started reading request body.
2025-11-25 04:39:31.068 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000003": done reading request body.
2025-11-25 04:39:31.075 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-25 04:39:31.077 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 04:39:31.078 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 04:39:31.079 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 04:39:31.085 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 04:39:31.088 +02:00 [INF] add doctor called at "2025-11-25T04:39:31.0879959+02:00"
2025-11-25 04:39:31.091 +02:00 [INF] Adding new doctor: Walaa, Email: walaa.elbishlawy@gmail.com
2025-11-25 04:39:31.103 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:39:31.109 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:39:31.110 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:39:31.111 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.112 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.113 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:39:31.115 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:39:31.131 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .FirstOrDefault(e => EF.Property<int>(e, "SpecializationId") == __p_0)'
2025-11-25 04:39:31.142 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Specialization>(
    asyncEnumerable: new SingleQueryingEnumerable<Specialization>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            SELECT TOP(1) s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt
            FROM Specializations AS s
            WHERE s.SpecializationId == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:31.146 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.147 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.148 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.150 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 04:39:31.166 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 04:39:31.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.171 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.172 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-25 04:39:31.177 +02:00 [INF] Registration attempt for email: walaa.elbishlawy@gmail.com, role: Doctor
2025-11-25 04:39:31.182 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-25 04:39:31.188 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:31.193 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.194 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.195 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.196 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 04:39:31.205 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 04:39:31.207 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.209 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.213 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-25 04:39:31.218 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:31.220 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.224 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:31.241 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:31.243 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.244 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.249 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-11-25 04:39:31.254 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:31.256 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.257 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.258 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.259 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 04:39:31.269 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 04:39:31.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.284 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.285 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-25 04:39:31.403 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.404 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.406 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.407 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:31.414 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:31.416 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.417 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.487 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.488 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.504 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:31.506 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.507 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.508 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:31.516 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 04:39:31.528 +02:00 [DBG] Created transaction savepoint.
2025-11-25 04:39:31.529 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.530 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.533 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-25 04:39:31.534 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 04:39:31.540 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 04:39:31.542 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.543 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.546 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.547 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:39:31.552 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-11-25 04:39:31.556 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:31.557 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.558 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.559 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.560 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:31.564 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:31.566 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.567 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.571 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-11-25 04:39:31.576 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:31.579 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.580 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.581 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.582 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 04:39:31.589 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 04:39:31.590 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.591 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.595 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.596 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.597 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.598 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:31.600 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:31.602 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.603 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.611 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.612 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.613 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.614 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:31.619 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:31.622 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.623 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:31.627 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.629 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.630 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:31.631 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.632 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.633 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:31.643 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 04:39:31.644 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 04:39:31.646 +02:00 [DBG] Created transaction savepoint.
2025-11-25 04:39:31.647 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.648 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.649 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:31.650 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 04:39:31.675 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 04:39:31.681 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.683 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-25 04:39:31.685 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.688 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.691 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 04:39:31.693 +02:00 [INF] User walaa.elbishlawy@gmail.com assigned to role Doctor
2025-11-25 04:39:31.696 +02:00 [INF] Registration successful for user walaa.elbishlawy@gmail.com with ID ebd41087-dd04-412e-8c6d-a379862241dd
2025-11-25 04:39:31.705 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __ids_0
        .Contains(b.BranchId))'
2025-11-25 04:39:31.718 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT i.value
            FROM OPENJSON(@__ids_0) WITH (value int '') AS i)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:39:31.720 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.722 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.725 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-25 04:39:31.726 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 04:39:31.736 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 04:39:31.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.741 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.743 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-25 04:39:31.752 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Doctor.DoctorId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.783 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.786 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.790 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.794 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.799 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.800 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.812 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:31.815 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.816 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:31.817 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:31.818 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 04:39:31.820 +02:00 [DBG] Created transaction savepoint.
2025-11-25 04:39:31.820 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.821 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.824 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-25 04:39:31.825 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-25 04:39:31.834 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-25 04:39:31.836 +02:00 [DBG] The foreign key property 'Doctor.DoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:39:31.839 +02:00 [DBG] The foreign key property 'BranchDoctor.DoctorsDoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:39:31.840 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.841 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-25 04:39:31.842 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:31.843 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:31.844 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:31.845 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-25 04:39:31.849 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-25 04:39:31.851 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.852 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-25 04:39:31.855 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.857 +02:00 [DBG] An entity of type 'BranchDoctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:31.858 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 04:39:31.859 +02:00 [DBG] Committing transaction.
2025-11-25 04:39:31.860 +02:00 [DBG] Committed transaction.
2025-11-25 04:39:31.860 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:31.862 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:35.070 +02:00 [INF] Sent registration email to walaa.elbishlawy@gmail.com
2025-11-25 04:39:35.077 +02:00 [DBG] Disposing transaction.
2025-11-25 04:39:35.083 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:39:35.086 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:39:35.086 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:39:35.087 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:39:35.087 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:39:35.088 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-25 04:39:35.096 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 4063.6023ms
2025-11-25 04:39:35.098 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 04:39:35.099 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:39:35.100 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:39:35.101 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:35.102 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:39:35.104 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 200 null application/json; charset=utf-8 4094.601ms
2025-11-25 04:39:49.680 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/register - application/json 164
2025-11-25 04:39:49.682 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-11-25 04:39:49.683 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-11-25 04:39:49.684 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-25 04:39:49.684 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:39:49.685 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:39:49.685 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-25 04:39:49.689 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(Hospital.Domain.Models.RegisterModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 04:39:49.690 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:39:49.691 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:39:49.692 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:39:49.693 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:39:49.694 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:39:49.695 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 04:39:49.698 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 04:39:49.699 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-25 04:39:49.700 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' using the name '' in request data ...
2025-11-25 04:39:49.701 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:39:49.702 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000004": started reading request body.
2025-11-25 04:39:49.703 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000004": done reading request body.
2025-11-25 04:39:49.705 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.RegisterModel'
2025-11-25 04:39:49.705 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-25 04:39:49.706 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-25 04:39:49.707 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-25 04:39:49.709 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-25 04:39:49.711 +02:00 [INF] Register called at "2025-11-25T04:39:49.7108262+02:00"
2025-11-25 04:39:49.713 +02:00 [INF] Registration attempt for email: nour210@gmail.com, role: Patient
2025-11-25 04:39:49.715 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:39:49.717 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:39:49.718 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:39:49.719 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.720 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.721 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.721 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.724 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 04:39:49.729 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 04:39:49.730 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.731 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.733 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.734 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:49.735 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.736 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.737 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.738 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:49.744 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:49.745 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.746 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-25 04:39:49.747 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.748 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:49.750 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.751 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.751 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.752 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.753 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.754 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 04:39:49.759 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 04:39:49.761 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:49.762 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.763 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 04:39:49.764 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.765 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.847 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.848 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.849 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.850 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.852 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:49.853 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:49.860 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:49.862 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.863 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.865 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.866 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.867 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:49.869 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:49.870 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:49.871 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:49.872 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:49.873 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:49.874 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.876 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.877 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.878 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.879 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:49.881 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 04:39:49.903 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 04:39:49.905 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.907 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.908 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.910 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.911 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:49.913 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:39:49.914 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.916 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.917 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.918 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.919 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.920 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:49.925 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:49.927 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.928 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.929 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.930 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.932 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.933 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.935 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.935 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.937 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:49.938 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 04:39:49.941 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 04:39:49.942 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.943 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.945 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.946 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.948 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.949 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.950 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.951 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.952 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:49.953 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:49.955 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 04:39:49.957 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.958 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.959 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.960 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:49.963 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.964 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.965 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.966 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.967 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.968 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:49.972 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:49.974 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.975 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:49.976 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.977 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:49.979 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:49.980 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:49.981 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:49.981 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:49.982 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:49.983 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:49.984 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 04:39:49.985 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.986 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.987 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 04:39:49.987 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 04:39:49.988 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:49.989 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:49.990 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:49.991 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 04:39:49.997 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 04:39:49.998 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:49.999 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-25 04:39:50.000 +02:00 [DBG] Committing transaction.
2025-11-25 04:39:50.011 +02:00 [DBG] Committed transaction.
2025-11-25 04:39:50.012 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:50.013 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:50.014 +02:00 [DBG] Disposing transaction.
2025-11-25 04:39:50.016 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:50.017 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:50.018 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 04:39:50.019 +02:00 [INF] User nour210@gmail.com assigned to role Patient
2025-11-25 04:39:50.023 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:50.033 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:50.035 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:50.037 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:50.040 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:50.041 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:50.042 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:50.043 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:50.045 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:50.046 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:50.047 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:50.048 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:50.049 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:50.050 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 04:39:50.059 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 04:39:50.061 +02:00 [DBG] The foreign key property 'Patient.PatientId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:39:50.064 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:50.065 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-25 04:39:50.067 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:50.068 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:50.070 +02:00 [DBG] An entity of type 'Patient' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:50.071 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:39:50.072 +02:00 [INF] Patient record created for user e9010162-2722-4a04-9814-9b948c0bb637
2025-11-25 04:39:50.073 +02:00 [INF] Registration successful for user nour210@gmail.com with ID e9010162-2722-4a04-9814-9b948c0bb637
2025-11-25 04:39:50.075 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:39:50.077 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:39:50.077 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:39:50.078 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:39:50.079 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:39:50.080 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Auth.RegisterDto'.
2025-11-25 04:39:50.083 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RegisterAsync (Hospital) in 387.9447ms
2025-11-25 04:39:50.084 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-25 04:39:50.085 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:39:50.086 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:39:50.087 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:50.088 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:39:50.089 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/register - 200 null application/json; charset=utf-8 409.5989ms
2025-11-25 04:39:53.158 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 64
2025-11-25 04:39:53.161 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 04:39:53.162 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 04:39:53.163 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 04:39:53.165 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:39:53.165 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:39:53.166 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 04:39:53.169 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 04:39:53.171 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:39:53.173 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:39:53.174 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:39:53.175 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:39:53.176 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:39:53.177 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 04:39:53.179 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 04:39:53.181 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 04:39:53.182 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 04:39:53.183 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:39:53.184 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000005": started reading request body.
2025-11-25 04:39:53.185 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000005": done reading request body.
2025-11-25 04:39:53.186 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 04:39:53.187 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 04:39:53.188 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 04:39:53.189 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 04:39:53.190 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 04:39:53.192 +02:00 [INF] Login called at "2025-11-25T04:39:53.1920739+02:00"
2025-11-25 04:39:53.195 +02:00 [INF] Login attempt for email: nour210@gmail.com
2025-11-25 04:39:53.196 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:39:53.198 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:39:53.199 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:39:53.199 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.200 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.201 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.202 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:53.203 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.204 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 04:39:53.209 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 04:39:53.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:53.213 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.214 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 04:39:53.215 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.216 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:53.287 +02:00 [DBG] Creating JWT token for user e9010162-2722-4a04-9814-9b948c0bb637
2025-11-25 04:39:53.292 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-25 04:39:53.297 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:39:53.299 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.300 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.301 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.302 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:53.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.304 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-25 04:39:53.308 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-25 04:39:53.310 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.311 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:53.312 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.313 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:53.321 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-25 04:39:53.326 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:39:53.327 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.329 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.330 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.331 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:53.332 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.333 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 04:39:53.339 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 04:39:53.341 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.343 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:53.344 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.346 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:53.355 +02:00 [DBG] JWT token created for user e9010162-2722-4a04-9814-9b948c0bb637, expires at "2025-11-25T03:39:53.0000000Z"
2025-11-25 04:39:53.357 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.358 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.359 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.360 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.362 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:53.364 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 04:39:53.369 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 04:39:53.371 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.373 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:53.374 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.376 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:53.378 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.380 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.381 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.382 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.383 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:53.384 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:53.391 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 04:39:53.393 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.394 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:53.396 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.397 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:53.399 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:53.401 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:53.402 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:53.403 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:39:53.404 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:39:53.405 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:39:53.407 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.408 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.409 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.410 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.412 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:39:53.413 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-25 04:39:53.424 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-25 04:39:53.426 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.427 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:39:53.429 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.430 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:39:53.432 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:53.434 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:39:53.462 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-25 04:39:53.467 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:39:53.469 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.470 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.471 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:39:53.472 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:39:53.473 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:39:53.474 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-25 04:39:53.479 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-25 04:39:53.482 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:53.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:39:53.484 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.485 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-25 04:39:53.486 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.487 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:39:53.488 +02:00 [INF] Patient 1 logged in successfully
2025-11-25 04:39:53.489 +02:00 [INF] User nour210@gmail.com logged in successfully with roles: Patient
2025-11-25 04:39:53.490 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:39:53.491 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:39:53.491 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:39:53.492 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:39:53.492 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:39:53.493 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-25 04:39:53.497 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 319.7258ms
2025-11-25 04:39:53.498 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 04:39:53.498 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:39:53.499 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:39:53.500 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:39:53.501 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:39:53.502 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 343.8649ms
2025-11-25 04:40:26.910 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 91
2025-11-25 04:40:26.912 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:40:26.913 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:40:26.914 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:40:26.915 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:40:26.916 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:40:26.917 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:40:26.920 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:40:26.921 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:40:26.922 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:40:26.923 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:40:26.924 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:40:26.925 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:40:26.926 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:40:26.928 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:40:26.929 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:40:26.930 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-25 04:40:26.931 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:40:26.935 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000006": started reading request body.
2025-11-25 04:40:26.936 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000006": done reading request body.
2025-11-25 04:40:26.945 +02:00 [DBG] JSON input formatter threw an exception: '"' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 4 | BytePositionInLine: 2.
2025-11-25 04:40:26.946 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:40:26.948 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:40:26.949 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:40:26.951 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:40:26.953 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-25 04:40:26.955 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-25 04:40:26.956 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:40:26.957 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:40:26.958 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-25 04:40:26.960 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-25 04:40:26.961 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-25 04:40:26.986 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 59.2725ms
2025-11-25 04:40:26.987 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:40:26.988 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:40:26.989 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 400 null application/problem+json; charset=utf-8 79.2615ms
2025-11-25 04:40:34.708 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-25 04:40:34.710 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:40:34.711 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:40:34.712 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:40:34.713 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:40:34.714 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:40:34.715 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:40:34.716 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:40:34.717 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:40:34.718 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:40:34.719 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:40:34.720 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:40:34.721 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:40:34.722 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:40:34.724 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:40:34.725 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:40:34.726 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-25 04:40:34.726 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:40:34.727 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000007": started reading request body.
2025-11-25 04:40:34.728 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000007": done reading request body.
2025-11-25 04:40:34.730 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-25 04:40:34.730 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:40:34.731 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:40:34.732 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:40:34.735 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:40:34.738 +02:00 [INF] create schedule  called at "2025-11-25T04:40:34.7384058+02:00"
2025-11-25 04:40:34.741 +02:00 [INF] Creating schedule for DoctorId: 1, Day: friday, Shift: "Afternoon"
2025-11-25 04:40:34.744 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:40:34.747 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-25 04:40:34.748 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 04:40:34.749 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-25 04:40:34.750 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 04:40:34.751 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-25 04:40:34.764 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 04:40:34.770 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
                8 -> 38
                9 -> 39
                10 -> 40
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.BranchId (int) Required FK Index, 50], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 52], [Property: Schedule.DoctorId (int) Required FK Index, 53], [Property: Schedule.EndTime (DateTime) Required, 54], [Property: Schedule.Shift (AppointmentShift) Required, 55], [Property: Schedule.StartTime (DateTime) Required, 56], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 57] }
                12 -> 49
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:40:34.772 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:40:34.773 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:40:34.774 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.775 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.776 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:40:34.776 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:40:34.777 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:40:34.779 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:40:34.794 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:40:34.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.799 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.801 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.808 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.809 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-25 04:40:34.810 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.810 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:40:34.824 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DayOfWeek.ToLower() == __ToLower_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)'
2025-11-25 04:40:34.826 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-25 04:40:34.827 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 04:40:34.836 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        WHERE LOWER(s.DayOfWeek) == @__ToLower_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:40:34.840 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.841 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.842 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:40:34.842 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:40:34.843 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:40:34.844 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 04:40:34.850 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 04:40:34.851 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.852 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-25 04:40:34.853 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.854 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:40:34.858 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.869 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.871 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.872 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.872 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:40:34.878 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:40:34.880 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:40:34.880 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:40:34.882 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:40:34.883 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.884 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.885 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:40:34.886 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:40:34.888 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:40:34.889 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:40:34.893 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:40:34.895 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:40:34.897 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.897 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-25 04:40:34.899 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.899 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:40:34.901 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:40:34.903 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:40:34.904 +02:00 [INF] Schedule created successfully for DoctorId 1
2025-11-25 04:40:34.907 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:40:34.909 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:40:34.909 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:40:34.910 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:40:34.910 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:40:34.911 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-25 04:40:34.914 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 192.3628ms
2025-11-25 04:40:34.915 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:40:34.916 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:40:34.917 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:40:34.918 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:40:34.919 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:40:34.920 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 212.0728ms
2025-11-25 04:41:31.577 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 146
2025-11-25 04:41:31.579 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 04:41:31.580 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 04:41:31.581 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 04:41:31.581 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:41:31.582 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:41:31.583 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 04:41:31.583 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 04:41:31.585 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:41:31.586 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:41:31.587 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:41:31.588 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:41:31.589 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:41:31.590 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 04:41:31.592 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 04:41:31.598 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 04:41:31.599 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 04:41:31.600 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:41:31.601 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000008": started reading request body.
2025-11-25 04:41:31.603 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000008": done reading request body.
2025-11-25 04:41:31.605 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 04:41:31.606 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 04:41:31.607 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 04:41:31.608 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 04:41:31.610 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 04:41:31.611 +02:00 [INF] Create Branch called at "2025-11-25T04:41:31.6110008+02:00"
2025-11-25 04:41:31.611 +02:00 [INF] Creating new branch with name: adam77
2025-11-25 04:41:31.613 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:41:31.615 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:41:31.615 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:41:31.616 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.618 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.619 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:41:31.620 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:41:31.621 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:41:31.622 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 04:41:31.627 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 04:41:31.628 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.630 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:41:31.631 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.632 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:41:31.635 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:31.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:31.638 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:41:31.639 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:41:31.640 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:41:31.641 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:41:31.642 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:41:31.644 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.645 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.646 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:41:31.647 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:41:31.649 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:41:31.650 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:41:31.653 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:41:31.655 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:41:31.656 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.658 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 04:41:31.659 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.660 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:41:31.661 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:31.663 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:41:31.664 +02:00 [INF] Branch created successfully with ID: 2
2025-11-25 04:41:31.665 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:41:31.667 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:41:31.667 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:41:31.668 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:41:31.669 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:41:31.670 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 04:41:31.671 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[2],action=[GetById],controller=[Branch])
2025-11-25 04:41:31.673 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/2 and 
2025-11-25 04:41:31.674 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/2
2025-11-25 04:41:31.676 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 85.3764ms
2025-11-25 04:41:31.677 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 04:41:31.678 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:41:31.679 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:41:31.680 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:31.681 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:41:31.682 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 106.4217ms
2025-11-25 04:41:38.881 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Schedule - application/json 93
2025-11-25 04:41:38.883 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:41:38.885 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:41:38.886 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)'
2025-11-25 04:41:38.887 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:41:38.888 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:41:38.889 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)'
2025-11-25 04:41:38.893 +02:00 [INF] Route matched with {action = "Update", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Update(Hospital.Application.DTO.Schedule.UpdateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:41:38.895 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:41:38.896 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:41:38.898 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:41:38.900 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:41:38.901 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:41:38.903 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:41:38.907 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:41:38.909 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto' ...
2025-11-25 04:41:38.910 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto' using the name '' in request data ...
2025-11-25 04:41:38.911 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:41:38.917 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000009": started reading request body.
2025-11-25 04:41:38.918 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:00000009": done reading request body.
2025-11-25 04:41:38.922 +02:00 [DBG] JSON input formatter threw an exception: '"' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 4 | BytePositionInLine: 2.
2025-11-25 04:41:38.923 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'.
2025-11-25 04:41:38.924 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'.
2025-11-25 04:41:38.925 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto' ...
2025-11-25 04:41:38.927 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'.
2025-11-25 04:41:38.928 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-25 04:41:38.929 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-25 04:41:38.930 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:41:38.931 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:41:38.932 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-25 04:41:38.934 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-25 04:41:38.935 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-25 04:41:38.936 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Update (Hospital) in 33.726ms
2025-11-25 04:41:38.938 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)'
2025-11-25 04:41:38.939 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:41:38.939 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Schedule - 400 null application/problem+json; charset=utf-8 59.0079ms
2025-11-25 04:41:43.920 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Schedule - application/json 94
2025-11-25 04:41:43.922 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:41:43.922 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:41:43.923 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)'
2025-11-25 04:41:43.924 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:41:43.925 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:41:43.925 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)'
2025-11-25 04:41:43.926 +02:00 [INF] Route matched with {action = "Update", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Update(Hospital.Application.DTO.Schedule.UpdateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:41:43.927 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:41:43.928 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:41:43.929 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:41:43.930 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:41:43.931 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:41:43.932 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:41:43.933 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:41:43.934 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto' ...
2025-11-25 04:41:43.935 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto' using the name '' in request data ...
2025-11-25 04:41:43.937 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:41:43.938 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:0000000A": started reading request body.
2025-11-25 04:41:43.938 +02:00 [DBG] Connection id "0HNHBPEU4SU9E", Request id "0HNHBPEU4SU9E:0000000A": done reading request body.
2025-11-25 04:41:43.940 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'
2025-11-25 04:41:43.940 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'.
2025-11-25 04:41:43.941 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'.
2025-11-25 04:41:43.942 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto' ...
2025-11-25 04:41:43.944 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.UpdateScheduleDto'.
2025-11-25 04:41:43.946 +02:00 [INF] update schedule  called at "2025-11-25T04:41:43.9460242+02:00"
2025-11-25 04:41:43.948 +02:00 [INF] Updating schedule with ScheduleId: 1
2025-11-25 04:41:43.950 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:41:43.952 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(s => s.ScheduleId == __scheduleId_0)'
2025-11-25 04:41:43.953 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-25 04:41:43.954 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 04:41:43.960 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Schedule>(
    asyncEnumerable: new SingleQueryingEnumerable<Schedule>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
                1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            SELECT TOP(1) s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Schedules AS s
            INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
            INNER JOIN Users AS u ON d.UserId == u.Id
            WHERE s.ScheduleId == @__scheduleId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 04:41:43.962 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:41:43.962 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:41:43.963 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:43.964 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:43.965 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:41:43.966 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:41:43.967 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:41:43.967 +02:00 [DBG] Executing DbCommand [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[ScheduleId] = @__scheduleId_0
2025-11-25 04:41:43.977 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[ScheduleId] = @__scheduleId_0
2025-11-25 04:41:43.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:43.981 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:43.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:43.983 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:43.984 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:43.986 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:43.987 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-25 04:41:43.988 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:43.989 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:41:43.992 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:43.993 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:43.994 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:41:43.995 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:41:43.996 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:41:43.997 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 04:41:44.005 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 04:41:44.007 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.009 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:41:44.010 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.012 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:41:44.014 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.015 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.016 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:41:44.017 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:41:44.018 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:41:44.019 +02:00 [DBG] Executing DbCommand [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[ScheduleId] = @__scheduleId_0
2025-11-25 04:41:44.021 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[ScheduleId] = @__scheduleId_0
2025-11-25 04:41:44.023 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.024 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:41:44.025 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.026 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:41:44.028 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.029 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.030 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:41:44.031 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:41:44.032 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:41:44.033 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:41:44.043 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:41:44.046 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:44.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:44.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:44.050 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:44.052 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:41:44.053 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.054 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 04:41:44.055 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.056 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:41:44.058 +02:00 [WRN] Doctor with ID 1 is not associated with BranchId 2
2025-11-25 04:41:44.216 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Update (Hospital) in 284.0486ms
2025-11-25 04:41:44.219 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Update (Hospital)'
2025-11-25 04:41:44.282 +02:00 [ERR]  Exception caught: Doctor is not associated with the specified branch.
System.InvalidOperationException: Doctor is not associated with the specified branch.
   at Hospital.Infrastructure.Services.ScheduleService.UpdateAsync(UpdateScheduleDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\ScheduleService.cs:line 117
   at Hospital.Controllers.ScheduleController.Update(UpdateScheduleDto dto) in D:\Hospital\Hospital\Hospital\Controllers\ScheduleController.cs:line 37
   at lambda_method1098(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 04:41:44.327 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:41:44.328 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:41:44.329 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:41:44.330 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:41:44.331 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Schedule - 500 null application/json 411.5815ms
2025-11-25 04:42:18.906 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Schedule - null null
2025-11-25 04:42:18.908 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:42:18.909 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:42:18.910 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:42:18.911 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:42:18.912 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:42:18.912 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:42:18.917 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:42:18.918 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:42:18.919 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:42:18.920 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:42:18.922 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:42:18.923 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:42:18.924 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:42:18.925 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:42:18.926 +02:00 [INF] get all schedule called at "2025-11-25T04:42:18.9268221+02:00"
2025-11-25 04:42:18.928 +02:00 [INF] Fetching all schedules
2025-11-25 04:42:18.930 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:42:18.931 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)'
2025-11-25 04:42:18.933 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-25 04:42:18.934 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 04:42:18.941 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:42:18.943 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:42:18.943 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:42:18.944 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:18.945 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:18.946 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:42:18.947 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:42:18.948 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:42:18.949 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 04:42:18.973 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 04:42:18.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:18.977 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:18.978 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:18.979 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:18.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:18.981 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:18.982 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-25 04:42:18.983 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:18.985 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:42:18.991 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:42:18.993 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:42:18.994 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:42:18.994 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:42:18.995 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:42:18.996 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 04:42:18.998 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 74.3166ms
2025-11-25 04:42:18.999 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:42:19.000 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:42:19.001 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:42:19.002 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:19.003 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:42:19.005 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 98.5139ms
2025-11-25 04:42:27.059 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Schedule/1 - null null
2025-11-25 04:42:27.062 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/1'
2025-11-25 04:42:27.063 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetById (Hospital)' with route pattern 'api/Schedule/{id}' is valid for the request path '/api/Schedule/1'
2025-11-25 04:42:27.065 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetById (Hospital)'
2025-11-25 04:42:27.066 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:42:27.066 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:42:27.067 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetById (Hospital)'
2025-11-25 04:42:27.073 +02:00 [INF] Route matched with {action = "GetById", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] GetById(Int32) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:42:27.075 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:42:27.076 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:42:27.078 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:42:27.080 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:42:27.081 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:42:27.083 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:42:27.084 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:42:27.085 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 04:42:27.087 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 04:42:27.089 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 04:42:27.091 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 04:42:27.092 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 04:42:27.093 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 04:42:27.095 +02:00 [INF] get schedule by id called at "2025-11-25T04:42:27.0953678+02:00"
2025-11-25 04:42:27.097 +02:00 [INF] Fetching schedule with ScheduleId: 1
2025-11-25 04:42:27.098 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:42:27.100 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:42:27.101 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:42:27.101 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:27.103 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:27.104 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:42:27.104 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:42:27.106 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:42:27.107 +02:00 [DBG] Executing DbCommand [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[ScheduleId] = @__scheduleId_0
2025-11-25 04:42:27.120 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__scheduleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[ScheduleId] = @__scheduleId_0
2025-11-25 04:42:27.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:27.123 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:27.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:27.126 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:27.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:27.128 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:27.129 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-25 04:42:27.130 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:27.131 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:42:27.133 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:42:27.135 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:42:27.135 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:42:27.136 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:42:27.137 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:42:27.138 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-25 04:42:27.140 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetById (Hospital) in 56.9714ms
2025-11-25 04:42:27.141 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetById (Hospital)'
2025-11-25 04:42:27.142 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:42:27.143 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:42:27.144 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:27.145 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:42:27.146 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Schedule/1 - 200 null application/json; charset=utf-8 86.8512ms
2025-11-25 04:42:33.279 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Schedule/doctor/1 - null null
2025-11-25 04:42:33.283 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/doctor/1'
2025-11-25 04:42:33.284 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)' with route pattern 'api/Schedule/doctor/{doctorId}' is valid for the request path '/api/Schedule/doctor/1'
2025-11-25 04:42:33.285 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-11-25 04:42:33.286 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:42:33.287 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:42:33.288 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-11-25 04:42:33.292 +02:00 [INF] Route matched with {action = "GetByDoctorId", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetByDoctorId(Int32) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:42:33.294 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:42:33.295 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:42:33.297 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:42:33.299 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:42:33.300 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:42:33.301 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:42:33.303 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:42:33.304 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-25 04:42:33.305 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-25 04:42:33.307 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-25 04:42:33.308 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-25 04:42:33.310 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-25 04:42:33.311 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-25 04:42:33.313 +02:00 [INF] get schedule by doctor id called at "2025-11-25T04:42:33.3135371+02:00"
2025-11-25 04:42:33.315 +02:00 [INF] Fetching schedules for DoctorId: 1
2025-11-25 04:42:33.318 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:42:33.320 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DoctorId == __doctorId_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)'
2025-11-25 04:42:33.321 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-25 04:42:33.322 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 04:42:33.330 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        WHERE s.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 04:42:33.331 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:42:33.332 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:42:33.333 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:33.334 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:33.335 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:42:33.336 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:42:33.338 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:42:33.339 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[DoctorId] = @__doctorId_0
2025-11-25 04:42:33.350 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE [s].[DoctorId] = @__doctorId_0
2025-11-25 04:42:33.352 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:33.353 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:33.355 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:33.356 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:33.357 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:42:33.358 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:33.359 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-25 04:42:33.360 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:33.361 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:42:33.363 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:42:33.365 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:42:33.365 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:42:33.366 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:42:33.366 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:42:33.367 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 04:42:33.369 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital) in 67.4657ms
2025-11-25 04:42:33.370 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-11-25 04:42:33.371 +02:00 [DBG] Connection id "0HNHBPEU4SU9E" completed keep alive response.
2025-11-25 04:42:33.372 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:42:33.373 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:42:33.374 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 04:42:33.375 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Schedule/doctor/1 - 200 null application/json; charset=utf-8 95.8656ms
2025-11-25 04:44:10.202 +02:00 [DBG] Connection id "0HNHBPEU4SU9F" received FIN.
2025-11-25 04:44:10.210 +02:00 [DBG] Connection id "0HNHBPEU4SU9F" accepted.
2025-11-25 04:44:10.211 +02:00 [DBG] Connection id "0HNHBPEU4SU9F" started.
2025-11-25 04:44:10.216 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" accepted.
2025-11-25 04:44:10.220 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 04:44:10.220 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" started.
2025-11-25 04:44:10.223 +02:00 [DBG] Connection id "0HNHBPEU4SU9F" stopped.
2025-11-25 04:44:10.225 +02:00 [DBG] Connection id "0HNHBPEU4SU9F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 04:44:10.228 +02:00 [DBG] Connection 0HNHBPEU4SU9G established using the following protocol: "Tls13"
2025-11-25 04:44:10.230 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Schedule/date/2025-11-24 - null null
2025-11-25 04:44:10.232 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/date/2025-11-24'
2025-11-25 04:44:10.233 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetDoctorsByDate (Hospital)' with route pattern 'api/Schedule/date/{date}' is valid for the request path '/api/Schedule/date/2025-11-24'
2025-11-25 04:44:10.235 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetDoctorsByDate (Hospital)'
2025-11-25 04:44:10.236 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:44:10.237 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:44:10.238 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetDoctorsByDate (Hospital)'
2025-11-25 04:44:10.242 +02:00 [INF] Route matched with {action = "GetDoctorsByDate", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetDoctorsByDate(System.DateOnly) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:44:10.244 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:44:10.245 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:44:10.246 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:44:10.248 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:44:10.249 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:44:10.250 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:10.252 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:10.253 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateOnly' ...
2025-11-25 04:44:10.254 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateOnly' using the name 'date' in request data ...
2025-11-25 04:44:10.260 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateOnly'.
2025-11-25 04:44:10.261 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateOnly'.
2025-11-25 04:44:10.262 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateOnly' ...
2025-11-25 04:44:10.263 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateOnly'.
2025-11-25 04:44:10.265 +02:00 [INF] get schedule to doctor by date called at "2025-11-25T04:44:10.2656853+02:00"
2025-11-25 04:44:10.267 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:44:10.269 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:44:10.269 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:44:10.270 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:44:10.270 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 04:44:10.271 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-11-25 04:44:10.273 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetDoctorsByDate (Hospital) in 22.3056ms
2025-11-25 04:44:10.274 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetDoctorsByDate (Hospital)'
2025-11-25 04:44:10.275 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" completed keep alive response.
2025-11-25 04:44:10.276 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Schedule/date/2025-11-24 - 400 null text/plain; charset=utf-8 46.3906ms
2025-11-25 04:44:27.777 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-25 04:44:27.779 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:44:27.781 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:44:27.782 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:44:27.783 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:44:27.784 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:44:27.785 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:44:27.785 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:44:27.787 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:44:27.788 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:44:27.789 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:44:27.790 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:44:27.791 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:44:27.793 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:27.794 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:27.795 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:44:27.796 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-25 04:44:27.798 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:44:27.799 +02:00 [DBG] Connection id "0HNHBPEU4SU9G", Request id "0HNHBPEU4SU9G:00000002": started reading request body.
2025-11-25 04:44:27.800 +02:00 [DBG] Connection id "0HNHBPEU4SU9G", Request id "0HNHBPEU4SU9G:00000002": done reading request body.
2025-11-25 04:44:27.802 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-25 04:44:27.802 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:44:27.804 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:44:27.805 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:44:27.806 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:44:27.807 +02:00 [INF] create schedule  called at "2025-11-25T04:44:27.8074059+02:00"
2025-11-25 04:44:27.808 +02:00 [INF] Creating schedule for DoctorId: 1, Day: sunday, Shift: "Afternoon"
2025-11-25 04:44:27.810 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:44:27.812 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:44:27.813 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:44:27.814 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.815 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.816 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:44:27.817 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:44:27.818 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:44:27.819 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:44:27.833 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:44:27.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.837 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.840 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.841 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.845 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.847 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.848 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-25 04:44:27.850 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.851 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:44:27.853 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.854 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.855 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:44:27.856 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:44:27.857 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:44:27.858 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 04:44:27.866 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 04:44:27.868 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.869 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-25 04:44:27.870 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.871 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:44:27.873 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.875 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.876 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.877 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.878 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:44:27.879 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:44:27.880 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 04:44:27.881 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 04:44:27.882 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 04:44:27.884 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.885 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.886 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:44:27.887 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:44:27.888 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:44:27.889 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:44:27.894 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 04:44:27.896 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 04:44:27.897 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.898 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-25 04:44:27.900 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.901 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:44:27.902 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:27.903 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 04:44:27.905 +02:00 [INF] Schedule created successfully for DoctorId 1
2025-11-25 04:44:27.906 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:44:27.907 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:44:27.908 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:44:27.909 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:44:27.909 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:44:27.911 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-25 04:44:27.912 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 119.1424ms
2025-11-25 04:44:27.913 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:44:27.914 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" completed keep alive response.
2025-11-25 04:44:27.918 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:44:27.919 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:27.920 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:44:27.921 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 144.2684ms
2025-11-25 04:44:32.583 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Schedule - null null
2025-11-25 04:44:32.586 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:44:32.587 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:44:32.588 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:44:32.589 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:44:32.590 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:44:32.591 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:44:32.592 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:44:32.593 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:44:32.594 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:44:32.595 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:44:32.597 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:44:32.598 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:44:32.600 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:32.601 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:32.602 +02:00 [INF] get all schedule called at "2025-11-25T04:44:32.6024014+02:00"
2025-11-25 04:44:32.603 +02:00 [INF] Fetching all schedules
2025-11-25 04:44:32.604 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:44:32.606 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:44:32.607 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:44:32.607 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:32.608 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:32.610 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:44:32.610 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:44:32.612 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:44:32.613 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 04:44:32.620 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 04:44:32.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:32.624 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:32.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:32.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:32.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:32.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:32.630 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:32.631 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-25 04:44:32.633 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:32.634 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:44:32.635 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:44:32.637 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:44:32.638 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:44:32.639 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:44:32.639 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:44:32.640 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 04:44:32.642 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 42.0689ms
2025-11-25 04:44:32.643 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:44:32.644 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" completed keep alive response.
2025-11-25 04:44:32.645 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:44:32.646 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:32.647 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:44:32.648 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 65.3794ms
2025-11-25 04:44:39.864 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-25 04:44:39.865 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:44:39.867 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:44:39.868 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:44:39.868 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:44:39.869 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:44:39.870 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:44:39.870 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:44:39.871 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:44:39.872 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:44:39.874 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:44:39.875 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:44:39.876 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:44:39.877 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:39.878 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:39.879 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:44:39.880 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-25 04:44:39.881 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 04:44:39.882 +02:00 [DBG] Connection id "0HNHBPEU4SU9G", Request id "0HNHBPEU4SU9G:00000004": started reading request body.
2025-11-25 04:44:39.883 +02:00 [DBG] Connection id "0HNHBPEU4SU9G", Request id "0HNHBPEU4SU9G:00000004": done reading request body.
2025-11-25 04:44:39.884 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-25 04:44:39.885 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:44:39.886 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:44:39.887 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 04:44:39.888 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 04:44:39.889 +02:00 [INF] create schedule  called at "2025-11-25T04:44:39.8891790+02:00"
2025-11-25 04:44:39.889 +02:00 [INF] Creating schedule for DoctorId: 1, Day: sunday, Shift: "Afternoon"
2025-11-25 04:44:39.891 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:44:39.892 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:44:39.893 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:44:39.894 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:39.895 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:39.896 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:44:39.897 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:44:39.898 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 04:44:39.899 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:44:39.912 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 04:44:39.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.916 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.918 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.923 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.925 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:39.927 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:39.928 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-25 04:44:39.930 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:39.931 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-25 04:44:39.932 +02:00 [WRN] Doctor with ID 1 is not associated with BranchId 2
2025-11-25 04:44:39.978 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 100.401ms
2025-11-25 04:44:39.979 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 04:44:40.024 +02:00 [ERR]  Exception caught: Doctor is not associated with the specified branch.
System.InvalidOperationException: Doctor is not associated with the specified branch.
   at Hospital.Infrastructure.Services.ScheduleService.CreateAsync(CreateScheduleDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\ScheduleService.cs:line 46
   at Hospital.Controllers.ScheduleController.Create(CreateScheduleDto dto) in D:\Hospital\Hospital\Hospital\Controllers\ScheduleController.cs:line 27
   at lambda_method963(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 04:44:40.031 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" completed keep alive response.
2025-11-25 04:44:40.032 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:44:40.033 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:40.035 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:44:40.036 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 500 null application/json 172.5477ms
2025-11-25 04:44:52.850 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Schedule - null null
2025-11-25 04:44:52.856 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 04:44:52.856 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 04:44:52.857 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:44:52.858 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 04:44:52.859 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 04:44:52.860 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:44:52.860 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 04:44:52.862 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 04:44:52.863 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 04:44:52.863 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 04:44:52.865 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 04:44:52.866 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 04:44:52.867 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:52.868 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 04:44:52.869 +02:00 [INF] get all schedule called at "2025-11-25T04:44:52.8691928+02:00"
2025-11-25 04:44:52.869 +02:00 [INF] Fetching all schedules
2025-11-25 04:44:52.870 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 04:44:52.872 +02:00 [DBG] Creating DbConnection.
2025-11-25 04:44:52.872 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 04:44:52.873 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:52.874 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:52.875 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 04:44:52.875 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 04:44:52.877 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 04:44:52.878 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 04:44:52.884 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
2025-11-25 04:44:52.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:52.886 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:52.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:52.888 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:52.888 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:52.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 04:44:52.890 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:52.891 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-25 04:44:52.892 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:52.893 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-25 04:44:52.894 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 04:44:52.895 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 04:44:52.896 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 04:44:52.896 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 04:44:52.897 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 04:44:52.898 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 04:44:52.899 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 32.5117ms
2025-11-25 04:44:52.900 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-25 04:44:52.901 +02:00 [DBG] Connection id "0HNHBPEU4SU9G" completed keep alive response.
2025-11-25 04:44:52.902 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 04:44:52.903 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-25 04:44:52.904 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 04:44:52.906 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 56.3275ms
2025-11-25 16:29:11.205 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 16:29:11.646 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 16:29:11.647 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 16:29:11.647 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 16:29:11.647 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 16:29:11.647 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 16:29:11.741 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:11.741 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:11.872 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:29:11.876 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:29:12.088 +02:00 [DBG] Created DbConnection. (211ms).
2025-11-25 16:29:12.092 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:29:12.096 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:12.099 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:29:14.460 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 16:29:14.821 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 16:29:14.822 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 16:29:14.822 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 16:29:14.822 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 16:29:14.822 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 16:29:14.905 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:14.905 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:15.051 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:29:15.054 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:29:15.075 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-25 16:29:15.082 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:15.719 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:15.724 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:15.730 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2025-11-25 16:29:15.731 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2025-11-25 16:29:15.737 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 16:29:15.757 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 16:29:15.758 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:15.762 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-11-25 16:29:15.778 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:29:15.778 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:29:15.779 +02:00 [DBG] Opening connection to database 'master' on server '.'.
2025-11-25 16:29:15.784 +02:00 [DBG] Opened connection to database 'master' on server '.'.
2025-11-25 16:29:15.785 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:15.785 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:15.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:15.785 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-25 16:29:15.819 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-25 16:29:15.819 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:15.819 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:15.819 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:15.819 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-25 16:29:15.950 +02:00 [INF] Executed DbCommand (131ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-25 16:29:15.951 +02:00 [DBG] Closing connection to database 'master' on server '.'.
2025-11-25 16:29:15.951 +02:00 [DBG] Closed connection to database 'master' on server '.' (0ms).
2025-11-25 16:29:15.953 +02:00 [DBG] Disposing connection to database 'master' on server '.'.
2025-11-25 16:29:15.954 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:29:15.956 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:29:15.957 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:15.957 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:29:24.715 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 16:29:25.082 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 16:29:25.083 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 16:29:25.083 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 16:29:25.083 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 16:29:25.083 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 16:29:25.168 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:25.168 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:25.304 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:29:25.327 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:29:25.356 +02:00 [DBG] Created DbConnection. (27ms).
2025-11-25 16:29:25.358 +02:00 [DBG] Migrating using database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.361 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.494 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.495 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.496 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.560 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 16:29:25.560 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 16:29:25.560 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 16:29:25.560 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 16:29:25.560 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 16:29:25.577 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:25.577 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:29:25.605 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:29:25.606 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:29:25.606 +02:00 [DBG] Opening connection to database 'master' on server '.'.
2025-11-25 16:29:25.619 +02:00 [DBG] Opened connection to database 'master' on server '.'.
2025-11-25 16:29:25.623 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:25.626 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-25 16:29:25.628 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-11-25 16:29:25.632 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-25 16:29:25.836 +02:00 [INF] Executed DbCommand (200ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-25 16:29:25.837 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:25.837 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.837 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.837 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 16:29:25.903 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 16:29:25.904 +02:00 [DBG] Closing connection to database 'master' on server '.'.
2025-11-25 16:29:25.909 +02:00 [DBG] Closed connection to database 'master' on server '.' (3ms).
2025-11-25 16:29:25.911 +02:00 [DBG] Disposing connection to database 'master' on server '.'.
2025-11-25 16:29:25.912 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:29:25.912 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.919 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.919 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:25.919 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.919 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.919 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 16:29:25.924 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 16:29:25.924 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.924 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:25.959 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:25.959 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.959 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.959 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.960 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.960 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-25 16:29:25.967 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-25 16:29:25.967 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.967 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:25.968 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.968 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.968 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:25.968 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.968 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:25.968 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 16:29:25.969 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 16:29:25.969 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.969 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:25.970 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-25 16:29:25.970 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-25 16:29:25.970 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-25 16:29:25.970 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.970 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:25.971 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 16:29:25.980 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 16:29:26.279 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:26.280 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:29:26.282 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:26.283 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:26.283 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:29:26.283 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:29:26.283 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:29:26.283 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 16:29:26.296 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 16:29:26.298 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:29:26.298 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:29:26.299 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:26.299 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:26.305 +02:00 [INF] Applying migration '20251111134048_init-auth'.
2025-11-25 16:29:26.378 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:26.378 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:26.379 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:29:26.383 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:29:26.384 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:26.384 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:26.385 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:26.385 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-25 16:29:26.389 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-25 16:29:26.389 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:26.389 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:26.389 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:26.389 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-25 16:29:26.392 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-25 16:29:26.392 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:26.392 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:26.392 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:26.392 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-25 16:29:28.916 +02:00 [INF] Executed DbCommand (2,524ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-25 16:29:28.916 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:28.916 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:28.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:28.917 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:28.919 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:28.919 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:28.919 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:28.919 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:28.919 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:28.922 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:28.922 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:28.922 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:28.922 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:28.922 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:28.924 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:31.485 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:31.485 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:31.486 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:31.486 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:31.490 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:31.490 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:31.490 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:31.490 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:31.490 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:31.494 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-25 16:29:34.647 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:34.647 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:34.647 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:34.647 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-25 16:29:34.652 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-25 16:29:34.652 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:34.652 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:34.653 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:34.653 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:34.655 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:34.655 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:34.655 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:34.655 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:34.655 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:34.668 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:38.057 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:38.057 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:38.057 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:38.057 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:38.068 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:38.068 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:38.068 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:38.068 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:38.068 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:38.071 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:38.071 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:38.071 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:38.071 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:38.071 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:40.610 +02:00 [INF] Executed DbCommand (2,539ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:40.610 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:40.610 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:40.610 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:40.610 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:40.621 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:40.621 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:40.621 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:40.621 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:40.621 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:40.624 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:29:40.624 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:40.624 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:40.624 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:40.624 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 16:29:43.293 +02:00 [INF] Executed DbCommand (2,669ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 16:29:43.293 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:43.293 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:43.293 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:43.293 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-25 16:29:43.299 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-25 16:29:43.300 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:43.300 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:43.300 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:43.300 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-25 16:29:46.049 +02:00 [INF] Executed DbCommand (2,749ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-25 16:29:46.049 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:46.049 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.049 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.049 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-25 16:29:46.056 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-25 16:29:46.056 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:46.056 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.056 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.056 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-25 16:29:46.057 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-25 16:29:46.057 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:46.057 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.057 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.057 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-25 16:29:46.058 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-25 16:29:46.058 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:46.058 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.058 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.058 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-25 16:29:46.059 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-25 16:29:46.059 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:46.059 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.059 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:46.059 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-25 16:29:48.771 +02:00 [INF] Executed DbCommand (2,711ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-25 16:29:48.771 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.771 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.771 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.771 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 16:29:48.779 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 16:29:48.779 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.779 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.779 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.779 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-25 16:29:48.780 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-25 16:29:48.781 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.781 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.781 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.781 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-25 16:29:48.781 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-25 16:29:48.781 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.781 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.781 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.781 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-25 16:29:48.782 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-25 16:29:48.783 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.783 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.783 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.783 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-25 16:29:48.784 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-25 16:29:48.784 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.784 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.784 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.784 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-25 16:29:48.785 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-25 16:29:48.785 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.785 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:48.785 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-25 16:29:48.786 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-25 16:29:48.786 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:48.786 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.848 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2062ms).
2025-11-25 16:29:50.848 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-25 16:29:50.850 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-25 16:29:50.850 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.850 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.850 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.850 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-25 16:29:50.851 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-25 16:29:50.851 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.851 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.851 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.851 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-25 16:29:50.852 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-25 16:29:50.852 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.852 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.852 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.852 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-25 16:29:50.853 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-25 16:29:50.853 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.853 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.853 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.853 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-25 16:29:50.854 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-25 16:29:50.854 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.854 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.854 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.854 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-25 16:29:50.855 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-25 16:29:50.855 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.855 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.855 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.855 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-25 16:29:50.855 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-25 16:29:50.855 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:50.855 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.856 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:50.856 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-25 16:29:50.856 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-25 16:29:50.856 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.913 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2056ms).
2025-11-25 16:29:52.913 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2056ms).
2025-11-25 16:29:52.913 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-25 16:29:52.914 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-25 16:29:52.914 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.914 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.914 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.914 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-25 16:29:52.916 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-25 16:29:52.916 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.916 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.916 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-25 16:29:52.918 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-25 16:29:52.918 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.918 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.918 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.918 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-25 16:29:52.918 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-25 16:29:52.919 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.919 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.919 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.919 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-25 16:29:52.919 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-25 16:29:52.919 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.919 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.919 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.919 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-25 16:29:52.920 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-25 16:29:52.920 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.920 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.920 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.920 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 16:29:52.921 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 16:29:52.921 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:52.921 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.921 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:52.921 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-25 16:29:55.026 +02:00 [INF] Executed DbCommand (2,105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-25 16:29:55.027 +02:00 [DBG] Committing transaction.
2025-11-25 16:29:55.031 +02:00 [DBG] Committed transaction.
2025-11-25 16:29:55.031 +02:00 [DBG] Disposing transaction.
2025-11-25 16:29:55.031 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:55.031 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:55.032 +02:00 [INF] Applying migration '20251111134638__SeedRoles'.
2025-11-25 16:29:55.089 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:55.089 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:55.089 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:29:55.090 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:29:55.090 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:55.090 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:55.090 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:55.090 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'1b31bc9e-8e99-4d19-a9cb-05a9c2570642', N'Admin', N'ADMIN', N'ebcd11e1-3f99-48e5-9ffa-054fb7588be9');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 16:29:55.136 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'1b31bc9e-8e99-4d19-a9cb-05a9c2570642', N'Admin', N'ADMIN', N'ebcd11e1-3f99-48e5-9ffa-054fb7588be9');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 16:29:55.136 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:55.136 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:55.136 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:55.136 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'066f0c49-8a7c-4c71-80e7-289230f42295', N'Doctor', N'DOCTOR', N'2f9e8de3-c961-45b6-99c5-13b3057b2088');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 16:29:55.148 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'066f0c49-8a7c-4c71-80e7-289230f42295', N'Doctor', N'DOCTOR', N'2f9e8de3-c961-45b6-99c5-13b3057b2088');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 16:29:57.017 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:57.017 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:57.017 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:57.017 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'37593baf-8f87-4c3a-949e-393f65836ae5', N'Patient', N'PATIENT', N'9e015d64-af20-4ca9-aa9b-d71b516f09eb');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 16:29:57.025 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'37593baf-8f87-4c3a-949e-393f65836ae5', N'Patient', N'PATIENT', N'9e015d64-af20-4ca9-aa9b-d71b516f09eb');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-25 16:29:57.025 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:57.025 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:57.025 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:57.025 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-25 16:29:57.026 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-25 16:29:57.026 +02:00 [DBG] Committing transaction.
2025-11-25 16:29:57.032 +02:00 [DBG] Committed transaction.
2025-11-25 16:29:57.033 +02:00 [DBG] Disposing transaction.
2025-11-25 16:29:57.033 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:57.033 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:57.033 +02:00 [INF] Applying migration '20251111153509__SeedRolesAdmin'.
2025-11-25 16:29:57.118 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:57.118 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:57.118 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:29:57.119 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:29:57.119 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:57.119 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:57.119 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:57.119 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'087f4089-4945-4f33-9f63-350993a63ad1', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEFXi5D5exo90shrmNH/AHGdK0uqE6PJbV3EDKTUU0wOuJiRymC2Zk9C2VHPiYdIoMQ==', N'Admin', '2025-11-25T14:29:57.1015629Z', '2025-11-25T14:29:57.1015634Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'2e082251-4334-4703-bfa1-5958fd2d812c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-25 16:29:59.009 +02:00 [INF] Executed DbCommand (1,890ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'087f4089-4945-4f33-9f63-350993a63ad1', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEFXi5D5exo90shrmNH/AHGdK0uqE6PJbV3EDKTUU0wOuJiRymC2Zk9C2VHPiYdIoMQ==', N'Admin', '2025-11-25T14:29:57.1015629Z', '2025-11-25T14:29:57.1015634Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'2e082251-4334-4703-bfa1-5958fd2d812c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-25 16:29:59.009 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:59.009 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:59.009 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:59.009 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT '087f4089-4945-4f33-9f63-350993a63ad1', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-25 16:29:59.017 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT '087f4089-4945-4f33-9f63-350993a63ad1', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-25 16:29:59.017 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:29:59.017 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:59.017 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:29:59.017 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-25 16:29:59.018 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-25 16:29:59.018 +02:00 [DBG] Committing transaction.
2025-11-25 16:29:59.018 +02:00 [DBG] Committed transaction.
2025-11-25 16:29:59.018 +02:00 [DBG] Disposing transaction.
2025-11-25 16:29:59.018 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:59.018 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:29:59.018 +02:00 [INF] Applying migration '20251112174524_AddRefreshTokenColumns'.
2025-11-25 16:29:59.036 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:59.036 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:29:59.036 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:01.042 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:01.042 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:01.042 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.043 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.043 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-25 16:30:01.059 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-25 16:30:01.059 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:01.059 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.059 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.059 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-25 16:30:01.062 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-25 16:30:01.062 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:01.062 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.062 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.062 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-25 16:30:01.062 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-25 16:30:01.062 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:01.063 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:01.063 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:01.063 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:01.063 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:01.063 +02:00 [INF] Applying migration '20251113233448_update in banner and service and branch and specilization relations'.
2025-11-25 16:30:01.083 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:01.083 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:01.083 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:01.083 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:01.083 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:01.084 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.084 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.084 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-25 16:30:01.086 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-25 16:30:01.086 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:01.086 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.086 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.086 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-25 16:30:01.087 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-25 16:30:01.087 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:01.087 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.087 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:01.087 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-25 16:30:01.088 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-25 16:30:02.375 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.375 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.375 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.375 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-25 16:30:02.378 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-25 16:30:02.378 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.378 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.378 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.378 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-25 16:30:02.380 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-25 16:30:02.380 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.380 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.380 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.380 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-25 16:30:02.382 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-25 16:30:02.382 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.382 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.382 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.382 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-25 16:30:02.383 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-25 16:30:02.384 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.384 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.384 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.384 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-25 16:30:02.384 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-25 16:30:02.384 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.384 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.384 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.384 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-25 16:30:02.450 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-25 16:30:02.450 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:02.450 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.450 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:02.450 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-25 16:30:04.887 +02:00 [INF] Executed DbCommand (2,437ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-25 16:30:04.887 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:04.887 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:04.887 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:04.887 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-25 16:30:04.902 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-25 16:30:04.902 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:04.902 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:04.902 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:04.902 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-25 16:30:04.904 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-25 16:30:04.904 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:04.904 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:04.904 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:04.904 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-25 16:30:06.900 +02:00 [INF] Executed DbCommand (1,996ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-25 16:30:06.900 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:06.900 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.900 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.900 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-25 16:30:06.901 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-25 16:30:06.901 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:06.901 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.901 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.901 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-25 16:30:06.903 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-25 16:30:06.903 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:06.903 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.903 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.903 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 16:30:06.904 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 16:30:06.904 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:06.904 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.904 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.904 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 16:30:06.905 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-25 16:30:06.905 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:06.905 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.905 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:06.905 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-25 16:30:06.906 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-25 16:30:06.906 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:06.913 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:06.913 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:06.913 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:09.190 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2277ms).
2025-11-25 16:30:09.190 +02:00 [INF] Applying migration '20251115194238_add many to many relation between branch and doctor'.
2025-11-25 16:30:09.207 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:09.207 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:09.207 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:09.208 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:09.208 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:09.208 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.208 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.208 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-25 16:30:09.210 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-25 16:30:09.210 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:09.210 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.210 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.210 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-25 16:30:09.211 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-25 16:30:09.211 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:09.211 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.211 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.211 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-25 16:30:09.230 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-25 16:30:09.230 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:09.230 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.230 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:09.230 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 16:30:09.232 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-25 16:30:11.252 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:11.252 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.252 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.252 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-25 16:30:11.253 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-25 16:30:11.253 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:11.253 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.253 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.253 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-25 16:30:11.253 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-25 16:30:11.254 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:11.254 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:11.254 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:11.254 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:11.254 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:11.254 +02:00 [INF] Applying migration '20251115200531_remove relation between branch and user'.
2025-11-25 16:30:11.271 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:11.271 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:11.271 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:11.272 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:11.272 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:11.272 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.272 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.272 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-25 16:30:11.273 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-25 16:30:11.274 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:11.274 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.274 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.274 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-25 16:30:11.275 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-25 16:30:11.275 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:11.275 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.275 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:11.275 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-25 16:30:11.289 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-25 16:30:13.842 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:13.842 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:13.843 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:13.843 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-25 16:30:13.844 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-25 16:30:13.844 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:13.844 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:13.845 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:13.845 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:13.845 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:13.845 +02:00 [INF] Applying migration '20251116144214_MakeRefreshTokenNullable'.
2025-11-25 16:30:13.863 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:13.863 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:13.863 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:13.864 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:13.864 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:13.864 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:13.864 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:13.864 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-25 16:30:13.886 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-25 16:30:13.887 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:13.887 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:13.887 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:13.887 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-25 16:30:13.887 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-25 16:30:13.887 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:13.888 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:13.888 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:13.888 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:13.888 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:13.888 +02:00 [INF] Applying migration '20251116184844_editPatientModel'.
2025-11-25 16:30:13.900 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:13.900 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:13.901 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:13.901 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:13.901 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:13.901 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.048 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2146ms).
2025-11-25 16:30:16.048 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-25 16:30:16.062 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-25 16:30:16.063 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:16.063 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.063 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.063 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-25 16:30:16.079 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-25 16:30:16.079 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:16.079 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.079 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.079 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-25 16:30:16.080 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-25 16:30:16.080 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:16.085 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:16.085 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:16.085 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:16.085 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:16.085 +02:00 [INF] Applying migration '20251116220101_change Timeonly in schedule to DateTime'.
2025-11-25 16:30:16.104 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:16.104 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:16.104 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:16.104 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:16.104 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:16.104 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:16.104 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-25 16:30:18.319 +02:00 [INF] Executed DbCommand (2,215ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-25 16:30:18.319 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:18.319 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:18.319 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:18.319 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-25 16:30:18.335 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-25 16:30:18.335 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:18.335 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:18.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:18.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-25 16:30:18.335 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-25 16:30:18.335 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:18.336 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:18.336 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:18.336 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:18.336 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:18.336 +02:00 [INF] Applying migration '20251117115532_addPhotoToDoctor'.
2025-11-25 16:30:18.346 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:18.346 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:18.346 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:18.346 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:18.346 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:18.346 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:18.346 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:18.346 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 16:30:18.347 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 16:30:18.347 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:18.347 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.566 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2218ms).
2025-11-25 16:30:20.566 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-25 16:30:20.567 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-25 16:30:20.567 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:20.567 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:20.567 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:20.567 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:20.567 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:20.567 +02:00 [INF] Applying migration '20251118140238_editTimeOnlYToDateTime'.
2025-11-25 16:30:20.577 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:20.577 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:20.577 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:20.577 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:20.577 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:20.577 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.577 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.578 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-25 16:30:20.591 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-25 16:30:20.591 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:20.591 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.591 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.591 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-25 16:30:20.592 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-25 16:30:20.592 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:20.592 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:20.592 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:20.592 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:20.592 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:20.593 +02:00 [INF] Applying migration '20251118182335_improve schedule'.
2025-11-25 16:30:20.604 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:20.604 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:20.604 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:20.604 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:20.604 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:20.604 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.604 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:20.604 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-25 16:30:22.379 +02:00 [INF] Executed DbCommand (1,774ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-25 16:30:22.379 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:22.379 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.379 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.379 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-25 16:30:22.382 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-25 16:30:22.382 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:22.382 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:22.382 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:22.382 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:22.382 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:22.382 +02:00 [INF] Applying migration '20251119214128_resetPaswoard'.
2025-11-25 16:30:22.394 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:22.394 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:22.394 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:22.394 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:22.394 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:22.394 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.394 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.394 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:30:22.398 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 16:30:22.398 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:22.398 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.398 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.398 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-25 16:30:22.399 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-25 16:30:22.399 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:22.399 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.399 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:22.399 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-25 16:30:22.399 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-25 16:30:22.399 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:22.399 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:22.399 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:22.399 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:22.400 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:22.400 +02:00 [INF] Applying migration '20251120170506_create payment with paymob and update appoiment '.
2025-11-25 16:30:24.628 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:24.629 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:24.629 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:24.629 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:24.629 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:24.629 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:24.629 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:24.629 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-25 16:30:24.634 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-25 16:30:24.634 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:24.634 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:24.634 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:24.634 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-25 16:30:24.634 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-25 16:30:24.634 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:24.634 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:24.634 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:24.635 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-25 16:30:24.638 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-25 16:30:24.638 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:24.638 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:24.638 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:24.638 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:24.638 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:24.639 +02:00 [INF] Applying migration '20251122193859_update appoiment with payment method'.
2025-11-25 16:30:24.651 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:24.651 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:24.651 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:24.652 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:24.652 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:24.652 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:26.946 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2294ms).
2025-11-25 16:30:26.946 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-25 16:30:26.949 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-25 16:30:26.949 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:26.949 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:26.949 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:26.949 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-25 16:30:26.952 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-25 16:30:26.952 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:26.953 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:26.953 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:26.953 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:26.953 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:26.953 +02:00 [INF] Applying migration '20251122203902_convert type of fess in codtor to ba require'.
2025-11-25 16:30:26.966 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:26.966 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:26.966 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:26.966 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:26.966 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:26.966 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:26.966 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:26.966 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-25 16:30:27.002 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-25 16:30:27.003 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:27.003 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:27.003 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:27.003 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-25 16:30:27.003 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-25 16:30:29.032 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:29.038 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:29.038 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:29.038 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:29.038 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:29.038 +02:00 [INF] Applying migration '20251122214638_addImageInBranch'.
2025-11-25 16:30:29.049 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:29.049 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:29.049 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:29.050 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:29.050 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:29.050 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.050 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.050 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 16:30:29.051 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-25 16:30:29.052 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:29.052 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.052 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.052 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-25 16:30:29.052 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-25 16:30:29.052 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:29.053 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:29.053 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:29.053 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:29.053 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:29.053 +02:00 [INF] Applying migration '20251124135933_addDateinschudule'.
2025-11-25 16:30:29.066 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:29.066 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:29.066 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:29.067 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:29.067 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:29.067 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.067 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.067 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-25 16:30:29.078 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-25 16:30:29.078 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:29.078 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.078 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:29.078 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-25 16:30:29.079 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-25 16:30:31.192 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:31.192 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.192 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.192 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-25 16:30:31.192 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-25 16:30:31.192 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:31.193 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:31.193 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:31.193 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:31.193 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:31.193 +02:00 [INF] Applying migration '20251124164506_AddShiftToAppointments'.
2025-11-25 16:30:31.204 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:31.204 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:31.204 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:31.204 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:31.204 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:31.204 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.204 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.204 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-25 16:30:31.216 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-25 16:30:31.216 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:31.216 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.216 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.216 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 16:30:31.217 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 16:30:31.217 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:31.217 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.217 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:31.217 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-25 16:30:31.217 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-25 16:30:31.217 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:31.218 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:31.218 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:31.218 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:31.218 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:33.278 +02:00 [INF] Applying migration '20251124182248_editSchedule'.
2025-11-25 16:30:33.291 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:33.291 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:33.291 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:33.292 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:33.292 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:33.292 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.292 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.292 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-25 16:30:33.304 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-25 16:30:33.304 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:33.304 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.304 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.304 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 16:30:33.305 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-25 16:30:33.305 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:33.305 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.305 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.305 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-25 16:30:33.306 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-25 16:30:33.306 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:33.311 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:33.311 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:33.311 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:33.311 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:33.311 +02:00 [INF] Applying migration '20251125023609_update schedule so it has branchid'.
2025-11-25 16:30:33.325 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:33.325 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:33.325 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:30:33.325 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:30:33.325 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:33.325 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.325 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:33.325 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-25 16:30:33.326 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-25 16:30:33.326 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:33.326 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:35.253 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1926ms).
2025-11-25 16:30:35.253 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-25 16:30:35.254 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-25 16:30:35.254 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:35.254 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:35.254 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:35.254 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-25 16:30:35.256 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-25 16:30:35.256 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-25 16:30:35.256 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:35.256 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-25 16:30:35.256 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125023609_update schedule so it has branchid', N'8.0.21');
2025-11-25 16:30:35.256 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125023609_update schedule so it has branchid', N'8.0.21');
2025-11-25 16:30:35.256 +02:00 [DBG] Committing transaction.
2025-11-25 16:30:35.256 +02:00 [DBG] Committed transaction.
2025-11-25 16:30:35.256 +02:00 [DBG] Disposing transaction.
2025-11-25 16:30:35.256 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:35.256 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:30:35.257 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:30:35.258 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:30:35.258 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:30:59.652 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-25 16:30:59.732 +02:00 [DBG] Hosting starting
2025-11-25 16:30:59.745 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 16:30:59.752 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-25 16:30:59.777 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-25 16:30:59.782 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-25 16:30:59.784 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 16:30:59.787 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-25 16:30:59.788 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 16:30:59.791 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-25 16:30:59.792 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-25 16:30:59.793 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-25 16:30:59.794 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-25 16:30:59.798 +02:00 [DBG] Middleware loaded
2025-11-25 16:30:59.799 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-25 16:30:59.802 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-25 16:30:59.837 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-25 16:30:59.867 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-25 16:30:59.869 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-25 16:30:59.869 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-25 16:30:59.870 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-25 16:30:59.870 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-25 16:30:59.871 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-25 16:30:59.932 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 16:30:59.933 +02:00 [INF] Hosting environment: Development
2025-11-25 16:30:59.933 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-25 16:30:59.934 +02:00 [DBG] Hosting started
2025-11-25 16:31:00.197 +02:00 [DBG] Connection id "0HNHC5T0J0T1D" received FIN.
2025-11-25 16:31:00.197 +02:00 [DBG] Connection id "0HNHC5T0J0T1E" received FIN.
2025-11-25 16:31:00.201 +02:00 [DBG] Connection id "0HNHC5T0J0T1E" accepted.
2025-11-25 16:31:00.201 +02:00 [DBG] Connection id "0HNHC5T0J0T1D" accepted.
2025-11-25 16:31:00.202 +02:00 [DBG] Connection id "0HNHC5T0J0T1E" started.
2025-11-25 16:31:00.202 +02:00 [DBG] Connection id "0HNHC5T0J0T1D" started.
2025-11-25 16:31:00.213 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:31:00.213 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:31:00.225 +02:00 [DBG] Connection id "0HNHC5T0J0T1E" stopped.
2025-11-25 16:31:00.225 +02:00 [DBG] Connection id "0HNHC5T0J0T1D" stopped.
2025-11-25 16:31:00.227 +02:00 [DBG] Connection id "0HNHC5T0J0T1D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:31:00.227 +02:00 [DBG] Connection id "0HNHC5T0J0T1E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:31:00.331 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" accepted.
2025-11-25 16:31:00.333 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" started.
2025-11-25 16:31:00.374 +02:00 [DBG] Connection 0HNHC5T0J0T1F established using the following protocol: "Tls12"
2025-11-25 16:31:00.411 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-25 16:31:00.481 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-25 16:31:00.501 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-25 16:31:00.502 +02:00 [DBG] Request did not match any endpoints
2025-11-25 16:31:00.538 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-25 16:31:00.541 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-25 16:31:00.555 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-25 16:31:00.556 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-25 16:31:00.558 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 148.4655ms
2025-11-25 16:31:00.567 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-25 16:31:00.567 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-25 16:31:00.572 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-25 16:31:00.574 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 7.0468ms
2025-11-25 16:31:00.600 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.2809ms
2025-11-25 16:31:00.636 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-25 16:31:00.638 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-25 16:31:00.638 +02:00 [DBG] Request did not match any endpoints
2025-11-25 16:31:00.663 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.6469ms
2025-11-25 16:31:55.523 +02:00 [DBG] Connection id "0HNHC5T0J0T1G" accepted.
2025-11-25 16:31:55.525 +02:00 [DBG] Connection id "0HNHC5T0J0T1G" received FIN.
2025-11-25 16:31:55.525 +02:00 [DBG] Connection id "0HNHC5T0J0T1G" started.
2025-11-25 16:31:55.526 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" accepted.
2025-11-25 16:31:55.527 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:31:55.527 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" started.
2025-11-25 16:31:55.529 +02:00 [DBG] Connection id "0HNHC5T0J0T1G" stopped.
2025-11-25 16:31:55.530 +02:00 [DBG] Connection id "0HNHC5T0J0T1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:31:55.534 +02:00 [DBG] Connection 0HNHC5T0J0T1H established using the following protocol: "Tls12"
2025-11-25 16:31:55.536 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 146
2025-11-25 16:31:55.539 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 16:31:55.541 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 16:31:55.543 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:31:55.544 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:31:55.759 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:31:55.762 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:31:55.777 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:31:55.779 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:31:55.780 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:31:55.781 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:31:55.782 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:31:55.782 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:31:55.784 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:31:55.830 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 16:31:55.955 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:31:55.963 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:31:55.965 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 16:31:55.967 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:31:55.973 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000001": started reading request body.
2025-11-25 16:31:55.974 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000001": done reading request body.
2025-11-25 16:31:55.980 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 16:31:55.982 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:31:55.982 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:31:55.983 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:31:55.987 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:31:55.989 +02:00 [INF] Create Branch called at "2025-11-25T16:31:55.9889825+02:00"
2025-11-25 16:31:55.990 +02:00 [INF] Creating new branch with name: adam17
2025-11-25 16:31:56.340 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 16:31:56.342 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 16:31:56.344 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 16:31:56.345 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 16:31:56.346 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 16:31:56.432 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:31:56.433 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:31:56.563 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:31:56.594 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-25 16:31:56.683 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:31:56.704 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:31:56.715 +02:00 [DBG] Created DbConnection. (10ms).
2025-11-25 16:31:56.719 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:56.809 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:56.811 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:31:56.815 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:31:56.819 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-11-25 16:31:56.824 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:31:56.847 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:31:56.856 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:31:56.860 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-11-25 16:31:56.863 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:56.866 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-11-25 16:31:56.889 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:31:56.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:31:56.938 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:31:56.948 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:31:56.954 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:31:56.955 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:31:56.956 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:31:56.989 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:56.993 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:56.995 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:31:56.996 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:31:56.998 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-25 16:31:57.000 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:31:57.065 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:31:57.076 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:31:57.080 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:31:57.081 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 12ms reading results.
2025-11-25 16:31:57.084 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:57.084 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:31:57.091 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:31:57.093 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:31:57.094 +02:00 [INF] Branch created successfully with ID: 1
2025-11-25 16:31:57.098 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:31:57.100 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:31:57.100 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:31:57.101 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:31:57.101 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:31:57.102 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 16:31:57.111 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[1],action=[GetById],controller=[Branch])
2025-11-25 16:31:57.114 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/1 and 
2025-11-25 16:31:57.116 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/1
2025-11-25 16:31:57.125 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 1340.2311ms
2025-11-25 16:31:57.127 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:31:57.128 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:31:57.130 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:31:57.133 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:31:57.134 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:31:57.135 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 1598.4503ms
2025-11-25 16:32:07.732 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 146
2025-11-25 16:32:07.735 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 16:32:07.735 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 16:32:07.736 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:07.737 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:07.738 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:07.738 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:07.739 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:07.740 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:07.741 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:07.742 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:07.743 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:07.744 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:07.745 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:07.747 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:07.748 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:07.748 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 16:32:07.749 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:32:07.750 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000002": started reading request body.
2025-11-25 16:32:07.750 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000002": done reading request body.
2025-11-25 16:32:07.751 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 16:32:07.751 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:07.752 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:07.753 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:07.754 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:07.755 +02:00 [INF] Create Branch called at "2025-11-25T16:32:07.7552538+02:00"
2025-11-25 16:32:07.756 +02:00 [INF] Creating new branch with name: adam18
2025-11-25 16:32:07.789 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:07.793 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:07.794 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:07.795 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.796 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.796 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:07.797 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:07.797 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:07.798 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:07.800 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:07.804 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:07.805 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:32:07.806 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.806 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:07.808 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:07.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:07.811 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:07.812 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:07.813 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:32:07.813 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:07.814 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:07.816 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.817 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.818 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:07.818 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:07.819 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:07.819 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:32:07.826 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:32:07.828 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:32:07.829 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:07.831 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:32:07.832 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.832 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:07.833 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:07.834 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:32:07.834 +02:00 [INF] Branch created successfully with ID: 2
2025-11-25 16:32:07.835 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:07.836 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:07.836 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:07.837 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:07.838 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:32:07.838 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 16:32:07.839 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[2],action=[GetById],controller=[Branch])
2025-11-25 16:32:07.840 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/2 and 
2025-11-25 16:32:07.841 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/2
2025-11-25 16:32:07.842 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 97.9036ms
2025-11-25 16:32:07.843 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:07.844 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:07.844 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:07.845 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:07.846 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:07.847 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 115.2157ms
2025-11-25 16:32:14.551 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 146
2025-11-25 16:32:14.552 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 16:32:14.553 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 16:32:14.553 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:14.554 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:14.555 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:14.556 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:14.558 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:14.559 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:14.559 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:14.560 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:14.561 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:14.562 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:14.563 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:14.566 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:14.567 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:14.568 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 16:32:14.569 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:32:14.569 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000003": started reading request body.
2025-11-25 16:32:14.571 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000003": done reading request body.
2025-11-25 16:32:14.572 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 16:32:14.573 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:14.574 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:14.575 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:14.576 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:14.576 +02:00 [INF] Create Branch called at "2025-11-25T16:32:14.5767257+02:00"
2025-11-25 16:32:14.577 +02:00 [INF] Creating new branch with name: adam18
2025-11-25 16:32:14.583 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:14.585 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:14.585 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:14.586 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:14.586 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:14.587 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:14.588 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:14.588 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:14.590 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:14.591 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:14.592 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:14.593 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:32:14.593 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:14.594 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:14.594 +02:00 [WRN] Failed to create branch: Branch with name 'adam18' already exists
2025-11-25 16:32:14.595 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 32.6691ms
2025-11-25 16:32:14.601 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:14.603 +02:00 [ERR]  Exception caught: Branch with name 'adam18' already exists.
System.ComponentModel.DataAnnotations.ValidationException: Branch with name 'adam18' already exists.
   at Hospital.Infrastructure.Services.BranchService.CreateAsync(CreateBranchDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 42
   at Hospital.Controllers.BranchController.Create(CreateBranchDto dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\BranchController.cs:line 42
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:32:14.630 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:14.631 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:14.632 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:14.632 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:14.634 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 400 null application/json 83.2691ms
2025-11-25 16:32:20.119 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 146
2025-11-25 16:32:20.120 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 16:32:20.121 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 16:32:20.122 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:20.123 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:20.123 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:20.124 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:20.124 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:20.125 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:20.126 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:20.127 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:20.128 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:20.129 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:20.130 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:20.131 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:20.132 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:20.132 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 16:32:20.133 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:32:20.134 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000004": started reading request body.
2025-11-25 16:32:20.134 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000004": done reading request body.
2025-11-25 16:32:20.135 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 16:32:20.136 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:20.136 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:20.137 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:20.138 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:20.139 +02:00 [INF] Create Branch called at "2025-11-25T16:32:20.1392631+02:00"
2025-11-25 16:32:20.139 +02:00 [INF] Creating new branch with name: adam19
2025-11-25 16:32:20.140 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:20.142 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:20.144 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 16:32:20.144 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.145 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.146 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:20.146 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:20.147 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:20.147 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:20.149 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:20.150 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:20.150 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:32:20.151 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.151 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:20.152 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:20.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:20.154 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:20.154 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:20.155 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:32:20.155 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:20.156 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:20.156 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.158 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.158 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:20.159 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:20.160 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:20.160 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:32:20.171 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:32:20.173 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:32:20.174 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:20.175 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:32:20.177 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.178 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:20.179 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:20.180 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:32:20.181 +02:00 [INF] Branch created successfully with ID: 3
2025-11-25 16:32:20.182 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:20.183 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:20.183 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:20.183 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:20.184 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:32:20.184 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 16:32:20.185 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[3],action=[GetById],controller=[Branch])
2025-11-25 16:32:20.187 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/3 and 
2025-11-25 16:32:20.187 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/3
2025-11-25 16:32:20.188 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 58.196ms
2025-11-25 16:32:20.189 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:20.189 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:20.191 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:20.192 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:20.193 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:20.193 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 74.0365ms
2025-11-25 16:32:26.163 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 146
2025-11-25 16:32:26.165 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-25 16:32:26.166 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-25 16:32:26.166 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:26.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:26.167 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:26.168 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:26.168 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:26.169 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:26.170 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:26.170 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:26.171 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:26.172 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:26.173 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:26.173 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:26.174 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:26.174 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-25 16:32:26.175 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:32:26.176 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000005": started reading request body.
2025-11-25 16:32:26.177 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000005": done reading request body.
2025-11-25 16:32:26.178 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-25 16:32:26.178 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:26.179 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:26.179 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-25 16:32:26.180 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-25 16:32:26.180 +02:00 [INF] Create Branch called at "2025-11-25T16:32:26.1808397+02:00"
2025-11-25 16:32:26.181 +02:00 [INF] Creating new branch with name: adam20
2025-11-25 16:32:26.181 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:26.183 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:26.183 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:26.184 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.186 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.187 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:26.187 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:26.187 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:26.188 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:26.189 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:26.190 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:26.191 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:32:26.192 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.192 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:26.193 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:26.194 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:26.195 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:26.196 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:26.196 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:32:26.196 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:26.197 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:26.198 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.198 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.199 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:26.200 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:26.201 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:26.201 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:32:26.208 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:32:26.209 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:32:26.210 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:26.211 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:32:26.211 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.212 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:26.213 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:26.213 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:32:26.214 +02:00 [INF] Branch created successfully with ID: 4
2025-11-25 16:32:26.214 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:26.215 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:26.216 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:26.216 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:26.217 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:32:26.217 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 16:32:26.218 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[4],action=[GetById],controller=[Branch])
2025-11-25 16:32:26.219 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/4 and 
2025-11-25 16:32:26.219 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/4
2025-11-25 16:32:26.220 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 47.5267ms
2025-11-25 16:32:26.221 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-25 16:32:26.221 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:26.222 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:26.222 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:26.223 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:26.224 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 60.684ms
2025-11-25 16:32:33.244 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Branch/GetBy/1 - null null
2025-11-25 16:32:33.246 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetBy/1'
2025-11-25 16:32:33.246 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)' with route pattern 'api/Branch/GetBy/{id}' is valid for the request path '/api/Branch/GetBy/1'
2025-11-25 16:32:33.247 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-25 16:32:33.248 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:33.248 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:33.248 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-25 16:32:33.252 +02:00 [INF] Route matched with {action = "GetById", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:33.253 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:33.253 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:33.254 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:33.256 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:33.257 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:33.257 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:33.258 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:33.259 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 16:32:33.259 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 16:32:33.260 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:32:33.261 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:32:33.261 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 16:32:33.262 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 16:32:33.263 +02:00 [INF] Get Branch By Id called at "2025-11-25T16:32:33.2636920+02:00"
2025-11-25 16:32:33.264 +02:00 [INF] Fetching branch by ID: 1
2025-11-25 16:32:33.265 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:33.269 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-25 16:32:33.312 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:32:33.321 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:33.322 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:33.322 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:33.323 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:33.324 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:33.325 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:33.326 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:33.326 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:32:33.331 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:32:33.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:33.335 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:33.336 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:32:33.336 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:33.337 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:33.338 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:33.339 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:33.339 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:33.340 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:33.341 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:32:33.342 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-25 16:32:33.342 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetById (Hospital) in 85.0881ms
2025-11-25 16:32:33.343 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-25 16:32:33.344 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:33.345 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:33.345 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:33.346 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:33.347 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Branch/GetBy/1 - 200 null application/json; charset=utf-8 102.3879ms
2025-11-25 16:32:37.732 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 16:32:37.734 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 16:32:37.735 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 16:32:37.737 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:32:37.737 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:37.738 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:37.739 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:32:37.748 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:37.750 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:37.751 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:37.751 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:37.753 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:37.753 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:37.754 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:37.755 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:37.756 +02:00 [INF] Get All Branch called at "2025-11-25T16:32:37.7564065+02:00"
2025-11-25 16:32:37.757 +02:00 [INF] Fetching all branches
2025-11-25 16:32:37.758 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:37.759 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:37.759 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:37.760 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:37.761 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:37.761 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:37.762 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:37.763 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:37.763 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:37.767 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:37.769 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:37.770 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:32:37.771 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:37.772 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:37.778 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:37.779 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:37.780 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:37.780 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:37.781 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:32:37.781 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:32:37.784 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 30.0564ms
2025-11-25 16:32:37.785 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:32:37.785 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:37.786 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:37.786 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:37.787 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:37.788 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 55.3329ms
2025-11-25 16:32:50.453 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Branch/Update - application/json 160
2025-11-25 16:32:50.455 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Update'
2025-11-25 16:32:50.456 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Update (Hospital)' with route pattern 'api/Branch/Update' is valid for the request path '/api/Branch/Update'
2025-11-25 16:32:50.457 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Update (Hospital)'
2025-11-25 16:32:50.457 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:50.457 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:50.458 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Update (Hospital)'
2025-11-25 16:32:50.460 +02:00 [INF] Route matched with {action = "Update", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Hospital.Application.DTO.Branch.UpdateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:50.461 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:50.462 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:50.462 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:50.463 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:50.464 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:50.464 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:50.465 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:50.466 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.UpdateBranchDto' ...
2025-11-25 16:32:50.466 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.UpdateBranchDto' using the name '' in request data ...
2025-11-25 16:32:50.467 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:32:50.468 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000008": started reading request body.
2025-11-25 16:32:50.469 +02:00 [DBG] Connection id "0HNHC5T0J0T1H", Request id "0HNHC5T0J0T1H:00000008": done reading request body.
2025-11-25 16:32:50.471 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.UpdateBranchDto'
2025-11-25 16:32:50.471 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.UpdateBranchDto'.
2025-11-25 16:32:50.472 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.UpdateBranchDto'.
2025-11-25 16:32:50.473 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.UpdateBranchDto' ...
2025-11-25 16:32:50.477 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.UpdateBranchDto'.
2025-11-25 16:32:50.478 +02:00 [INF] Update Branch called at "2025-11-25T16:32:50.4788170+02:00"
2025-11-25 16:32:50.480 +02:00 [INF] Updating branch with ID: 1
2025-11-25 16:32:50.480 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:50.483 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:50.483 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:50.484 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.485 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.486 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:50.486 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:50.487 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:50.487 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:32:50.490 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:32:50.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:50.492 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:50.493 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:32:50.493 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.494 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:50.495 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.495 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.496 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:50.497 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:50.497 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:50.498 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:50.500 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:50.501 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:50.501 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:32:50.502 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.502 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:50.504 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:50.505 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:50.506 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:50.507 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:32:50.507 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:32:50.508 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:32:50.510 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.511 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.512 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:50.512 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:50.513 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:50.513 +02:00 [DBG] Executing DbCommand [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Branches] SET [Address] = @p0, [BranchName] = @p1, [CreatedAt] = @p2, [Description] = @p3, [Email] = @p4, [ImageURL] = @p5, [Phone] = @p6, [UpdatedAt] = @p7
OUTPUT 1
WHERE [BranchId] = @p8;
2025-11-25 16:32:50.518 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Branches] SET [Address] = @p0, [BranchName] = @p1, [CreatedAt] = @p2, [Description] = @p3, [Email] = @p4, [ImageURL] = @p5, [Phone] = @p6, [UpdatedAt] = @p7
OUTPUT 1
WHERE [BranchId] = @p8;
2025-11-25 16:32:50.520 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:50.520 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:32:50.521 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.522 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:32:50.524 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:32:50.525 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:32:50.526 +02:00 [INF] Branch with ID 1 updated successfully
2025-11-25 16:32:50.526 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:50.527 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:50.528 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:50.528 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:50.528 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:32:50.529 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:32:50.530 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Update (Hospital) in 65.2693ms
2025-11-25 16:32:50.530 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Update (Hospital)'
2025-11-25 16:32:50.531 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:50.531 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:50.531 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:50.532 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:50.533 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Branch/Update - 200 null text/plain; charset=utf-8 79.4642ms
2025-11-25 16:32:56.086 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 16:32:56.088 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 16:32:56.089 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 16:32:56.089 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:32:56.090 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:32:56.090 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:32:56.091 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:32:56.092 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:32:56.093 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:32:56.094 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:32:56.095 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:32:56.097 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:32:56.097 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:32:56.098 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:56.099 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:32:56.100 +02:00 [INF] Get All Branch called at "2025-11-25T16:32:56.1006136+02:00"
2025-11-25 16:32:56.101 +02:00 [INF] Fetching all branches
2025-11-25 16:32:56.103 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:32:56.104 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:32:56.105 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:32:56.105 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:56.107 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:56.108 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:32:56.108 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:32:56.109 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:32:56.110 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:56.111 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:32:56.112 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:32:56.113 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:32:56.113 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:56.114 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:32:56.115 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:32:56.116 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:32:56.116 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:32:56.117 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:32:56.117 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:32:56.118 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:32:56.119 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 20.6218ms
2025-11-25 16:32:56.119 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:32:56.120 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" completed keep alive response.
2025-11-25 16:32:56.120 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:32:56.121 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:32:56.122 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:32:56.123 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 36.9335ms
2025-11-25 16:33:11.967 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" is closing.
2025-11-25 16:33:11.967 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" is closed. The last processed stream ID was 7.
2025-11-25 16:33:11.968 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" received FIN.
2025-11-25 16:33:11.969 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:33:11.970 +02:00 [DBG] The connection queue processing loop for 0HNHC5T0J0T1F completed.
2025-11-25 16:33:11.971 +02:00 [DBG] Connection id "0HNHC5T0J0T1F" stopped.
2025-11-25 16:34:20.735 +02:00 [DBG] Connection id "0HNHC5T0J0T1I" accepted.
2025-11-25 16:34:20.736 +02:00 [DBG] Connection id "0HNHC5T0J0T1I" received FIN.
2025-11-25 16:34:20.736 +02:00 [DBG] Connection id "0HNHC5T0J0T1I" started.
2025-11-25 16:34:20.737 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" accepted.
2025-11-25 16:34:20.739 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:34:20.739 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" started.
2025-11-25 16:34:20.740 +02:00 [DBG] Connection id "0HNHC5T0J0T1I" stopped.
2025-11-25 16:34:20.741 +02:00 [DBG] Connection id "0HNHC5T0J0T1I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:34:20.745 +02:00 [DBG] Connection 0HNHC5T0J0T1J established using the following protocol: "Tls12"
2025-11-25 16:34:20.746 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/Branch/Delete/1 - null null
2025-11-25 16:34:20.748 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Delete/1'
2025-11-25 16:34:20.748 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Delete (Hospital)' with route pattern 'api/Branch/Delete/{id}' is valid for the request path '/api/Branch/Delete/1'
2025-11-25 16:34:20.749 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Delete (Hospital)'
2025-11-25 16:34:20.749 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:34:20.749 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:34:20.750 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Delete (Hospital)'
2025-11-25 16:34:20.753 +02:00 [INF] Route matched with {action = "Delete", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:34:20.754 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:34:20.755 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:34:20.756 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:34:20.757 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:34:20.757 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:34:20.759 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:34:20.759 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:34:20.760 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 16:34:20.761 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 16:34:20.761 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:34:20.762 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:34:20.762 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 16:34:20.762 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 16:34:20.763 +02:00 [INF] Delete Branch called at "2025-11-25T16:34:20.7638499+02:00"
2025-11-25 16:34:20.764 +02:00 [INF] Deleting branch with ID: 1
2025-11-25 16:34:20.765 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:34:20.766 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:34:20.767 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:34:20.767 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.768 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.768 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:20.769 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:20.769 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:20.770 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:34:20.773 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:34:20.774 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:20.775 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:20.775 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:34:20.776 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.777 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:20.778 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:20.780 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:34:20.780 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:34:20.781 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:34:20.781 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:34:20.782 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:34:20.785 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.786 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.786 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:20.787 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:20.787 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:20.788 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Branches]
OUTPUT 1
WHERE [BranchId] = @p0;
2025-11-25 16:34:20.797 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Branches]
OUTPUT 1
WHERE [BranchId] = @p0;
2025-11-25 16:34:20.798 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:20.799 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:34:20.799 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.800 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:20.803 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:20.804 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:34:20.807 +02:00 [INF] Branch with ID 1 deleted successfully
2025-11-25 16:34:20.807 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:34:20.809 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:34:20.809 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:34:20.810 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:34:20.810 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:34:20.810 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:34:20.811 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Delete (Hospital) in 52.807ms
2025-11-25 16:34:20.812 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Delete (Hospital)'
2025-11-25 16:34:20.813 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:34:20.814 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:34:20.814 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:20.815 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:34:20.816 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/Branch/Delete/1 - 200 null text/plain; charset=utf-8 69.4992ms
2025-11-25 16:34:25.121 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-25 16:34:25.123 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-25 16:34:25.123 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-25 16:34:25.124 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:34:25.124 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:34:25.125 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:34:25.126 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:34:25.126 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-25 16:34:25.127 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:34:25.128 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:34:25.128 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:34:25.130 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:34:25.130 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:34:25.131 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:34:25.132 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-25 16:34:25.132 +02:00 [INF] Get All Branch called at "2025-11-25T16:34:25.1324944+02:00"
2025-11-25 16:34:25.132 +02:00 [INF] Fetching all branches
2025-11-25 16:34:25.133 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:34:25.134 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:34:25.134 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:34:25.135 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:25.135 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:25.136 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:25.137 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:25.137 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:25.138 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:34:25.139 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-25 16:34:25.140 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:25.141 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:34:25.141 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:25.142 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:25.143 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:34:25.144 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:34:25.145 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:34:25.145 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:34:25.146 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:34:25.147 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:34:25.148 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 16.8206ms
2025-11-25 16:34:25.148 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-25 16:34:25.149 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:34:25.150 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:34:25.150 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:25.152 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:34:25.152 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 31.1697ms
2025-11-25 16:34:33.265 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 65
2025-11-25 16:34:33.268 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-25 16:34:33.268 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-25 16:34:33.269 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 16:34:33.269 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:34:33.270 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:34:33.271 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 16:34:33.274 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-25 16:34:33.276 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:34:33.277 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:34:33.277 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:34:33.278 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:34:33.279 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:34:33.280 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 16:34:33.300 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-25 16:34:33.301 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 16:34:33.302 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-25 16:34:33.302 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:34:33.303 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000003": started reading request body.
2025-11-25 16:34:33.304 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000003": done reading request body.
2025-11-25 16:34:33.305 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-25 16:34:33.306 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 16:34:33.306 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 16:34:33.307 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-25 16:34:33.308 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-25 16:34:33.309 +02:00 [INF] Login called at "2025-11-25T16:34:33.3092342+02:00"
2025-11-25 16:34:33.311 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-11-25 16:34:33.313 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:34:33.314 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-25 16:34:33.320 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:34:33.324 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:34:33.325 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:34:33.325 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.326 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.326 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:33.327 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.327 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.328 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:34:33.334 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:34:33.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:33.372 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:33.373 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 37ms reading results.
2025-11-25 16:34:33.374 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.375 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:33.440 +02:00 [DBG] Creating JWT token for user 087f4089-4945-4f33-9f63-350993a63ad1
2025-11-25 16:34:33.446 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-25 16:34:33.464 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:34:33.467 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.468 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.468 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:33.469 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.469 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:33.470 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-25 16:34:33.473 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-25 16:34:33.474 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:33.476 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:34:33.476 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.477 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:33.482 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-25 16:34:33.492 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:34:33.496 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.497 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.497 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:33.498 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.498 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:33.499 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 16:34:33.506 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 16:34:33.508 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:33.508 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:34:33.509 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.509 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:33.513 +02:00 [DBG] JWT token created for user 087f4089-4945-4f33-9f63-350993a63ad1, expires at "2025-11-25T15:34:33.0000000Z"
2025-11-25 16:34:33.514 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.514 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.515 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:33.515 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.516 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:33.517 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 16:34:33.519 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-25 16:34:33.520 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:33.520 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:34:33.521 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.522 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:33.527 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-25 16:34:33.530 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:34:33.532 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.533 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.534 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:33.534 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.535 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:33.535 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:34:33.543 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:34:33.546 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:33.546 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:34:33.547 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.547 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:33.552 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:33.554 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:34:33.559 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:34:33.561 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:34:33.561 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:34:33.562 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:34:33.574 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.574 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.575 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:33.576 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:33.578 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-25 16:34:33.579 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] IS NULL;
2025-11-25 16:34:33.586 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] IS NULL;
2025-11-25 16:34:33.588 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:33.589 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:34:33.589 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.590 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:33.591 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:33.592 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:34:33.636 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-11-25 16:34:33.637 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:34:33.638 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:34:33.638 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:34:33.639 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:34:33.639 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:34:33.640 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-25 16:34:33.643 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 363.1389ms
2025-11-25 16:34:33.644 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-25 16:34:33.644 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:34:33.645 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:34:33.645 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:33.646 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:34:33.647 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 381.4409ms
2025-11-25 16:34:54.054 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-25 16:34:54.055 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-25 16:34:54.056 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-25 16:34:54.057 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:34:54.057 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:34:54.057 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:34:54.058 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:34:54.060 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:34:54.063 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:34:54.063 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:34:54.064 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:34:54.064 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:34:54.066 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:34:54.067 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:34:54.068 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:34:54.069 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:34:54.069 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-25 16:34:54.070 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:34:54.071 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000004": started reading request body.
2025-11-25 16:34:54.072 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000004": done reading request body.
2025-11-25 16:34:54.075 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-25 16:34:54.076 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:34:54.076 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:34:54.077 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:34:54.078 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:34:54.079 +02:00 [INF] create event  called at "2025-11-25T16:34:54.0796530+02:00"
2025-11-25 16:34:54.080 +02:00 [INF] Adding new event: event 2 for Branch ID: 2
2025-11-25 16:34:54.081 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:34:54.081 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:34:54.082 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:34:54.083 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:34:54.083 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.084 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.084 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:54.085 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:54.085 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:34:54.086 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:34:54.089 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:34:54.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:54.092 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:54.093 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:34:54.093 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.094 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:54.100 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Event.EventId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:54.113 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:54.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:54.120 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:34:54.125 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:34:54.127 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:34:54.127 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:34:54.127 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:34:54.129 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.129 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.130 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:34:54.130 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:54.131 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:34:54.131 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:34:54.136 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:34:54.139 +02:00 [DBG] The foreign key property 'Event.EventId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:34:54.140 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:34:54.140 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:34:54.141 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.142 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:34:54.144 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:34:54.145 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:34:54.146 +02:00 [INF] Event event 2 added successfully with ID 1
2025-11-25 16:34:54.147 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:34:54.149 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:34:54.149 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:34:54.150 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:34:54.150 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:34:54.151 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:34:54.152 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] for address (id=[1],action=[GetEvent],controller=[Event])
2025-11-25 16:34:54.153 +02:00 [DBG] Successfully processed template api/Event/GetEvent for Hospital.Controllers.EventController.GetEvent (Hospital) resulting in /api/Event/GetEvent and ?id=1
2025-11-25 16:34:54.153 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] with result /api/Event/GetEvent?id=1
2025-11-25 16:34:54.157 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 90.119ms
2025-11-25 16:34:54.157 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:34:54.158 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:34:54.159 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:34:54.159 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:34:54.159 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:34:54.160 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 201 null application/json; charset=utf-8 106.4738ms
2025-11-25 16:35:04.647 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-25 16:35:04.650 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-25 16:35:04.650 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-25 16:35:04.651 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:35:04.652 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:35:04.652 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:35:04.652 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:35:04.653 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:35:04.654 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:35:04.655 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:35:04.655 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:35:04.656 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:35:04.657 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:35:04.657 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:35:04.658 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:35:04.659 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:35:04.660 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-25 16:35:04.660 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:35:04.661 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000005": started reading request body.
2025-11-25 16:35:04.662 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000005": done reading request body.
2025-11-25 16:35:04.662 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-25 16:35:04.663 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:35:04.663 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:35:04.664 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:35:04.665 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:35:04.666 +02:00 [INF] create event  called at "2025-11-25T16:35:04.6662297+02:00"
2025-11-25 16:35:04.666 +02:00 [INF] Adding new event: event 2 for Branch ID: 3
2025-11-25 16:35:04.667 +02:00 [INF] Fetching branch by ID: 3
2025-11-25 16:35:04.668 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:35:04.669 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:35:04.670 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:35:04.670 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.671 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.671 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:35:04.672 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:04.673 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:35:04.674 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:35:04.676 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:35:04.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:04.679 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:35:04.680 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:35:04.681 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.681 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:35:04.683 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Event.EventId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:04.684 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:04.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:04.686 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:35:04.686 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:35:04.687 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:35:04.687 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:35:04.688 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:35:04.688 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.689 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.689 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:35:04.690 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:04.690 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:04.691 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:35:04.702 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:35:04.703 +02:00 [DBG] The foreign key property 'Event.EventId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:35:04.704 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:35:04.705 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:35:04.706 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.707 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:35:04.708 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:04.708 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:35:04.709 +02:00 [INF] Event event 2 added successfully with ID 2
2025-11-25 16:35:04.710 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:35:04.711 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:35:04.712 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:35:04.712 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:35:04.713 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:35:04.713 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:35:04.714 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] for address (id=[2],action=[GetEvent],controller=[Event])
2025-11-25 16:35:04.715 +02:00 [DBG] Successfully processed template api/Event/GetEvent for Hospital.Controllers.EventController.GetEvent (Hospital) resulting in /api/Event/GetEvent and ?id=2
2025-11-25 16:35:04.716 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] with result /api/Event/GetEvent?id=2
2025-11-25 16:35:04.717 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 59.8788ms
2025-11-25 16:35:04.718 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:35:04.718 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:35:04.719 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:35:04.720 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:04.720 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:35:04.721 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 201 null application/json; charset=utf-8 73.3506ms
2025-11-25 16:35:06.994 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" disconnecting.
2025-11-25 16:35:06.995 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" stopped.
2025-11-25 16:35:06.996 +02:00 [DBG] Connection id "0HNHC5T0J0T1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:35:08.309 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-25 16:35:08.310 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-25 16:35:08.311 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-25 16:35:08.312 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:35:08.312 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:35:08.313 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:35:08.313 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:35:08.314 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:35:08.315 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:35:08.316 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:35:08.317 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:35:08.318 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:35:08.318 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:35:08.319 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:35:08.321 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:35:08.321 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:35:08.322 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-25 16:35:08.322 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:35:08.323 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000006": started reading request body.
2025-11-25 16:35:08.324 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000006": done reading request body.
2025-11-25 16:35:08.325 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-25 16:35:08.325 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:35:08.326 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:35:08.326 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:35:08.327 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:35:08.328 +02:00 [INF] create event  called at "2025-11-25T16:35:08.3281915+02:00"
2025-11-25 16:35:08.328 +02:00 [INF] Adding new event: event 2 for Branch ID: 4
2025-11-25 16:35:08.329 +02:00 [INF] Fetching branch by ID: 4
2025-11-25 16:35:08.330 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:35:08.332 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:35:08.333 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:35:08.333 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.334 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.334 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:35:08.335 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:08.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:35:08.336 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:35:08.337 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:35:08.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:08.339 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:35:08.339 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:35:08.340 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.341 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:35:08.342 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Event.EventId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:08.343 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:08.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:08.344 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:35:08.345 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:35:08.345 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:35:08.346 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:35:08.346 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:35:08.347 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.348 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.348 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:35:08.349 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:08.350 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:35:08.350 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:35:08.357 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:35:08.359 +02:00 [DBG] The foreign key property 'Event.EventId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:35:08.361 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:35:08.361 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:35:08.362 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.362 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:35:08.363 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:08.364 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:35:08.364 +02:00 [INF] Event event 2 added successfully with ID 3
2025-11-25 16:35:08.365 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:35:08.366 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:35:08.367 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:35:08.367 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:35:08.368 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:35:08.368 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:35:08.369 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] for address (id=[3],action=[GetEvent],controller=[Event])
2025-11-25 16:35:08.370 +02:00 [DBG] Successfully processed template api/Event/GetEvent for Hospital.Controllers.EventController.GetEvent (Hospital) resulting in /api/Event/GetEvent and ?id=3
2025-11-25 16:35:08.371 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] with result /api/Event/GetEvent?id=3
2025-11-25 16:35:08.371 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 52.3941ms
2025-11-25 16:35:08.372 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:35:08.372 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:35:08.373 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:35:08.374 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:08.374 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:35:08.375 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 201 null application/json; charset=utf-8 65.8772ms
2025-11-25 16:35:53.383 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Event/UpdateEvent - application/json 215
2025-11-25 16:35:53.384 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/UpdateEvent'
2025-11-25 16:35:53.385 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.UpdateEvent (Hospital)' with route pattern 'api/Event/UpdateEvent' is valid for the request path '/api/Event/UpdateEvent'
2025-11-25 16:35:53.386 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.UpdateEvent (Hospital)'
2025-11-25 16:35:53.386 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:35:53.386 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:35:53.387 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.UpdateEvent (Hospital)'
2025-11-25 16:35:53.389 +02:00 [INF] Route matched with {action = "UpdateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateEvent(Hospital.Application.DTO.Event.EventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:35:53.392 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:35:53.393 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:35:53.394 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:35:53.396 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:35:53.397 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:35:53.398 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:35:53.399 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:35:53.399 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.EventDto' ...
2025-11-25 16:35:53.400 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.EventDto' using the name '' in request data ...
2025-11-25 16:35:53.401 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:35:53.402 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000007": started reading request body.
2025-11-25 16:35:53.402 +02:00 [DBG] Connection id "0HNHC5T0J0T1J", Request id "0HNHC5T0J0T1J:00000007": done reading request body.
2025-11-25 16:35:53.404 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.EventDto'
2025-11-25 16:35:53.405 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:35:53.405 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:35:53.406 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.EventDto' ...
2025-11-25 16:35:53.407 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:35:53.408 +02:00 [INF] update event  called at "2025-11-25T16:35:53.4086600+02:00"
2025-11-25 16:35:53.409 +02:00 [INF] Updating event ID 1 for Branch ID 2
2025-11-25 16:35:53.410 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:35:53.411 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:35:53.412 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:35:53.413 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:35:53.413 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.414 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.414 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:35:53.415 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:53.415 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:35:53.416 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:35:53.419 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:35:53.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:53.421 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:35:53.421 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:35:53.423 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.424 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:35:53.426 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:53.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:53.428 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:35:53.428 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:35:53.429 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:35:53.429 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:35:53.430 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:35:53.431 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.432 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.433 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:35:53.434 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:35:53.435 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:35:53.435 +02:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Events] SET [BranchId] = @p0, [CreatedAt] = @p1, [Description] = @p2, [EventDate] = @p3, [ImageURL] = @p4, [Title] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [EventId] = @p7;
2025-11-25 16:35:53.442 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Events] SET [BranchId] = @p0, [CreatedAt] = @p1, [Description] = @p2, [EventDate] = @p3, [ImageURL] = @p4, [Title] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [EventId] = @p7;
2025-11-25 16:35:53.443 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:35:53.444 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:35:53.444 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.445 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:35:53.446 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:35:53.447 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:35:53.447 +02:00 [INF] Event ID 1 updated successfully
2025-11-25 16:35:53.448 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:35:53.449 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:35:53.449 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:35:53.450 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:35:53.450 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:35:53.451 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:35:53.452 +02:00 [INF] Executed action Hospital.Controllers.EventController.UpdateEvent (Hospital) in 53.8427ms
2025-11-25 16:35:53.453 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.UpdateEvent (Hospital)'
2025-11-25 16:35:53.453 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:35:53.454 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:35:53.454 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:35:53.455 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:35:53.455 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Event/UpdateEvent - 200 null text/plain; charset=utf-8 72.2309ms
2025-11-25 16:36:03.977 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Event/GetAllEvents?branchId=2 - null null
2025-11-25 16:36:03.978 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEvents'
2025-11-25 16:36:03.979 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEvents (Hospital)' with route pattern 'api/Event/GetAllEvents' is valid for the request path '/api/Event/GetAllEvents'
2025-11-25 16:36:03.980 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEvents (Hospital)'
2025-11-25 16:36:03.981 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:36:03.981 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:36:03.982 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEvents (Hospital)'
2025-11-25 16:36:03.985 +02:00 [INF] Route matched with {action = "GetAllEvents", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEvents(Int32) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:36:03.987 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:36:03.988 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:36:03.988 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:36:03.989 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:36:03.990 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:36:03.991 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:36:03.991 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:36:04.002 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:36:04.002 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:36:04.003 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:36:04.004 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:36:04.004 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:36:04.005 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:36:04.006 +02:00 [INF] get all event  called at "2025-11-25T16:36:04.0064473+02:00"
2025-11-25 16:36:04.007 +02:00 [INF] Fetching all events for Branch ID 2
2025-11-25 16:36:04.008 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:36:04.009 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()
    .Where(b => b.BranchId == __branchId_0)'
2025-11-25 16:36:04.012 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Event>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
        FROM Events AS e
        WHERE e.BranchId == @__branchId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:36:04.014 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:36:04.015 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:36:04.015 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:04.016 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:04.017 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:36:04.017 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:36:04.018 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:36:04.018 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[BranchId] = @__branchId_0
2025-11-25 16:36:04.023 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[BranchId] = @__branchId_0
2025-11-25 16:36:04.024 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:36:04.025 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:36:04.026 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:04.027 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:36:04.030 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:36:04.031 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:36:04.032 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:36:04.032 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:36:04.033 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:36:04.033 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Event.EventDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:36:04.034 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEvents (Hospital) in 43.8124ms
2025-11-25 16:36:04.035 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEvents (Hospital)'
2025-11-25 16:36:04.035 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:36:04.036 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:36:04.036 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:04.037 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:36:04.038 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Event/GetAllEvents?branchId=2 - 200 null application/json; charset=utf-8 61.1258ms
2025-11-25 16:36:09.570 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-25 16:36:09.571 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-25 16:36:09.571 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-25 16:36:09.572 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-25 16:36:09.573 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:36:09.573 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:36:09.574 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-25 16:36:09.576 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:36:09.577 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:36:09.579 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:36:09.579 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:36:09.581 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:36:09.581 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:36:09.582 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:36:09.583 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:36:09.584 +02:00 [INF] get all  event in system  called at "2025-11-25T16:36:09.5844965+02:00"
2025-11-25 16:36:09.585 +02:00 [INF] Fetching all events in the system
2025-11-25 16:36:09.586 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:36:09.587 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()'
2025-11-25 16:36:09.589 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Event>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
        FROM Events AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:36:09.591 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:36:09.592 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:36:09.592 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:09.593 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:09.593 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:36:09.594 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:36:09.594 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:36:09.595 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-25 16:36:09.597 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-25 16:36:09.598 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:36:09.599 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:36:09.600 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:09.601 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:36:09.601 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:36:09.603 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:36:09.603 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:36:09.603 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:36:09.604 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:36:09.604 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Event.EventDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:36:09.606 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 23.7111ms
2025-11-25 16:36:09.606 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-25 16:36:09.607 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" completed keep alive response.
2025-11-25 16:36:09.607 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:36:09.608 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:09.608 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:36:09.609 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 200 null application/json; charset=utf-8 39.2914ms
2025-11-25 16:36:42.240 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" accepted.
2025-11-25 16:36:42.242 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" started.
2025-11-25 16:36:42.244 +02:00 [DBG] Connection 0HNHC5T0J0T1K established using the following protocol: "Tls12"
2025-11-25 16:36:42.246 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Event/GetEvent - application/json 35
2025-11-25 16:36:42.247 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetEvent'
2025-11-25 16:36:42.248 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)' with route pattern 'api/Event/GetEvent' is valid for the request path '/api/Event/GetEvent'
2025-11-25 16:36:42.249 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-25 16:36:42.251 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:36:42.252 +02:00 [DBG] The request has an origin header: 'https://localhost:7217'.
2025-11-25 16:36:42.254 +02:00 [INF] CORS policy execution failed.
2025-11-25 16:36:42.254 +02:00 [INF] Request origin https://localhost:7217 does not have permission to access the resource.
2025-11-25 16:36:42.256 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:36:42.256 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-25 16:36:42.260 +02:00 [INF] Route matched with {action = "GetEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEvent(Hospital.Application.DTO.Event.GetEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:36:42.262 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:36:42.262 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:36:42.263 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:36:42.264 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:36:42.264 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:36:42.265 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:36:42.266 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:36:42.267 +02:00 [DBG] Attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' ...
2025-11-25 16:36:42.267 +02:00 [DBG] Attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' using the name '' in request data ...
2025-11-25 16:36:42.268 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:36:42.269 +02:00 [DBG] Connection id "0HNHC5T0J0T1K", Request id "0HNHC5T0J0T1K:00000001": started reading request body.
2025-11-25 16:36:42.270 +02:00 [DBG] Connection id "0HNHC5T0J0T1K", Request id "0HNHC5T0J0T1K:00000001": done reading request body.
2025-11-25 16:36:42.270 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.GetEventDto'
2025-11-25 16:36:42.271 +02:00 [DBG] Done attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-25 16:36:42.271 +02:00 [DBG] Done attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-25 16:36:42.272 +02:00 [DBG] Attempting to validate the bound parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' ...
2025-11-25 16:36:42.273 +02:00 [DBG] Done attempting to validate the bound parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-25 16:36:42.273 +02:00 [INF] Get event  called at "2025-11-25T16:36:42.2739222+02:00"
2025-11-25 16:36:42.275 +02:00 [INF] Fetching event ID 2 for Branch ID 2
2025-11-25 16:36:42.275 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:36:42.276 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:36:42.278 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:36:42.278 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:36:42.279 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.279 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.280 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:36:42.280 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:36:42.281 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:36:42.282 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:36:42.285 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:36:42.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:36:42.286 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:36:42.287 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:36:42.287 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.288 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:36:42.289 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()
    .FirstOrDefault(e => e.EventId == __id_0)'
2025-11-25 16:36:42.292 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Event>(
    asyncEnumerable: new SingleQueryingEnumerable<Event>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
            SELECT TOP(1) e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
            FROM Events AS e
            WHERE e.EventId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:36:42.296 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.296 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.297 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:36:42.297 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:36:42.298 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:36:42.298 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[EventId] = @__id_0
2025-11-25 16:36:42.301 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[EventId] = @__id_0
2025-11-25 16:36:42.302 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:36:42.302 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:36:42.303 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.303 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:36:42.304 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:36:42.305 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:36:42.305 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:36:42.306 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:36:42.307 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:36:42.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:36:42.308 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetEvent (Hospital) in 42.6283ms
2025-11-25 16:36:42.309 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-25 16:36:42.309 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:36:42.310 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:36:42.311 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:36:42.312 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Event/GetEvent - 200 null application/json; charset=utf-8 65.7223ms
2025-11-25 16:37:42.733 +02:00 [DBG] Connection id "0HNHC5T0J0T1L" accepted.
2025-11-25 16:37:42.733 +02:00 [DBG] Connection id "0HNHC5T0J0T1L" received FIN.
2025-11-25 16:37:42.734 +02:00 [DBG] Connection id "0HNHC5T0J0T1L" started.
2025-11-25 16:37:42.735 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" accepted.
2025-11-25 16:37:42.736 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:37:42.737 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" started.
2025-11-25 16:37:42.739 +02:00 [DBG] Connection id "0HNHC5T0J0T1L" stopped.
2025-11-25 16:37:42.740 +02:00 [DBG] Connection id "0HNHC5T0J0T1L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:37:42.743 +02:00 [DBG] Connection 0HNHC5T0J0T1M established using the following protocol: "Tls12"
2025-11-25 16:37:42.745 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/GetEvent - application/json 38
2025-11-25 16:37:42.746 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetEvent'
2025-11-25 16:37:42.747 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)' with route pattern 'api/Event/GetEvent' is valid for the request path '/api/Event/GetEvent'
2025-11-25 16:37:42.748 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-25 16:37:42.748 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:37:42.749 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:37:42.749 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-25 16:37:42.749 +02:00 [INF] Route matched with {action = "GetEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEvent(Hospital.Application.DTO.Event.GetEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:37:42.750 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:37:42.751 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:37:42.751 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:37:42.752 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:37:42.753 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:37:42.754 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:37:42.754 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:37:42.755 +02:00 [DBG] Attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' ...
2025-11-25 16:37:42.755 +02:00 [DBG] Attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' using the name '' in request data ...
2025-11-25 16:37:42.756 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:37:42.758 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000001": started reading request body.
2025-11-25 16:37:42.759 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000001": done reading request body.
2025-11-25 16:37:42.759 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.GetEventDto'
2025-11-25 16:37:42.760 +02:00 [DBG] Done attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-25 16:37:42.761 +02:00 [DBG] Done attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-25 16:37:42.761 +02:00 [DBG] Attempting to validate the bound parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' ...
2025-11-25 16:37:42.762 +02:00 [DBG] Done attempting to validate the bound parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-25 16:37:42.763 +02:00 [INF] Get event  called at "2025-11-25T16:37:42.7635281+02:00"
2025-11-25 16:37:42.763 +02:00 [INF] Fetching event ID 2 for Branch ID 2
2025-11-25 16:37:42.764 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:37:42.765 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:37:42.766 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:37:42.767 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:37:42.767 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.768 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.768 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:37:42.769 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:37:42.769 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:37:42.770 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:37:42.774 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:37:42.777 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:37:42.777 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:37:42.778 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:37:42.778 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.779 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:37:42.780 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.781 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.782 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:37:42.782 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:37:42.783 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:37:42.783 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[EventId] = @__id_0
2025-11-25 16:37:42.786 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[EventId] = @__id_0
2025-11-25 16:37:42.787 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:37:42.787 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:37:42.788 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.788 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:37:42.789 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:37:42.792 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:37:42.792 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:37:42.793 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:37:42.793 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:37:42.794 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:37:42.795 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetEvent (Hospital) in 41.0643ms
2025-11-25 16:37:42.795 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-25 16:37:42.796 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:37:42.796 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:37:42.797 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:37:42.797 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:37:42.798 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/GetEvent - 200 null application/json; charset=utf-8 53.3957ms
2025-11-25 16:38:04.519 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - application/json 203
2025-11-25 16:38:04.520 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/CreateNews'
2025-11-25 16:38:04.521 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)' with route pattern 'api/News/CreateNews' is valid for the request path '/api/News/CreateNews'
2025-11-25 16:38:04.522 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:04.522 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:04.523 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:04.523 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:04.526 +02:00 [INF] Route matched with {action = "CreateNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateNews(Hospital.Application.DTO.News.AddNewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:04.527 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:04.528 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:04.529 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:04.531 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:04.531 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:04.532 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:04.533 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:04.534 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 16:38:04.534 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' using the name '' in request data ...
2025-11-25 16:38:04.535 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:38:04.536 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000002": started reading request body.
2025-11-25 16:38:04.537 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000002": done reading request body.
2025-11-25 16:38:04.538 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.AddNewsDto'
2025-11-25 16:38:04.539 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:04.540 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:04.540 +02:00 [DBG] Attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 16:38:04.542 +02:00 [DBG] Done attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:04.543 +02:00 [INF] create News  called at "2025-11-25T16:38:04.5438232+02:00"
2025-11-25 16:38:04.545 +02:00 [INF] Adding a new news item: hiiiiiiiiii
2025-11-25 16:38:04.547 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:38:04.548 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:04.549 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:04.549 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:04.550 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.550 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.551 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:04.551 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:04.552 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:04.553 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:04.555 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:04.557 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:04.558 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:04.558 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:04.559 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.560 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:04.564 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'News.NewsId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:04.574 +02:00 [DBG] The navigation 'News.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:04.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'News' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:04.578 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:04.582 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:04.583 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:38:04.584 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:04.584 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:04.585 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.586 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.586 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:04.587 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:04.587 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:04.588 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:38:04.597 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:38:04.600 +02:00 [DBG] The foreign key property 'News.NewsId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:38:04.601 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:04.601 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:38:04.602 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.603 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:04.604 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:04.605 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:38:04.606 +02:00 [INF] News item added successfully with ID: 1
2025-11-25 16:38:04.608 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:04.609 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:04.609 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:04.610 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:04.610 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:04.611 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:04.612 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] for address (id=[1],action=[GetNews],controller=[News])
2025-11-25 16:38:04.613 +02:00 [DBG] Successfully processed template api/News/GetNews for Hospital.Controllers.NewsController.GetNews (Hospital) resulting in /api/News/GetNews and ?id=1
2025-11-25 16:38:04.613 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] with result /api/News/GetNews?id=1
2025-11-25 16:38:04.615 +02:00 [INF] Executed action Hospital.Controllers.NewsController.CreateNews (Hospital) in 83.0567ms
2025-11-25 16:38:04.616 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:04.617 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:04.618 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:04.618 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:04.619 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:04.619 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - 201 null application/json; charset=utf-8 100.1094ms
2025-11-25 16:38:11.432 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - application/json 203
2025-11-25 16:38:11.434 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/CreateNews'
2025-11-25 16:38:11.436 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)' with route pattern 'api/News/CreateNews' is valid for the request path '/api/News/CreateNews'
2025-11-25 16:38:11.437 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:11.437 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:11.437 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:11.439 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:11.439 +02:00 [INF] Route matched with {action = "CreateNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateNews(Hospital.Application.DTO.News.AddNewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:11.440 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:11.441 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:11.442 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:11.443 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:11.444 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:11.445 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:11.446 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:11.446 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 16:38:11.447 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' using the name '' in request data ...
2025-11-25 16:38:11.448 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:38:11.449 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000003": started reading request body.
2025-11-25 16:38:11.449 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000003": done reading request body.
2025-11-25 16:38:11.450 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.AddNewsDto'
2025-11-25 16:38:11.450 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:11.451 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:11.451 +02:00 [DBG] Attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 16:38:11.452 +02:00 [DBG] Done attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:11.453 +02:00 [INF] create News  called at "2025-11-25T16:38:11.4534368+02:00"
2025-11-25 16:38:11.453 +02:00 [INF] Adding a new news item: hiiiiiiiiii
2025-11-25 16:38:11.454 +02:00 [INF] Fetching branch by ID: 3
2025-11-25 16:38:11.455 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:11.457 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:11.458 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:11.458 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.459 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.459 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:11.459 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:11.460 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:11.461 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:11.464 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:11.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:11.467 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:11.467 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:11.468 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.468 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:11.469 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'News.NewsId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:11.470 +02:00 [DBG] The navigation 'News.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:11.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'News' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:11.471 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:11.472 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:11.473 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:38:11.473 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:11.474 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:11.474 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.475 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.476 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:11.476 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:11.477 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:11.477 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:38:11.481 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:38:11.483 +02:00 [DBG] The foreign key property 'News.NewsId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:38:11.484 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:11.484 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:11.486 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.486 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:11.487 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:11.488 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:38:11.489 +02:00 [INF] News item added successfully with ID: 2
2025-11-25 16:38:11.490 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:11.491 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:11.491 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:11.492 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:11.492 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:11.493 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:11.494 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] for address (id=[2],action=[GetNews],controller=[News])
2025-11-25 16:38:11.494 +02:00 [DBG] Successfully processed template api/News/GetNews for Hospital.Controllers.NewsController.GetNews (Hospital) resulting in /api/News/GetNews and ?id=2
2025-11-25 16:38:11.495 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] with result /api/News/GetNews?id=2
2025-11-25 16:38:11.496 +02:00 [INF] Executed action Hospital.Controllers.NewsController.CreateNews (Hospital) in 51.3347ms
2025-11-25 16:38:11.497 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:11.497 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:11.498 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:11.499 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:11.499 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:11.500 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - 201 null application/json; charset=utf-8 68.1217ms
2025-11-25 16:38:15.430 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - application/json 203
2025-11-25 16:38:15.432 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/CreateNews'
2025-11-25 16:38:15.433 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)' with route pattern 'api/News/CreateNews' is valid for the request path '/api/News/CreateNews'
2025-11-25 16:38:15.433 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:15.434 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:15.434 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:15.434 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:15.435 +02:00 [INF] Route matched with {action = "CreateNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateNews(Hospital.Application.DTO.News.AddNewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:15.436 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:15.437 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:15.437 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:15.438 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:15.439 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:15.440 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:15.441 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:15.442 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 16:38:15.442 +02:00 [DBG] Attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' using the name '' in request data ...
2025-11-25 16:38:15.443 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:38:15.443 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000004": started reading request body.
2025-11-25 16:38:15.444 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000004": done reading request body.
2025-11-25 16:38:15.444 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.AddNewsDto'
2025-11-25 16:38:15.445 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:15.445 +02:00 [DBG] Done attempting to bind parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:15.446 +02:00 [DBG] Attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto' ...
2025-11-25 16:38:15.447 +02:00 [DBG] Done attempting to validate the bound parameter 'newsDto' of type 'Hospital.Application.DTO.News.AddNewsDto'.
2025-11-25 16:38:15.447 +02:00 [INF] create News  called at "2025-11-25T16:38:15.4476672+02:00"
2025-11-25 16:38:15.448 +02:00 [INF] Adding a new news item: hiiiiiiiiii
2025-11-25 16:38:15.448 +02:00 [INF] Fetching branch by ID: 4
2025-11-25 16:38:15.450 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:15.451 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:15.451 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:15.452 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.452 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.453 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:15.453 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:15.453 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:15.454 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:15.456 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:15.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:15.458 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:15.458 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:15.459 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.460 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:15.460 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'News.NewsId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:15.461 +02:00 [DBG] The navigation 'News.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:15.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'News' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:15.463 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:15.464 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:15.464 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:38:15.465 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:15.465 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:15.466 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.466 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.467 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:15.468 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:15.468 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:15.469 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:38:15.471 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([BranchId], [CreatedAt], [Date], [Description], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[NewsId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:38:15.472 +02:00 [DBG] The foreign key property 'News.NewsId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:38:15.473 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:15.473 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:15.474 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.475 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:15.475 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:15.476 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:38:15.477 +02:00 [INF] News item added successfully with ID: 3
2025-11-25 16:38:15.477 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:15.478 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:15.478 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:15.479 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:15.479 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:15.480 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:15.480 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] for address (id=[3],action=[GetNews],controller=[News])
2025-11-25 16:38:15.481 +02:00 [DBG] Successfully processed template api/News/GetNews for Hospital.Controllers.NewsController.GetNews (Hospital) resulting in /api/News/GetNews and ?id=3
2025-11-25 16:38:15.482 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.NewsController.GetNews (Hospital)"] with result /api/News/GetNews?id=3
2025-11-25 16:38:15.483 +02:00 [INF] Executed action Hospital.Controllers.NewsController.CreateNews (Hospital) in 43.2969ms
2025-11-25 16:38:15.484 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.CreateNews (Hospital)'
2025-11-25 16:38:15.484 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:15.485 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:15.485 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:15.486 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:15.486 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/News/CreateNews - 201 null application/json; charset=utf-8 56.4089ms
2025-11-25 16:38:20.704 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" disconnecting.
2025-11-25 16:38:20.707 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" stopped.
2025-11-25 16:38:20.708 +02:00 [DBG] Connection id "0HNHC5T0J0T1J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:38:26.781 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/News/GetNews - application/json 37
2025-11-25 16:38:26.783 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetNews'
2025-11-25 16:38:26.784 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetNews (Hospital)' with route pattern 'api/News/GetNews' is valid for the request path '/api/News/GetNews'
2025-11-25 16:38:26.785 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetNews (Hospital)'
2025-11-25 16:38:26.785 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:26.786 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:26.786 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetNews (Hospital)'
2025-11-25 16:38:26.788 +02:00 [INF] Route matched with {action = "GetNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetNews(Hospital.Application.DTO.News.GetNewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:26.789 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:26.790 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:26.791 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:26.792 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:26.793 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:26.793 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:26.794 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:26.794 +02:00 [DBG] Attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.GetNewsDto' ...
2025-11-25 16:38:26.795 +02:00 [DBG] Attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.GetNewsDto' using the name '' in request data ...
2025-11-25 16:38:26.796 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:38:26.796 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000005": started reading request body.
2025-11-25 16:38:26.797 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000005": done reading request body.
2025-11-25 16:38:26.798 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.GetNewsDto'
2025-11-25 16:38:26.798 +02:00 [DBG] Done attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.GetNewsDto'.
2025-11-25 16:38:26.799 +02:00 [DBG] Done attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.GetNewsDto'.
2025-11-25 16:38:26.799 +02:00 [DBG] Attempting to validate the bound parameter 'news' of type 'Hospital.Application.DTO.News.GetNewsDto' ...
2025-11-25 16:38:26.800 +02:00 [DBG] Done attempting to validate the bound parameter 'news' of type 'Hospital.Application.DTO.News.GetNewsDto'.
2025-11-25 16:38:26.801 +02:00 [INF] get News  called at "2025-11-25T16:38:26.8010792+02:00"
2025-11-25 16:38:26.803 +02:00 [INF] Getting news with ID: 1 for branch ID: 2
2025-11-25 16:38:26.803 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:38:26.804 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:26.805 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:26.806 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:26.806 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.807 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.807 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:26.808 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:26.808 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:26.809 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:26.810 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:26.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:26.812 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:26.812 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:26.813 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.813 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:26.815 +02:00 [DBG] Compiling query expression: 
'DbSet<News>()
    .AsNoTracking()
    .FirstOrDefault(n => n.NewsId == __id_0)'
2025-11-25 16:38:26.818 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<News>(
    asyncEnumerable: new SingleQueryingEnumerable<News>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: News.NewsId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: News.BranchId (int?) FK Index, 1], [Property: News.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: News.Date (DateTime) Required, 3], [Property: News.Description (string), 4], [Property: News.ImageURL (string) MaxLength(300), 5], [Property: News.Title (string) Required MaxLength(150), 6], [Property: News.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
            SELECT TOP(1) n.NewsId, n.BranchId, n.CreatedAt, n.Date, n.Description, n.ImageURL, n.Title, n.UpdatedAt
            FROM News AS n
            WHERE n.NewsId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, News>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:38:26.820 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.820 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.821 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:26.822 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:26.822 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:26.823 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[NewsId] = @__id_0
2025-11-25 16:38:26.826 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[NewsId] = @__id_0
2025-11-25 16:38:26.827 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:26.828 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:38:26.828 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.829 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:26.830 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:26.831 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:26.831 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:26.831 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:26.832 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:26.832 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:26.833 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetNews (Hospital) in 39.567ms
2025-11-25 16:38:26.833 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetNews (Hospital)'
2025-11-25 16:38:26.834 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:26.834 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:26.835 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:26.835 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:26.836 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/News/GetNews - 200 null application/json; charset=utf-8 55.389ms
2025-11-25 16:38:34.214 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/News/GetAllNews?branchId=2 - null null
2025-11-25 16:38:34.216 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNews'
2025-11-25 16:38:34.217 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)' with route pattern 'api/News/GetAllNews' is valid for the request path '/api/News/GetAllNews'
2025-11-25 16:38:34.218 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:38:34.218 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:34.219 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:34.219 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:38:34.222 +02:00 [INF] Route matched with {action = "GetAllNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNews(Int32) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:34.224 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:34.225 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:34.226 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:34.227 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:34.228 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:34.228 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:34.229 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:34.230 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:38:34.230 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:38:34.231 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:38:34.232 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:38:34.232 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:38:34.233 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:38:34.234 +02:00 [INF] get all News  to specific branch called at "2025-11-25T16:38:34.2343498+02:00"
2025-11-25 16:38:34.235 +02:00 [INF] Retrieving all news for branch ID: 2
2025-11-25 16:38:34.236 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:34.238 +02:00 [DBG] Compiling query expression: 
'DbSet<News>()
    .AsNoTracking()
    .Where(n => n.BranchId == __branchId_0)'
2025-11-25 16:38:34.241 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<News>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: News.NewsId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: News.BranchId (int?) FK Index, 1], [Property: News.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: News.Date (DateTime) Required, 3], [Property: News.Description (string), 4], [Property: News.ImageURL (string) MaxLength(300), 5], [Property: News.Title (string) Required MaxLength(150), 6], [Property: News.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT n.NewsId, n.BranchId, n.CreatedAt, n.Date, n.Description, n.ImageURL, n.Title, n.UpdatedAt
        FROM News AS n
        WHERE n.BranchId == @__branchId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, News>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:38:34.242 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:34.243 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:34.243 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:34.244 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:34.244 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:34.245 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:34.245 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:34.246 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[BranchId] = @__branchId_0
2025-11-25 16:38:34.255 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[BranchId] = @__branchId_0
2025-11-25 16:38:34.256 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:34.258 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:34.259 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:34.259 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:34.261 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:34.263 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:34.263 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:34.264 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:34.264 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:34.265 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.News.NewsDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:38:34.266 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNews (Hospital) in 37.897ms
2025-11-25 16:38:34.267 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:38:34.268 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:34.269 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:34.270 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:34.270 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:34.271 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/News/GetAllNews?branchId=2 - 200 null application/json; charset=utf-8 56.5356ms
2025-11-25 16:38:40.760 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/News/UpdateNews - application/json 310
2025-11-25 16:38:40.761 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/UpdateNews'
2025-11-25 16:38:40.761 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.UpdateEvent (Hospital)' with route pattern 'api/News/UpdateNews' is valid for the request path '/api/News/UpdateNews'
2025-11-25 16:38:40.762 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.UpdateEvent (Hospital)'
2025-11-25 16:38:40.763 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:40.763 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:40.764 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.UpdateEvent (Hospital)'
2025-11-25 16:38:40.766 +02:00 [INF] Route matched with {action = "UpdateEvent", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateEvent(Hospital.Application.DTO.News.NewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:40.767 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:40.768 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:40.768 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:40.769 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:40.770 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:40.772 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:40.773 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:40.774 +02:00 [DBG] Attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.NewsDto' ...
2025-11-25 16:38:40.774 +02:00 [DBG] Attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.NewsDto' using the name '' in request data ...
2025-11-25 16:38:40.775 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:38:40.776 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000007": started reading request body.
2025-11-25 16:38:40.777 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000007": done reading request body.
2025-11-25 16:38:40.778 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.NewsDto'
2025-11-25 16:38:40.779 +02:00 [DBG] Done attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:40.779 +02:00 [DBG] Done attempting to bind parameter 'news' of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:40.780 +02:00 [DBG] Attempting to validate the bound parameter 'news' of type 'Hospital.Application.DTO.News.NewsDto' ...
2025-11-25 16:38:40.781 +02:00 [DBG] Done attempting to validate the bound parameter 'news' of type 'Hospital.Application.DTO.News.NewsDto'.
2025-11-25 16:38:40.782 +02:00 [INF] update News  called at "2025-11-25T16:38:40.7825368+02:00"
2025-11-25 16:38:40.783 +02:00 [INF] Updating news with ID: 1
2025-11-25 16:38:40.784 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:38:40.784 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:40.787 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:40.788 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:40.788 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.789 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.789 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:40.790 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:40.791 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:40.792 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:40.794 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:38:40.795 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:40.796 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:40.796 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:40.797 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.798 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:38:40.800 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.801 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.801 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:40.802 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:40.802 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:40.803 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[NewsId] = @__id_0
2025-11-25 16:38:40.804 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[NewsId] = @__id_0
2025-11-25 16:38:40.806 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:40.806 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:38:40.807 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.807 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:40.809 +02:00 [DBG] The navigation 'News.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:40.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'News' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:40.811 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:40.811 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:40.812 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:38:40.812 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:38:40.813 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:38:40.813 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.814 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.814 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:40.815 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:40.816 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:40.816 +02:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [News] SET [BranchId] = @p0, [CreatedAt] = @p1, [Date] = @p2, [Description] = @p3, [ImageURL] = @p4, [Title] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [NewsId] = @p7;
2025-11-25 16:38:40.821 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [News] SET [BranchId] = @p0, [CreatedAt] = @p1, [Date] = @p2, [Description] = @p3, [ImageURL] = @p4, [Title] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [NewsId] = @p7;
2025-11-25 16:38:40.823 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:40.824 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:38:40.825 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.826 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:40.827 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:38:40.827 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:38:40.828 +02:00 [INF] News updated successfully with ID: 1
2025-11-25 16:38:40.828 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:40.829 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:40.830 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:40.831 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:40.831 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:38:40.832 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:38:40.833 +02:00 [INF] Executed action Hospital.Controllers.NewsController.UpdateEvent (Hospital) in 60.5817ms
2025-11-25 16:38:40.833 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.UpdateEvent (Hospital)'
2025-11-25 16:38:40.834 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:40.834 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:40.835 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:40.835 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:40.836 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/News/UpdateNews - 200 null text/plain; charset=utf-8 76.3368ms
2025-11-25 16:38:45.634 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/News/GetAllNews?branchId=2 - null null
2025-11-25 16:38:45.635 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNews'
2025-11-25 16:38:45.635 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)' with route pattern 'api/News/GetAllNews' is valid for the request path '/api/News/GetAllNews'
2025-11-25 16:38:45.637 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:38:45.638 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:45.639 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:45.640 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:38:45.641 +02:00 [INF] Route matched with {action = "GetAllNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNews(Int32) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:45.642 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:45.642 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:45.643 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:45.644 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:45.644 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:45.645 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:45.646 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:45.646 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:38:45.647 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:38:45.649 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:38:45.649 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:38:45.649 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:38:45.650 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:38:45.650 +02:00 [INF] get all News  to specific branch called at "2025-11-25T16:38:45.6509187+02:00"
2025-11-25 16:38:45.651 +02:00 [INF] Retrieving all news for branch ID: 2
2025-11-25 16:38:45.652 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:45.654 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:45.654 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:45.654 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:45.655 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:45.656 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:45.657 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:45.658 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:38:45.659 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[BranchId] = @__branchId_0
2025-11-25 16:38:45.661 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[BranchId] = @__branchId_0
2025-11-25 16:38:45.662 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:45.662 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:38:45.663 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:45.663 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:38:45.664 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:45.665 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:45.666 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:45.666 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:45.666 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:45.667 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.News.NewsDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:38:45.668 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNews (Hospital) in 22.9419ms
2025-11-25 16:38:45.669 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:38:45.669 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:45.670 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:45.671 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:45.671 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:45.672 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/News/GetAllNews?branchId=2 - 200 null application/json; charset=utf-8 38.2494ms
2025-11-25 16:38:52.110 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/News/GetAllNewsInSystem - null null
2025-11-25 16:38:52.112 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNewsInSystem'
2025-11-25 16:38:52.113 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)' with route pattern 'api/News/GetAllNewsInSystem' is valid for the request path '/api/News/GetAllNewsInSystem'
2025-11-25 16:38:52.114 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-25 16:38:52.115 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:38:52.115 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:38:52.115 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-25 16:38:52.118 +02:00 [INF] Route matched with {action = "GetAllNewsInSystem", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNewsInSystem() on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:38:52.121 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:38:52.123 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:38:52.124 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:38:52.125 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:38:52.125 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:38:52.126 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:52.127 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:38:52.128 +02:00 [INF] get all News in system  called at "2025-11-25T16:38:52.1285058+02:00"
2025-11-25 16:38:52.129 +02:00 [INF] Retrieving all news in the system
2025-11-25 16:38:52.130 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:38:52.131 +02:00 [DBG] Compiling query expression: 
'DbSet<News>()
    .AsNoTracking()'
2025-11-25 16:38:52.134 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<News>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: News.NewsId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: News.BranchId (int?) FK Index, 1], [Property: News.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: News.Date (DateTime) Required, 3], [Property: News.Description (string), 4], [Property: News.ImageURL (string) MaxLength(300), 5], [Property: News.Title (string) Required MaxLength(150), 6], [Property: News.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT n.NewsId, n.BranchId, n.CreatedAt, n.Date, n.Description, n.ImageURL, n.Title, n.UpdatedAt
        FROM News AS n), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, News>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:38:52.137 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:38:52.138 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:38:52.138 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:52.139 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:52.139 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:38:52.140 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:38:52.140 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:38:52.141 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-25 16:38:52.143 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-25 16:38:52.144 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:38:52.145 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:38:52.146 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:52.147 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:38:52.148 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:38:52.150 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:38:52.150 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:38:52.151 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:38:52.152 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:38:52.153 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.News.NewsDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:38:52.154 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital) in 27.8085ms
2025-11-25 16:38:52.155 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-25 16:38:52.155 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:38:52.156 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:38:52.157 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:38:52.158 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:38:52.158 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/News/GetAllNewsInSystem - 200 null application/json; charset=utf-8 47.7864ms
2025-11-25 16:38:53.975 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" is closing.
2025-11-25 16:38:53.977 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" is closed. The last processed stream ID was 1.
2025-11-25 16:38:53.978 +02:00 [DBG] The connection queue processing loop for 0HNHC5T0J0T1K completed.
2025-11-25 16:38:53.978 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" received FIN.
2025-11-25 16:38:53.979 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" stopped.
2025-11-25 16:38:53.981 +02:00 [DBG] Connection id "0HNHC5T0J0T1K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:39:01.878 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/News/DeleteNews - application/json 37
2025-11-25 16:39:01.879 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/DeleteNews'
2025-11-25 16:39:01.879 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.DeleteNews (Hospital)' with route pattern 'api/News/DeleteNews' is valid for the request path '/api/News/DeleteNews'
2025-11-25 16:39:01.880 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.DeleteNews (Hospital)'
2025-11-25 16:39:01.880 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:39:01.881 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:39:01.881 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.DeleteNews (Hospital)'
2025-11-25 16:39:01.884 +02:00 [INF] Route matched with {action = "DeleteNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteNews(Hospital.Application.DTO.News.GetNewsDto) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:39:01.884 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:39:01.885 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:39:01.886 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:39:01.888 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:39:01.888 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:39:01.889 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:39:01.889 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:39:01.890 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.News.GetNewsDto' ...
2025-11-25 16:39:01.891 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.News.GetNewsDto' using the name '' in request data ...
2025-11-25 16:39:01.892 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:39:01.893 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000A": started reading request body.
2025-11-25 16:39:01.893 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000A": done reading request body.
2025-11-25 16:39:01.894 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.News.GetNewsDto'
2025-11-25 16:39:01.894 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.News.GetNewsDto'.
2025-11-25 16:39:01.895 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.News.GetNewsDto'.
2025-11-25 16:39:01.895 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.News.GetNewsDto' ...
2025-11-25 16:39:01.896 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.News.GetNewsDto'.
2025-11-25 16:39:01.897 +02:00 [INF] delete News  called at "2025-11-25T16:39:01.8973862+02:00"
2025-11-25 16:39:01.898 +02:00 [INF] Deleting news item with ID: 3
2025-11-25 16:39:01.898 +02:00 [INF] Fetching branch by ID: 2
2025-11-25 16:39:01.899 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:39:01.900 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:39:01.900 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:39:01.901 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.902 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.902 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:01.903 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:01.904 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:01.904 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:39:01.906 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:39:01.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:01.908 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:01.908 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:39:01.909 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.909 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:01.910 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.911 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.911 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:01.912 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:01.912 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:01.913 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[NewsId] = @__id_0
2025-11-25 16:39:01.914 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[NewsId] = @__id_0
2025-11-25 16:39:01.915 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:01.916 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:01.916 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.917 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:01.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'News' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:01.919 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:01.920 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:01.921 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:01.921 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:39:01.921 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:01.922 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:01.923 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.924 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.924 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:01.924 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:01.925 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:01.926 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [News]
OUTPUT 1
WHERE [NewsId] = @p0;
2025-11-25 16:39:01.934 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [News]
OUTPUT 1
WHERE [NewsId] = @p0;
2025-11-25 16:39:01.935 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:01.935 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:01.936 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.937 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:01.937 +02:00 [DBG] An entity of type 'News' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:01.938 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:39:01.939 +02:00 [INF] News item deleted successfully with ID: 3
2025-11-25 16:39:01.939 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:39:01.940 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:39:01.941 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:39:01.941 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:39:01.942 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:39:01.942 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:39:01.943 +02:00 [INF] Executed action Hospital.Controllers.NewsController.DeleteNews (Hospital) in 54.216ms
2025-11-25 16:39:01.943 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.DeleteNews (Hospital)'
2025-11-25 16:39:01.944 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:39:01.944 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:39:01.945 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:01.945 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:39:01.946 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/News/DeleteNews - 200 null text/plain; charset=utf-8 68.1279ms
2025-11-25 16:39:10.161 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/News/GetAllNews?branchId=2 - null null
2025-11-25 16:39:10.162 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNews'
2025-11-25 16:39:10.164 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)' with route pattern 'api/News/GetAllNews' is valid for the request path '/api/News/GetAllNews'
2025-11-25 16:39:10.166 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:39:10.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:39:10.168 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:39:10.169 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:39:10.169 +02:00 [INF] Route matched with {action = "GetAllNews", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNews(Int32) on controller Hospital.Controllers.NewsController (Hospital).
2025-11-25 16:39:10.170 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:39:10.171 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:39:10.171 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:39:10.172 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:39:10.173 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:39:10.174 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:39:10.174 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-25 16:39:10.175 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:39:10.176 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:39:10.176 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:39:10.177 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:39:10.177 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:39:10.178 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:39:10.179 +02:00 [INF] get all News  to specific branch called at "2025-11-25T16:39:10.1791020+02:00"
2025-11-25 16:39:10.181 +02:00 [INF] Retrieving all news for branch ID: 2
2025-11-25 16:39:10.182 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:39:10.183 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:39:10.183 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:39:10.184 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:10.184 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:10.185 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:10.186 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:10.187 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:10.187 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[BranchId] = @__branchId_0
2025-11-25 16:39:10.190 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
WHERE [n].[BranchId] = @__branchId_0
2025-11-25 16:39:10.191 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:10.192 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:10.192 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:10.193 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:10.194 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:39:10.196 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:39:10.197 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:39:10.198 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:39:10.198 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:39:10.199 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.News.NewsDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:39:10.200 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNews (Hospital) in 26.2224ms
2025-11-25 16:39:10.201 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNews (Hospital)'
2025-11-25 16:39:10.201 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:39:10.202 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:39:10.203 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:10.203 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:39:10.204 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/News/GetAllNews?branchId=2 - 200 null application/json; charset=utf-8 43.3052ms
2025-11-25 16:39:28.242 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 16:39:28.243 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 16:39:28.244 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 16:39:28.245 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:39:28.246 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:39:28.246 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:39:28.247 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:39:28.251 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:39:28.253 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:39:28.254 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:39:28.254 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:39:28.255 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:39:28.256 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:39:28.256 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:39:28.257 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:39:28.258 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:39:28.258 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 16:39:28.259 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:39:28.260 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000C": started reading request body.
2025-11-25 16:39:28.261 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000C": done reading request body.
2025-11-25 16:39:28.263 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 16:39:28.264 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:39:28.265 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:39:28.266 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:39:28.268 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:39:28.270 +02:00 [INF] create Specialization called at "2025-11-25T16:39:28.2701238+02:00"
2025-11-25 16:39:28.271 +02:00 [INF] Adding specialization: legg
2025-11-25 16:39:28.273 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:39:28.274 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __branchIds_0.Contains(b.BranchId))'
2025-11-25 16:39:28.301 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT b0.value
            FROM OPENJSON(@__branchIds_0) WITH (value int '') AS b0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:39:28.308 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:39:28.308 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:39:28.308 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:28.309 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:28.309 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:28.310 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:28.312 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:39:28.313 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:39:28.322 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:39:28.324 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:28.324 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:28.325 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:28.325 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:28.327 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 70.7812ms
2025-11-25 16:39:28.328 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:39:28.329 +02:00 [ERR]  Exception caught: One or more branches not found.
System.ArgumentException: One or more branches not found.
   at Hospital.Infrastructure.Services.SpecializationService.AddAsync(CreateSpecialization dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\SpecializationService.cs:line 41
   at Hospital.Controllers.SpecializationsController.Create(CreateSpecialization dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\SpecializationsController.cs:line 27
   at lambda_method812(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:39:28.333 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:39:28.333 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:39:28.334 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:28.335 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:39:28.335 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 400 null application/json 93.1947ms
2025-11-25 16:39:34.929 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 16:39:34.932 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 16:39:34.932 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 16:39:34.933 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:39:34.934 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:39:34.935 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:39:34.936 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:39:34.937 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:39:34.939 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:39:34.939 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:39:34.940 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:39:34.941 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:39:34.942 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:39:34.943 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:39:34.944 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:39:34.945 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:39:34.945 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 16:39:34.946 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:39:34.947 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000D": started reading request body.
2025-11-25 16:39:34.948 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000D": done reading request body.
2025-11-25 16:39:34.948 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 16:39:34.949 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:39:34.950 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:39:34.950 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:39:34.952 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:39:34.953 +02:00 [INF] create Specialization called at "2025-11-25T16:39:34.9531243+02:00"
2025-11-25 16:39:34.953 +02:00 [INF] Adding specialization: legg
2025-11-25 16:39:34.954 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:39:34.955 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:39:34.956 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:39:34.956 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:34.957 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:34.957 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:34.958 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:34.959 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:34.959 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:39:34.965 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:39:34.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:34.967 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:34.968 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:39:34.969 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:34.970 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:34.972 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-25 16:39:34.978 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-25 16:39:34.979 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-25 16:39:34.982 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:39:35.006 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:39:35.010 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 5], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 6] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Branch.Address (string) MaxLength(250), 8], [Property: Branch.BranchName (string) Required MaxLength(150), 9], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 10], [Property: Branch.Description (string), 11], [Property: Branch.Email (string) MaxLength(200), 12], [Property: Branch.ImageURL (string) MaxLength(300), 13], [Property: Branch.Phone (string) MaxLength(25), 14], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15] }
            4 -> 5
            5 -> 6
            6 -> 7
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            9 -> 16
            10 -> 26
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:39:35.016 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.018 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.019 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:35.020 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:35.020 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:35.021 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:39:35.033 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:39:35.036 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:35.037 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:35.038 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.038 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:35.041 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:35.053 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:35.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:35.062 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:35.065 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:35.066 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:39:35.066 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:35.066 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:35.072 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.073 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.075 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:39:35.078 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:39:35.079 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:35.080 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:35.081 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:35.081 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:39:35.086 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:39:35.088 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:39:35.090 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:39:35.092 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:35.093 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-11-25 16:39:35.094 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:35.094 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:35.094 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:35.095 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:39:35.099 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:39:35.102 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:35.102 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:35.104 +02:00 [DBG] Committing transaction.
2025-11-25 16:39:35.107 +02:00 [DBG] Committed transaction.
2025-11-25 16:39:35.108 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.109 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:35.111 +02:00 [DBG] Disposing transaction.
2025-11-25 16:39:35.111 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:35.113 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:35.113 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:39:35.114 +02:00 [INF] Specialization 'legg' added successfully
2025-11-25 16:39:35.120 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:39:35.121 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:39:35.121 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:39:35.122 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:39:35.122 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:39:35.123 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-25 16:39:35.124 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[1],action=[Get],controller=[Specializations])
2025-11-25 16:39:35.125 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/1 and 
2025-11-25 16:39:35.126 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/1
2025-11-25 16:39:35.129 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 186.1768ms
2025-11-25 16:39:35.130 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:39:35.130 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:39:35.131 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:39:35.131 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:35.132 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:39:35.132 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 203.6446ms
2025-11-25 16:39:48.439 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 371
2025-11-25 16:39:48.440 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-25 16:39:48.441 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-25 16:39:48.442 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:39:48.442 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:39:48.443 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:39:48.443 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:39:48.446 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:39:48.447 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:39:48.448 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:39:48.448 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:39:48.449 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:39:48.450 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:39:48.450 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:39:48.453 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:39:48.454 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 16:39:48.454 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-25 16:39:48.455 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:39:48.460 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000E": started reading request body.
2025-11-25 16:39:48.460 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000E": done reading request body.
2025-11-25 16:39:48.463 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-25 16:39:48.464 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:39:48.464 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:39:48.464 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 16:39:48.467 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:39:48.470 +02:00 [INF] add doctor called at "2025-11-25T16:39:48.4702016+02:00"
2025-11-25 16:39:48.472 +02:00 [INF] Adding new doctor: Walaa, Email: walaa.elbishlawy@gmail.com
2025-11-25 16:39:48.474 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:39:48.476 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:39:48.476 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:39:48.477 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:48.478 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:48.478 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:39:48.480 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:39:48.486 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .FirstOrDefault(e => EF.Property<int>(e, "SpecializationId") == __p_0)'
2025-11-25 16:39:48.489 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Specialization>(
    asyncEnumerable: new SingleQueryingEnumerable<Specialization>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            SELECT TOP(1) s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt
            FROM Specializations AS s
            WHERE s.SpecializationId == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:39:48.491 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.491 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.492 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.492 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:39:48.496 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:39:48.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.497 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.498 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:39:48.500 +02:00 [INF] Registration attempt for email: walaa.elbishlawy@gmail.com, role: Doctor
2025-11-25 16:39:48.501 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.501 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.502 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.503 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:39:48.507 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:39:48.508 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.509 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.510 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.510 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.511 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.511 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:39:48.515 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:39:48.516 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.517 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.519 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-11-25 16:39:48.523 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:39:48.526 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.526 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.527 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.527 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 16:39:48.533 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 16:39:48.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.543 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.544 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-11-25 16:39:48.606 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.607 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.609 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:39:48.611 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:39:48.612 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.612 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.616 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.619 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:48.619 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.620 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.621 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:48.624 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 16:39:48.630 +02:00 [DBG] Created transaction savepoint.
2025-11-25 16:39:48.631 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.632 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.633 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.633 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 16:39:48.638 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 16:39:48.640 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.640 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.641 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.642 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:39:48.646 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-11-25 16:39:48.648 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:39:48.649 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.650 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.651 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.651 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:39:48.655 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:39:48.656 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.656 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.659 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-11-25 16:39:48.662 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:39:48.665 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.666 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.667 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:39:48.668 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 16:39:48.670 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 16:39:48.672 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.673 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.675 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.676 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.677 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.678 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:39:48.679 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:39:48.680 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.681 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.685 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.686 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.686 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.687 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:39:48.689 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:39:48.692 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.693 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.694 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.694 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.695 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:48.696 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.696 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.696 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:48.699 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 16:39:48.699 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 16:39:48.700 +02:00 [DBG] Created transaction savepoint.
2025-11-25 16:39:48.701 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.701 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.702 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.702 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 16:39:48.714 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 16:39:48.716 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.716 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.718 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.719 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.719 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:39:48.720 +02:00 [INF] User walaa.elbishlawy@gmail.com assigned to role Doctor
2025-11-25 16:39:48.720 +02:00 [INF] Registration successful for user walaa.elbishlawy@gmail.com with ID d5f8dd7d-e1d0-47b4-af6a-173f71f2d846
2025-11-25 16:39:48.724 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __ids_0
        .Contains(b.BranchId))'
2025-11-25 16:39:48.729 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT i.value
            FROM OPENJSON(@__ids_0) WITH (value int '') AS i)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:39:48.730 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.730 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.731 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.731 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:39:48.736 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:39:48.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.738 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.739 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:39:48.743 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Doctor.DoctorId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.759 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.760 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.762 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.769 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.774 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:48.776 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.776 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:39:48.777 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:39:48.778 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 16:39:48.779 +02:00 [DBG] Created transaction savepoint.
2025-11-25 16:39:48.779 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.780 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.781 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:39:48.781 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-25 16:39:48.786 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-25 16:39:48.789 +02:00 [DBG] The foreign key property 'Doctor.DoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:39:48.790 +02:00 [DBG] The foreign key property 'BranchDoctor.DoctorsDoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:39:48.791 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.792 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:39:48.793 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:39:48.793 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.793 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:39:48.794 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-25 16:39:48.796 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-25 16:39:48.798 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:39:48.799 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:39:48.801 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.802 +02:00 [DBG] An entity of type 'BranchDoctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:39:48.802 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:39:48.803 +02:00 [DBG] Committing transaction.
2025-11-25 16:39:48.804 +02:00 [DBG] Committed transaction.
2025-11-25 16:39:48.804 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:48.805 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:39:51.237 +02:00 [INF] Sent registration email to walaa.elbishlawy@gmail.com
2025-11-25 16:39:51.243 +02:00 [DBG] Disposing transaction.
2025-11-25 16:39:51.246 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:39:51.248 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:39:51.248 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:39:51.248 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:39:51.249 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:39:51.249 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-25 16:39:51.255 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 2804.5877ms
2025-11-25 16:39:51.255 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:39:51.256 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:39:51.256 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:39:51.257 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:39:51.257 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:39:51.258 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 200 null application/json; charset=utf-8 2819.073ms
2025-11-25 16:40:08.132 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-25 16:40:08.133 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 16:40:08.133 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 16:40:08.134 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 16:40:08.135 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:40:08.136 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:40:08.136 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 16:40:08.139 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 16:40:08.141 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:40:08.142 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:40:08.142 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:40:08.143 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:40:08.144 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:40:08.145 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 16:40:08.146 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 16:40:08.146 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 16:40:08.147 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-25 16:40:08.147 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:40:08.150 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000F": started reading request body.
2025-11-25 16:40:08.151 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000000F": done reading request body.
2025-11-25 16:40:08.152 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-25 16:40:08.153 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 16:40:08.154 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 16:40:08.154 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 16:40:08.156 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 16:40:08.158 +02:00 [INF] create schedule  called at "2025-11-25T16:40:08.1588486+02:00"
2025-11-25 16:40:08.160 +02:00 [INF] Creating schedule for DoctorId: 1, Day: friday, Shift: "Afternoon"
2025-11-25 16:40:08.162 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:40:08.163 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-25 16:40:08.165 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:40:08.166 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-25 16:40:08.167 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 16:40:08.167 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-25 16:40:08.181 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:40:08.187 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
                8 -> 38
                9 -> 39
                10 -> 40
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.BranchId (int) Required FK Index, 50], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 52], [Property: Schedule.DoctorId (int) Required FK Index, 53], [Property: Schedule.EndTime (DateTime) Required, 54], [Property: Schedule.Shift (AppointmentShift) Required, 55], [Property: Schedule.StartTime (DateTime) Required, 56], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 57] }
                12 -> 49
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:40:08.192 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:40:08.192 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:40:08.193 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.194 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.195 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:08.196 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:08.196 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:08.197 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:40:08.218 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:40:08.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.223 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.225 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.231 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:08.232 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 11ms reading results.
2025-11-25 16:40:08.233 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.233 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:08.242 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DayOfWeek.ToLower() == __ToLower_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)'
2025-11-25 16:40:08.244 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-25 16:40:08.245 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:40:08.253 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        WHERE LOWER(s.DayOfWeek) == @__ToLower_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:40:08.258 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.258 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.259 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:08.260 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:08.260 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:08.261 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 16:40:08.266 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 16:40:08.268 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:08.269 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:40:08.269 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.270 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:08.273 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.283 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.284 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.285 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:40:08.289 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:40:08.290 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:40:08.291 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:40:08.292 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:40:08.293 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.293 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.294 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:08.294 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:08.296 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:08.296 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:40:08.300 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:40:08.302 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:40:08.303 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:08.303 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:40:08.304 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.305 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:08.306 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:08.307 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:40:08.307 +02:00 [INF] Schedule created successfully for DoctorId 1
2025-11-25 16:40:08.310 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:40:08.311 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:40:08.312 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:40:08.312 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:40:08.313 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:40:08.315 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-25 16:40:08.318 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 173.3211ms
2025-11-25 16:40:08.319 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 16:40:08.319 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:40:08.320 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:40:08.320 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:08.321 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:40:08.321 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 189.5128ms
2025-11-25 16:40:22.242 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 16:40:22.243 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 16:40:22.244 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 16:40:22.245 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:40:22.245 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:40:22.246 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:40:22.246 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:40:22.247 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:40:22.248 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:40:22.248 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:40:22.249 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:40:22.250 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:40:22.251 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:40:22.252 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:22.253 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:22.254 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:40:22.255 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 16:40:22.256 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:40:22.256 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000010": started reading request body.
2025-11-25 16:40:22.257 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000010": done reading request body.
2025-11-25 16:40:22.257 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 16:40:22.258 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:40:22.259 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:40:22.260 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:40:22.261 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:40:22.262 +02:00 [INF] create Specialization called at "2025-11-25T16:40:22.2621224+02:00"
2025-11-25 16:40:22.262 +02:00 [INF] Adding specialization: legg
2025-11-25 16:40:22.263 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:40:22.264 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:40:22.265 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:40:22.265 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.266 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.267 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:22.267 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:22.268 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:22.269 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:40:22.274 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:40:22.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:22.278 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:22.279 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:40:22.279 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.280 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:22.281 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.282 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.282 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:22.283 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:22.283 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:22.284 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:22.299 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:22.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:22.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:22.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:22.306 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:22.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:22.308 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:22.309 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:40:22.310 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.311 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:22.312 +02:00 [WRN] Specialization 'legg' already exists in branch 'adam18'
2025-11-25 16:40:22.313 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 60.9509ms
2025-11-25 16:40:22.313 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:40:22.314 +02:00 [ERR]  Exception caught: Specialization 'legg' already exists in branch 'adam18'.
System.InvalidOperationException: Specialization 'legg' already exists in branch 'adam18'.
   at Hospital.Infrastructure.Services.SpecializationService.AddAsync(CreateSpecialization dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\SpecializationService.cs:line 50
   at Hospital.Controllers.SpecializationsController.Create(CreateSpecialization dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\SpecializationsController.cs:line 27
   at lambda_method812(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:40:22.319 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:40:22.320 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:40:22.320 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:22.321 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:40:22.322 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 500 null application/json 79.9124ms
2025-11-25 16:40:28.701 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 16:40:28.702 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 16:40:28.703 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 16:40:28.703 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:40:28.704 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:40:28.704 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:40:28.705 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:40:28.705 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:40:28.706 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:40:28.707 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:40:28.707 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:40:28.709 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:40:28.710 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:40:28.710 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:28.711 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:28.712 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:40:28.712 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 16:40:28.713 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:40:28.713 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000011": started reading request body.
2025-11-25 16:40:28.714 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000011": done reading request body.
2025-11-25 16:40:28.714 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 16:40:28.715 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:40:28.716 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:40:28.717 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:40:28.717 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:40:28.718 +02:00 [INF] create Specialization called at "2025-11-25T16:40:28.7184826+02:00"
2025-11-25 16:40:28.718 +02:00 [INF] Adding specialization: legg
2025-11-25 16:40:28.719 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:40:28.720 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:40:28.720 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:40:28.721 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.721 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.722 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:28.722 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:28.723 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:28.724 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:40:28.726 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:40:28.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.728 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:28.729 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:40:28.729 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.730 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:28.731 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.731 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.732 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:28.733 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:28.733 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:28.734 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:28.736 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:28.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.742 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.743 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.743 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:28.744 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:40:28.745 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.745 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:28.746 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.749 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:40:28.749 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:40:28.750 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:40:28.750 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:40:28.750 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:40:28.751 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.751 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.752 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:40:28.753 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:40:28.753 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:28.753 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:28.754 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:28.755 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:40:28.757 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:40:28.758 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:40:28.759 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:40:28.760 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:28.761 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:40:28.761 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:28.762 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:28.762 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:28.763 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:40:28.765 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:40:28.767 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:28.768 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:40:28.768 +02:00 [DBG] Committing transaction.
2025-11-25 16:40:28.769 +02:00 [DBG] Committed transaction.
2025-11-25 16:40:28.770 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.771 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:28.771 +02:00 [DBG] Disposing transaction.
2025-11-25 16:40:28.772 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.773 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:28.773 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:40:28.774 +02:00 [INF] Specialization 'legg' added successfully
2025-11-25 16:40:28.774 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:40:28.776 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:40:28.776 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:40:28.776 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:40:28.777 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:40:28.777 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-25 16:40:28.778 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[2],action=[Get],controller=[Specializations])
2025-11-25 16:40:28.779 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/2 and 
2025-11-25 16:40:28.779 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/2
2025-11-25 16:40:28.780 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 69.9336ms
2025-11-25 16:40:28.781 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:40:28.782 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:40:28.782 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:40:28.782 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:28.783 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:40:28.784 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 82.5908ms
2025-11-25 16:40:37.674 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Specializations/Get/1 - null null
2025-11-25 16:40:37.676 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Get/1'
2025-11-25 16:40:37.677 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Get (Hospital)' with route pattern 'api/Specializations/Get/{id}' is valid for the request path '/api/Specializations/Get/1'
2025-11-25 16:40:37.678 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Get (Hospital)'
2025-11-25 16:40:37.678 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:40:37.679 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:40:37.679 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Get (Hospital)'
2025-11-25 16:40:37.681 +02:00 [INF] Route matched with {action = "Get", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Get(Int32) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:40:37.682 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:40:37.683 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:40:37.684 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:40:37.686 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:40:37.686 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:40:37.687 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:37.687 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:37.688 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 16:40:37.689 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 16:40:37.689 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:40:37.690 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:40:37.690 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 16:40:37.691 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 16:40:37.692 +02:00 [INF] get Specialization by id called at "2025-11-25T16:40:37.6921495+02:00"
2025-11-25 16:40:37.693 +02:00 [INF] Fetching specialization with ID 1
2025-11-25 16:40:37.694 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:40:37.695 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)
    .FirstOrDefault(s => s.SpecializationId == __id_0)'
2025-11-25 16:40:37.696 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-25 16:40:37.697 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-25 16:40:37.698 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:40:37.708 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:40:37.711 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Specialization>(
    asyncEnumerable: new SingleQueryingEnumerable<Specialization>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 5], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 6] }
                3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Branch.Address (string) MaxLength(250), 8], [Property: Branch.BranchName (string) Required MaxLength(150), 9], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 10], [Property: Branch.Description (string), 11], [Property: Branch.Email (string) MaxLength(200), 12], [Property: Branch.ImageURL (string) MaxLength(300), 13], [Property: Branch.Phone (string) MaxLength(25), 14], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15] }
                4 -> 5
                5 -> 6
                6 -> 7
                7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
                8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
                9 -> 16
                10 -> 26
            SELECT t.SpecializationId, t.CreatedAt, t.Description, t.Name, t.UpdatedAt, t0.BranchId, t0.SpecializationId, t0.BranchId0, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, t1.DoctorId, t1.Available, t1.Biography, t1.ConsultationFees, t1.CreatedAt, t1.ExperienceYears, t1.ImageURL, t1.SpecializationId, t1.UpdatedAt, t1.UserId, t1.Id, t1.AccessFailedCount, t1.ConcurrencyStamp, t1.CreatedAt0, t1.DateOfBirth, t1.Email, t1.EmailConfirmed, t1.FullName, t1.Gender, t1.LockoutEnabled, t1.LockoutEnd, t1.NormalizedEmail, t1.NormalizedUserName, t1.PasswordHash, t1.PhoneNumber, t1.PhoneNumberConfirmed, t1.RefreshToken, t1.RefreshTokenExpiryTime, t1.Role, t1.SecurityStamp, t1.TwoFactorEnabled, t1.UpdatedAt0, t1.UserName
            FROM 
            (
                SELECT TOP(1) s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt
                FROM Specializations AS s
                WHERE s.SpecializationId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
                FROM BranchSpecializations AS b
                INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
            ) AS t0 ON t.SpecializationId == t0.SpecializationId
            LEFT JOIN 
            (
                SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
            ) AS t1 ON t.SpecializationId == t1.SpecializationId
            ORDER BY t.SpecializationId ASC, t0.BranchId ASC, t0.SpecializationId ASC, t0.BranchId0 ASC, t1.DoctorId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:40:37.717 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:40:37.718 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:40:37.719 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:37.720 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:37.720 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:37.721 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:37.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:37.722 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:40:37.743 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:40:37.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:37.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:37.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:37.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:37.749 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:37.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:37.751 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:37.751 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:40:37.752 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:37.752 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:37.754 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:40:37.754 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:40:37.755 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:40:37.755 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:40:37.756 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:40:37.756 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-25 16:40:37.758 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Get (Hospital) in 71.323ms
2025-11-25 16:40:37.759 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Get (Hospital)'
2025-11-25 16:40:37.759 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:40:37.759 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:40:37.760 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:37.761 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:40:37.761 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Specializations/Get/1 - 200 null application/json; charset=utf-8 87.6202ms
2025-11-25 16:40:43.590 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-25 16:40:43.592 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-25 16:40:43.592 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-25 16:40:43.593 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 16:40:43.594 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:40:43.594 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:40:43.594 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 16:40:43.597 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:40:43.598 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:40:43.599 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:40:43.599 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:40:43.601 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:40:43.602 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:40:43.602 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:43.603 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:43.604 +02:00 [INF] get all Specialization called at "2025-11-25T16:40:43.6045046+02:00"
2025-11-25 16:40:43.605 +02:00 [INF] Fetching all specializations in the system
2025-11-25 16:40:43.606 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:40:43.607 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:40:43.607 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:40:43.607 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:43.608 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:43.608 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:43.609 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:43.609 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:43.610 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:43.612 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:43.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.617 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:43.622 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:43.623 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 9ms reading results.
2025-11-25 16:40:43.624 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:43.624 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:43.629 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:40:43.630 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:40:43.630 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:40:43.631 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:40:43.631 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:40:43.632 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:40:43.634 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 31.2019ms
2025-11-25 16:40:43.634 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-25 16:40:43.635 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:40:43.635 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:40:43.636 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:43.636 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:40:43.637 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 46.6321ms
2025-11-25 16:40:55.912 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Specializations/Update - application/json 202
2025-11-25 16:40:55.913 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Update'
2025-11-25 16:40:55.913 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Update (Hospital)' with route pattern 'api/Specializations/Update' is valid for the request path '/api/Specializations/Update'
2025-11-25 16:40:55.914 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Update (Hospital)'
2025-11-25 16:40:55.916 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:40:55.916 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:40:55.916 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Update (Hospital)'
2025-11-25 16:40:55.919 +02:00 [INF] Route matched with {action = "Update", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Update(Hospital.Application.DTO.Specialization.UpdateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:40:55.920 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:40:55.920 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:40:55.921 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:40:55.922 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:40:55.923 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:40:55.924 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:55.925 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:40:55.925 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.UpdateSpecialization' ...
2025-11-25 16:40:55.926 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.UpdateSpecialization' using the name '' in request data ...
2025-11-25 16:40:55.927 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:40:55.927 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000014": started reading request body.
2025-11-25 16:40:55.928 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000014": done reading request body.
2025-11-25 16:40:55.929 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.UpdateSpecialization'
2025-11-25 16:40:55.930 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.UpdateSpecialization'.
2025-11-25 16:40:55.930 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.UpdateSpecialization'.
2025-11-25 16:40:55.931 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.UpdateSpecialization' ...
2025-11-25 16:40:55.932 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.UpdateSpecialization'.
2025-11-25 16:40:55.934 +02:00 [INF] update Specialization called at "2025-11-25T16:40:55.9341623+02:00"
2025-11-25 16:40:55.936 +02:00 [INF] Updating specialization with ID 1
2025-11-25 16:40:55.937 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:40:55.939 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:40:55.939 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:40:55.940 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.940 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.941 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:55.941 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:55.942 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:55.942 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:40:55.945 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:40:55.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.949 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.951 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.953 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.954 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:55.954 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:40:55.955 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.956 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:55.957 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.957 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.958 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:55.959 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:55.959 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:55.960 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:55.962 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:40:55.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.967 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:55.967 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:40:55.968 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.969 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:55.970 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.970 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.971 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:55.971 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:55.972 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:55.972 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:40:55.974 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:40:55.975 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:55.976 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:40:55.976 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.977 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:55.978 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:55.980 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:40:55.981 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:40:55.982 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:40:55.983 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:40:55.983 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:40:55.985 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.986 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:55.986 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:40:55.987 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:40:55.987 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:40:55.988 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Specializations] SET [CreatedAt] = @p0, [Description] = @p1, [Name] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [SpecializationId] = @p4;
2025-11-25 16:40:55.997 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Specializations] SET [CreatedAt] = @p0, [Description] = @p1, [Name] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [SpecializationId] = @p4;
2025-11-25 16:40:55.999 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:40:55.999 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:40:56.000 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:56.000 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:40:56.001 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:40:56.002 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:40:56.003 +02:00 [INF] Specialization 1 updated successfully
2025-11-25 16:40:56.003 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:40:56.004 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:40:56.004 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:40:56.005 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:40:56.005 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:40:56.006 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:40:56.006 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Update (Hospital) in 82.2995ms
2025-11-25 16:40:56.007 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Update (Hospital)'
2025-11-25 16:40:56.007 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:40:56.008 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:40:56.008 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:40:56.009 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:40:56.009 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Specializations/Update - 200 null text/plain; charset=utf-8 97.7167ms
2025-11-25 16:41:01.385 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Specializations/Branch/2 - null null
2025-11-25 16:41:01.387 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Branch/2'
2025-11-25 16:41:01.387 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAllByBranch (Hospital)' with route pattern 'api/Specializations/Branch/{branchId}' is valid for the request path '/api/Specializations/Branch/2'
2025-11-25 16:41:01.388 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAllByBranch (Hospital)'
2025-11-25 16:41:01.388 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:01.389 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:01.389 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAllByBranch (Hospital)'
2025-11-25 16:41:01.393 +02:00 [INF] Route matched with {action = "GetAllByBranch", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAllByBranch(Int32) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:01.394 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:01.395 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:01.395 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:01.397 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:01.398 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:01.398 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:01.399 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:01.400 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:41:01.400 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:41:01.401 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:41:01.401 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:41:01.402 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:41:01.402 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:41:01.403 +02:00 [INF] get all Specialization by branch id called at "2025-11-25T16:41:01.4038567+02:00"
2025-11-25 16:41:01.404 +02:00 [INF] Fetching all specializations for branch 2
2025-11-25 16:41:01.406 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:01.407 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:01.407 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:01.408 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.408 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.409 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:01.409 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:01.410 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:01.410 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:41:01.412 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:41:01.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:01.414 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:01.414 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:41:01.415 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.416 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:01.417 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)
    .Where(s => s.Branches
        .Any(b => b.BranchId == __branchId_0))'
2025-11-25 16:41:01.419 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-25 16:41:01.420 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-25 16:41:01.421 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:41:01.431 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:41:01.435 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 5], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 6] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Branch.Address (string) MaxLength(250), 8], [Property: Branch.BranchName (string) Required MaxLength(150), 9], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 10], [Property: Branch.Description (string), 11], [Property: Branch.Email (string) MaxLength(200), 12], [Property: Branch.ImageURL (string) MaxLength(300), 13], [Property: Branch.Phone (string) MaxLength(25), 14], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15] }
            4 -> 5
            5 -> 6
            6 -> 7
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            9 -> 16
            10 -> 26
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b1.BranchId, b1.SpecializationId, b2.BranchId AS BranchId0, b2.Address, b2.BranchName, b2.CreatedAt, b2.Description, b2.Email, b2.ImageURL, b2.Phone, b2.UpdatedAt
            FROM BranchSpecializations AS b1
            INNER JOIN Branches AS b2 ON b1.BranchId == b2.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        WHERE EXISTS (
            SELECT 1
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
            WHERE ((s.SpecializationId != NULL) && (s.SpecializationId == b.SpecializationId)) && (b0.BranchId == @__branchId_0))
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:41:01.440 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.440 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.441 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:01.441 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:01.442 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:01.443 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b1].[BranchId], [b1].[SpecializationId], [b2].[BranchId] AS [BranchId0], [b2].[Address], [b2].[BranchName], [b2].[CreatedAt], [b2].[Description], [b2].[Email], [b2].[ImageURL], [b2].[Phone], [b2].[UpdatedAt]
    FROM [BranchSpecializations] AS [b1]
    INNER JOIN [Branches] AS [b2] ON [b1].[BranchId] = [b2].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
WHERE EXISTS (
    SELECT 1
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
    WHERE [s].[SpecializationId] = [b].[SpecializationId] AND [b0].[BranchId] = @__branchId_0)
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:41:01.462 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b1].[BranchId], [b1].[SpecializationId], [b2].[BranchId] AS [BranchId0], [b2].[Address], [b2].[BranchName], [b2].[CreatedAt], [b2].[Description], [b2].[Email], [b2].[ImageURL], [b2].[Phone], [b2].[UpdatedAt]
    FROM [BranchSpecializations] AS [b1]
    INNER JOIN [Branches] AS [b2] ON [b1].[BranchId] = [b2].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
WHERE EXISTS (
    SELECT 1
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
    WHERE [s].[SpecializationId] = [b].[SpecializationId] AND [b0].[BranchId] = @__branchId_0)
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:41:01.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:01.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:01.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:01.469 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:01.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:01.470 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:01.471 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-11-25 16:41:01.471 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.472 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:01.476 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:41:01.478 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:41:01.478 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:41:01.479 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:41:01.479 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:41:01.480 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationInfoDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:41:01.483 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAllByBranch (Hospital) in 84.2518ms
2025-11-25 16:41:01.483 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAllByBranch (Hospital)'
2025-11-25 16:41:01.484 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:01.484 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:01.485 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:01.485 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:41:01.486 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Specializations/Branch/2 - 200 null application/json; charset=utf-8 100.8728ms
2025-11-25 16:41:11.121 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - application/json 47
2025-11-25 16:41:11.123 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Delete'
2025-11-25 16:41:11.123 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)' with route pattern 'api/Specializations/Delete' is valid for the request path '/api/Specializations/Delete'
2025-11-25 16:41:11.124 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:11.124 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:11.125 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:11.125 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:11.128 +02:00 [INF] Route matched with {action = "Delete", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Hospital.Application.DTO.Specialization.GetSpecializationDto) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:11.130 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:11.131 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:11.132 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:11.133 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:11.134 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:11.134 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:11.135 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:11.136 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:11.136 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' using the name '' in request data ...
2025-11-25 16:41:11.137 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:41:11.138 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000016": started reading request body.
2025-11-25 16:41:11.138 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000016": done reading request body.
2025-11-25 16:41:11.139 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'
2025-11-25 16:41:11.140 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:11.140 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:11.141 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:11.142 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:11.143 +02:00 [INF] delete Specialization called at "2025-11-25T16:41:11.1431278+02:00"
2025-11-25 16:41:11.144 +02:00 [INF] Deleting specialization with ID 4 from branch 6
2025-11-25 16:41:11.145 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:11.146 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:11.146 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:11.147 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:11.147 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:11.148 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:11.148 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:11.149 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:11.149 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:11.152 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:11.154 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:11.154 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:41:11.155 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:11.155 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:11.156 +02:00 [WRN] Specialization with ID 4 not found
2025-11-25 16:41:11.156 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Delete (Hospital) in 22.2558ms
2025-11-25 16:41:11.157 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:11.157 +02:00 [ERR]  Exception caught: Specialization not found.
System.Collections.Generic.KeyNotFoundException: Specialization not found.
   at Hospital.Infrastructure.Services.SpecializationService.DeleteAsync(GetSpecializationDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\SpecializationService.cs:line 74
   at Hospital.Controllers.SpecializationsController.Delete(GetSpecializationDto dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\SpecializationsController.cs:line 136
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:41:11.161 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:11.163 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:11.164 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:11.165 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:41:11.166 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - 404 null application/json 44.3095ms
2025-11-25 16:41:17.938 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - application/json 47
2025-11-25 16:41:17.939 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Delete'
2025-11-25 16:41:17.940 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)' with route pattern 'api/Specializations/Delete' is valid for the request path '/api/Specializations/Delete'
2025-11-25 16:41:17.940 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:17.941 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:17.942 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:17.943 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:17.943 +02:00 [INF] Route matched with {action = "Delete", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Hospital.Application.DTO.Specialization.GetSpecializationDto) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:17.944 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:17.945 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:17.945 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:17.946 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:17.947 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:17.948 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:17.948 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:17.949 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:17.950 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' using the name '' in request data ...
2025-11-25 16:41:17.951 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:41:17.952 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000017": started reading request body.
2025-11-25 16:41:17.952 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000017": done reading request body.
2025-11-25 16:41:17.953 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'
2025-11-25 16:41:17.953 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:17.954 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:17.955 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:17.955 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:17.956 +02:00 [INF] delete Specialization called at "2025-11-25T16:41:17.9565471+02:00"
2025-11-25 16:41:17.956 +02:00 [INF] Deleting specialization with ID 2 from branch 6
2025-11-25 16:41:17.957 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:17.958 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:17.958 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:17.959 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:17.960 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:17.960 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:17.961 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:17.961 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:17.962 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:17.965 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:17.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:17.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:17.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:17.969 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:17.969 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:41:17.970 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:17.971 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:17.972 +02:00 [WRN] Specialization 2 does not belong to branch 6
2025-11-25 16:41:17.972 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Delete (Hospital) in 24.4316ms
2025-11-25 16:41:17.973 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:17.973 +02:00 [ERR]  Exception caught: Specialization does not belong to this branch.
System.Collections.Generic.KeyNotFoundException: Specialization does not belong to this branch.
   at Hospital.Infrastructure.Services.SpecializationService.DeleteAsync(GetSpecializationDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\SpecializationService.cs:line 81
   at Hospital.Controllers.SpecializationsController.Delete(GetSpecializationDto dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\SpecializationsController.cs:line 136
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:41:17.979 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:17.980 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:17.980 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:17.981 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:41:17.981 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - 404 null application/json 43.2574ms
2025-11-25 16:41:26.588 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - application/json 47
2025-11-25 16:41:26.589 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Delete'
2025-11-25 16:41:26.590 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)' with route pattern 'api/Specializations/Delete' is valid for the request path '/api/Specializations/Delete'
2025-11-25 16:41:26.591 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:26.591 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:26.592 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:26.592 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:26.593 +02:00 [INF] Route matched with {action = "Delete", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Hospital.Application.DTO.Specialization.GetSpecializationDto) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:26.594 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:26.594 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:26.595 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:26.597 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:26.598 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:26.599 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:26.599 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:26.600 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:26.601 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' using the name '' in request data ...
2025-11-25 16:41:26.601 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:41:26.602 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000018": started reading request body.
2025-11-25 16:41:26.603 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000018": done reading request body.
2025-11-25 16:41:26.603 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'
2025-11-25 16:41:26.604 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:26.604 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:26.605 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:26.607 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:26.607 +02:00 [INF] delete Specialization called at "2025-11-25T16:41:26.6079235+02:00"
2025-11-25 16:41:26.608 +02:00 [INF] Deleting specialization with ID 2 from branch 2
2025-11-25 16:41:26.609 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:26.610 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:26.610 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:26.611 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:26.613 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:26.614 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:26.614 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:26.615 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:26.615 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:26.626 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:26.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:26.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:26.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:26.631 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:26.632 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:41:26.632 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:26.633 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:26.634 +02:00 [WRN] Specialization 2 does not belong to branch 2
2025-11-25 16:41:26.635 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Delete (Hospital) in 35.9405ms
2025-11-25 16:41:26.635 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:26.635 +02:00 [ERR]  Exception caught: Specialization does not belong to this branch.
System.Collections.Generic.KeyNotFoundException: Specialization does not belong to this branch.
   at Hospital.Infrastructure.Services.SpecializationService.DeleteAsync(GetSpecializationDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\SpecializationService.cs:line 81
   at Hospital.Controllers.SpecializationsController.Delete(GetSpecializationDto dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\SpecializationsController.cs:line 136
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:41:26.640 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:26.641 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:26.641 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:26.642 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:41:26.643 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - 404 null application/json 54.8631ms
2025-11-25 16:41:31.550 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - application/json 47
2025-11-25 16:41:31.551 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Delete'
2025-11-25 16:41:31.551 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)' with route pattern 'api/Specializations/Delete' is valid for the request path '/api/Specializations/Delete'
2025-11-25 16:41:31.553 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:31.554 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:31.555 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:31.555 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:31.556 +02:00 [INF] Route matched with {action = "Delete", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Hospital.Application.DTO.Specialization.GetSpecializationDto) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:31.557 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:31.558 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:31.558 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:31.559 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:31.560 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:31.560 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:31.561 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:31.562 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:31.562 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' using the name '' in request data ...
2025-11-25 16:41:31.563 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:41:31.564 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000019": started reading request body.
2025-11-25 16:41:31.564 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000019": done reading request body.
2025-11-25 16:41:31.565 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'
2025-11-25 16:41:31.566 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:31.567 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:31.569 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto' ...
2025-11-25 16:41:31.570 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.GetSpecializationDto'.
2025-11-25 16:41:31.571 +02:00 [INF] delete Specialization called at "2025-11-25T16:41:31.5716166+02:00"
2025-11-25 16:41:31.572 +02:00 [INF] Deleting specialization with ID 2 from branch 3
2025-11-25 16:41:31.573 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:31.574 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:31.574 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:31.575 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.576 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.576 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:31.577 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:31.577 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:31.578 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:31.581 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[SpecializationId], [t].[CreatedAt], [t].[Description], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t1].[DoctorId], [t1].[Available], [t1].[Biography], [t1].[ConsultationFees], [t1].[CreatedAt], [t1].[ExperienceYears], [t1].[ImageURL], [t1].[SpecializationId], [t1].[UpdatedAt], [t1].[UserId], [t1].[Id], [t1].[AccessFailedCount], [t1].[ConcurrencyStamp], [t1].[CreatedAt0], [t1].[DateOfBirth], [t1].[Email], [t1].[EmailConfirmed], [t1].[FullName], [t1].[Gender], [t1].[LockoutEnabled], [t1].[LockoutEnd], [t1].[NormalizedEmail], [t1].[NormalizedUserName], [t1].[PasswordHash], [t1].[PhoneNumber], [t1].[PhoneNumberConfirmed], [t1].[RefreshToken], [t1].[RefreshTokenExpiryTime], [t1].[Role], [t1].[SecurityStamp], [t1].[TwoFactorEnabled], [t1].[UpdatedAt0], [t1].[UserName]
FROM (
    SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
    FROM [Specializations] AS [s]
    WHERE [s].[SpecializationId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[SpecializationId] = [t0].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t1] ON [t].[SpecializationId] = [t1].[SpecializationId]
ORDER BY [t].[SpecializationId], [t0].[BranchId], [t0].[SpecializationId], [t0].[BranchId0], [t1].[DoctorId]
2025-11-25 16:41:31.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.586 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:31.586 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:41:31.587 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.588 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:31.588 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.589 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:41:31.592 +02:00 [DBG] 0 entities were added and 1 entities were removed from skip navigation 'Specialization.Branches'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.594 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.596 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:41:31.596 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:41:31.597 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:41:31.597 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:41:31.599 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 16:41:31.599 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.600 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.600 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:41:31.601 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:41:31.601 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:31.602 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:31.603 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:31.603 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p6='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 120), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [BranchSpecializations]
OUTPUT 1
WHERE [BranchId] = @p0 AND [SpecializationId] = @p1;
UPDATE [Specializations] SET [CreatedAt] = @p2, [Description] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [SpecializationId] = @p6;
2025-11-25 16:41:31.608 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p6='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 120), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [BranchSpecializations]
OUTPUT 1
WHERE [BranchId] = @p0 AND [SpecializationId] = @p1;
UPDATE [Specializations] SET [CreatedAt] = @p2, [Description] = @p3, [Name] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [SpecializationId] = @p6;
2025-11-25 16:41:31.609 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:31.610 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:41:31.610 +02:00 [DBG] Committing transaction.
2025-11-25 16:41:31.619 +02:00 [DBG] Committed transaction.
2025-11-25 16:41:31.620 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.620 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:31.621 +02:00 [DBG] Disposing transaction.
2025-11-25 16:41:31.622 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.624 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:31.624 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:41:31.625 +02:00 [INF] Specialization 2 removed from branch 3
2025-11-25 16:41:31.625 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:41:31.626 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:41:31.627 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:41:31.627 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:41:31.627 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:41:31.629 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:41:31.629 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Delete (Hospital) in 68.9786ms
2025-11-25 16:41:31.630 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Delete (Hospital)'
2025-11-25 16:41:31.632 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:31.632 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:31.633 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:31.633 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:41:31.634 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/Specializations/Delete - 200 null text/plain; charset=utf-8 84.637ms
2025-11-25 16:41:39.092 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 16:41:39.095 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 16:41:39.096 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 16:41:39.096 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:41:39.098 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:39.099 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:39.099 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:41:39.100 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:39.101 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:39.101 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:39.102 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:39.103 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:39.104 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:39.104 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:39.105 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:39.106 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:41:39.107 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 16:41:39.108 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:41:39.109 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001A": started reading request body.
2025-11-25 16:41:39.109 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001A": done reading request body.
2025-11-25 16:41:39.110 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 16:41:39.110 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:41:39.112 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:41:39.112 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:41:39.114 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:41:39.115 +02:00 [INF] create Specialization called at "2025-11-25T16:41:39.1150694+02:00"
2025-11-25 16:41:39.115 +02:00 [INF] Adding specialization: legg
2025-11-25 16:41:39.117 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:39.119 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:39.119 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:39.120 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.121 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.121 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:39.122 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:39.122 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:39.123 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:41:39.128 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:41:39.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.130 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:39.131 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:41:39.131 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.132 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:39.133 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.134 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.135 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:39.136 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:39.137 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:39.137 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:41:39.151 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:41:39.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.155 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.157 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.159 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:39.160 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-11-25 16:41:39.160 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.161 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:39.162 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.165 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:41:39.166 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:41:39.166 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:41:39.166 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:41:39.167 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:41:39.167 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.168 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.168 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:41:39.169 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:41:39.169 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:39.170 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:39.171 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:39.171 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:41:39.173 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:41:39.174 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:41:39.175 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:41:39.176 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:39.176 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:41:39.177 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:39.177 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:39.178 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:39.179 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:41:39.182 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:41:39.185 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:39.185 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:41:39.186 +02:00 [DBG] Committing transaction.
2025-11-25 16:41:39.191 +02:00 [DBG] Committed transaction.
2025-11-25 16:41:39.192 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.192 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:39.193 +02:00 [DBG] Disposing transaction.
2025-11-25 16:41:39.194 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.195 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:39.196 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:41:39.196 +02:00 [INF] Specialization 'legg' added successfully
2025-11-25 16:41:39.197 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:41:39.198 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:41:39.199 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:41:39.199 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:41:39.199 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:41:39.200 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-25 16:41:39.201 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[3],action=[Get],controller=[Specializations])
2025-11-25 16:41:39.201 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/3 and 
2025-11-25 16:41:39.202 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/3
2025-11-25 16:41:39.203 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 98.7176ms
2025-11-25 16:41:39.203 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:41:39.204 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:39.205 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:39.205 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:39.206 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:41:39.206 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 114.412ms
2025-11-25 16:41:44.649 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-25 16:41:44.651 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-25 16:41:44.651 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-25 16:41:44.652 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:41:44.653 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:41:44.653 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:41:44.654 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:41:44.654 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-25 16:41:44.656 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:41:44.657 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:41:44.658 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:41:44.659 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:41:44.660 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:41:44.661 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:44.662 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-25 16:41:44.663 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:41:44.663 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-25 16:41:44.664 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:41:44.665 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001B": started reading request body.
2025-11-25 16:41:44.665 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001B": done reading request body.
2025-11-25 16:41:44.666 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-25 16:41:44.667 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:41:44.667 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:41:44.668 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-25 16:41:44.668 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-25 16:41:44.669 +02:00 [INF] create Specialization called at "2025-11-25T16:41:44.6693303+02:00"
2025-11-25 16:41:44.669 +02:00 [INF] Adding specialization: legg
2025-11-25 16:41:44.670 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:41:44.672 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:41:44.672 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:41:44.672 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.673 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.674 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:44.675 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:44.675 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:44.676 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:41:44.678 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-25 16:41:44.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.680 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:44.681 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:41:44.682 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.682 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:44.683 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.683 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.684 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:44.686 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:44.686 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:41:44.687 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:41:44.690 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-25 16:41:44.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.695 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.699 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:44.700 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-11-25 16:41:44.701 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.702 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:41:44.703 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.706 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:41:44.706 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:41:44.706 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:41:44.707 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:41:44.708 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:41:44.709 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.710 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.710 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:41:44.711 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:41:44.711 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:44.712 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:44.713 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:44.713 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:41:44.715 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-25 16:41:44.716 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:41:44.718 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:41:44.719 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:44.720 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:41:44.721 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:41:44.721 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:41:44.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:41:44.723 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:41:44.724 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-25 16:41:44.725 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:41:44.726 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:41:44.727 +02:00 [DBG] Committing transaction.
2025-11-25 16:41:44.728 +02:00 [DBG] Committed transaction.
2025-11-25 16:41:44.729 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.729 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:41:44.730 +02:00 [DBG] Disposing transaction.
2025-11-25 16:41:44.730 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.731 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:41:44.732 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:41:44.733 +02:00 [INF] Specialization 'legg' added successfully
2025-11-25 16:41:44.734 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:41:44.735 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:41:44.736 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:41:44.736 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:41:44.736 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:41:44.737 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-25 16:41:44.737 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[4],action=[Get],controller=[Specializations])
2025-11-25 16:41:44.738 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/4 and 
2025-11-25 16:41:44.739 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/4
2025-11-25 16:41:44.740 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 79.5275ms
2025-11-25 16:41:44.741 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-25 16:41:44.741 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:41:44.741 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:41:44.742 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:41:44.742 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:41:44.743 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 93.8363ms
2025-11-25 16:42:08.533 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Services - application/json 192
2025-11-25 16:42:08.534 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-25 16:42:08.535 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.Create (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-25 16:42:08.536 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.Create (Hospital)'
2025-11-25 16:42:08.536 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:42:08.537 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:42:08.537 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.Create (Hospital)'
2025-11-25 16:42:08.540 +02:00 [INF] Route matched with {action = "Create", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.ServiceDTOS.CreateServiceDto) on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-25 16:42:08.541 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:42:08.542 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:42:08.543 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:42:08.544 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:42:08.545 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:42:08.546 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:08.547 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:08.547 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto' ...
2025-11-25 16:42:08.548 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto' using the name '' in request data ...
2025-11-25 16:42:08.549 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:42:08.550 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001C": started reading request body.
2025-11-25 16:42:08.551 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001C": done reading request body.
2025-11-25 16:42:08.554 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto'
2025-11-25 16:42:08.555 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto'.
2025-11-25 16:42:08.555 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto'.
2025-11-25 16:42:08.556 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto' ...
2025-11-25 16:42:08.558 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.CreateServiceDto'.
2025-11-25 16:42:08.559 +02:00 [INF] create services called at "2025-11-25T16:42:08.5597930+02:00"
2025-11-25 16:42:08.561 +02:00 [INF] Creating service with Name: mri 43
2025-11-25 16:42:08.562 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:42:08.563 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:42:08.563 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:42:08.564 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.564 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.565 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:08.566 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:08.566 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:08.567 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:42:08.571 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:42:08.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.574 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:08.574 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:42:08.576 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.577 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:42:08.579 +02:00 [DBG] Compiling query expression: 
'DbSet<Service>()
    .Where(s => s.Name.ToLower() == __ToLower_0)
    .Any(s => s.Branches
        .Any(b => __branchIds_1
            .Contains(b.BranchId)))'
2025-11-25 16:42:08.583 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Services AS s
                WHERE (LOWER(s.Name) == @__ToLower_0) && EXISTS (
                    SELECT 1
                    FROM BranchServices AS b
                    INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
                    WHERE ((s.ServiceId != NULL) && (s.ServiceId == b.ServiceId)) && b0.BranchId IN (
                        SELECT b1.value
                        FROM OPENJSON(@__branchIds_1) WITH (value int '') AS b1)))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:42:08.590 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.590 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.591 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:08.591 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:08.592 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:08.592 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 120), @__branchIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Services] AS [s]
        WHERE LOWER([s].[Name]) = @__ToLower_0 AND EXISTS (
            SELECT 1
            FROM [BranchServices] AS [b]
            INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
            WHERE [s].[ServiceId] = [b].[ServiceId] AND [b0].[BranchId] IN (
                SELECT [b1].[value]
                FROM OPENJSON(@__branchIds_1) WITH ([value] int '$') AS [b1]
            ))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 16:42:08.617 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__ToLower_0='?' (Size = 120), @__branchIds_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Services] AS [s]
        WHERE LOWER([s].[Name]) = @__ToLower_0 AND EXISTS (
            SELECT 1
            FROM [BranchServices] AS [b]
            INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
            WHERE [s].[ServiceId] = [b].[ServiceId] AND [b0].[BranchId] IN (
                SELECT [b1].[value]
                FROM OPENJSON(@__branchIds_1) WITH ([value] int '$') AS [b1]
            ))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 16:42:08.619 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:08.619 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:42:08.620 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.621 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:08.624 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Service.ServiceId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.640 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:42:08.642 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:42:08.643 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:42:08.644 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:42:08.645 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:42:08.646 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.646 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.647 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:42:08.648 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:42:08.648 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:08.649 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:08.650 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:42:08.651 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 300), @p3='?' (Size = 120), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Services] ([CreatedAt], [Description], [ImageURL], [Name], [UpdatedAt])
OUTPUT INSERTED.[ServiceId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-25 16:42:08.654 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 300), @p3='?' (Size = 120), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Services] ([CreatedAt], [Description], [ImageURL], [Name], [UpdatedAt])
OUTPUT INSERTED.[ServiceId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-25 16:42:08.656 +02:00 [DBG] The foreign key property 'Service.ServiceId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:42:08.657 +02:00 [DBG] The foreign key property 'BranchService.ServiceId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:42:08.657 +02:00 [DBG] The foreign key property 'BranchService.ServiceId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:42:08.658 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:08.659 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:42:08.660 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 16:42:08.661 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:08.662 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:08.662 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:08.663 +02:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchServices] ([BranchId], [ServiceId])
VALUES (@p5, @p6),
(@p7, @p8);
2025-11-25 16:42:08.668 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchServices] ([BranchId], [ServiceId])
VALUES (@p5, @p6),
(@p7, @p8);
2025-11-25 16:42:08.670 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:08.671 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:42:08.672 +02:00 [DBG] Committing transaction.
2025-11-25 16:42:08.672 +02:00 [DBG] Committed transaction.
2025-11-25 16:42:08.673 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.673 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:08.674 +02:00 [DBG] Disposing transaction.
2025-11-25 16:42:08.674 +02:00 [DBG] An entity of type 'Service' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.676 +02:00 [DBG] An entity of type 'BranchService' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.677 +02:00 [DBG] An entity of type 'BranchService' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:08.678 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 3 entities written to the database.
2025-11-25 16:42:08.678 +02:00 [INF] Service 'mri 43' created successfully
2025-11-25 16:42:08.681 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:42:08.682 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:42:08.682 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:42:08.683 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:42:08.683 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:42:08.684 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.ServiceDTOS.ServiceDto'.
2025-11-25 16:42:08.684 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.ServicesController.GetById (Hospital)"] for address (id=[1],action=[GetById],controller=[Services])
2025-11-25 16:42:08.685 +02:00 [DBG] Successfully processed template api/Services/{id} for Hospital.Controllers.ServicesController.GetById (Hospital) resulting in /api/Services/1 and 
2025-11-25 16:42:08.686 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.ServicesController.GetById (Hospital)"] with result /api/Services/1
2025-11-25 16:42:08.688 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.Create (Hospital) in 142.2462ms
2025-11-25 16:42:08.689 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.Create (Hospital)'
2025-11-25 16:42:08.689 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:42:08.690 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:42:08.690 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:08.691 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:42:08.691 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Services - 201 null application/json; charset=utf-8 158.6223ms
2025-11-25 16:42:15.090 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Services - null null
2025-11-25 16:42:15.092 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-25 16:42:15.093 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-25 16:42:15.094 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-25 16:42:15.094 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:42:15.094 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:42:15.095 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-25 16:42:15.097 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-25 16:42:15.098 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:42:15.100 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:42:15.101 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:42:15.102 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:42:15.102 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:42:15.103 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:15.104 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:15.105 +02:00 [INF] get all services called at "2025-11-25T16:42:15.1055825+02:00"
2025-11-25 16:42:15.106 +02:00 [INF] Fetching all services
2025-11-25 16:42:15.107 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:42:15.109 +02:00 [DBG] Compiling query expression: 
'DbSet<Service>()
    .Include(s => s.Branches)'
2025-11-25 16:42:15.110 +02:00 [DBG] Including navigation: 'Service.Branches'.
2025-11-25 16:42:15.117 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Service>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Service.ServiceId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Service.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Service.Description (string), 2], [Property: Service.ImageURL (string) MaxLength(300), 3], [Property: Service.Name (string) Required MaxLength(120), 4], [Property: Service.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchService (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchService (Dictionary<string, object>).ServiceId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Phone (string) MaxLength(25), 15], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 16] }
            4 -> 6
            5 -> 7
            6 -> 8
        SELECT s.ServiceId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.ServiceId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt
        FROM Services AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.ServiceId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
            FROM BranchServices AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.ServiceId == t.ServiceId
        ORDER BY s.ServiceId ASC, t.BranchId ASC, t.ServiceId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Service>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:42:15.119 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:42:15.119 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:42:15.119 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:15.120 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:15.120 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:15.121 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:15.121 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:15.122 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-25 16:42:15.133 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-25 16:42:15.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:15.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:15.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:15.138 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:15.138 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:15.139 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:15.140 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-11-25 16:42:15.140 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:15.141 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:15.142 +02:00 [INF] 1 services retrieved
2025-11-25 16:42:15.145 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:42:15.146 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:42:15.147 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:42:15.147 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:42:15.147 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:42:15.148 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:42:15.149 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 45.9814ms
2025-11-25 16:42:15.149 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-25 16:42:15.150 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:42:15.151 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:42:15.151 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:15.152 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:42:15.153 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 62.8223ms
2025-11-25 16:42:20.830 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Services/1 - null null
2025-11-25 16:42:20.832 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services/1'
2025-11-25 16:42:20.832 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetById (Hospital)' with route pattern 'api/Services/{id}' is valid for the request path '/api/Services/1'
2025-11-25 16:42:20.833 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetById (Hospital)'
2025-11-25 16:42:20.833 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:42:20.833 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:42:20.834 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetById (Hospital)'
2025-11-25 16:42:20.836 +02:00 [INF] Route matched with {action = "GetById", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-25 16:42:20.837 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:42:20.837 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:42:20.838 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:42:20.839 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:42:20.839 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:42:20.840 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:20.841 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:20.842 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 16:42:20.842 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 16:42:20.843 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:42:20.843 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:42:20.844 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 16:42:20.844 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 16:42:20.846 +02:00 [INF] get service by id  called at "2025-11-25T16:42:20.8460573+02:00"
2025-11-25 16:42:20.846 +02:00 [INF] Fetching service with ID: 1
2025-11-25 16:42:20.848 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:42:20.849 +02:00 [DBG] Compiling query expression: 
'DbSet<Service>()
    .Include(s => s.Branches)
    .FirstOrDefault(s => s.ServiceId == __id_0)'
2025-11-25 16:42:20.850 +02:00 [DBG] Including navigation: 'Service.Branches'.
2025-11-25 16:42:20.856 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Service>(
    asyncEnumerable: new SingleQueryingEnumerable<Service>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Service.ServiceId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Service.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Service.Description (string), 2], [Property: Service.ImageURL (string) MaxLength(300), 3], [Property: Service.Name (string) Required MaxLength(120), 4], [Property: Service.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: BranchService (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchService (Dictionary<string, object>).ServiceId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
                3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Phone (string) MaxLength(25), 15], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 16] }
                4 -> 6
                5 -> 7
                6 -> 8
            SELECT t.ServiceId, t.CreatedAt, t.Description, t.ImageURL, t.Name, t.UpdatedAt, t0.BranchId, t0.ServiceId, t0.BranchId0, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) s.ServiceId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt
                FROM Services AS s
                WHERE s.ServiceId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT b.BranchId, b.ServiceId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
                FROM BranchServices AS b
                INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
            ) AS t0 ON t.ServiceId == t0.ServiceId
            ORDER BY t.ServiceId ASC, t0.BranchId ASC, t0.ServiceId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Service>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:42:20.860 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:42:20.860 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:42:20.861 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:20.861 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:20.862 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:20.862 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:20.863 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:20.863 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:20.867 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:20.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:20.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:20.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:20.870 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:20.870 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:20.871 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:20.872 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:42:20.872 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:20.873 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:20.874 +02:00 [INF] Service with ID 1 retrieved successfully
2025-11-25 16:42:20.874 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:42:20.875 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:42:20.876 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:42:20.876 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:42:20.876 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:42:20.877 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.ServiceDTOS.ServiceDto'.
2025-11-25 16:42:20.877 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetById (Hospital) in 37.8074ms
2025-11-25 16:42:20.878 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetById (Hospital)'
2025-11-25 16:42:20.879 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:42:20.879 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:42:20.880 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:20.880 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:42:20.881 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Services/1 - 200 null application/json; charset=utf-8 51.4314ms
2025-11-25 16:42:30.273 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Services - application/json 195
2025-11-25 16:42:30.275 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-25 16:42:30.277 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-25 16:42:30.278 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)'
2025-11-25 16:42:30.279 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:42:30.279 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:42:30.280 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)'
2025-11-25 16:42:30.282 +02:00 [INF] Route matched with {action = "Update", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto) on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-25 16:42:30.283 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:42:30.284 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:42:30.285 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:42:30.285 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:42:30.286 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:42:30.287 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:30.287 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:30.288 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto' ...
2025-11-25 16:42:30.288 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto' using the name '' in request data ...
2025-11-25 16:42:30.289 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:42:30.290 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001F": started reading request body.
2025-11-25 16:42:30.290 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000001F": done reading request body.
2025-11-25 16:42:30.293 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'
2025-11-25 16:42:30.293 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'.
2025-11-25 16:42:30.294 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'.
2025-11-25 16:42:30.295 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto' ...
2025-11-25 16:42:30.297 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'.
2025-11-25 16:42:30.298 +02:00 [INF] update services called at "2025-11-25T16:42:30.2985182+02:00"
2025-11-25 16:42:30.299 +02:00 [INF] Updating service with ID: 2
2025-11-25 16:42:30.300 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:42:30.301 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:42:30.301 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:42:30.302 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:30.303 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:30.303 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:30.304 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:30.304 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:30.305 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:30.311 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:30.314 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:30.316 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:42:30.317 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:30.318 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:30.319 +02:00 [WRN] Service with ID 2 not found
2025-11-25 16:42:30.320 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.Update (Hospital) in 33.502ms
2025-11-25 16:42:30.321 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)'
2025-11-25 16:42:30.322 +02:00 [ERR]  Exception caught: Service not found.
System.Collections.Generic.KeyNotFoundException: Service not found.
   at Hospital.Infrastructure.Services.ServiceService.UpdateAsync(UpdateServiceDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\ServiceService.cs:line 97
   at Hospital.Controllers.ServicesController.Update(UpdateServiceDto dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\ServicesController.cs:line 140
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:42:30.327 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:42:30.328 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:42:30.329 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:30.329 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:42:30.330 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Services - 404 null application/json 56.6274ms
2025-11-25 16:42:36.955 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Services - application/json 195
2025-11-25 16:42:36.958 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-25 16:42:36.958 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-25 16:42:36.959 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)'
2025-11-25 16:42:36.960 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:42:36.960 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:42:36.960 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)'
2025-11-25 16:42:36.961 +02:00 [INF] Route matched with {action = "Update", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto) on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-25 16:42:36.962 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:42:36.962 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:42:36.965 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:42:36.966 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:42:36.967 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:42:36.968 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:36.968 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:36.969 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto' ...
2025-11-25 16:42:36.970 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto' using the name '' in request data ...
2025-11-25 16:42:36.970 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:42:36.971 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000020": started reading request body.
2025-11-25 16:42:36.972 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000020": done reading request body.
2025-11-25 16:42:36.972 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'
2025-11-25 16:42:36.973 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'.
2025-11-25 16:42:36.973 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'.
2025-11-25 16:42:36.974 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto' ...
2025-11-25 16:42:36.975 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.ServiceDTOS.UpdateServiceDto'.
2025-11-25 16:42:36.976 +02:00 [INF] update services called at "2025-11-25T16:42:36.9762316+02:00"
2025-11-25 16:42:36.976 +02:00 [INF] Updating service with ID: 1
2025-11-25 16:42:36.977 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:42:36.978 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:42:36.978 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:42:36.979 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:36.980 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:36.980 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:36.981 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:36.981 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:36.982 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:36.985 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:36.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:36.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:36.988 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:36.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:36.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:36.990 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:36.990 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:42:36.991 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:36.991 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:36.994 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:36.994 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:36.995 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:36.996 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:36.997 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:36.998 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:42:37.002 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:42:37.004 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:37.005 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:42:37.005 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:37.006 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:37.008 +02:00 [DBG] An entity of type 'Service' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:37.009 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:42:37.010 +02:00 [DBG] 0 entities were added and 1 entities were removed from skip navigation 'Service.Branches'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:37.011 +02:00 [DBG] An entity of type 'BranchService' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:37.012 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:42:37.013 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:42:37.013 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:42:37.013 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:42:37.014 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 16:42:37.015 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:37.015 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:37.016 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:42:37.017 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:42:37.017 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:37.017 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:37.018 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:37.019 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p7='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 120), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [BranchServices]
OUTPUT 1
WHERE [BranchId] = @p0 AND [ServiceId] = @p1;
UPDATE [Services] SET [CreatedAt] = @p2, [Description] = @p3, [ImageURL] = @p4, [Name] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [ServiceId] = @p7;
2025-11-25 16:42:37.023 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p7='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 300), @p5='?' (Size = 120), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [BranchServices]
OUTPUT 1
WHERE [BranchId] = @p0 AND [ServiceId] = @p1;
UPDATE [Services] SET [CreatedAt] = @p2, [Description] = @p3, [ImageURL] = @p4, [Name] = @p5, [UpdatedAt] = @p6
OUTPUT 1
WHERE [ServiceId] = @p7;
2025-11-25 16:42:37.025 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:37.026 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:42:37.026 +02:00 [DBG] Committing transaction.
2025-11-25 16:42:37.027 +02:00 [DBG] Committed transaction.
2025-11-25 16:42:37.027 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:37.028 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:37.029 +02:00 [DBG] Disposing transaction.
2025-11-25 16:42:37.029 +02:00 [DBG] An entity of type 'Service' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:37.030 +02:00 [DBG] An entity of type 'BranchService' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:42:37.031 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:42:37.032 +02:00 [INF] Service with ID 1 updated successfully
2025-11-25 16:42:37.033 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:42:37.034 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:42:37.034 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:42:37.035 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:42:37.035 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:42:37.036 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:42:37.036 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.Update (Hospital) in 68.7615ms
2025-11-25 16:42:37.037 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.Update (Hospital)'
2025-11-25 16:42:37.038 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:42:37.039 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:42:37.039 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:37.040 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:42:37.040 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Services - 200 null text/plain; charset=utf-8 85.1575ms
2025-11-25 16:42:48.278 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7217/api/Services/2 - null null
2025-11-25 16:42:48.279 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services/2'
2025-11-25 16:42:48.280 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.Delete (Hospital)' with route pattern 'api/Services/{id}' is valid for the request path '/api/Services/2'
2025-11-25 16:42:48.280 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.Delete (Hospital)'
2025-11-25 16:42:48.281 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:42:48.281 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:42:48.282 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.Delete (Hospital)'
2025-11-25 16:42:48.284 +02:00 [INF] Route matched with {action = "Delete", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-25 16:42:48.285 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:42:48.286 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:42:48.287 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:42:48.288 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:42:48.288 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:42:48.289 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:48.289 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-25 16:42:48.290 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 16:42:48.291 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 16:42:48.291 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:42:48.292 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:42:48.293 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 16:42:48.293 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 16:42:48.294 +02:00 [INF] delete services called at "2025-11-25T16:42:48.2949451+02:00"
2025-11-25 16:42:48.296 +02:00 [INF] Deleting service with ID: 2
2025-11-25 16:42:48.296 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:42:48.297 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:42:48.297 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:42:48.298 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:48.298 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:48.299 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:42:48.300 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:42:48.300 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:42:48.301 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:48.302 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ServiceId], [t].[CreatedAt], [t].[Description], [t].[ImageURL], [t].[Name], [t].[UpdatedAt], [t0].[BranchId], [t0].[ServiceId], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt]
FROM (
    SELECT TOP(1) [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
    FROM [Services] AS [s]
    WHERE [s].[ServiceId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t0] ON [t].[ServiceId] = [t0].[ServiceId]
ORDER BY [t].[ServiceId], [t0].[BranchId], [t0].[ServiceId]
2025-11-25 16:42:48.304 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:42:48.305 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:42:48.305 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:48.306 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:42:48.307 +02:00 [WRN] Service with ID 2 not found
2025-11-25 16:42:48.308 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:42:48.309 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:42:48.310 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-25 16:42:48.311 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-25 16:42:48.312 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-25 16:42:48.321 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.Delete (Hospital) in 32.2225ms
2025-11-25 16:42:48.322 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.Delete (Hospital)'
2025-11-25 16:42:48.322 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:42:48.322 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:42:48.323 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:42:48.324 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:42:48.325 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7217/api/Services/2 - 404 null application/problem+json; charset=utf-8 47.4694ms
2025-11-25 16:43:05.520 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Banners - application/json 165
2025-11-25 16:43:05.523 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Banners'
2025-11-25 16:43:05.523 +02:00 [DBG] Endpoint 'Hospital.Controllers.BannersController.Create (Hospital)' with route pattern 'api/Banners' is valid for the request path '/api/Banners'
2025-11-25 16:43:05.524 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BannersController.Create (Hospital)'
2025-11-25 16:43:05.525 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:43:05.526 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:43:05.526 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BannersController.Create (Hospital)'
2025-11-25 16:43:05.528 +02:00 [INF] Route matched with {action = "Create", controller = "Banners"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Banner.CreateBannerDto) on controller Hospital.Controllers.BannersController (Hospital).
2025-11-25 16:43:05.530 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:43:05.531 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:43:05.531 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:43:05.532 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:43:05.533 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:43:05.533 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:05.534 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:05.534 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto' ...
2025-11-25 16:43:05.535 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto' using the name '' in request data ...
2025-11-25 16:43:05.536 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:43:05.537 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000022": started reading request body.
2025-11-25 16:43:05.538 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000022": done reading request body.
2025-11-25 16:43:05.539 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Banner.CreateBannerDto'
2025-11-25 16:43:05.539 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto'.
2025-11-25 16:43:05.540 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto'.
2025-11-25 16:43:05.541 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto' ...
2025-11-25 16:43:05.542 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto'.
2025-11-25 16:43:05.545 +02:00 [INF] Creating new banner with title: banner name
2025-11-25 16:43:05.547 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:43:05.548 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Banner.BannerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:05.557 +02:00 [DBG] Context 'AppDbContext' started tracking 'Banner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:05.558 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:43:05.563 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:43:05.564 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:43:05.565 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:43:05.566 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:43:05.567 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:43:05.568 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:43:05.568 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:05.568 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:05.569 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:43:05.569 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:43:05.571 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:43:05.571 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 300), @p2='?' (Size = 300), @p3='?' (Size = 150), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Banners] ([CreatedAt], [ImageURL], [LinkURL], [Title], [Type], [UpdatedAt])
OUTPUT INSERTED.[BannerId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-11-25 16:43:05.579 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 300), @p2='?' (Size = 300), @p3='?' (Size = 150), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Banners] ([CreatedAt], [ImageURL], [LinkURL], [Title], [Type], [UpdatedAt])
OUTPUT INSERTED.[BannerId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-11-25 16:43:05.581 +02:00 [DBG] The foreign key property 'Banner.BannerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:43:05.582 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:43:05.583 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:43:05.583 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:05.584 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:43:05.585 +02:00 [DBG] An entity of type 'Banner' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:05.586 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:43:05.586 +02:00 [INF] Banner created successfully with ID: 1
2025-11-25 16:43:05.588 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:43:05.589 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:43:05.590 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:43:05.590 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:43:05.592 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:43:05.594 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Banner.BannerDto'.
2025-11-25 16:43:05.594 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BannersController.Get (Hospital)"] for address (id=[1],action=[Get],controller=[Banners])
2025-11-25 16:43:05.596 +02:00 [DBG] Successfully processed template api/Banners/{id} for Hospital.Controllers.BannersController.Get (Hospital) resulting in /api/Banners/1 and 
2025-11-25 16:43:05.596 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BannersController.Get (Hospital)"] with result /api/Banners/1
2025-11-25 16:43:05.602 +02:00 [INF] Executed action Hospital.Controllers.BannersController.Create (Hospital) in 69.0543ms
2025-11-25 16:43:05.603 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BannersController.Create (Hospital)'
2025-11-25 16:43:05.604 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:43:05.604 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:43:05.605 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:05.606 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:43:05.607 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Banners - 201 null application/json; charset=utf-8 87.3256ms
2025-11-25 16:43:08.167 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Banners - application/json 165
2025-11-25 16:43:08.168 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Banners'
2025-11-25 16:43:08.169 +02:00 [DBG] Endpoint 'Hospital.Controllers.BannersController.Create (Hospital)' with route pattern 'api/Banners' is valid for the request path '/api/Banners'
2025-11-25 16:43:08.169 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BannersController.Create (Hospital)'
2025-11-25 16:43:08.170 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:43:08.170 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:43:08.170 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BannersController.Create (Hospital)'
2025-11-25 16:43:08.171 +02:00 [INF] Route matched with {action = "Create", controller = "Banners"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Banner.CreateBannerDto) on controller Hospital.Controllers.BannersController (Hospital).
2025-11-25 16:43:08.172 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:43:08.173 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:43:08.175 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:43:08.176 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:43:08.177 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:43:08.178 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:08.179 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:08.179 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto' ...
2025-11-25 16:43:08.180 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto' using the name '' in request data ...
2025-11-25 16:43:08.180 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:43:08.181 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000023": started reading request body.
2025-11-25 16:43:08.182 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000023": done reading request body.
2025-11-25 16:43:08.182 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Banner.CreateBannerDto'
2025-11-25 16:43:08.183 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto'.
2025-11-25 16:43:08.183 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto'.
2025-11-25 16:43:08.184 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto' ...
2025-11-25 16:43:08.184 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Banner.CreateBannerDto'.
2025-11-25 16:43:08.185 +02:00 [INF] Creating new banner with title: banner name
2025-11-25 16:43:08.186 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:43:08.187 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Banner.BannerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:08.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Banner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:08.188 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:43:08.188 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:43:08.189 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:43:08.189 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:43:08.190 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:43:08.190 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:43:08.190 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:43:08.191 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:08.192 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:08.192 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:43:08.192 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:43:08.193 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:43:08.194 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 300), @p2='?' (Size = 300), @p3='?' (Size = 150), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Banners] ([CreatedAt], [ImageURL], [LinkURL], [Title], [Type], [UpdatedAt])
OUTPUT INSERTED.[BannerId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-11-25 16:43:08.205 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 300), @p2='?' (Size = 300), @p3='?' (Size = 150), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Banners] ([CreatedAt], [ImageURL], [LinkURL], [Title], [Type], [UpdatedAt])
OUTPUT INSERTED.[BannerId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-11-25 16:43:08.208 +02:00 [DBG] The foreign key property 'Banner.BannerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:43:08.208 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:43:08.209 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:43:08.209 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:08.210 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:43:08.211 +02:00 [DBG] An entity of type 'Banner' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:08.212 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:43:08.212 +02:00 [INF] Banner created successfully with ID: 2
2025-11-25 16:43:08.212 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:43:08.214 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:43:08.214 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:43:08.214 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:43:08.215 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:43:08.215 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Banner.BannerDto'.
2025-11-25 16:43:08.216 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BannersController.Get (Hospital)"] for address (id=[2],action=[Get],controller=[Banners])
2025-11-25 16:43:08.218 +02:00 [DBG] Successfully processed template api/Banners/{id} for Hospital.Controllers.BannersController.Get (Hospital) resulting in /api/Banners/2 and 
2025-11-25 16:43:08.218 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BannersController.Get (Hospital)"] with result /api/Banners/2
2025-11-25 16:43:08.219 +02:00 [INF] Executed action Hospital.Controllers.BannersController.Create (Hospital) in 40.9704ms
2025-11-25 16:43:08.219 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BannersController.Create (Hospital)'
2025-11-25 16:43:08.220 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:43:08.221 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:43:08.222 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:08.222 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:43:08.223 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Banners - 201 null application/json; charset=utf-8 56.2989ms
2025-11-25 16:43:12.553 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Banners - null null
2025-11-25 16:43:12.554 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Banners'
2025-11-25 16:43:12.555 +02:00 [DBG] Endpoint 'Hospital.Controllers.BannersController.GetAll (Hospital)' with route pattern 'api/Banners' is valid for the request path '/api/Banners'
2025-11-25 16:43:12.556 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BannersController.GetAll (Hospital)'
2025-11-25 16:43:12.557 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:43:12.557 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:43:12.558 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BannersController.GetAll (Hospital)'
2025-11-25 16:43:12.560 +02:00 [INF] Route matched with {action = "GetAll", controller = "Banners"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BannersController (Hospital).
2025-11-25 16:43:12.561 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:43:12.562 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:43:12.563 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:43:12.564 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:43:12.564 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:43:12.565 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:12.567 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:12.568 +02:00 [INF] Fetching all banners
2025-11-25 16:43:12.570 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:43:12.571 +02:00 [DBG] Compiling query expression: 
'DbSet<Banner>()'
2025-11-25 16:43:12.574 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Banner>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Banner.BannerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Banner.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Banner.ImageURL (string) MaxLength(300), 2], [Property: Banner.LinkURL (string) MaxLength(300), 3], [Property: Banner.Title (string) Required MaxLength(150), 4], [Property: Banner.Type (BannerType?) MaxLength(20), 5], [Property: Banner.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 6] }
        SELECT b.BannerId, b.CreatedAt, b.ImageURL, b.LinkURL, b.Title, b.Type, b.UpdatedAt
        FROM Banners AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Banner>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:43:12.577 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:43:12.578 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-25 16:43:12.579 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:12.580 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:12.581 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:43:12.581 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:43:12.582 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:43:12.582 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BannerId], [b].[CreatedAt], [b].[ImageURL], [b].[LinkURL], [b].[Title], [b].[Type], [b].[UpdatedAt]
FROM [Banners] AS [b]
2025-11-25 16:43:12.584 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BannerId], [b].[CreatedAt], [b].[ImageURL], [b].[LinkURL], [b].[Title], [b].[Type], [b].[UpdatedAt]
FROM [Banners] AS [b]
2025-11-25 16:43:12.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Banner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:12.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Banner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:12.586 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:43:12.587 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-25 16:43:12.587 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:12.588 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:43:12.591 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:43:12.593 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:43:12.593 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:43:12.594 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:43:12.594 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:43:12.595 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Banner.BannerDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:43:12.596 +02:00 [INF] Executed action Hospital.Controllers.BannersController.GetAll (Hospital) in 30.876ms
2025-11-25 16:43:12.596 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BannersController.GetAll (Hospital)'
2025-11-25 16:43:12.597 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:43:12.597 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:43:12.598 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:12.599 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:43:12.599 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Banners - 200 null application/json; charset=utf-8 46.6149ms
2025-11-25 16:43:27.777 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Banners/1 - null null
2025-11-25 16:43:27.778 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Banners/1'
2025-11-25 16:43:27.779 +02:00 [DBG] Endpoint 'Hospital.Controllers.BannersController.Get (Hospital)' with route pattern 'api/Banners/{id}' is valid for the request path '/api/Banners/1'
2025-11-25 16:43:27.780 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BannersController.Get (Hospital)'
2025-11-25 16:43:27.781 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:43:27.781 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:43:27.782 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BannersController.Get (Hospital)'
2025-11-25 16:43:27.784 +02:00 [INF] Route matched with {action = "Get", controller = "Banners"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller Hospital.Controllers.BannersController (Hospital).
2025-11-25 16:43:27.785 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:43:27.787 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:43:27.788 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:43:27.790 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:43:27.791 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:43:27.791 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:27.792 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:27.793 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-25 16:43:27.793 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-25 16:43:27.794 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:43:27.795 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-25 16:43:27.796 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-25 16:43:27.797 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-25 16:43:27.799 +02:00 [INF] Fetching banner by ID: 1
2025-11-25 16:43:27.801 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:43:27.803 +02:00 [DBG] Compiling query expression: 
'DbSet<Banner>()
    .FirstOrDefault(e => EF.Property<int>(e, "BannerId") == __p_0)'
2025-11-25 16:43:27.806 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Banner>(
    asyncEnumerable: new SingleQueryingEnumerable<Banner>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Banner.BannerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Banner.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Banner.ImageURL (string) MaxLength(300), 2], [Property: Banner.LinkURL (string) MaxLength(300), 3], [Property: Banner.Title (string) Required MaxLength(150), 4], [Property: Banner.Type (BannerType?) MaxLength(20), 5], [Property: Banner.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 6] }
            SELECT TOP(1) b.BannerId, b.CreatedAt, b.ImageURL, b.LinkURL, b.Title, b.Type, b.UpdatedAt
            FROM Banners AS b
            WHERE b.BannerId == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Banner>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:43:27.809 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:43:27.809 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:43:27.810 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:27.810 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:27.811 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:43:27.811 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:43:27.812 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:43:27.812 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BannerId], [b].[CreatedAt], [b].[ImageURL], [b].[LinkURL], [b].[Title], [b].[Type], [b].[UpdatedAt]
FROM [Banners] AS [b]
WHERE [b].[BannerId] = @__p_0
2025-11-25 16:43:27.820 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BannerId], [b].[CreatedAt], [b].[ImageURL], [b].[LinkURL], [b].[Title], [b].[Type], [b].[UpdatedAt]
FROM [Banners] AS [b]
WHERE [b].[BannerId] = @__p_0
2025-11-25 16:43:27.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'Banner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:27.822 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:43:27.823 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:43:27.824 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:27.825 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:43:27.825 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:43:27.827 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:43:27.827 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:43:27.828 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:43:27.829 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:43:27.831 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Banner.BannerDto'.
2025-11-25 16:43:27.832 +02:00 [INF] Executed action Hospital.Controllers.BannersController.Get (Hospital) in 40.7479ms
2025-11-25 16:43:27.833 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BannersController.Get (Hospital)'
2025-11-25 16:43:27.833 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:43:27.834 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:43:27.835 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:27.836 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:43:27.837 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Banners/1 - 200 null application/json; charset=utf-8 59.6246ms
2025-11-25 16:43:35.178 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Banners - application/json 178
2025-11-25 16:43:35.179 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Banners'
2025-11-25 16:43:35.180 +02:00 [DBG] Endpoint 'Hospital.Controllers.BannersController.Update (Hospital)' with route pattern 'api/Banners' is valid for the request path '/api/Banners'
2025-11-25 16:43:35.181 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BannersController.Update (Hospital)'
2025-11-25 16:43:35.181 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:43:35.181 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:43:35.182 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BannersController.Update (Hospital)'
2025-11-25 16:43:35.184 +02:00 [INF] Route matched with {action = "Update", controller = "Banners"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Hospital.Application.DTO.Banner.UpdateBannerDto) on controller Hospital.Controllers.BannersController (Hospital).
2025-11-25 16:43:35.185 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:43:35.186 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:43:35.187 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:43:35.188 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:43:35.189 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:43:35.189 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:35.190 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BannersController (Hospital)
2025-11-25 16:43:35.191 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.UpdateBannerDto' ...
2025-11-25 16:43:35.191 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.UpdateBannerDto' using the name '' in request data ...
2025-11-25 16:43:35.192 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:43:35.193 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000026": started reading request body.
2025-11-25 16:43:35.194 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000026": done reading request body.
2025-11-25 16:43:35.195 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Banner.UpdateBannerDto'
2025-11-25 16:43:35.195 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.UpdateBannerDto'.
2025-11-25 16:43:35.196 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Banner.UpdateBannerDto'.
2025-11-25 16:43:35.196 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Banner.UpdateBannerDto' ...
2025-11-25 16:43:35.198 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Banner.UpdateBannerDto'.
2025-11-25 16:43:35.200 +02:00 [INF] Updating banner with ID: 2
2025-11-25 16:43:35.201 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:43:35.202 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:43:35.202 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:43:35.203 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.204 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.205 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:43:35.206 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:43:35.208 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-25 16:43:35.208 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BannerId], [b].[CreatedAt], [b].[ImageURL], [b].[LinkURL], [b].[Title], [b].[Type], [b].[UpdatedAt]
FROM [Banners] AS [b]
WHERE [b].[BannerId] = @__p_0
2025-11-25 16:43:35.211 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BannerId], [b].[CreatedAt], [b].[ImageURL], [b].[LinkURL], [b].[Title], [b].[Type], [b].[UpdatedAt]
FROM [Banners] AS [b]
WHERE [b].[BannerId] = @__p_0
2025-11-25 16:43:35.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'Banner' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:35.213 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:43:35.214 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:43:35.214 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.215 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:43:35.217 +02:00 [DBG] An entity of type 'Banner' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:35.218 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:43:35.219 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:43:35.219 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:43:35.220 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:43:35.220 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:43:35.221 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.222 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.223 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:43:35.223 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:43:35.224 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:43:35.224 +02:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 300), @p2='?' (Size = 300), @p3='?' (Size = 150), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Banners] SET [CreatedAt] = @p0, [ImageURL] = @p1, [LinkURL] = @p2, [Title] = @p3, [Type] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [BannerId] = @p6;
2025-11-25 16:43:35.229 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 300), @p2='?' (Size = 300), @p3='?' (Size = 150), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Banners] SET [CreatedAt] = @p0, [ImageURL] = @p1, [LinkURL] = @p2, [Title] = @p3, [Type] = @p4, [UpdatedAt] = @p5
OUTPUT 1
WHERE [BannerId] = @p6;
2025-11-25 16:43:35.230 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:43:35.230 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:43:35.231 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.232 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:43:35.233 +02:00 [DBG] An entity of type 'Banner' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:43:35.233 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:43:35.234 +02:00 [INF] Banner with ID 2 updated successfully
2025-11-25 16:43:35.235 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:43:35.237 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:43:35.238 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:43:35.238 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:43:35.239 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-25 16:43:35.239 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-25 16:43:35.240 +02:00 [INF] Executed action Hospital.Controllers.BannersController.Update (Hospital) in 50.485ms
2025-11-25 16:43:35.240 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BannersController.Update (Hospital)'
2025-11-25 16:43:35.241 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:43:35.241 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:43:35.242 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:43:35.243 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:43:35.243 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Banners - 200 null text/plain; charset=utf-8 65.5226ms
2025-11-25 16:44:06.941 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-25 16:44:06.942 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-25 16:44:06.942 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-25 16:44:06.943 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:44:06.943 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:44:06.944 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:44:06.944 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:44:06.944 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-25 16:44:06.945 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:44:06.946 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:44:06.946 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:44:06.947 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:44:06.947 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:44:06.948 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:44:06.948 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-25 16:44:06.949 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:44:06.949 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-25 16:44:06.950 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:44:06.950 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000027": started reading request body.
2025-11-25 16:44:06.951 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000027": done reading request body.
2025-11-25 16:44:06.951 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-25 16:44:06.952 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:44:06.953 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:44:06.954 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-25 16:44:06.954 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-25 16:44:06.956 +02:00 [INF] create event  called at "2025-11-25T16:44:06.9561407+02:00"
2025-11-25 16:44:06.956 +02:00 [INF] Adding new event: event 2 for Branch ID: 4
2025-11-25 16:44:06.957 +02:00 [INF] Fetching branch by ID: 4
2025-11-25 16:44:06.957 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:44:06.958 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:44:06.959 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:44:06.959 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.959 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.960 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:06.960 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:06.961 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:06.961 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:44:06.964 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:44:06.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:06.967 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:06.967 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:44:06.968 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.969 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:44:06.970 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Event.EventId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:06.971 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:06.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:06.973 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:06.973 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:06.974 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:44:06.974 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:06.974 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:06.975 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.976 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.977 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:06.977 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:06.977 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:06.978 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:44:06.981 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-25 16:44:06.982 +02:00 [DBG] The foreign key property 'Event.EventId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:06.983 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:06.983 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:44:06.984 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.984 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:06.986 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:06.986 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:44:06.987 +02:00 [INF] Event event 2 added successfully with ID 4
2025-11-25 16:44:06.988 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:44:06.988 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:44:06.989 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:44:06.989 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:44:06.989 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:44:06.990 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-25 16:44:06.990 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] for address (id=[4],action=[GetEvent],controller=[Event])
2025-11-25 16:44:06.991 +02:00 [DBG] Successfully processed template api/Event/GetEvent for Hospital.Controllers.EventController.GetEvent (Hospital) resulting in /api/Event/GetEvent and ?id=4
2025-11-25 16:44:06.992 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] with result /api/Event/GetEvent?id=4
2025-11-25 16:44:06.992 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 44.4848ms
2025-11-25 16:44:06.993 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-25 16:44:06.993 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:44:06.993 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:44:06.994 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:06.995 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:44:06.996 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 201 null application/json; charset=utf-8 54.9716ms
2025-11-25 16:44:30.730 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 371
2025-11-25 16:44:30.733 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-25 16:44:30.734 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-25 16:44:30.734 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:44:30.735 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:44:30.736 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:44:30.736 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:44:30.737 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:44:30.737 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:44:30.738 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:44:30.739 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:44:30.739 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:44:30.740 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:44:30.740 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:30.747 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:30.748 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 16:44:30.748 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-25 16:44:30.749 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:44:30.750 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000028": started reading request body.
2025-11-25 16:44:30.750 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000028": done reading request body.
2025-11-25 16:44:30.751 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-25 16:44:30.751 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:44:30.752 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:44:30.752 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 16:44:30.753 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:44:30.755 +02:00 [INF] add doctor called at "2025-11-25T16:44:30.7555177+02:00"
2025-11-25 16:44:30.756 +02:00 [INF] Adding new doctor: Walaa, Email: walaa.elbishlawy@gmail.com
2025-11-25 16:44:30.757 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:44:30.759 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:44:30.759 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:44:30.759 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:30.760 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:30.760 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:44:30.761 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:44:30.762 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:30.763 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:30.763 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:30.764 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:44:30.766 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:44:30.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:30.768 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:30.768 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:30.770 +02:00 [INF] Registration attempt for email: walaa.elbishlawy@gmail.com, role: Doctor
2025-11-25 16:44:30.771 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:30.771 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:30.772 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:30.772 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:44:30.776 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:44:30.777 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:30.778 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:30.778 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:44:30.779 +02:00 [WRN] Registration failed: Email walaa.elbishlawy@gmail.com already exists
2025-11-25 16:44:30.779 +02:00 [ERR] Failed to register user for doctor Walaa: Email already exists!
2025-11-25 16:44:30.781 +02:00 [DBG] Rolling back transaction.
2025-11-25 16:44:30.782 +02:00 [DBG] Rolled back transaction.
2025-11-25 16:44:30.782 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:30.783 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:30.783 +02:00 [ERR] Transaction rolled back while adding doctor Walaa
2025-11-25 16:44:30.784 +02:00 [DBG] Disposing transaction.
2025-11-25 16:44:30.785 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 44.3021ms
2025-11-25 16:44:30.786 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:44:30.787 +02:00 [ERR]  Exception caught: Failed to create user: Email already exists!
System.InvalidOperationException: Failed to create user: Email already exists!
   at Hospital.Infrastructure.Services.DoctorService.AddAsync(AddDoctorDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\DoctorService.cs:line 73
   at Hospital.Infrastructure.Services.DoctorService.AddAsync(AddDoctorDto dto) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\DoctorService.cs:line 123
   at Hospital.Controllers.DoctorController.AddDoctor(AddDoctorDto dto) in D:\Walaa\GP\Hospital\Hospital\Controllers\DoctorController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:44:30.790 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:44:30.790 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:44:30.791 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:30.792 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:44:30.792 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 500 null application/json 62.4892ms
2025-11-25 16:44:41.657 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 373
2025-11-25 16:44:41.658 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-25 16:44:41.659 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-25 16:44:41.659 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:44:41.660 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:44:41.660 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:44:41.660 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:44:41.661 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:44:41.662 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:44:41.663 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:44:41.664 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:44:41.665 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:44:41.665 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:44:41.666 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:41.675 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:41.676 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 16:44:41.677 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-25 16:44:41.677 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:44:41.678 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000029": started reading request body.
2025-11-25 16:44:41.678 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000029": done reading request body.
2025-11-25 16:44:41.679 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-25 16:44:41.679 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:44:41.679 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:44:41.680 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-25 16:44:41.680 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-25 16:44:41.681 +02:00 [INF] add doctor called at "2025-11-25T16:44:41.6815008+02:00"
2025-11-25 16:44:41.681 +02:00 [INF] Adding new doctor: Walaa, Email: walaa.elbishlawy1@gmail.com
2025-11-25 16:44:41.682 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:44:41.688 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:44:41.689 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:44:41.689 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:41.690 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:41.691 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:44:41.691 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:44:41.692 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.692 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.693 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.694 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:44:41.698 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:44:41.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.700 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.701 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:44:41.702 +02:00 [INF] Registration attempt for email: walaa.elbishlawy1@gmail.com, role: Doctor
2025-11-25 16:44:41.704 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.705 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.705 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:41.705 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:44:41.709 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:44:41.712 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.712 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.714 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.714 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.714 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.715 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:44:41.718 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:44:41.719 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.720 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.721 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.721 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.722 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 16:44:41.725 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-25 16:44:41.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.727 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.728 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:44:41.791 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.792 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.792 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:41.793 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:44:41.794 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:44:41.795 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.796 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.798 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.798 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:41.799 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.799 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.800 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:41.802 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 16:44:41.803 +02:00 [DBG] Created transaction savepoint.
2025-11-25 16:44:41.804 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.804 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.804 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.805 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 16:44:41.810 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-25 16:44:41.810 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.811 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.811 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.812 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:44:41.813 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.813 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.813 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.814 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:44:41.816 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:44:41.817 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.818 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.819 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.819 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.820 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 16:44:41.823 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-25 16:44:41.824 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.824 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.825 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.825 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.826 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.826 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:44:41.827 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 16:44:41.828 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.829 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.830 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.830 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.831 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.831 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:44:41.834 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 16:44:41.835 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.836 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.836 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.837 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.837 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:41.838 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.838 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.838 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:41.839 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-25 16:44:41.839 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 16:44:41.840 +02:00 [DBG] Created transaction savepoint.
2025-11-25 16:44:41.840 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.841 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.841 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:41.842 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 16:44:41.847 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-25 16:44:41.849 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.849 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.850 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.851 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.852 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:44:41.852 +02:00 [INF] User walaa.elbishlawy1@gmail.com assigned to role Doctor
2025-11-25 16:44:41.853 +02:00 [INF] Registration successful for user walaa.elbishlawy1@gmail.com with ID 5b3a6350-21dc-4065-b203-1043e25cdd00
2025-11-25 16:44:41.854 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.854 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.854 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.855 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:44:41.859 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-25 16:44:41.860 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.860 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.860 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.861 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Doctor.DoctorId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.862 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.862 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.863 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.864 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.866 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.866 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:41.867 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.867 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:41.868 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:41.869 +02:00 [DBG] Creating transaction savepoint.
2025-11-25 16:44:41.870 +02:00 [DBG] Created transaction savepoint.
2025-11-25 16:44:41.871 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.871 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.871 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.872 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-25 16:44:41.875 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-25 16:44:41.876 +02:00 [DBG] The foreign key property 'Doctor.DoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:41.877 +02:00 [DBG] The foreign key property 'BranchDoctor.DoctorsDoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:41.877 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.878 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:44:41.878 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:41.879 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.879 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:41.880 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-25 16:44:41.882 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-25 16:44:41.883 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:41.883 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:41.886 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.886 +02:00 [DBG] An entity of type 'BranchDoctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:41.887 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-25 16:44:41.888 +02:00 [DBG] Committing transaction.
2025-11-25 16:44:41.888 +02:00 [DBG] Committed transaction.
2025-11-25 16:44:41.888 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:41.889 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:43.616 +02:00 [INF] Sent registration email to walaa.elbishlawy1@gmail.com
2025-11-25 16:44:43.617 +02:00 [DBG] Disposing transaction.
2025-11-25 16:44:43.618 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:44:43.621 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:44:43.621 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:44:43.621 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:44:43.622 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:44:43.624 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-25 16:44:43.625 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 1959.0525ms
2025-11-25 16:44:43.626 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-25 16:44:43.627 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:44:43.627 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:44:43.628 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:43.630 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-25 16:44:43.631 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 200 null application/json; charset=utf-8 1973.6528ms
2025-11-25 16:44:49.887 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/2 - null null
2025-11-25 16:44:49.888 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/2'
2025-11-25 16:44:49.888 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/2'
2025-11-25 16:44:49.889 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-25 16:44:49.889 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:44:49.890 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:44:49.890 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-25 16:44:49.892 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:44:49.893 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:44:49.893 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:44:49.894 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:44:49.894 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:44:49.895 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:44:49.895 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:49.896 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:49.896 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-25 16:44:49.897 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-25 16:44:49.897 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-25 16:44:49.898 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-25 16:44:49.898 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-25 16:44:49.898 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-25 16:44:49.899 +02:00 [INF] Get  doctor By Id called at "2025-11-25T16:44:49.8997037+02:00"
2025-11-25 16:44:49.900 +02:00 [INF] Fetching doctor with ID 2
2025-11-25 16:44:49.901 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:44:49.902 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:44:49.902 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:44:49.902 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:49.903 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:49.903 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:49.903 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:49.904 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:49.904 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:44:49.926 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:44:49.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.928 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.929 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:49.931 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:49.931 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-11-25 16:44:49.932 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:49.932 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:49.933 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:44:49.934 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:44:49.934 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:44:49.934 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:44:49.935 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:44:49.935 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-25 16:44:49.936 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 40.4188ms
2025-11-25 16:44:49.936 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-25 16:44:49.937 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:44:49.938 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:44:49.938 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:49.939 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:44:49.940 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/2 - 200 null application/json; charset=utf-8 53.2847ms
2025-11-25 16:44:58.509 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Doctor/update - application/json 407
2025-11-25 16:44:58.511 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/update'
2025-11-25 16:44:58.511 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)' with route pattern 'api/Doctor/update' is valid for the request path '/api/Doctor/update'
2025-11-25 16:44:58.511 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)'
2025-11-25 16:44:58.512 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:44:58.512 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:44:58.513 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)'
2025-11-25 16:44:58.515 +02:00 [INF] Route matched with {action = "UpdateDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDoctor(Hospital.Application.DTO.Doctor.UpdateDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:44:58.515 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:44:58.516 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:44:58.517 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:44:58.517 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:44:58.518 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:44:58.518 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:58.519 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:44:58.520 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto' ...
2025-11-25 16:44:58.521 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto' using the name '' in request data ...
2025-11-25 16:44:58.521 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:44:58.524 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000002B": started reading request body.
2025-11-25 16:44:58.524 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000002B": done reading request body.
2025-11-25 16:44:58.526 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'
2025-11-25 16:44:58.527 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'.
2025-11-25 16:44:58.527 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'.
2025-11-25 16:44:58.528 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto' ...
2025-11-25 16:44:58.529 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'.
2025-11-25 16:44:58.530 +02:00 [INF] Update doctor called at "2025-11-25T16:44:58.5304628+02:00"
2025-11-25 16:44:58.531 +02:00 [INF] Updating doctor with ID 1
2025-11-25 16:44:58.532 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:44:58.533 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:44:58.533 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:44:58.533 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.534 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.535 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:58.535 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:58.536 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:58.536 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:44:58.538 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:44:58.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.540 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.541 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.544 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.545 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:58.545 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:44:58.546 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.546 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:58.548 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.549 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.549 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:58.550 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:58.551 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:58.551 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:44:58.554 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:44:58.554 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:58.555 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:58.556 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.556 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:58.557 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.558 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:58.559 +02:00 [DBG] 0 entities were added and 1 entities were removed from navigation 'Doctor.Schedules'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.560 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.565 +02:00 [DBG] An entity of type 'Schedule' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Doctor'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.567 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Modified"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.568 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.568 +02:00 [DBG] The unchanged property 'User.Email' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:58.569 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.570 +02:00 [DBG] The unchanged property 'User.FullName' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:58.570 +02:00 [DBG] The unchanged property 'User.NormalizedEmail' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:58.571 +02:00 [DBG] The unchanged property 'User.NormalizedUserName' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:58.572 +02:00 [DBG] The unchanged property 'User.UserName' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:44:58.572 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:58.573 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:44:58.573 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:44:58.574 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:44:58.575 +02:00 [DBG] Executing 3 update commands as a batch.
2025-11-25 16:44:58.575 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.576 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.576 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-25 16:44:58.577 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-25 16:44:58.577 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:44:58.578 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:44:58.578 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:44:58.579 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450), @p10='?' (DbType = Int32), @p17='?' (Size = 450), @p18='?' (Size = 4000), @p11='?' (Size = 256), @p12='?' (Size = 150), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Doctors] SET [Available] = @p0, [Biography] = @p1, [ConsultationFees] = @p2, [CreatedAt] = @p3, [ExperienceYears] = @p4, [ImageURL] = @p5, [SpecializationId] = @p6, [UpdatedAt] = @p7, [UserId] = @p8
OUTPUT 1
WHERE [DoctorId] = @p9;
DELETE FROM [Schedules]
OUTPUT 1
WHERE [ScheduleId] = @p10;
UPDATE [Users] SET [Email] = @p11, [FullName] = @p12, [NormalizedEmail] = @p13, [NormalizedUserName] = @p14, [UpdatedAt] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 16:44:58.587 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450), @p10='?' (DbType = Int32), @p17='?' (Size = 450), @p18='?' (Size = 4000), @p11='?' (Size = 256), @p12='?' (Size = 150), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (DbType = DateTime2), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Doctors] SET [Available] = @p0, [Biography] = @p1, [ConsultationFees] = @p2, [CreatedAt] = @p3, [ExperienceYears] = @p4, [ImageURL] = @p5, [SpecializationId] = @p6, [UpdatedAt] = @p7, [UserId] = @p8
OUTPUT 1
WHERE [DoctorId] = @p9;
DELETE FROM [Schedules]
OUTPUT 1
WHERE [ScheduleId] = @p10;
UPDATE [Users] SET [Email] = @p11, [FullName] = @p12, [NormalizedEmail] = @p13, [NormalizedUserName] = @p14, [UpdatedAt] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 16:44:58.589 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:44:58.590 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:44:58.590 +02:00 [DBG] Committing transaction.
2025-11-25 16:44:58.591 +02:00 [DBG] Committed transaction.
2025-11-25 16:44:58.592 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.592 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:44:58.593 +02:00 [DBG] Disposing transaction.
2025-11-25 16:44:58.593 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.594 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.594 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:44:58.595 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 3 entities written to the database.
2025-11-25 16:44:58.596 +02:00 [INF] Doctor with ID 1 updated successfully
2025-11-25 16:44:58.597 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:44:58.598 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:44:58.598 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:44:58.598 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:44:58.599 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:44:58.599 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-25 16:44:58.602 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.UpdateDoctor (Hospital) in 83.9528ms
2025-11-25 16:44:58.603 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)'
2025-11-25 16:44:58.603 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:44:58.604 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:44:58.604 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:44:58.605 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:44:58.605 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Doctor/update - 200 null application/json; charset=utf-8 96.7891ms
2025-11-25 16:45:03.994 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - null null
2025-11-25 16:45:03.997 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/branch/2'
2025-11-25 16:45:03.997 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)' with route pattern 'api/Doctor/branch/{branchId}' is valid for the request path '/api/Doctor/branch/2'
2025-11-25 16:45:03.998 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:03.998 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:45:03.999 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:45:03.999 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:04.001 +02:00 [INF] Route matched with {action = "GetByBranch", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByBranch(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:45:04.003 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:45:04.004 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:45:04.004 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:45:04.005 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:45:04.005 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:45:04.006 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:04.007 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:04.007 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:45:04.008 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:45:04.008 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:04.009 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:04.009 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:45:04.010 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:04.010 +02:00 [INF] get doctor by Branch called at "2025-11-25T16:45:04.0109536+02:00"
2025-11-25 16:45:04.011 +02:00 [INF] Fetching all doctors for branch ID 2
2025-11-25 16:45:04.012 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:45:04.013 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:45:04.013 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:45:04.013 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.014 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.014 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:04.015 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:04.015 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:45:04.016 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:45:04.017 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:45:04.018 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.019 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:04.020 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:45:04.021 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.021 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:04.023 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Where(d => d.Branches
        .Any(b => b.BranchId == __branchId_0))'
2025-11-25 16:45:04.024 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:45:04.025 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-25 16:45:04.025 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 16:45:04.026 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-25 16:45:04.033 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:45:04.039 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
            8 -> 38
            9 -> 39
            10 -> 40
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.BranchId (int) Required FK Index, 50], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 52], [Property: Schedule.DoctorId (int) Required FK Index, 53], [Property: Schedule.EndTime (DateTime) Required, 54], [Property: Schedule.Shift (AppointmentShift) Required, 55], [Property: Schedule.StartTime (DateTime) Required, 56], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 57] }
            12 -> 49
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d1.BranchesBranchId, d1.DoctorsDoctorId, b0.BranchId, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
            FROM DoctorBranches AS d1
            INNER JOIN Branches AS b0 ON d1.BranchesBranchId == b0.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN Schedules AS s0 ON d.DoctorId == s0.DoctorId
        WHERE EXISTS (
            SELECT 1
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            WHERE ((d.DoctorId != NULL) && (d.DoctorId == d0.DoctorsDoctorId)) && (b.BranchId == @__branchId_0))
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:45:04.041 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.042 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.042 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:04.043 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:04.043 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:04.044 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:04.060 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:04.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.064 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.066 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.070 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:04.071 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:04.072 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 9ms reading results.
2025-11-25 16:45:04.072 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.073 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:04.078 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:45:04.078 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:45:04.079 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:45:04.080 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:45:04.080 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:45:04.081 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:45:04.082 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetByBranch (Hospital) in 75.951ms
2025-11-25 16:45:04.084 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:04.084 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:45:04.084 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:45:04.085 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:04.085 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:45:04.086 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - 200 null application/json; charset=utf-8 91.8259ms
2025-11-25 16:45:16.575 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-25 16:45:16.577 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-25 16:45:16.577 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-25 16:45:16.578 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 16:45:16.578 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:45:16.578 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:45:16.578 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 16:45:16.579 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-25 16:45:16.579 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:45:16.580 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:45:16.580 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:45:16.581 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:45:16.581 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:45:16.582 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 16:45:16.583 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-25 16:45:16.585 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 16:45:16.585 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-25 16:45:16.586 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:45:16.586 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000002D": started reading request body.
2025-11-25 16:45:16.587 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:0000002D": done reading request body.
2025-11-25 16:45:16.588 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-25 16:45:16.588 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 16:45:16.589 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 16:45:16.589 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-25 16:45:16.590 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-25 16:45:16.590 +02:00 [INF] create schedule  called at "2025-11-25T16:45:16.5904582+02:00"
2025-11-25 16:45:16.590 +02:00 [INF] Creating schedule for DoctorId: 2, Day: friday, Shift: "Afternoon"
2025-11-25 16:45:16.591 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:45:16.592 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:45:16.592 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:45:16.593 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.593 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.593 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:16.594 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:16.594 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:16.595 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:45:16.597 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:45:16.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.599 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.601 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.603 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:16.604 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-11-25 16:45:16.605 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.605 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:16.606 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.607 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.607 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:16.607 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:16.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:16.608 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 16:45:16.612 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-25 16:45:16.613 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:16.614 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:45:16.615 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.616 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-25 16:45:16.617 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.618 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.618 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.619 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:45:16.620 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:45:16.620 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:45:16.621 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:45:16.622 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:45:16.623 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.623 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.624 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:16.624 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:16.625 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:45:16.625 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:45:16.628 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-25 16:45:16.632 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-25 16:45:16.632 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:16.633 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:45:16.633 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.634 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:16.635 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:16.635 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:45:16.636 +02:00 [INF] Schedule created successfully for DoctorId 2
2025-11-25 16:45:16.636 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:45:16.637 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:45:16.638 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:45:16.638 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:45:16.638 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:45:16.639 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-25 16:45:16.639 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 56.9496ms
2025-11-25 16:45:16.640 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-25 16:45:16.640 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:45:16.641 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:45:16.641 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:16.642 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:45:16.642 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 67.5556ms
2025-11-25 16:45:23.173 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - null null
2025-11-25 16:45:23.174 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/branch/2'
2025-11-25 16:45:23.174 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)' with route pattern 'api/Doctor/branch/{branchId}' is valid for the request path '/api/Doctor/branch/2'
2025-11-25 16:45:23.175 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:23.175 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:45:23.175 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:45:23.176 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:23.176 +02:00 [INF] Route matched with {action = "GetByBranch", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByBranch(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:45:23.177 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:45:23.178 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:45:23.179 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:45:23.180 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:45:23.181 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:45:23.182 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:23.183 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:23.184 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:45:23.184 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:45:23.185 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:23.186 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:23.186 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:45:23.187 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:23.187 +02:00 [INF] get doctor by Branch called at "2025-11-25T16:45:23.1878749+02:00"
2025-11-25 16:45:23.188 +02:00 [INF] Fetching all doctors for branch ID 2
2025-11-25 16:45:23.189 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:45:23.190 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:45:23.191 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:45:23.192 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.193 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.194 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:23.195 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:23.195 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:45:23.195 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:45:23.197 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:45:23.198 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.199 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:23.199 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:45:23.200 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.200 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:23.201 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.202 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.202 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:23.203 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:23.203 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:23.204 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:23.222 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:23.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.226 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.227 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.227 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.229 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.230 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:23.231 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:23.232 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:45:23.232 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.233 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:23.234 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:45:23.235 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:45:23.235 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:45:23.235 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:45:23.235 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:45:23.236 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:45:23.237 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetByBranch (Hospital) in 55.582ms
2025-11-25 16:45:23.238 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:23.239 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:45:23.239 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:45:23.240 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:23.241 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:45:23.242 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - 200 null application/json; charset=utf-8 68.9461ms
2025-11-25 16:45:35.140 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - null null
2025-11-25 16:45:35.141 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/branch/2'
2025-11-25 16:45:35.142 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)' with route pattern 'api/Doctor/branch/{branchId}' is valid for the request path '/api/Doctor/branch/2'
2025-11-25 16:45:35.142 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:35.143 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:45:35.144 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:45:35.145 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:35.146 +02:00 [INF] Route matched with {action = "GetByBranch", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByBranch(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:45:35.146 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:45:35.147 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:45:35.147 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:45:35.148 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:45:35.149 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:45:35.149 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:35.150 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:35.150 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:45:35.152 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:45:35.152 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:35.153 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:35.153 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:45:35.153 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:45:35.154 +02:00 [INF] get doctor by Branch called at "2025-11-25T16:45:35.1542615+02:00"
2025-11-25 16:45:35.154 +02:00 [INF] Fetching all doctors for branch ID 2
2025-11-25 16:45:35.155 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:45:35.156 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:45:35.156 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:45:35.156 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.157 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.157 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:35.158 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:35.158 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:35.158 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:45:35.159 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:45:35.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.161 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:35.162 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:45:35.163 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.163 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:35.164 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.165 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.166 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:35.166 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:35.167 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:35.167 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:35.169 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:35.170 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.170 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.171 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.172 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.172 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.172 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.173 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.174 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.176 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:35.178 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:35.179 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-11-25 16:45:35.179 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.180 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:35.181 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:45:35.182 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:45:35.183 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:45:35.183 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:45:35.183 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:45:35.184 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:45:35.184 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetByBranch (Hospital) in 35.0998ms
2025-11-25 16:45:35.185 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:45:35.186 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:45:35.186 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:45:35.187 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:35.187 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:45:35.188 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - 200 null application/json; charset=utf-8 47.3434ms
2025-11-25 16:45:39.851 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 16:45:39.853 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 16:45:39.853 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 16:45:39.854 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 16:45:39.854 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 16:45:39.855 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:45:39.855 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:45:39.856 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 16:45:39.858 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:45:39.859 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:45:39.859 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:45:39.860 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:45:39.860 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:45:39.861 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:45:39.861 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:39.863 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:39.865 +02:00 [INF] get all doctor in system called at "2025-11-25T16:45:39.8655119+02:00"
2025-11-25 16:45:39.866 +02:00 [INF] Fetching all doctors in the system
2025-11-25 16:45:39.867 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:45:39.868 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)'
2025-11-25 16:45:39.869 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:45:39.869 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-25 16:45:39.870 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 16:45:39.870 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-25 16:45:39.877 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:45:39.884 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
            8 -> 38
            9 -> 39
            10 -> 40
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.BranchId (int) Required FK Index, 50], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 52], [Property: Schedule.DoctorId (int) Required FK Index, 53], [Property: Schedule.EndTime (DateTime) Required, 54], [Property: Schedule.Shift (AppointmentShift) Required, 55], [Property: Schedule.StartTime (DateTime) Required, 56], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 57] }
            12 -> 49
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN Schedules AS s0 ON d.DoctorId == s0.DoctorId
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:45:39.886 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:45:39.887 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:45:39.887 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:39.888 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:39.888 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:39.888 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:39.889 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:39.889 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:39.900 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:45:39.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.902 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.903 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.903 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.905 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.905 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.906 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:39.908 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:39.909 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-11-25 16:45:39.909 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:39.910 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:39.911 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:45:39.912 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:45:39.913 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:45:39.913 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:45:39.913 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:45:39.915 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:45:39.916 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 55.1679ms
2025-11-25 16:45:39.917 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 16:45:39.918 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:45:39.918 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:45:39.918 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:39.919 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:45:39.919 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 67.9813ms
2025-11-25 16:45:46.842 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - null null
2025-11-25 16:45:46.843 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:45:46.843 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)' with route pattern 'api/Doctor/BySpecialization/{specializationId}' is valid for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:45:46.844 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:45:46.844 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:45:46.845 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:45:46.845 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:45:46.848 +02:00 [INF] Route matched with {action = "GetDoctorsBySpecialization", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctorsBySpecialization(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:45:46.848 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:45:46.849 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:45:46.849 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:45:46.850 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:45:46.850 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:45:46.851 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:46.852 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:45:46.853 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:45:46.853 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' using the name 'specializationId' in request data ...
2025-11-25 16:45:46.854 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:45:46.854 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:45:46.855 +02:00 [DBG] Attempting to validate the bound parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:45:46.855 +02:00 [DBG] Done attempting to validate the bound parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:45:46.856 +02:00 [INF] get doctor by Specialization  called at "2025-11-25T16:45:46.8564804+02:00"
2025-11-25 16:45:46.857 +02:00 [INF] Fetching doctors for specialization ID 1
2025-11-25 16:45:46.857 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:45:46.858 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:45:46.859 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:45:46.859 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.859 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.860 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:46.860 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:46.861 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:45:46.862 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:45:46.864 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:45:46.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.866 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:46.867 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:45:46.868 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.869 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:46.871 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Branches)
    .ThenInclude(b => b.Specializations)
    .Where(d => d.Branches
        .Any(b => b.Specializations
            .Any(s => s.SpecializationId == __specializationId_0)))'
2025-11-25 16:45:46.873 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:45:46.874 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 16:45:46.874 +02:00 [DBG] Including navigation: 'Branch.Specializations'.
2025-11-25 16:45:46.883 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:45:46.887 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> 0
            3 -> 10
            4 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 33], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 34] }
            5 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 35], [Property: Branch.Address (string) MaxLength(250), 36], [Property: Branch.BranchName (string) Required MaxLength(150), 37], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 38], [Property: Branch.Description (string), 39], [Property: Branch.Email (string) MaxLength(200), 40], [Property: Branch.ImageURL (string) MaxLength(300), 41], [Property: Branch.Phone (string) MaxLength(25), 42], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 43] }
            6 -> 33
            7 -> 34
            8 -> 35
            9 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 44], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 45] }
            10 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 46], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Specialization.Description (string), 48], [Property: Specialization.Name (string) Required MaxLength(120), 49], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50] }
            11 -> 44
            12 -> 45
            13 -> 46
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, t0.BranchId0, t0.SpecializationId, t0.SpecializationId0, t0.CreatedAt0, t0.Description0, t0.Name, t0.UpdatedAt0
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        LEFT JOIN 
        (
            SELECT d1.BranchesBranchId, d1.DoctorsDoctorId, b1.BranchId, b1.Address, b1.BranchName, b1.CreatedAt, b1.Description, b1.Email, b1.ImageURL, b1.Phone, b1.UpdatedAt, t.BranchId AS BranchId0, t.SpecializationId, t.SpecializationId0, t.CreatedAt AS CreatedAt0, t.Description AS Description0, t.Name, t.UpdatedAt AS UpdatedAt0
            FROM DoctorBranches AS d1
            INNER JOIN Branches AS b1 ON d1.BranchesBranchId == b1.BranchId
            LEFT JOIN 
            (
                SELECT b2.BranchId, b2.SpecializationId, s0.SpecializationId AS SpecializationId0, s0.CreatedAt, s0.Description, s0.Name, s0.UpdatedAt
                FROM BranchSpecializations AS b2
                INNER JOIN Specializations AS s0 ON b2.SpecializationId == s0.SpecializationId
            ) AS t ON b1.BranchId == t.BranchId
        ) AS t0 ON d.DoctorId == t0.DoctorsDoctorId
        WHERE EXISTS (
            SELECT 1
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            WHERE ((d.DoctorId != NULL) && (d.DoctorId == d0.DoctorsDoctorId)) && EXISTS (
                SELECT 1
                FROM BranchSpecializations AS b0
                INNER JOIN Specializations AS s ON b0.SpecializationId == s.SpecializationId
                WHERE ((b.BranchId != NULL) && (b.BranchId == b0.BranchId)) && (s.SpecializationId == @__specializationId_0)))
        ORDER BY d.DoctorId ASC, u.Id ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC, t0.BranchId0 ASC, t0.SpecializationId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:45:46.889 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.890 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.890 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:45:46.890 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:46.891 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:45:46.891 +02:00 [DBG] Executing DbCommand [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:45:46.914 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:45:46.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.916 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.920 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:45:46.922 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:45:46.922 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-11-25 16:45:46.923 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.923 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:45:46.924 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:45:46.925 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:45:46.925 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:45:46.925 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:45:46.926 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:45:46.926 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:45:46.927 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital) in 75.6523ms
2025-11-25 16:45:46.927 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:45:46.927 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:45:46.928 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:45:46.928 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:45:46.930 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-25 16:45:46.931 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - 200 null application/json; charset=utf-8 88.8314ms
2025-11-25 16:46:07.229 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/2 - null null
2025-11-25 16:46:07.230 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/2'
2025-11-25 16:46:07.231 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/2'
2025-11-25 16:46:07.231 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-25 16:46:07.232 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:07.232 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:07.233 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-25 16:46:07.233 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:07.234 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:07.235 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:07.235 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:07.236 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:07.237 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:07.237 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:07.238 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:07.239 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-25 16:46:07.239 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-25 16:46:07.240 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-25 16:46:07.241 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-25 16:46:07.241 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-25 16:46:07.242 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-25 16:46:07.242 +02:00 [INF] Get  doctor By Id called at "2025-11-25T16:46:07.2426191+02:00"
2025-11-25 16:46:07.243 +02:00 [INF] Fetching doctor with ID 2
2025-11-25 16:46:07.243 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:07.244 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:07.244 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:07.245 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:07.245 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:07.246 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:07.246 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:07.247 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:46:07.248 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:46:07.258 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:46:07.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.259 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.260 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.262 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.262 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.262 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.263 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:07.263 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:07.264 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-11-25 16:46:07.264 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:07.265 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:07.266 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:46:07.267 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:46:07.267 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:46:07.268 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:46:07.268 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:46:07.268 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-25 16:46:07.269 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 32.0621ms
2025-11-25 16:46:07.270 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-25 16:46:07.271 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:07.272 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:07.272 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:07.273 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:07.273 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/2 - 200 null application/json; charset=utf-8 44.1498ms
2025-11-25 16:46:15.742 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7217/api/Doctor/update - application/json 407
2025-11-25 16:46:15.744 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/update'
2025-11-25 16:46:15.744 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)' with route pattern 'api/Doctor/update' is valid for the request path '/api/Doctor/update'
2025-11-25 16:46:15.745 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)'
2025-11-25 16:46:15.745 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:15.746 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:15.746 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)'
2025-11-25 16:46:15.747 +02:00 [INF] Route matched with {action = "UpdateDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDoctor(Hospital.Application.DTO.Doctor.UpdateDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:15.747 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:15.748 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:15.749 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:15.749 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:15.750 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:15.751 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:15.753 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:15.754 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto' ...
2025-11-25 16:46:15.754 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto' using the name '' in request data ...
2025-11-25 16:46:15.755 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-25 16:46:15.755 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000033": started reading request body.
2025-11-25 16:46:15.756 +02:00 [DBG] Connection id "0HNHC5T0J0T1M", Request id "0HNHC5T0J0T1M:00000033": done reading request body.
2025-11-25 16:46:15.756 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'
2025-11-25 16:46:15.757 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'.
2025-11-25 16:46:15.757 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'.
2025-11-25 16:46:15.758 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto' ...
2025-11-25 16:46:15.758 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.UpdateDoctorDto'.
2025-11-25 16:46:15.759 +02:00 [INF] Update doctor called at "2025-11-25T16:46:15.7594494+02:00"
2025-11-25 16:46:15.759 +02:00 [INF] Updating doctor with ID 1
2025-11-25 16:46:15.760 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:15.761 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:15.761 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:15.762 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.762 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.763 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:15.763 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:15.764 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:15.764 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:46:15.766 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-25 16:46:15.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.770 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.771 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.772 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.772 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.773 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.773 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:15.774 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-11-25 16:46:15.775 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.775 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:15.776 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.777 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.777 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:15.778 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:15.778 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:15.779 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:46:15.781 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:46:15.782 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:15.783 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:46:15.783 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.784 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:15.785 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.787 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:46:15.787 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:46:15.788 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-25 16:46:15.788 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-25 16:46:15.789 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-25 16:46:15.789 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.790 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.790 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:15.791 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:15.791 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:15.792 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Doctors] SET [Available] = @p0, [Biography] = @p1, [ConsultationFees] = @p2, [CreatedAt] = @p3, [ExperienceYears] = @p4, [ImageURL] = @p5, [SpecializationId] = @p6, [UpdatedAt] = @p7, [UserId] = @p8
OUTPUT 1
WHERE [DoctorId] = @p9;
2025-11-25 16:46:15.803 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Doctors] SET [Available] = @p0, [Biography] = @p1, [ConsultationFees] = @p2, [CreatedAt] = @p3, [ExperienceYears] = @p4, [ImageURL] = @p5, [SpecializationId] = @p6, [UpdatedAt] = @p7, [UserId] = @p8
OUTPUT 1
WHERE [DoctorId] = @p9;
2025-11-25 16:46:15.804 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:15.805 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:46:15.805 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.806 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:15.806 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:15.807 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-25 16:46:15.808 +02:00 [INF] Doctor with ID 1 updated successfully
2025-11-25 16:46:15.809 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:46:15.809 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:46:15.809 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:46:15.810 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:46:15.810 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:46:15.810 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-25 16:46:15.811 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.UpdateDoctor (Hospital) in 59.9745ms
2025-11-25 16:46:15.811 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.UpdateDoctor (Hospital)'
2025-11-25 16:46:15.812 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:15.813 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:15.814 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:15.814 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:15.815 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7217/api/Doctor/update - 200 null application/json; charset=utf-8 72.3576ms
2025-11-25 16:46:19.711 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - null null
2025-11-25 16:46:19.714 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/branch/2'
2025-11-25 16:46:19.715 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)' with route pattern 'api/Doctor/branch/{branchId}' is valid for the request path '/api/Doctor/branch/2'
2025-11-25 16:46:19.716 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:46:19.716 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:19.717 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:19.717 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:46:19.718 +02:00 [INF] Route matched with {action = "GetByBranch", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByBranch(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:19.718 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:19.719 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:19.719 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:19.720 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:19.720 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:19.721 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:19.722 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:19.722 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:46:19.723 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-11-25 16:46:19.723 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:46:19.724 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:46:19.724 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-11-25 16:46:19.725 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-11-25 16:46:19.725 +02:00 [INF] get doctor by Branch called at "2025-11-25T16:46:19.7258229+02:00"
2025-11-25 16:46:19.726 +02:00 [INF] Fetching all doctors for branch ID 2
2025-11-25 16:46:19.726 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:19.727 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:19.728 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:19.728 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.729 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.730 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:19.730 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:19.731 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:46:19.731 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:46:19.733 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-25 16:46:19.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.734 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:19.735 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:46:19.736 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.737 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:19.737 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.738 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.738 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:19.739 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:19.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:19.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:46:19.761 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:46:19.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.765 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.766 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.768 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.769 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.770 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:19.771 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:19.771 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-11-25 16:46:19.772 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.772 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:19.773 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:46:19.774 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:46:19.774 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:46:19.774 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:46:19.774 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:46:19.776 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:46:19.777 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetByBranch (Hospital) in 55.5573ms
2025-11-25 16:46:19.777 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-11-25 16:46:19.777 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:19.778 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:19.778 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:19.779 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:19.779 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/2 - 200 null application/json; charset=utf-8 68.8154ms
2025-11-25 16:46:26.038 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/all - null null
2025-11-25 16:46:26.039 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-25 16:46:26.039 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-25 16:46:26.040 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-25 16:46:26.040 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 16:46:26.041 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:26.041 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:26.042 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 16:46:26.042 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:26.043 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:26.044 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:26.044 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:26.045 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:26.045 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:26.046 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:26.046 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:26.047 +02:00 [INF] get all doctor in system called at "2025-11-25T16:46:26.0472737+02:00"
2025-11-25 16:46:26.047 +02:00 [INF] Fetching all doctors in the system
2025-11-25 16:46:26.048 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:26.049 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:26.049 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:26.049 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:26.050 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:26.050 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:26.050 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:26.051 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:26.051 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:46:26.059 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-11-25 16:46:26.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.062 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.063 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.063 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.065 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.067 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.068 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:26.069 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:26.070 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-11-25 16:46:26.071 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:26.071 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:26.072 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:46:26.073 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:46:26.074 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:46:26.075 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:46:26.075 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:46:26.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:46:26.076 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 30.4563ms
2025-11-25 16:46:26.077 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-25 16:46:26.077 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:26.078 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:26.078 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:26.078 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:26.079 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 41.4385ms
2025-11-25 16:46:38.621 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - null null
2025-11-25 16:46:38.622 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:46:38.623 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)' with route pattern 'api/Doctor/BySpecialization/{specializationId}' is valid for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:46:38.623 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:38.624 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:38.624 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:38.625 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:38.625 +02:00 [INF] Route matched with {action = "GetDoctorsBySpecialization", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctorsBySpecialization(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:38.626 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:38.627 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:38.628 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:38.630 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:38.630 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:38.631 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:38.632 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:38.632 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:46:38.633 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' using the name 'specializationId' in request data ...
2025-11-25 16:46:38.633 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:38.634 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:38.635 +02:00 [DBG] Attempting to validate the bound parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:46:38.635 +02:00 [DBG] Done attempting to validate the bound parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:38.636 +02:00 [INF] get doctor by Specialization  called at "2025-11-25T16:46:38.6362234+02:00"
2025-11-25 16:46:38.636 +02:00 [INF] Fetching doctors for specialization ID 1
2025-11-25 16:46:38.637 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:38.638 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:38.638 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:38.638 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.639 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.639 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:38.639 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:38.640 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:38.640 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:46:38.642 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:46:38.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.644 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:38.645 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:46:38.647 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.647 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:38.648 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.649 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.649 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:38.649 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:38.650 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:38.651 +02:00 [DBG] Executing DbCommand [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:46:38.652 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:46:38.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.654 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.659 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:38.661 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:38.662 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-11-25 16:46:38.662 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.663 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:38.664 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:46:38.665 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:46:38.665 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:46:38.666 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:46:38.666 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:46:38.667 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:46:38.668 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital) in 37.4239ms
2025-11-25 16:46:38.669 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:38.670 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:38.670 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:38.671 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:38.671 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:38.672 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - 200 null application/json; charset=utf-8 51.5691ms
2025-11-25 16:46:44.255 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/2 - null null
2025-11-25 16:46:44.257 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/BySpecialization/2'
2025-11-25 16:46:44.257 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)' with route pattern 'api/Doctor/BySpecialization/{specializationId}' is valid for the request path '/api/Doctor/BySpecialization/2'
2025-11-25 16:46:44.258 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:44.258 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:44.259 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:44.259 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:44.259 +02:00 [INF] Route matched with {action = "GetDoctorsBySpecialization", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctorsBySpecialization(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:44.260 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:44.261 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:44.261 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:44.262 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:44.262 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:44.263 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:44.263 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:44.264 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:46:44.265 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' using the name 'specializationId' in request data ...
2025-11-25 16:46:44.265 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:44.266 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:44.266 +02:00 [DBG] Attempting to validate the bound parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:46:44.267 +02:00 [DBG] Done attempting to validate the bound parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:44.268 +02:00 [INF] get doctor by Specialization  called at "2025-11-25T16:46:44.2680030+02:00"
2025-11-25 16:46:44.268 +02:00 [INF] Fetching doctors for specialization ID 2
2025-11-25 16:46:44.268 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:44.269 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:44.270 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:44.270 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.270 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.271 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:44.272 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:46:44.274 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-25 16:46:44.274 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:46:44.276 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:46:44.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:44.278 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:44.279 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:46:44.279 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.280 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:44.281 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.281 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.281 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:44.282 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:44.282 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:44.283 +02:00 [DBG] Executing DbCommand [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:46:44.284 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:46:44.285 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:44.285 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-25 16:46:44.286 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.286 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:44.287 +02:00 [WRN] No doctors found for specialization ID 2
2025-11-25 16:46:44.287 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital) in 24.3662ms
2025-11-25 16:46:44.288 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:44.289 +02:00 [ERR]  Exception caught: No doctors found for specialization ID 2.
System.Collections.Generic.KeyNotFoundException: No doctors found for specialization ID 2.
   at Hospital.Infrastructure.Services.DoctorService.GetDoctorsBySpecializationIdAsync(Int32 specializationId) in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\DoctorService.cs:line 282
   at Hospital.Controllers.DoctorController.GetDoctorsBySpecialization(Int32 specializationId) in D:\Walaa\GP\Hospital\Hospital\Controllers\DoctorController.cs:line 190
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-25 16:46:44.291 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:44.291 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:44.292 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:44.292 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:44.293 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/2 - 404 null application/json 37.5155ms
2025-11-25 16:46:49.369 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - null null
2025-11-25 16:46:49.370 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:46:49.370 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)' with route pattern 'api/Doctor/BySpecialization/{specializationId}' is valid for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:46:49.372 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:49.373 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:46:49.374 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:46:49.374 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:49.375 +02:00 [INF] Route matched with {action = "GetDoctorsBySpecialization", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctorsBySpecialization(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:46:49.376 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:46:49.376 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:46:49.377 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:46:49.378 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:46:49.378 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:46:49.379 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:49.379 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:46:49.380 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:46:49.380 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' using the name 'specializationId' in request data ...
2025-11-25 16:46:49.381 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:49.381 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:49.382 +02:00 [DBG] Attempting to validate the bound parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:46:49.383 +02:00 [DBG] Done attempting to validate the bound parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:46:49.383 +02:00 [INF] get doctor by Specialization  called at "2025-11-25T16:46:49.3834850+02:00"
2025-11-25 16:46:49.383 +02:00 [INF] Fetching doctors for specialization ID 1
2025-11-25 16:46:49.384 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:46:49.385 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:46:49.385 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-25 16:46:49.386 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.386 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.387 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:49.387 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:49.388 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:49.388 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:46:49.390 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:46:49.392 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.392 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:49.393 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-11-25 16:46:49.393 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.394 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:49.395 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.396 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.396 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:46:49.396 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:49.397 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:46:49.397 +02:00 [DBG] Executing DbCommand [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:46:49.422 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId]
2025-11-25 16:46:49.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.425 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.426 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.426 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.426 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.430 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.430 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.432 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:46:49.432 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:46:49.433 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-11-25 16:46:49.433 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.434 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:46:49.434 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:46:49.436 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:46:49.436 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:46:49.436 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:46:49.437 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:46:49.438 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:46:49.438 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital) in 59.4189ms
2025-11-25 16:46:49.439 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:46:49.439 +02:00 [DBG] Connection id "0HNHC5T0J0T1M" completed keep alive response.
2025-11-25 16:46:49.439 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:46:49.440 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:46:49.440 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-25 16:46:49.442 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - 200 null application/json; charset=utf-8 73.5037ms
2025-11-25 16:48:05.778 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-25 16:48:05.876 +02:00 [DBG] Hosting starting
2025-11-25 16:48:05.904 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 16:48:05.916 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-25 16:48:05.924 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-25 16:48:05.932 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-25 16:48:05.937 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 16:48:05.939 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-25 16:48:05.941 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-25 16:48:05.946 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-25 16:48:05.948 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-25 16:48:05.949 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-25 16:48:05.950 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-25 16:48:05.955 +02:00 [DBG] Middleware loaded
2025-11-25 16:48:05.956 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-25 16:48:05.958 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-25 16:48:06.023 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-25 16:48:06.102 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-25 16:48:06.103 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-25 16:48:06.103 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-25 16:48:06.104 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-25 16:48:06.104 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-25 16:48:06.105 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-25 16:48:06.135 +02:00 [DBG] Connection id "0HNHC66IB4APS" accepted.
2025-11-25 16:48:06.135 +02:00 [DBG] Connection id "0HNHC66IB4APR" accepted.
2025-11-25 16:48:06.136 +02:00 [DBG] Connection id "0HNHC66IB4APS" started.
2025-11-25 16:48:06.136 +02:00 [DBG] Connection id "0HNHC66IB4APR" started.
2025-11-25 16:48:06.149 +02:00 [DBG] Connection id "0HNHC66IB4APS" received FIN.
2025-11-25 16:48:06.149 +02:00 [DBG] Connection id "0HNHC66IB4APR" received FIN.
2025-11-25 16:48:06.161 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:48:06.160 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:48:06.194 +02:00 [DBG] Connection id "0HNHC66IB4APS" stopped.
2025-11-25 16:48:06.194 +02:00 [DBG] Connection id "0HNHC66IB4APR" stopped.
2025-11-25 16:48:06.197 +02:00 [DBG] Connection id "0HNHC66IB4APR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:48:06.197 +02:00 [DBG] Connection id "0HNHC66IB4APS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:48:06.210 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 16:48:06.211 +02:00 [INF] Hosting environment: Development
2025-11-25 16:48:06.212 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-25 16:48:06.213 +02:00 [DBG] Hosting started
2025-11-25 16:48:06.408 +02:00 [DBG] Connection id "0HNHC66IB4APT" accepted.
2025-11-25 16:48:06.409 +02:00 [DBG] Connection id "0HNHC66IB4APT" started.
2025-11-25 16:48:06.438 +02:00 [DBG] Connection 0HNHC66IB4APT established using the following protocol: "Tls12"
2025-11-25 16:48:06.483 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-25 16:48:06.563 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-25 16:48:06.589 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-25 16:48:06.590 +02:00 [DBG] Request did not match any endpoints
2025-11-25 16:48:06.635 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-25 16:48:06.636 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-25 16:48:06.650 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-25 16:48:06.651 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-25 16:48:06.654 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 177.5016ms
2025-11-25 16:48:06.660 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-25 16:48:06.660 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-25 16:48:06.673 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-25 16:48:06.675 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.7988ms
2025-11-25 16:48:06.690 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.1361ms
2025-11-25 16:48:06.727 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-25 16:48:06.730 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-25 16:48:06.731 +02:00 [DBG] Request did not match any endpoints
2025-11-25 16:48:06.756 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.8226ms
2025-11-25 16:48:10.596 +02:00 [DBG] Connection id "0HNHC66IB4APU" accepted.
2025-11-25 16:48:10.596 +02:00 [DBG] Connection id "0HNHC66IB4APU" received FIN.
2025-11-25 16:48:10.597 +02:00 [DBG] Connection id "0HNHC66IB4APU" started.
2025-11-25 16:48:10.598 +02:00 [DBG] Connection id "0HNHC66IB4APV" accepted.
2025-11-25 16:48:10.600 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-25 16:48:10.600 +02:00 [DBG] Connection id "0HNHC66IB4APV" started.
2025-11-25 16:48:10.602 +02:00 [DBG] Connection id "0HNHC66IB4APU" stopped.
2025-11-25 16:48:10.603 +02:00 [DBG] Connection id "0HNHC66IB4APU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-25 16:48:10.607 +02:00 [DBG] Connection 0HNHC66IB4APV established using the following protocol: "Tls12"
2025-11-25 16:48:10.610 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - null null
2025-11-25 16:48:10.613 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:48:10.616 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)' with route pattern 'api/Doctor/BySpecialization/{specializationId}' is valid for the request path '/api/Doctor/BySpecialization/1'
2025-11-25 16:48:10.617 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:48:10.619 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-25 16:48:10.645 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-25 16:48:10.647 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:48:10.670 +02:00 [INF] Route matched with {action = "GetDoctorsBySpecialization", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctorsBySpecialization(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-25 16:48:10.673 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-25 16:48:10.674 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-25 16:48:10.676 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-25 16:48:10.677 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-25 16:48:10.678 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-25 16:48:10.680 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:48:10.918 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-25 16:48:10.944 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-25 16:48:10.953 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:48:10.955 +02:00 [DBG] Attempting to bind parameter 'specializationId' of type 'System.Int32' using the name 'specializationId' in request data ...
2025-11-25 16:48:10.958 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:48:10.958 +02:00 [DBG] Done attempting to bind parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:48:10.959 +02:00 [DBG] Attempting to validate the bound parameter 'specializationId' of type 'System.Int32' ...
2025-11-25 16:48:10.961 +02:00 [DBG] Done attempting to validate the bound parameter 'specializationId' of type 'System.Int32'.
2025-11-25 16:48:10.963 +02:00 [INF] get doctor by Specialization  called at "2025-11-25T16:48:10.9635079+02:00"
2025-11-25 16:48:10.965 +02:00 [INF] Fetching doctors for specialization ID 1
2025-11-25 16:48:11.394 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-25 16:48:11.398 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-25 16:48:11.399 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-25 16:48:11.400 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-25 16:48:11.401 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-25 16:48:11.498 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:48:11.499 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-25 16:48:11.643 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-25 16:48:11.710 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .FirstOrDefault(e => EF.Property<int>(e, "SpecializationId") == __p_0)'
2025-11-25 16:48:11.844 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Specialization>(
    asyncEnumerable: new SingleQueryingEnumerable<Specialization>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            SELECT TOP(1) s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt
            FROM Specializations AS s
            WHERE s.SpecializationId == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-25 16:48:11.872 +02:00 [DBG] Creating DbConnection.
2025-11-25 16:48:11.888 +02:00 [DBG] Created DbConnection. (14ms).
2025-11-25 16:48:11.892 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.056 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.060 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:48:12.067 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-25 16:48:12.074 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-11-25 16:48:12.082 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:48:12.123 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-25 16:48:12.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.181 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:48:12.189 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 59ms reading results.
2025-11-25 16:48:12.195 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.201 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (6ms).
2025-11-25 16:48:12.214 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Branches)
    .ThenInclude(b => b.Specializations)
    .Include(d => d.Schedules)
    .Where(d => d.Branches
        .Any(b => b.Specializations
            .Any(s => s.SpecializationId == __specializationId_0)))'
2025-11-25 16:48:12.234 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-25 16:48:12.236 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-25 16:48:12.239 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-25 16:48:12.242 +02:00 [DBG] Including navigation: 'Branch.Specializations'.
2025-11-25 16:48:12.321 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-25 16:48:12.331 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> 0
            3 -> 10
            4 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 33], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 34] }
            5 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 35], [Property: Branch.Address (string) MaxLength(250), 36], [Property: Branch.BranchName (string) Required MaxLength(150), 37], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 38], [Property: Branch.Description (string), 39], [Property: Branch.Email (string) MaxLength(200), 40], [Property: Branch.ImageURL (string) MaxLength(300), 41], [Property: Branch.Phone (string) MaxLength(25), 42], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 43] }
            6 -> 33
            7 -> 34
            8 -> 35
            9 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 44], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 45] }
            10 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 46], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Specialization.Description (string), 48], [Property: Specialization.Name (string) Required MaxLength(120), 49], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50] }
            11 -> 44
            12 -> 45
            13 -> 46
            14 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 51], [Property: Schedule.BranchId (int) Required FK Index, 52], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 53], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 54], [Property: Schedule.DoctorId (int) Required FK Index, 55], [Property: Schedule.EndTime (DateTime) Required, 56], [Property: Schedule.Shift (AppointmentShift) Required, 57], [Property: Schedule.StartTime (DateTime) Required, 58], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59] }
            15 -> 51
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, t0.BranchId0, t0.SpecializationId, t0.SpecializationId0, t0.CreatedAt0, t0.Description0, t0.Name, t0.UpdatedAt0, s1.ScheduleId, s1.BranchId, s1.CreatedAt, s1.DayOfWeek, s1.DoctorId, s1.EndTime, s1.Shift, s1.StartTime, s1.UpdatedAt
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        LEFT JOIN 
        (
            SELECT d1.BranchesBranchId, d1.DoctorsDoctorId, b1.BranchId, b1.Address, b1.BranchName, b1.CreatedAt, b1.Description, b1.Email, b1.ImageURL, b1.Phone, b1.UpdatedAt, t.BranchId AS BranchId0, t.SpecializationId, t.SpecializationId0, t.CreatedAt AS CreatedAt0, t.Description AS Description0, t.Name, t.UpdatedAt AS UpdatedAt0
            FROM DoctorBranches AS d1
            INNER JOIN Branches AS b1 ON d1.BranchesBranchId == b1.BranchId
            LEFT JOIN 
            (
                SELECT b2.BranchId, b2.SpecializationId, s0.SpecializationId AS SpecializationId0, s0.CreatedAt, s0.Description, s0.Name, s0.UpdatedAt
                FROM BranchSpecializations AS b2
                INNER JOIN Specializations AS s0 ON b2.SpecializationId == s0.SpecializationId
            ) AS t ON b1.BranchId == t.BranchId
        ) AS t0 ON d.DoctorId == t0.DoctorsDoctorId
        LEFT JOIN Schedules AS s1 ON d.DoctorId == s1.DoctorId
        WHERE EXISTS (
            SELECT 1
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            WHERE ((d.DoctorId != NULL) && (d.DoctorId == d0.DoctorsDoctorId)) && EXISTS (
                SELECT 1
                FROM BranchSpecializations AS b0
                INNER JOIN Specializations AS s ON b0.SpecializationId == s.SpecializationId
                WHERE ((b.BranchId != NULL) && (b.BranchId == b0.BranchId)) && (s.SpecializationId == @__specializationId_0)))
        ORDER BY d.DoctorId ASC, u.Id ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC, t0.BranchId0 ASC, t0.SpecializationId ASC, t0.SpecializationId0 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-25 16:48:12.346 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.347 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.348 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-25 16:48:12.349 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-25 16:48:12.349 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-25 16:48:12.350 +02:00 [DBG] Executing DbCommand [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0], [s1].[ScheduleId], [s1].[BranchId], [s1].[CreatedAt], [s1].[DayOfWeek], [s1].[DoctorId], [s1].[EndTime], [s1].[Shift], [s1].[StartTime], [s1].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s1] ON [d].[DoctorId] = [s1].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0]
2025-11-25 16:48:12.389 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__specializationId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0], [t0].[CreatedAt0], [t0].[Description0], [t0].[Name], [t0].[UpdatedAt0], [s1].[ScheduleId], [s1].[BranchId], [s1].[CreatedAt], [s1].[DayOfWeek], [s1].[DoctorId], [s1].[EndTime], [s1].[Shift], [s1].[StartTime], [s1].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b1].[BranchId], [b1].[Address], [b1].[BranchName], [b1].[CreatedAt], [b1].[Description], [b1].[Email], [b1].[ImageURL], [b1].[Phone], [b1].[UpdatedAt], [t].[BranchId] AS [BranchId0], [t].[SpecializationId], [t].[SpecializationId0], [t].[CreatedAt] AS [CreatedAt0], [t].[Description] AS [Description0], [t].[Name], [t].[UpdatedAt] AS [UpdatedAt0]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b1] ON [d1].[BranchesBranchId] = [b1].[BranchId]
    LEFT JOIN (
        SELECT [b2].[BranchId], [b2].[SpecializationId], [s0].[SpecializationId] AS [SpecializationId0], [s0].[CreatedAt], [s0].[Description], [s0].[Name], [s0].[UpdatedAt]
        FROM [BranchSpecializations] AS [b2]
        INNER JOIN [Specializations] AS [s0] ON [b2].[SpecializationId] = [s0].[SpecializationId]
    ) AS [t] ON [b1].[BranchId] = [t].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s1] ON [d].[DoctorId] = [s1].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND EXISTS (
        SELECT 1
        FROM [BranchSpecializations] AS [b0]
        INNER JOIN [Specializations] AS [s] ON [b0].[SpecializationId] = [s].[SpecializationId]
        WHERE [b].[BranchId] = [b0].[BranchId] AND [s].[SpecializationId] = @__specializationId_0))
ORDER BY [d].[DoctorId], [u].[Id], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[BranchId0], [t0].[SpecializationId], [t0].[SpecializationId0]
2025-11-25 16:48:12.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.450 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.533 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.540 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-25 16:48:12.553 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-25 16:48:12.555 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 160ms reading results.
2025-11-25 16:48:12.558 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.559 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-25 16:48:12.578 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-25 16:48:12.582 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-25 16:48:12.583 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-25 16:48:12.584 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-25 16:48:12.585 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-25 16:48:12.586 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 16:48:12.620 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital) in 1936.8335ms
2025-11-25 16:48:12.622 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctorsBySpecialization (Hospital)'
2025-11-25 16:48:12.625 +02:00 [DBG] Connection id "0HNHC66IB4APV" completed keep alive response.
2025-11-25 16:48:12.628 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-25 16:48:12.632 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-25 16:48:12.636 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-11-25 16:48:12.637 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/BySpecialization/1 - 200 null application/json; charset=utf-8 2027.4322ms
