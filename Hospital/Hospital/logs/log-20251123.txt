2025-11-23 18:31:48.236 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 18:31:48.351 +02:00 [DBG] Hosting starting
2025-11-23 18:31:48.369 +02:00 [INF] User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 18:31:48.379 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-171dc15b-9d2d-45d5-9fcb-18badfdae667.xml'.
2025-11-23 18:31:48.392 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-328565d1-c612-402c-9473-6f50dc1bcb2f.xml'.
2025-11-23 18:31:48.393 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3853d745-e818-4ecf-b264-c04445fb406d.xml'.
2025-11-23 18:31:48.395 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3a7083ac-1a8b-48f5-9e81-d3a63254e8eb.xml'.
2025-11-23 18:31:48.396 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-77f0ec14-5c63-448f-b8e4-a2bd27bd6ead.xml'.
2025-11-23 18:31:48.397 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc.xml'.
2025-11-23 18:31:48.398 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-a21099c1-ceb7-4545-b251-882dccb0fb5b.xml'.
2025-11-23 18:31:48.400 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-e626ca21-42a8-439d-97f1-774b663fbc67.xml'.
2025-11-23 18:31:48.405 +02:00 [DBG] Found key {171dc15b-9d2d-45d5-9fcb-18badfdae667}.
2025-11-23 18:31:48.410 +02:00 [DBG] Found key {328565d1-c612-402c-9473-6f50dc1bcb2f}.
2025-11-23 18:31:48.411 +02:00 [DBG] Found key {3853d745-e818-4ecf-b264-c04445fb406d}.
2025-11-23 18:31:48.412 +02:00 [DBG] Found key {3a7083ac-1a8b-48f5-9e81-d3a63254e8eb}.
2025-11-23 18:31:48.413 +02:00 [DBG] Found key {77f0ec14-5c63-448f-b8e4-a2bd27bd6ead}.
2025-11-23 18:31:48.413 +02:00 [DBG] Found key {9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc}.
2025-11-23 18:31:48.414 +02:00 [DBG] Found key {a21099c1-ceb7-4545-b251-882dccb0fb5b}.
2025-11-23 18:31:48.415 +02:00 [DBG] Found key {e626ca21-42a8-439d-97f1-774b663fbc67}.
2025-11-23 18:31:48.419 +02:00 [DBG] Considering key {e626ca21-42a8-439d-97f1-774b663fbc67} with expiration date 2025-12-29 20:28:34Z as default key.
2025-11-23 18:31:48.422 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 18:31:48.424 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 18:31:48.426 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 18:31:48.430 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 18:31:48.431 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 18:31:48.433 +02:00 [DBG] Using key {e626ca21-42a8-439d-97f1-774b663fbc67} as the default key.
2025-11-23 18:31:48.434 +02:00 [DBG] Key ring with default key {e626ca21-42a8-439d-97f1-774b663fbc67} was loaded during application startup.
2025-11-23 18:31:48.534 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 18:31:48.536 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 18:31:48.539 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 18:31:48.541 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 18:31:48.541 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 18:31:48.542 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 18:31:48.627 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 18:31:48.630 +02:00 [INF] Hosting environment: Development
2025-11-23 18:31:48.631 +02:00 [INF] Content root path: D:\Work\HospitalWebSite\Hospital\Hospital
2025-11-23 18:31:48.633 +02:00 [DBG] Hosting started
2025-11-23 18:31:48.702 +02:00 [DBG] Connection id "0HNHALN6CU2ED" accepted.
2025-11-23 18:31:48.706 +02:00 [DBG] Connection id "0HNHALN6CU2ED" started.
2025-11-23 18:31:48.726 +02:00 [DBG] Connection id "0HNHALN6CU2EE" accepted.
2025-11-23 18:31:48.730 +02:00 [DBG] Connection id "0HNHALN6CU2EE" started.
2025-11-23 18:31:48.744 +02:00 [DBG] Connection id "0HNHALN6CU2EE" received FIN.
2025-11-23 18:31:48.744 +02:00 [DBG] Connection id "0HNHALN6CU2ED" received FIN.
2025-11-23 18:31:48.755 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 18:31:48.755 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 18:31:48.790 +02:00 [DBG] Connection id "0HNHALN6CU2ED" stopped.
2025-11-23 18:31:48.790 +02:00 [DBG] Connection id "0HNHALN6CU2EE" stopped.
2025-11-23 18:31:48.796 +02:00 [DBG] Connection id "0HNHALN6CU2ED" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 18:31:48.797 +02:00 [DBG] Connection id "0HNHALN6CU2EE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 18:31:48.890 +02:00 [DBG] Connection id "0HNHALN6CU2EF" accepted.
2025-11-23 18:31:48.903 +02:00 [DBG] Connection id "0HNHALN6CU2EF" started.
2025-11-23 18:31:48.944 +02:00 [DBG] Connection 0HNHALN6CU2EF established using the following protocol: "Tls12"
2025-11-23 18:31:49.066 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 18:31:49.156 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 18:31:49.191 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 18:31:49.193 +02:00 [DBG] Request did not match any endpoints
2025-11-23 18:31:49.241 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 18:31:49.243 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 18:31:49.259 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 18:31:49.261 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 18:31:49.263 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 199.8213ms
2025-11-23 18:31:49.464 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 18:31:49.490 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 25.5726ms
2025-11-23 18:31:49.914 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 18:31:49.965 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.6867ms
2025-11-23 18:31:51.147 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 18:31:51.151 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 18:31:51.152 +02:00 [DBG] Request did not match any endpoints
2025-11-23 18:31:51.196 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.1662ms
2025-11-23 18:32:02.012 +02:00 [DBG] Connection id "0HNHALN6CU2EG" accepted.
2025-11-23 18:32:02.013 +02:00 [DBG] Connection id "0HNHALN6CU2EG" received FIN.
2025-11-23 18:32:02.014 +02:00 [DBG] Connection id "0HNHALN6CU2EG" started.
2025-11-23 18:32:02.014 +02:00 [DBG] Connection id "0HNHALN6CU2EH" accepted.
2025-11-23 18:32:02.019 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 18:32:02.020 +02:00 [DBG] Connection id "0HNHALN6CU2EH" started.
2025-11-23 18:32:02.023 +02:00 [DBG] Connection id "0HNHALN6CU2EG" stopped.
2025-11-23 18:32:02.025 +02:00 [DBG] Connection id "0HNHALN6CU2EG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 18:32:02.033 +02:00 [DBG] Connection 0HNHALN6CU2EH established using the following protocol: "Tls12"
2025-11-23 18:32:02.038 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - application/json 205
2025-11-23 18:32:02.043 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/CreateEvent'
2025-11-23 18:32:02.048 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)' with route pattern 'api/Event/CreateEvent' is valid for the request path '/api/Event/CreateEvent'
2025-11-23 18:32:02.052 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-23 18:32:02.055 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 18:32:02.075 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 18:32:02.078 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-23 18:32:02.105 +02:00 [INF] Route matched with {action = "CreateEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEvent(Hospital.Application.DTO.Event.AddEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-23 18:32:02.109 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 18:32:02.110 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 18:32:02.112 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 18:32:02.119 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 18:32:02.121 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 18:32:02.124 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-23 18:32:02.267 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 18:32:02.581 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-23 18:32:02.590 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-23 18:32:02.597 +02:00 [DBG] Attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' using the name '' in request data ...
2025-11-23 18:32:02.603 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 18:32:02.614 +02:00 [DBG] Connection id "0HNHALN6CU2EH", Request id "0HNHALN6CU2EH:00000001": started reading request body.
2025-11-23 18:32:02.616 +02:00 [DBG] Connection id "0HNHALN6CU2EH", Request id "0HNHALN6CU2EH:00000001": done reading request body.
2025-11-23 18:32:02.637 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.AddEventDto'
2025-11-23 18:32:02.641 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-23 18:32:02.642 +02:00 [DBG] Done attempting to bind parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-23 18:32:02.644 +02:00 [DBG] Attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto' ...
2025-11-23 18:32:02.653 +02:00 [DBG] Done attempting to validate the bound parameter 'eventDto' of type 'Hospital.Application.DTO.Event.AddEventDto'.
2025-11-23 18:32:02.661 +02:00 [INF] create event  called at "2025-11-23T18:32:02.6611689+02:00"
2025-11-23 18:32:02.666 +02:00 [INF] Adding new event: event 2 for Branch ID: 1
2025-11-23 18:32:02.672 +02:00 [INF] Fetching branch by ID: 1
2025-11-23 18:32:03.582 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 18:32:03.587 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 18:32:03.592 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 18:32:03.595 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 18:32:03.598 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 18:32:03.771 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 18:32:03.772 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 18:32:04.001 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 18:32:04.098 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-23 18:32:04.328 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 18:32:04.383 +02:00 [DBG] Creating DbConnection.
2025-11-23 18:32:04.410 +02:00 [DBG] Created DbConnection. (26ms).
2025-11-23 18:32:04.418 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:04.665 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:04.672 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 18:32:04.682 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-11-23 18:32:04.696 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2025-11-23 18:32:04.706 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 18:32:04.816 +02:00 [INF] Executed DbCommand (106ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 18:32:04.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 18:32:04.933 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-23 18:32:04.942 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 117ms reading results.
2025-11-23 18:32:04.946 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:04.951 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-11-23 18:32:04.975 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Event.EventId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 18:32:05.006 +02:00 [DBG] The navigation 'Event.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 18:32:05.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'Event' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 18:32:05.026 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 18:32:05.049 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 18:32:05.060 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 18:32:05.063 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 18:32:05.066 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 18:32:05.136 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:05.141 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:05.143 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 18:32:05.144 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 18:32:05.146 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 18:32:05.149 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-23 18:32:05.167 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 300), @p5='?' (Size = 150), @p6='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Events] ([BranchId], [CreatedAt], [Description], [EventDate], [ImageURL], [Title], [UpdatedAt])
OUTPUT INSERTED.[EventId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-23 18:32:05.178 +02:00 [DBG] The foreign key property 'Event.EventId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 18:32:05.188 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-23 18:32:05.193 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-11-23 18:32:05.194 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:05.195 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-23 18:32:05.204 +02:00 [DBG] An entity of type 'Event' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 18:32:05.209 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 18:32:05.212 +02:00 [INF] Event event 2 added successfully with ID 2
2025-11-23 18:32:05.220 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 18:32:05.227 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 18:32:05.228 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 18:32:05.228 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 18:32:05.229 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 18:32:05.230 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-23 18:32:05.243 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] for address (id=[2],action=[GetEvent],controller=[Event])
2025-11-23 18:32:05.246 +02:00 [DBG] Successfully processed template api/Event/GetEvent for Hospital.Controllers.EventController.GetEvent (Hospital) resulting in /api/Event/GetEvent and ?id=2
2025-11-23 18:32:05.249 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.EventController.GetEvent (Hospital)"] with result /api/Event/GetEvent?id=2
2025-11-23 18:32:05.264 +02:00 [INF] Executed action Hospital.Controllers.EventController.CreateEvent (Hospital) in 3136.6327ms
2025-11-23 18:32:05.267 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.CreateEvent (Hospital)'
2025-11-23 18:32:05.271 +02:00 [DBG] Connection id "0HNHALN6CU2EH" completed keep alive response.
2025-11-23 18:32:05.274 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 18:32:05.277 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:05.280 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 18:32:05.283 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/CreateEvent - 201 null application/json; charset=utf-8 3244.3124ms
2025-11-23 18:32:10.207 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Event/GetEvent - application/json 38
2025-11-23 18:32:10.214 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetEvent'
2025-11-23 18:32:10.217 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)' with route pattern 'api/Event/GetEvent' is valid for the request path '/api/Event/GetEvent'
2025-11-23 18:32:10.223 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-23 18:32:10.227 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 18:32:10.230 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 18:32:10.231 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-23 18:32:10.236 +02:00 [INF] Route matched with {action = "GetEvent", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEvent(Hospital.Application.DTO.Event.GetEventDto) on controller Hospital.Controllers.EventController (Hospital).
2025-11-23 18:32:10.238 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 18:32:10.239 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 18:32:10.240 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 18:32:10.242 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 18:32:10.243 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 18:32:10.244 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-23 18:32:10.245 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-23 18:32:10.247 +02:00 [DBG] Attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' ...
2025-11-23 18:32:10.248 +02:00 [DBG] Attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' using the name '' in request data ...
2025-11-23 18:32:10.249 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 18:32:10.252 +02:00 [DBG] Connection id "0HNHALN6CU2EH", Request id "0HNHALN6CU2EH:00000002": started reading request body.
2025-11-23 18:32:10.253 +02:00 [DBG] Connection id "0HNHALN6CU2EH", Request id "0HNHALN6CU2EH:00000002": done reading request body.
2025-11-23 18:32:10.256 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Event.GetEventDto'
2025-11-23 18:32:10.257 +02:00 [DBG] Done attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-23 18:32:10.258 +02:00 [DBG] Done attempting to bind parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-23 18:32:10.259 +02:00 [DBG] Attempting to validate the bound parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto' ...
2025-11-23 18:32:10.260 +02:00 [DBG] Done attempting to validate the bound parameter 'event' of type 'Hospital.Application.DTO.Event.GetEventDto'.
2025-11-23 18:32:10.261 +02:00 [INF] Get event  called at "2025-11-23T18:32:10.2618323+02:00"
2025-11-23 18:32:10.263 +02:00 [INF] Fetching event ID 1 for Branch ID 1
2025-11-23 18:32:10.264 +02:00 [INF] Fetching branch by ID: 1
2025-11-23 18:32:10.322 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 18:32:10.331 +02:00 [DBG] Creating DbConnection.
2025-11-23 18:32:10.334 +02:00 [DBG] Created DbConnection. (3ms).
2025-11-23 18:32:10.337 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.338 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.339 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 18:32:10.340 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 18:32:10.341 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 18:32:10.342 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 18:32:10.345 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 18:32:10.346 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 18:32:10.347 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-23 18:32:10.348 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-11-23 18:32:10.349 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.350 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-23 18:32:10.355 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()
    .FirstOrDefault(e => e.EventId == __id_0)'
2025-11-23 18:32:10.361 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Event>(
    asyncEnumerable: new SingleQueryingEnumerable<Event>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
            SELECT TOP(1) e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
            FROM Events AS e
            WHERE e.EventId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 18:32:10.364 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.365 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.366 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 18:32:10.367 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 18:32:10.369 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 18:32:10.369 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[EventId] = @__id_0
2025-11-23 18:32:10.373 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
WHERE [e].[EventId] = @__id_0
2025-11-23 18:32:10.374 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-23 18:32:10.375 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-23 18:32:10.376 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.377 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-23 18:32:10.378 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 18:32:10.379 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 18:32:10.380 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 18:32:10.381 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 18:32:10.381 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 18:32:10.382 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Event.EventDto'.
2025-11-23 18:32:10.383 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetEvent (Hospital) in 139.6245ms
2025-11-23 18:32:10.384 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetEvent (Hospital)'
2025-11-23 18:32:10.385 +02:00 [DBG] Connection id "0HNHALN6CU2EH" completed keep alive response.
2025-11-23 18:32:10.386 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 18:32:10.386 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:10.387 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 18:32:10.388 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Event/GetEvent - 200 null application/json; charset=utf-8 180.3567ms
2025-11-23 18:32:19.928 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Branch/GetBy/4 - null null
2025-11-23 18:32:19.933 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetBy/4'
2025-11-23 18:32:19.937 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)' with route pattern 'api/Branch/GetBy/{id}' is valid for the request path '/api/Branch/GetBy/4'
2025-11-23 18:32:19.940 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-23 18:32:19.944 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 18:32:19.950 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 18:32:19.953 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-23 18:32:19.962 +02:00 [INF] Route matched with {action = "GetById", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 18:32:19.965 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 18:32:19.968 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 18:32:19.969 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 18:32:19.970 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 18:32:19.971 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 18:32:19.972 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 18:32:19.973 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 18:32:19.974 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-23 18:32:19.975 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-23 18:32:19.977 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-23 18:32:19.977 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-23 18:32:19.978 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-23 18:32:19.980 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-23 18:32:19.982 +02:00 [INF] Get Branch By Id called at "2025-11-23T18:32:19.9825892+02:00"
2025-11-23 18:32:19.983 +02:00 [INF] Fetching branch by ID: 4
2025-11-23 18:32:19.991 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 18:32:19.994 +02:00 [DBG] Creating DbConnection.
2025-11-23 18:32:19.994 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 18:32:19.995 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:19.996 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:19.997 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 18:32:19.997 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 18:32:19.998 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 18:32:19.999 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 18:32:20.003 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 18:32:20.005 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-23 18:32:20.006 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-11-23 18:32:20.007 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:20.009 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-23 18:32:20.010 +02:00 [WRN] Branch with ID 4 not found
2025-11-23 18:32:20.013 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetById (Hospital) in 40.9452ms
2025-11-23 18:32:20.014 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-23 18:32:20.015 +02:00 [ERR]  Exception caught: Branch with ID 4 not found
System.Collections.Generic.KeyNotFoundException: Branch with ID 4 not found
   at Hospital.Infrastructure.Services.BranchService.GetByIdAsync(Int32 id) in D:\Work\HospitalWebSite\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 85
   at Hospital.Controllers.BranchController.GetById(Int32 id) in D:\Work\HospitalWebSite\Hospital\Hospital\Controllers\BranchController.cs:line 36
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Work\HospitalWebSite\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-23 18:32:20.077 +02:00 [DBG] Connection id "0HNHALN6CU2EH" completed keep alive response.
2025-11-23 18:32:20.080 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 18:32:20.081 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-23 18:32:20.083 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 18:32:20.085 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Branch/GetBy/4 - 404 null application/json 157.5471ms
2025-11-23 19:27:24.861 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 19:27:24.980 +02:00 [DBG] Hosting starting
2025-11-23 19:27:25.005 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 19:27:25.016 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 19:27:25.064 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 19:27:25.079 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 19:27:25.095 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 19:27:25.116 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 19:27:25.123 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 19:27:25.124 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 19:27:25.125 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 19:27:25.131 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 19:27:25.134 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:27:25.137 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 19:27:25.139 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:27:25.143 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 19:27:25.145 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 19:27:25.147 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 19:27:25.148 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 19:27:25.155 +02:00 [DBG] Middleware loaded
2025-11-23 19:27:25.157 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 19:27:25.158 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 19:27:25.264 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 19:27:25.395 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 19:27:25.396 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 19:27:25.397 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 19:27:25.397 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 19:27:25.398 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 19:27:25.399 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 19:27:25.492 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 19:27:25.493 +02:00 [INF] Hosting environment: Development
2025-11-23 19:27:25.494 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 19:27:25.495 +02:00 [DBG] Hosting started
2025-11-23 19:27:25.537 +02:00 [DBG] Connection id "0HNHAMM8RF8OU" received FIN.
2025-11-23 19:27:25.537 +02:00 [DBG] Connection id "0HNHAMM8RF8OV" received FIN.
2025-11-23 19:27:25.551 +02:00 [DBG] Connection id "0HNHAMM8RF8OV" accepted.
2025-11-23 19:27:25.551 +02:00 [DBG] Connection id "0HNHAMM8RF8OU" accepted.
2025-11-23 19:27:25.554 +02:00 [DBG] Connection id "0HNHAMM8RF8OV" started.
2025-11-23 19:27:25.554 +02:00 [DBG] Connection id "0HNHAMM8RF8OU" started.
2025-11-23 19:27:25.578 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:27:25.578 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:27:25.627 +02:00 [DBG] Connection id "0HNHAMM8RF8OV" stopped.
2025-11-23 19:27:25.627 +02:00 [DBG] Connection id "0HNHAMM8RF8OU" stopped.
2025-11-23 19:27:25.631 +02:00 [DBG] Connection id "0HNHAMM8RF8OV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:27:25.631 +02:00 [DBG] Connection id "0HNHAMM8RF8OU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:27:25.941 +02:00 [DBG] Connection id "0HNHAMM8RF8P0" accepted.
2025-11-23 19:27:25.943 +02:00 [DBG] Connection id "0HNHAMM8RF8P0" started.
2025-11-23 19:27:25.993 +02:00 [DBG] Connection 0HNHAMM8RF8P0 established using the following protocol: "Tls13"
2025-11-23 19:27:26.077 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 19:27:26.230 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 19:27:26.255 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The constraint reference 'dateonly' could not be resolved to a type. Register the constraint type with 'Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap'.
   at Microsoft.AspNetCore.Routing.DefaultParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CachingParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CreateCandidate(Endpoint endpoint, Int32 score)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CreateCandidates(IReadOnlyList`1 endpoints)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.Build()
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher.CreateMatcher(IReadOnlyList`1 endpoints)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher..ctor(EndpointDataSource dataSource, Lifetime lifetime, Func`1 matcherBuilderFactory)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherFactory.CreateMatcher(EndpointDataSource dataSource)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.InitializeCoreAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatcher|10_0(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task`1 matcherTask)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-23 19:27:26.289 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 19:27:26.295 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 19:27:26.310 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 19:27:26.311 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 19:27:26.315 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 500 null text/html; charset=utf-8 250.5796ms
2025-11-23 19:27:26.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 19:27:26.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 19:27:26.347 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 19:27:26.350 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 17.3764ms
2025-11-23 19:27:26.398 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.1582ms
2025-11-23 19:27:26.459 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/favicon.ico - null null
2025-11-23 19:27:26.464 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The constraint reference 'dateonly' could not be resolved to a type. Register the constraint type with 'Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap'.
   at Microsoft.AspNetCore.Routing.DefaultParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CachingParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CreateCandidate(Endpoint endpoint, Int32 score)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CreateCandidates(IReadOnlyList`1 endpoints)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.AddNode(DfaNode node, DfaState[] states, Int32 exitDestination)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.Build()
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher.CreateMatcher(IReadOnlyList`1 endpoints)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher..ctor(EndpointDataSource dataSource, Lifetime lifetime, Func`1 matcherBuilderFactory)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherFactory.CreateMatcher(EndpointDataSource dataSource)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.InitializeCoreAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatcher|10_0(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task`1 matcherTask)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-23 19:27:26.473 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/favicon.ico - 500 null text/plain; charset=utf-8 15.0151ms
2025-11-23 19:27:32.393 +02:00 [DBG] Connection id "0HNHAMM8RF8P0" received FIN.
2025-11-23 19:27:32.397 +02:00 [DBG] The connection queue processing loop for 0HNHAMM8RF8P0 completed.
2025-11-23 19:27:32.398 +02:00 [DBG] Connection id "0HNHAMM8RF8P0" is closed. The last processed stream ID was 7.
2025-11-23 19:27:32.399 +02:00 [DBG] Connection id "0HNHAMM8RF8P0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:27:32.402 +02:00 [DBG] Connection id "0HNHAMM8RF8P0" stopped.
2025-11-23 19:27:48.521 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 19:27:48.699 +02:00 [DBG] Hosting starting
2025-11-23 19:27:48.734 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 19:27:48.748 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 19:27:48.757 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 19:27:48.759 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 19:27:48.761 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 19:27:48.766 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 19:27:48.771 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 19:27:48.776 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 19:27:48.777 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 19:27:48.785 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 19:27:48.790 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:27:48.794 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 19:27:48.796 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:27:48.804 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 19:27:48.807 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 19:27:48.809 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 19:27:48.811 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 19:27:48.822 +02:00 [DBG] Middleware loaded
2025-11-23 19:27:48.824 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 19:27:48.826 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 19:27:48.924 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 19:27:49.009 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 19:27:49.009 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 19:27:49.010 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 19:27:49.011 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 19:27:49.011 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 19:27:49.012 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 19:27:49.107 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 19:27:49.108 +02:00 [INF] Hosting environment: Development
2025-11-23 19:27:49.109 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 19:27:49.110 +02:00 [DBG] Hosting started
2025-11-23 19:27:49.322 +02:00 [DBG] Connection id "0HNHAMMFUA3VU" accepted.
2025-11-23 19:27:49.323 +02:00 [DBG] Connection id "0HNHAMMFUA3VV" accepted.
2025-11-23 19:27:49.324 +02:00 [DBG] Connection id "0HNHAMMFUA3VU" started.
2025-11-23 19:27:49.324 +02:00 [DBG] Connection id "0HNHAMMFUA3VV" started.
2025-11-23 19:27:49.339 +02:00 [DBG] Connection id "0HNHAMMFUA3VV" received FIN.
2025-11-23 19:27:49.339 +02:00 [DBG] Connection id "0HNHAMMFUA3VU" received FIN.
2025-11-23 19:27:49.352 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:27:49.352 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:27:49.382 +02:00 [DBG] Connection id "0HNHAMMFUA3VV" stopped.
2025-11-23 19:27:49.382 +02:00 [DBG] Connection id "0HNHAMMFUA3VU" stopped.
2025-11-23 19:27:49.385 +02:00 [DBG] Connection id "0HNHAMMFUA3VV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:27:49.385 +02:00 [DBG] Connection id "0HNHAMMFUA3VU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:27:49.483 +02:00 [DBG] Connection id "0HNHAMMFUA400" accepted.
2025-11-23 19:27:49.484 +02:00 [DBG] Connection id "0HNHAMMFUA400" started.
2025-11-23 19:27:49.519 +02:00 [DBG] Connection 0HNHAMMFUA400 established using the following protocol: "Tls13"
2025-11-23 19:27:49.583 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 19:27:49.683 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 19:27:49.716 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 19:27:49.718 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:27:49.765 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 19:27:49.768 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 19:27:49.782 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 19:27:49.784 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 19:27:49.789 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 214.3233ms
2025-11-23 19:27:49.801 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 19:27:49.809 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 19:27:49.811 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.3873ms
2025-11-23 19:27:49.828 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 19:27:49.874 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.7597ms
2025-11-23 19:27:49.947 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 19:27:49.950 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 19:27:49.951 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:27:49.993 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.6924ms
2025-11-23 19:27:52.397 +02:00 [DBG] Connection id "0HNHAMMFUA400" received FIN.
2025-11-23 19:27:52.401 +02:00 [DBG] The connection queue processing loop for 0HNHAMMFUA400 completed.
2025-11-23 19:27:52.403 +02:00 [DBG] Connection id "0HNHAMMFUA400" is closed. The last processed stream ID was 7.
2025-11-23 19:27:52.404 +02:00 [DBG] Connection id "0HNHAMMFUA400" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:27:52.407 +02:00 [DBG] Connection id "0HNHAMMFUA400" stopped.
2025-11-23 19:29:44.422 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 19:29:44.571 +02:00 [DBG] Hosting starting
2025-11-23 19:29:44.597 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 19:29:44.608 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 19:29:44.616 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 19:29:44.619 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 19:29:44.620 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 19:29:44.626 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 19:29:44.631 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 19:29:44.632 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 19:29:44.633 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 19:29:44.639 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 19:29:44.643 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:29:44.647 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 19:29:44.649 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:29:44.655 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 19:29:44.657 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 19:29:44.660 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 19:29:44.661 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 19:29:44.668 +02:00 [DBG] Middleware loaded
2025-11-23 19:29:44.670 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 19:29:44.672 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 19:29:44.753 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 19:29:44.848 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 19:29:44.849 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 19:29:44.850 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 19:29:44.851 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 19:29:44.852 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 19:29:44.853 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 19:29:44.931 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 19:29:44.932 +02:00 [INF] Hosting environment: Development
2025-11-23 19:29:44.932 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 19:29:44.933 +02:00 [DBG] Hosting started
2025-11-23 19:29:45.329 +02:00 [DBG] Connection id "0HNHAMNIGKAL1" accepted.
2025-11-23 19:29:45.329 +02:00 [DBG] Connection id "0HNHAMNIGKAL0" accepted.
2025-11-23 19:29:45.331 +02:00 [DBG] Connection id "0HNHAMNIGKAL1" started.
2025-11-23 19:29:45.331 +02:00 [DBG] Connection id "0HNHAMNIGKAL0" started.
2025-11-23 19:29:45.351 +02:00 [DBG] Connection id "0HNHAMNIGKAL0" received FIN.
2025-11-23 19:29:45.351 +02:00 [DBG] Connection id "0HNHAMNIGKAL1" received FIN.
2025-11-23 19:29:45.369 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:29:45.369 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:29:45.406 +02:00 [DBG] Connection id "0HNHAMNIGKAL0" stopped.
2025-11-23 19:29:45.406 +02:00 [DBG] Connection id "0HNHAMNIGKAL1" stopped.
2025-11-23 19:29:45.409 +02:00 [DBG] Connection id "0HNHAMNIGKAL0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:29:45.409 +02:00 [DBG] Connection id "0HNHAMNIGKAL1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:29:45.660 +02:00 [DBG] Connection id "0HNHAMNIGKAL2" accepted.
2025-11-23 19:29:45.661 +02:00 [DBG] Connection id "0HNHAMNIGKAL2" started.
2025-11-23 19:29:45.701 +02:00 [DBG] Connection 0HNHAMNIGKAL2 established using the following protocol: "Tls13"
2025-11-23 19:29:45.798 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 19:29:45.908 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 19:29:45.942 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 19:29:45.944 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:29:45.990 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 19:29:45.991 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 19:29:46.006 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 19:29:46.008 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 19:29:46.012 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 221.9138ms
2025-11-23 19:29:46.048 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 19:29:46.048 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 19:29:46.057 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 19:29:46.059 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.8465ms
2025-11-23 19:29:46.102 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.5017ms
2025-11-23 19:29:46.169 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 19:29:46.172 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 19:29:46.174 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:29:46.216 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.508ms
2025-11-23 19:29:47.414 +02:00 [DBG] Connection id "0HNHAMNIGKAL2" received FIN.
2025-11-23 19:29:47.419 +02:00 [DBG] The connection queue processing loop for 0HNHAMNIGKAL2 completed.
2025-11-23 19:29:47.422 +02:00 [DBG] Connection id "0HNHAMNIGKAL2" is closed. The last processed stream ID was 7.
2025-11-23 19:29:47.424 +02:00 [DBG] Connection id "0HNHAMNIGKAL2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:29:47.427 +02:00 [DBG] Connection id "0HNHAMNIGKAL2" stopped.
2025-11-23 19:30:33.924 +02:00 [DBG] Connection id "0HNHAMNIGKAL3" received FIN.
2025-11-23 19:30:33.928 +02:00 [DBG] Connection id "0HNHAMNIGKAL3" accepted.
2025-11-23 19:30:33.929 +02:00 [DBG] Connection id "0HNHAMNIGKAL3" started.
2025-11-23 19:30:33.933 +02:00 [DBG] Connection id "0HNHAMNIGKAL4" accepted.
2025-11-23 19:30:33.935 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:30:33.935 +02:00 [DBG] Connection id "0HNHAMNIGKAL4" started.
2025-11-23 19:30:33.937 +02:00 [DBG] Connection id "0HNHAMNIGKAL3" stopped.
2025-11-23 19:30:33.938 +02:00 [DBG] Connection id "0HNHAMNIGKAL3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:30:33.943 +02:00 [DBG] Connection 0HNHAMNIGKAL4 established using the following protocol: "Tls13"
2025-11-23 19:30:33.947 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 148
2025-11-23 19:30:33.953 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:30:33.957 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:30:33.958 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:30:33.961 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:30:34.384 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:30:34.388 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:30:34.415 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:30:34.418 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:30:34.419 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:30:34.421 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:30:34.422 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:30:34.423 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:30:34.427 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:30:34.942 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 19:30:35.146 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:30:35.161 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:30:35.165 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:30:35.168 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:30:35.177 +02:00 [DBG] Connection id "0HNHAMNIGKAL4", Request id "0HNHAMNIGKAL4:00000001": started reading request body.
2025-11-23 19:30:35.179 +02:00 [DBG] Connection id "0HNHAMNIGKAL4", Request id "0HNHAMNIGKAL4:00000001": done reading request body.
2025-11-23 19:30:35.191 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:30:35.193 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:30:35.194 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:30:35.196 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:30:35.207 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:30:35.210 +02:00 [INF] Create Branch called at "2025-11-23T19:30:35.2107410+02:00"
2025-11-23 19:30:35.213 +02:00 [INF] Creating new branch with name: adam4444
2025-11-23 19:30:35.756 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:30:35.758 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:30:35.760 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:30:35.761 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:30:35.762 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:30:35.862 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:30:35.864 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:30:36.052 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:30:36.344 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-23 19:30:36.498 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:30:36.527 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:30:36.549 +02:00 [DBG] Created DbConnection. (20ms).
2025-11-23 19:30:36.553 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-23 19:30:53.828 +02:00 [ERR] An error occurred using the connection to database 'HospitalDB' on server '.'.
2025-11-23 19:30:53.840 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-23 19:30:53.950 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 19522.3741ms
2025-11-23 19:30:53.952 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:30:54.011 +02:00 [ERR]  Exception caught: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Hospital.Infrastructure.Repository.BranchRepository.GetAllAsync() in D:\Hospital\Hospital\Hospital.Infrastructure\Repository\BranchRepository.cs:line 34
   at Hospital.Infrastructure.Services.BranchService.CreateAsync(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 38
   at Hospital.Controllers.BranchController.Create(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital\Controllers\BranchController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2025-11-23 19:30:54.063 +02:00 [DBG] Connection id "0HNHAMNIGKAL4" completed keep alive response.
2025-11-23 19:30:54.066 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:30:54.073 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-23 19:30:54.080 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-11-23 19:30:54.082 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 500 null application/json 20135.0602ms
2025-11-23 19:31:14.161 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 19:31:14.307 +02:00 [DBG] Hosting starting
2025-11-23 19:31:14.336 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 19:31:14.349 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 19:31:14.357 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 19:31:14.359 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 19:31:14.360 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 19:31:14.365 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 19:31:14.370 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 19:31:14.372 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 19:31:14.373 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 19:31:14.381 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 19:31:14.387 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:31:14.391 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 19:31:14.394 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:31:14.400 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 19:31:14.402 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 19:31:14.404 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 19:31:14.406 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 19:31:14.412 +02:00 [DBG] Middleware loaded
2025-11-23 19:31:14.414 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 19:31:14.416 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 19:31:14.502 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 19:31:14.589 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 19:31:14.591 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 19:31:14.591 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 19:31:14.592 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 19:31:14.593 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 19:31:14.593 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 19:31:14.663 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 19:31:14.664 +02:00 [INF] Hosting environment: Development
2025-11-23 19:31:14.665 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 19:31:14.665 +02:00 [DBG] Hosting started
2025-11-23 19:31:14.994 +02:00 [DBG] Connection id "0HNHAMOD7O3IU" accepted.
2025-11-23 19:31:14.994 +02:00 [DBG] Connection id "0HNHAMOD7O3IT" accepted.
2025-11-23 19:31:14.995 +02:00 [DBG] Connection id "0HNHAMOD7O3IU" started.
2025-11-23 19:31:14.996 +02:00 [DBG] Connection id "0HNHAMOD7O3IT" started.
2025-11-23 19:31:15.008 +02:00 [DBG] Connection id "0HNHAMOD7O3IU" received FIN.
2025-11-23 19:31:15.008 +02:00 [DBG] Connection id "0HNHAMOD7O3IT" received FIN.
2025-11-23 19:31:15.082 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:31:15.082 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:31:15.146 +02:00 [DBG] Connection id "0HNHAMOD7O3IT" stopped.
2025-11-23 19:31:15.146 +02:00 [DBG] Connection id "0HNHAMOD7O3IU" stopped.
2025-11-23 19:31:15.150 +02:00 [DBG] Connection id "0HNHAMOD7O3IU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:31:15.150 +02:00 [DBG] Connection id "0HNHAMOD7O3IT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:31:15.218 +02:00 [DBG] Connection id "0HNHAMOD7O3IV" accepted.
2025-11-23 19:31:15.220 +02:00 [DBG] Connection id "0HNHAMOD7O3IV" started.
2025-11-23 19:31:15.264 +02:00 [DBG] Connection 0HNHAMOD7O3IV established using the following protocol: "Tls13"
2025-11-23 19:31:15.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 19:31:15.431 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 19:31:15.467 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 19:31:15.469 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:31:15.518 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 19:31:15.520 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 19:31:15.537 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 19:31:15.539 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 19:31:15.543 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 220.1837ms
2025-11-23 19:31:15.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 19:31:15.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 19:31:15.603 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 19:31:15.605 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 19.1483ms
2025-11-23 19:31:15.643 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.9756ms
2025-11-23 19:31:15.705 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 19:31:15.709 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 19:31:15.710 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:31:15.763 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 57.9359ms
2025-11-23 19:31:19.827 +02:00 [DBG] Connection id "0HNHAMOD7O3J0" accepted.
2025-11-23 19:31:19.827 +02:00 [DBG] Connection id "0HNHAMOD7O3J0" received FIN.
2025-11-23 19:31:19.829 +02:00 [DBG] Connection id "0HNHAMOD7O3J0" started.
2025-11-23 19:31:19.829 +02:00 [DBG] Connection id "0HNHAMOD7O3J1" accepted.
2025-11-23 19:31:19.831 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:31:19.831 +02:00 [DBG] Connection id "0HNHAMOD7O3J1" started.
2025-11-23 19:31:19.834 +02:00 [DBG] Connection id "0HNHAMOD7O3J0" stopped.
2025-11-23 19:31:19.835 +02:00 [DBG] Connection id "0HNHAMOD7O3J0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:31:19.838 +02:00 [DBG] Connection 0HNHAMOD7O3J1 established using the following protocol: "Tls13"
2025-11-23 19:31:19.842 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 148
2025-11-23 19:31:19.847 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:31:19.852 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:31:19.854 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:31:19.858 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:31:19.902 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:31:19.906 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:31:19.935 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:31:19.939 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:31:19.940 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:31:19.942 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:31:19.944 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:31:19.945 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:31:19.948 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:31:20.136 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 19:31:20.424 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:31:20.442 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:31:20.445 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:31:20.449 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:31:20.459 +02:00 [DBG] Connection id "0HNHAMOD7O3J1", Request id "0HNHAMOD7O3J1:00000001": started reading request body.
2025-11-23 19:31:20.461 +02:00 [DBG] Connection id "0HNHAMOD7O3J1", Request id "0HNHAMOD7O3J1:00000001": done reading request body.
2025-11-23 19:31:20.477 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:31:20.478 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:31:20.480 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:31:20.482 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:31:20.493 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:31:20.498 +02:00 [INF] Create Branch called at "2025-11-23T19:31:20.4979903+02:00"
2025-11-23 19:31:20.501 +02:00 [INF] Creating new branch with name: adam4444
2025-11-23 19:31:21.285 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:31:21.287 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:31:21.288 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:31:21.290 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:31:21.291 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:31:21.418 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:31:21.420 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:31:21.599 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:31:21.651 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-23 19:31:21.799 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:31:21.831 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:31:21.853 +02:00 [DBG] Created DbConnection. (22ms).
2025-11-23 19:31:21.859 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:31:22.180 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:31:22.186 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:31:22.194 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-11-23 19:31:22.197 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-11-23 19:31:22.204 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:31:22.267 +02:00 [ERR] Failed executing DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:31:22.272 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:31:22.281 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (6ms).
2025-11-23 19:31:22.293 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
2025-11-23 19:31:22.385 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 2436.1852ms
2025-11-23 19:31:22.387 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:31:22.459 +02:00 [DBG] Connection id "0HNHAMOD7O3IV" received FIN.
2025-11-23 19:31:22.459 +02:00 [ERR]  Exception caught: Invalid column name 'ImageURL'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Hospital.Infrastructure.Repository.BranchRepository.GetAllAsync() in D:\Hospital\Hospital\Hospital.Infrastructure\Repository\BranchRepository.cs:line 34
   at Hospital.Infrastructure.Services.BranchService.CreateAsync(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 38
   at Hospital.Controllers.BranchController.Create(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital\Controllers\BranchController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
2025-11-23 19:31:22.463 +02:00 [DBG] The connection queue processing loop for 0HNHAMOD7O3IV completed.
2025-11-23 19:31:22.462 +02:00 [DBG] Connection id "0HNHAMOD7O3IV" is closed. The last processed stream ID was 7.
2025-11-23 19:31:22.478 +02:00 [DBG] Connection id "0HNHAMOD7O3IV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:31:22.480 +02:00 [DBG] Connection id "0HNHAMOD7O3IV" stopped.
2025-11-23 19:31:22.487 +02:00 [DBG] Connection id "0HNHAMOD7O3J1" completed keep alive response.
2025-11-23 19:31:22.490 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:31:22.494 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:31:22.496 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:31:22.498 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 500 null application/json 2656.173ms
2025-11-23 19:32:09.205 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 202
2025-11-23 19:32:09.209 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:32:09.209 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:32:09.211 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:32:09.211 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:32:09.213 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:32:09.214 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:32:09.215 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:32:09.216 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:32:09.217 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:32:09.219 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:32:09.220 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:32:09.221 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:32:09.222 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:32:09.225 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:32:09.226 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:32:09.227 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:32:09.228 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:32:09.229 +02:00 [DBG] Connection id "0HNHAMOD7O3J1", Request id "0HNHAMOD7O3J1:00000002": started reading request body.
2025-11-23 19:32:09.230 +02:00 [DBG] Connection id "0HNHAMOD7O3J1", Request id "0HNHAMOD7O3J1:00000002": done reading request body.
2025-11-23 19:32:09.231 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:32:09.232 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:32:09.233 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:32:09.234 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:32:09.236 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:32:09.237 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-23 19:32:09.240 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-23 19:32:09.242 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:32:09.245 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:32:09.246 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-23 19:32:09.248 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-23 19:32:09.249 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-23 19:32:09.269 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 46.5747ms
2025-11-23 19:32:09.270 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:32:09.271 +02:00 [DBG] Connection id "0HNHAMOD7O3J1" completed keep alive response.
2025-11-23 19:32:09.272 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 400 null application/problem+json; charset=utf-8 69.0128ms
2025-11-23 19:32:22.387 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 206
2025-11-23 19:32:22.389 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:32:22.391 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:32:22.392 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:32:22.393 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:32:22.395 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:32:22.396 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:32:22.397 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:32:22.398 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:32:22.399 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:32:22.401 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:32:22.402 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:32:22.403 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:32:22.405 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:32:22.408 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:32:22.410 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:32:22.411 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:32:22.412 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:32:22.413 +02:00 [DBG] Connection id "0HNHAMOD7O3J1", Request id "0HNHAMOD7O3J1:00000003": started reading request body.
2025-11-23 19:32:22.415 +02:00 [DBG] Connection id "0HNHAMOD7O3J1", Request id "0HNHAMOD7O3J1:00000003": done reading request body.
2025-11-23 19:32:22.416 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:32:22.417 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:32:22.418 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:32:22.419 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:32:22.420 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:32:22.421 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-23 19:32:22.422 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-23 19:32:22.424 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:32:22.426 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:32:22.427 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-23 19:32:22.429 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-23 19:32:22.430 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-23 19:32:22.432 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 27.4814ms
2025-11-23 19:32:22.433 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:32:22.435 +02:00 [DBG] Connection id "0HNHAMOD7O3J1" completed keep alive response.
2025-11-23 19:32:22.436 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 400 null application/problem+json; charset=utf-8 49.0232ms
2025-11-23 19:33:39.284 +02:00 [DBG] Connection id "0HNHAMOD7O3J2" received FIN.
2025-11-23 19:33:39.293 +02:00 [DBG] Connection id "0HNHAMOD7O3J2" accepted.
2025-11-23 19:33:39.295 +02:00 [DBG] Connection id "0HNHAMOD7O3J2" started.
2025-11-23 19:33:39.321 +02:00 [DBG] Connection id "0HNHAMOD7O3J3" accepted.
2025-11-23 19:33:39.324 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:33:39.324 +02:00 [DBG] Connection id "0HNHAMOD7O3J3" started.
2025-11-23 19:33:39.327 +02:00 [DBG] Connection id "0HNHAMOD7O3J2" stopped.
2025-11-23 19:33:39.330 +02:00 [DBG] Connection id "0HNHAMOD7O3J2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:33:39.332 +02:00 [DBG] Connection 0HNHAMOD7O3J3 established using the following protocol: "Tls13"
2025-11-23 19:33:39.334 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 217
2025-11-23 19:33:39.336 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:33:39.338 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:33:39.339 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:33:39.341 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:33:39.342 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:33:39.343 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:33:39.345 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:33:39.347 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:33:39.349 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:33:39.352 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:33:39.354 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:33:39.357 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:33:39.359 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:33:39.361 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:33:39.363 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:33:39.365 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:33:39.367 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:33:39.369 +02:00 [DBG] Connection id "0HNHAMOD7O3J3", Request id "0HNHAMOD7O3J3:00000001": started reading request body.
2025-11-23 19:33:39.371 +02:00 [DBG] Connection id "0HNHAMOD7O3J3", Request id "0HNHAMOD7O3J3:00000001": done reading request body.
2025-11-23 19:33:39.374 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:33:39.376 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:33:39.378 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:33:39.380 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:33:39.382 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:33:39.384 +02:00 [INF] Create Branch called at "2025-11-23T19:33:39.3841849+02:00"
2025-11-23 19:33:39.386 +02:00 [INF] Creating new branch with name: adam4444
2025-11-23 19:33:39.440 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:33:39.445 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:33:39.446 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-23 19:33:39.447 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:33:39.449 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:33:39.451 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:33:39.452 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:33:39.453 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:33:39.454 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:33:39.467 +02:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:33:39.469 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:33:39.470 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:33:39.473 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
2025-11-23 19:33:39.543 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 184.4106ms
2025-11-23 19:33:39.545 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:33:39.584 +02:00 [ERR]  Exception caught: Invalid column name 'ImageURL'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Hospital.Infrastructure.Repository.BranchRepository.GetAllAsync() in D:\Hospital\Hospital\Hospital.Infrastructure\Repository\BranchRepository.cs:line 34
   at Hospital.Infrastructure.Services.BranchService.CreateAsync(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 38
   at Hospital.Controllers.BranchController.Create(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital\Controllers\BranchController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
2025-11-23 19:33:39.594 +02:00 [DBG] Connection id "0HNHAMOD7O3J3" completed keep alive response.
2025-11-23 19:33:39.595 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:33:39.596 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:33:39.597 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:33:39.598 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 500 null application/json 264.5157ms
2025-11-23 19:33:51.320 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 206
2025-11-23 19:33:51.322 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:33:51.323 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:33:51.324 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:33:51.325 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:33:51.326 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:33:51.327 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:33:51.327 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:33:51.329 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:33:51.330 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:33:51.331 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:33:51.333 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:33:51.334 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:33:51.335 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:33:51.337 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:33:51.338 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:33:51.339 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:33:51.340 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:33:51.341 +02:00 [DBG] Connection id "0HNHAMOD7O3J3", Request id "0HNHAMOD7O3J3:00000002": started reading request body.
2025-11-23 19:33:51.342 +02:00 [DBG] Connection id "0HNHAMOD7O3J3", Request id "0HNHAMOD7O3J3:00000002": done reading request body.
2025-11-23 19:33:51.343 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:33:51.344 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:33:51.345 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:33:51.346 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:33:51.348 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:33:51.349 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-23 19:33:51.350 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-23 19:33:51.350 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:33:51.352 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:33:51.353 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-23 19:33:51.355 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-23 19:33:51.356 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-23 19:33:51.357 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 21.4388ms
2025-11-23 19:33:51.358 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:33:51.359 +02:00 [DBG] Connection id "0HNHAMOD7O3J3" completed keep alive response.
2025-11-23 19:33:51.360 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 400 null application/problem+json; charset=utf-8 39.5074ms
2025-11-23 19:34:09.664 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 214
2025-11-23 19:34:09.666 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:34:09.667 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:34:09.668 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:34:09.669 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:34:09.670 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:34:09.670 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:34:09.671 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:34:09.673 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:34:09.674 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:34:09.675 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:34:09.676 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:34:09.677 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:34:09.678 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:34:09.679 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:34:09.681 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:34:09.682 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:34:09.683 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:34:09.684 +02:00 [DBG] Connection id "0HNHAMOD7O3J3", Request id "0HNHAMOD7O3J3:00000003": started reading request body.
2025-11-23 19:34:09.685 +02:00 [DBG] Connection id "0HNHAMOD7O3J3", Request id "0HNHAMOD7O3J3:00000003": done reading request body.
2025-11-23 19:34:09.685 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:34:09.686 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:34:09.687 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:34:09.688 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:34:09.689 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:34:09.690 +02:00 [INF] Create Branch called at "2025-11-23T19:34:09.6903341+02:00"
2025-11-23 19:34:09.690 +02:00 [INF] Creating new branch with name: adam4444
2025-11-23 19:34:09.699 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:34:09.701 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:34:09.702 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:34:09.702 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:34:09.703 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:34:09.704 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:34:09.705 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:34:09.705 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:34:09.706 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:34:09.711 +02:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:34:09.712 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:34:09.713 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:34:09.716 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
2025-11-23 19:34:09.773 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 94.4438ms
2025-11-23 19:34:09.774 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:34:09.817 +02:00 [ERR]  Exception caught: Invalid column name 'ImageURL'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ImageURL'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Hospital.Infrastructure.Repository.BranchRepository.GetAllAsync() in D:\Hospital\Hospital\Hospital.Infrastructure\Repository\BranchRepository.cs:line 34
   at Hospital.Infrastructure.Services.BranchService.CreateAsync(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\BranchService.cs:line 38
   at Hospital.Controllers.BranchController.Create(CreateBranchDto dto) in D:\Hospital\Hospital\Hospital\Controllers\BranchController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:04586841-dabf-4861-83d2-409b7c633db8
Error Number:207,State:1,Class:16
2025-11-23 19:34:09.829 +02:00 [DBG] Connection id "0HNHAMOD7O3J3" completed keep alive response.
2025-11-23 19:34:09.830 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:34:09.831 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:34:09.832 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:34:09.833 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 500 null application/json 169.4944ms
2025-11-23 19:35:12.296 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 19:35:12.786 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:35:12.787 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:35:12.787 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:35:12.787 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:35:12.787 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:35:12.895 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:12.895 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:13.047 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:35:13.053 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:35:13.075 +02:00 [DBG] Created DbConnection. (20ms).
2025-11-23 19:35:13.079 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:35:13.081 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:13.084 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:35:15.195 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 19:35:15.666 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:35:15.668 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:35:15.668 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:35:15.668 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:35:15.668 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:35:15.797 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:15.797 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:15.939 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:35:15.943 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:35:15.966 +02:00 [DBG] Created DbConnection. (22ms).
2025-11-23 19:35:15.973 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.142 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.147 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:16.152 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2025-11-23 19:35:16.153 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2025-11-23 19:35:16.157 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-23 19:35:16.174 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-23 19:35:16.175 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.179 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-23 19:35:16.194 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:35:16.195 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:35:16.195 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.198 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.198 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:16.198 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:16.198 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:16.198 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-23 19:35:16.224 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-23 19:35:16.224 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:16.224 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:16.224 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:16.224 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-23 19:35:16.258 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-23 19:35:16.258 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.258 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:16.259 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.260 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:35:16.261 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:35:16.261 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:16.261 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:35:28.591 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 19:35:28.980 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:35:28.982 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:35:28.982 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:35:28.982 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:35:28.982 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:35:29.057 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:29.057 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:29.166 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:35:29.179 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:35:29.203 +02:00 [DBG] Created DbConnection. (21ms).
2025-11-23 19:35:29.205 +02:00 [DBG] Migrating using database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.208 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.319 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.319 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.320 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.386 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:35:29.386 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:35:29.386 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:35:29.386 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:35:29.386 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:35:29.399 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:29.399 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:35:29.424 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:35:29.424 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:35:29.424 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.433 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.437 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:29.441 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-23 19:35:29.442 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2025-11-23 19:35:29.446 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-23 19:35:29.566 +02:00 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-23 19:35:29.566 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:29.567 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.567 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.567 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-23 19:35:29.601 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-23 19:35:29.602 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.606 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (2ms).
2025-11-23 19:35:29.608 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.608 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:35:29.608 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.611 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.611 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:29.611 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.611 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.611 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-23 19:35:29.616 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-23 19:35:29.616 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.616 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:29.655 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:29.656 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.656 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.656 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.656 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.656 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-23 19:35:29.665 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-23 19:35:29.666 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.666 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:29.666 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.667 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.667 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:29.667 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.667 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:29.667 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-23 19:35:29.668 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-23 19:35:29.668 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.668 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:29.670 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-23 19:35:29.670 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-23 19:35:29.670 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-23 19:35:29.670 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.670 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.671 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-23 19:35:29.964 +02:00 [INF] Executed DbCommand (293ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-23 19:35:29.964 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.965 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:29.966 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.966 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.966 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:35:29.966 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:35:29.966 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:35:29.966 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-23 19:35:29.971 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-23 19:35:29.973 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.973 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:35:29.974 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:29.974 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:29.981 +02:00 [INF] Applying migration '20251111134048_init-auth'.
2025-11-23 19:35:30.043 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:30.043 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:30.044 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:35:30.049 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:35:30.049 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:30.049 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:30.050 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:30.050 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-23 19:35:30.054 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-23 19:35:30.054 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:30.054 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:30.054 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:30.054 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-23 19:35:30.057 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-23 19:35:30.057 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:30.057 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.991 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1934ms).
2025-11-23 19:35:31.991 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-23 19:35:31.994 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-23 19:35:31.994 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:31.995 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.995 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.995 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:31.997 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:31.997 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:31.997 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.997 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.997 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:31.999 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:31.999 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:31.999 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.999 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:31.999 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:34.337 +02:00 [INF] Executed DbCommand (2,338ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:34.337 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:34.337 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:34.337 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:34.337 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:34.340 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:34.340 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:34.340 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:34.340 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:34.340 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:34.342 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-23 19:35:36.865 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:36.865 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:36.865 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:36.865 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-23 19:35:36.869 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-23 19:35:36.869 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:36.869 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:36.869 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:36.869 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:36.870 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:36.870 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:36.870 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:36.871 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:36.871 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:39.522 +02:00 [INF] Executed DbCommand (2,651ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:39.522 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:39.522 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:39.522 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:39.522 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:39.523 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:39.524 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:39.524 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:39.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:39.524 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:39.525 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:39.525 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:39.525 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:39.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:39.525 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:41.931 +02:00 [INF] Executed DbCommand (2,406ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:41.931 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:41.931 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:41.931 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:41.931 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:41.934 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:41.934 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:41.934 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:41.934 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:41.934 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:41.935 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:35:44.146 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:44.146 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:44.146 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:44.146 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-23 19:35:44.148 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-23 19:35:44.148 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:44.148 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:44.148 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:44.148 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-23 19:35:44.152 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-23 19:35:44.152 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:44.152 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:44.152 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.485 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-23 19:35:46.489 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-23 19:35:46.489 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:46.489 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.489 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.489 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-23 19:35:46.491 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-23 19:35:46.491 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:46.491 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.491 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.491 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-23 19:35:46.491 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-23 19:35:46.491 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:46.491 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.491 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.491 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-23 19:35:46.492 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-23 19:35:46.492 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:46.492 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.492 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:46.492 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-23 19:35:46.492 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-23 19:35:48.738 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.738 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.738 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.738 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-23 19:35:48.742 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-23 19:35:48.742 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.742 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.742 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.742 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-23 19:35:48.745 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-23 19:35:48.745 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.745 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.745 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.745 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-23 19:35:48.746 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-23 19:35:48.746 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.746 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.746 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.746 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-23 19:35:48.746 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-23 19:35:48.746 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.746 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.746 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.746 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-23 19:35:48.747 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-23 19:35:48.747 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.747 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.748 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.748 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-23 19:35:48.749 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-23 19:35:48.749 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.749 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.749 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.749 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-23 19:35:48.750 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-23 19:35:48.750 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:48.750 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.750 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:48.750 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-23 19:35:50.627 +02:00 [INF] Executed DbCommand (1,878ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-23 19:35:50.628 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.628 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.628 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.628 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-23 19:35:50.628 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-23 19:35:50.628 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.628 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.628 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.628 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-23 19:35:50.629 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-23 19:35:50.629 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.629 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.629 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.629 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-23 19:35:50.630 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-23 19:35:50.630 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.630 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.630 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.630 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-23 19:35:50.630 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-23 19:35:50.630 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.630 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.630 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.630 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-23 19:35:50.630 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-23 19:35:50.631 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.631 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.631 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.631 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-23 19:35:50.631 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-23 19:35:50.631 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.631 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.631 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.631 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-23 19:35:50.632 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-23 19:35:50.632 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:50.632 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.632 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:50.632 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-23 19:35:52.317 +02:00 [INF] Executed DbCommand (1,685ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-23 19:35:52.317 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.317 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.317 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.317 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-23 19:35:52.318 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-23 19:35:52.318 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.318 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.318 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.318 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-23 19:35:52.318 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-23 19:35:52.318 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.318 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.318 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.318 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-23 19:35:52.319 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-23 19:35:52.319 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.319 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.319 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.319 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-23 19:35:52.319 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-23 19:35:52.319 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.319 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.319 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.320 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-23 19:35:52.320 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-23 19:35:52.320 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.320 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.320 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.320 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-23 19:35:52.321 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-23 19:35:52.321 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.321 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.321 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:52.321 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-23 19:35:52.321 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-23 19:35:52.321 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:52.321 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:54.039 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1717ms).
2025-11-23 19:35:54.039 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-23 19:35:54.049 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-23 19:35:54.051 +02:00 [DBG] Committing transaction.
2025-11-23 19:35:54.055 +02:00 [DBG] Committed transaction.
2025-11-23 19:35:54.056 +02:00 [DBG] Disposing transaction.
2025-11-23 19:35:54.056 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:54.056 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:54.056 +02:00 [INF] Applying migration '20251111134638__SeedRoles'.
2025-11-23 19:35:54.121 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:54.121 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:54.121 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:35:54.121 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:35:54.121 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:54.121 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:54.121 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:54.121 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'7767a5dc-e6e2-468e-b1a2-bcc226765991', N'Admin', N'ADMIN', N'0a76faad-95e5-4a07-b60e-3e9c14c9684f');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-23 19:35:54.157 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'7767a5dc-e6e2-468e-b1a2-bcc226765991', N'Admin', N'ADMIN', N'0a76faad-95e5-4a07-b60e-3e9c14c9684f');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-23 19:35:54.157 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:54.157 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:54.157 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:54.157 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'aca46b33-235e-4c57-867f-7ad3d6c2bb54', N'Doctor', N'DOCTOR', N'7af1e76e-0c9b-4041-9320-6e7bded94a3c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-23 19:35:54.165 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'aca46b33-235e-4c57-867f-7ad3d6c2bb54', N'Doctor', N'DOCTOR', N'7af1e76e-0c9b-4041-9320-6e7bded94a3c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-23 19:35:55.756 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:55.756 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:55.756 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:55.756 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'728948fa-edaf-401a-99f1-3a14723234d2', N'Patient', N'PATIENT', N'2bdaa27f-ea54-42c6-920d-0f0d5d6776bc');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-23 19:35:55.765 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'728948fa-edaf-401a-99f1-3a14723234d2', N'Patient', N'PATIENT', N'2bdaa27f-ea54-42c6-920d-0f0d5d6776bc');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-23 19:35:55.766 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:55.766 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:55.766 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:55.766 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-23 19:35:55.767 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-23 19:35:55.767 +02:00 [DBG] Committing transaction.
2025-11-23 19:35:55.767 +02:00 [DBG] Committed transaction.
2025-11-23 19:35:55.767 +02:00 [DBG] Disposing transaction.
2025-11-23 19:35:55.767 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:55.768 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:55.768 +02:00 [INF] Applying migration '20251111153509__SeedRolesAdmin'.
2025-11-23 19:35:55.851 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:55.852 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:55.852 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:35:55.852 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:35:55.852 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:55.852 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:55.852 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:55.852 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'6b3f5b23-f63c-47d7-9173-12860664cfb9', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEF33EVdjwYpZWjingICenrKeZupSugbiUrka/ABlB7EsHXRkn5bBaEGeuJ3Ra8SWNQ==', N'Admin', '2025-11-23T17:35:55.8355774Z', '2025-11-23T17:35:55.8355779Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'9365f225-90a1-4fa9-9c98-ee4dcfc19bba');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-23 19:35:57.270 +02:00 [INF] Executed DbCommand (1,418ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'6b3f5b23-f63c-47d7-9173-12860664cfb9', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEF33EVdjwYpZWjingICenrKeZupSugbiUrka/ABlB7EsHXRkn5bBaEGeuJ3Ra8SWNQ==', N'Admin', '2025-11-23T17:35:55.8355774Z', '2025-11-23T17:35:55.8355779Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'9365f225-90a1-4fa9-9c98-ee4dcfc19bba');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-23 19:35:57.270 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:57.270 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:57.270 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:57.270 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT '6b3f5b23-f63c-47d7-9173-12860664cfb9', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-23 19:35:57.277 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT '6b3f5b23-f63c-47d7-9173-12860664cfb9', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-23 19:35:57.277 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:57.277 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:57.277 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:57.277 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-23 19:35:57.278 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-23 19:35:57.278 +02:00 [DBG] Committing transaction.
2025-11-23 19:35:57.278 +02:00 [DBG] Committed transaction.
2025-11-23 19:35:57.278 +02:00 [DBG] Disposing transaction.
2025-11-23 19:35:57.278 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:58.690 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1411ms).
2025-11-23 19:35:58.690 +02:00 [INF] Applying migration '20251112174524_AddRefreshTokenColumns'.
2025-11-23 19:35:58.704 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:58.704 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:58.704 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:35:58.704 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:35:58.704 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:58.704 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.704 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.704 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-23 19:35:58.715 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-23 19:35:58.715 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:58.715 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.715 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.715 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-23 19:35:58.717 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-23 19:35:58.717 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:58.717 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.717 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.717 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-23 19:35:58.718 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-23 19:35:58.718 +02:00 [DBG] Committing transaction.
2025-11-23 19:35:58.719 +02:00 [DBG] Committed transaction.
2025-11-23 19:35:58.719 +02:00 [DBG] Disposing transaction.
2025-11-23 19:35:58.719 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:58.719 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:35:58.719 +02:00 [INF] Applying migration '20251113233448_update in banner and service and branch and specilization relations'.
2025-11-23 19:35:58.735 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:58.735 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:35:58.735 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:35:58.735 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:35:58.735 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:58.735 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.736 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.736 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-23 19:35:58.738 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-23 19:35:58.738 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:58.738 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.738 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:58.738 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-23 19:35:58.739 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-23 19:35:58.739 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.850 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1110ms).
2025-11-23 19:35:59.850 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1110ms).
2025-11-23 19:35:59.850 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-23 19:35:59.852 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-23 19:35:59.852 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.852 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.852 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.852 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-23 19:35:59.853 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-23 19:35:59.853 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.853 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.853 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.853 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-23 19:35:59.854 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-23 19:35:59.854 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.854 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.854 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.854 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-23 19:35:59.856 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-23 19:35:59.856 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.856 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.856 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.856 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-23 19:35:59.856 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-23 19:35:59.856 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.856 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.856 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.856 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-23 19:35:59.857 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-23 19:35:59.857 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:35:59.857 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.857 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:35:59.857 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-23 19:35:59.888 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-23 19:36:01.536 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:01.536 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.536 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.536 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-23 19:36:01.555 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-23 19:36:01.555 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:01.555 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.555 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.555 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-23 19:36:01.564 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-23 19:36:01.564 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:01.564 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.565 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.565 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-23 19:36:01.567 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-23 19:36:01.567 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:01.567 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:01.567 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.346 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-23 19:36:03.349 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-23 19:36:03.349 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:03.349 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.349 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.349 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-23 19:36:03.350 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-23 19:36:03.350 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:03.350 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.350 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.350 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-23 19:36:03.351 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-23 19:36:03.351 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:03.351 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.351 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.351 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-23 19:36:03.352 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-23 19:36:03.352 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:03.352 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.352 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.352 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-23 19:36:03.353 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-23 19:36:03.353 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:03.353 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.353 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:03.353 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-23 19:36:05.286 +02:00 [INF] Executed DbCommand (1,933ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-23 19:36:05.286 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:05.287 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:05.287 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:05.287 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:05.288 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:05.288 +02:00 [INF] Applying migration '20251115194238_add many to many relation between branch and doctor'.
2025-11-23 19:36:05.301 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:05.301 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:05.301 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:05.301 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:05.301 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:05.301 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.301 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.301 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-23 19:36:05.303 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-23 19:36:05.303 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:05.303 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.303 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-23 19:36:05.304 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-23 19:36:05.304 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:05.304 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.304 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.304 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-23 19:36:05.320 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-23 19:36:05.320 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:05.320 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.320 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:05.320 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-23 19:36:05.323 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-23 19:36:06.844 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:06.845 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.845 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.845 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-23 19:36:06.845 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-23 19:36:06.846 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:06.846 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.846 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.846 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-23 19:36:06.849 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-23 19:36:06.849 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:06.851 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:06.851 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:06.851 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:06.851 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:06.851 +02:00 [INF] Applying migration '20251115200531_remove relation between branch and user'.
2025-11-23 19:36:06.862 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:06.862 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:06.862 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:06.862 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:06.862 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:06.862 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.862 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.862 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-23 19:36:06.864 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-23 19:36:06.864 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:06.864 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.864 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.864 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-23 19:36:06.865 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-23 19:36:06.865 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:06.865 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.865 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:06.865 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-23 19:36:08.674 +02:00 [INF] Executed DbCommand (1,809ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-23 19:36:08.674 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:08.674 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:08.674 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:08.674 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-23 19:36:08.676 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-23 19:36:08.676 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:08.676 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:08.676 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:08.676 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:08.676 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:08.676 +02:00 [INF] Applying migration '20251116144214_MakeRefreshTokenNullable'.
2025-11-23 19:36:08.691 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:08.691 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:08.691 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:08.692 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:08.692 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:08.692 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:08.692 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:08.692 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-23 19:36:08.710 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-23 19:36:08.710 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:08.710 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:08.710 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:08.710 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-23 19:36:08.713 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-23 19:36:08.713 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:08.714 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:08.714 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:08.714 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:10.438 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1723ms).
2025-11-23 19:36:10.438 +02:00 [INF] Applying migration '20251116184844_editPatientModel'.
2025-11-23 19:36:10.449 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:10.449 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:10.449 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:10.449 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:10.449 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:10.449 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:10.449 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:10.449 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-23 19:36:10.466 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-23 19:36:10.466 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:10.466 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:10.466 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:10.466 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-23 19:36:10.476 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-23 19:36:10.476 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:10.476 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:10.476 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:10.476 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-23 19:36:10.479 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-23 19:36:10.479 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:10.479 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:10.479 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:10.479 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:10.480 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:10.480 +02:00 [INF] Applying migration '20251116220101_change Timeonly in schedule to DateTime'.
2025-11-23 19:36:10.494 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:12.314 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:12.314 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:12.315 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:12.315 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:12.315 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:12.315 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:12.315 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-23 19:36:12.335 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-23 19:36:12.335 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:12.335 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:12.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:12.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-23 19:36:12.346 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-23 19:36:12.346 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:12.346 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:12.346 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:12.346 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-23 19:36:12.349 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-23 19:36:12.349 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:12.349 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:12.349 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:12.349 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:12.349 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:12.349 +02:00 [INF] Applying migration '20251117115532_addPhotoToDoctor'.
2025-11-23 19:36:12.360 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:12.360 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:14.194 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:14.194 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:14.194 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:14.194 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.194 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.194 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-23 19:36:14.196 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-23 19:36:14.196 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:14.196 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.196 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.196 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-23 19:36:14.199 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-23 19:36:14.199 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:14.199 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:14.199 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:14.199 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:14.199 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:14.199 +02:00 [INF] Applying migration '20251118140238_editTimeOnlYToDateTime'.
2025-11-23 19:36:14.211 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:14.211 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:14.211 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:14.211 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:14.211 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:14.211 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.211 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.211 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-23 19:36:14.228 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-23 19:36:14.228 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:14.228 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.228 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:14.228 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-23 19:36:14.228 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-23 19:36:14.228 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:14.229 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:14.229 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:14.229 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:16.009 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1779ms).
2025-11-23 19:36:16.009 +02:00 [INF] Applying migration '20251118182335_improve schedule'.
2025-11-23 19:36:16.020 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:16.020 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:16.020 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:16.020 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:16.020 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:16.020 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.020 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.020 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-23 19:36:16.022 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-23 19:36:16.022 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:16.022 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.022 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.022 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-23 19:36:16.024 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-23 19:36:16.025 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:16.026 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:16.026 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:16.026 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:16.026 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:16.026 +02:00 [INF] Applying migration '20251119214128_resetPaswoard'.
2025-11-23 19:36:16.038 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:16.038 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:16.039 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:16.039 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:16.039 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:16.039 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.039 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.039 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:36:16.042 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-23 19:36:16.042 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:16.042 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.042 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.042 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-23 19:36:16.043 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-23 19:36:16.043 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:16.043 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:16.043 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.885 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-23 19:36:17.889 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-23 19:36:17.889 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:17.890 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:17.890 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:17.890 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:17.890 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:17.890 +02:00 [INF] Applying migration '20251120170506_create payment with paymob and update appoiment '.
2025-11-23 19:36:17.903 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:17.903 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:17.903 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:17.903 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:17.903 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:17.903 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.903 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.903 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-23 19:36:17.905 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-23 19:36:17.905 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:17.905 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.905 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.905 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-23 19:36:17.906 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-23 19:36:17.906 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:17.906 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.906 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:17.906 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-23 19:36:17.906 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-23 19:36:19.850 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:19.851 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:19.851 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:19.851 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:19.851 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:19.851 +02:00 [INF] Applying migration '20251122193859_update appoiment with payment method'.
2025-11-23 19:36:19.863 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:19.863 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:19.864 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:19.864 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:19.864 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:19.864 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:19.864 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:19.864 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-23 19:36:19.866 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-23 19:36:19.866 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:19.866 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:19.866 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:19.866 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-23 19:36:19.869 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-23 19:36:19.869 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:19.869 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:19.869 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:19.869 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:19.869 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:19.869 +02:00 [INF] Applying migration '20251122203902_convert type of fess in codtor to ba require'.
2025-11-23 19:36:19.883 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:19.883 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:19.883 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:19.883 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:19.883 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:19.883 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:19.883 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:19.883 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-23 19:36:19.902 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-23 19:36:21.881 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:21.881 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:21.881 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:21.881 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-23 19:36:21.884 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-23 19:36:21.884 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:21.885 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:21.885 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:21.885 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:21.886 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:21.886 +02:00 [INF] Applying migration '20251122214638_addImageInBranch'.
2025-11-23 19:36:21.898 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:21.899 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:21.899 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:36:21.899 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:36:21.899 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:21.899 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:21.899 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:21.899 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-23 19:36:21.900 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-23 19:36:21.900 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-23 19:36:21.900 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:21.900 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-23 19:36:21.900 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-23 19:36:21.904 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-23 19:36:21.904 +02:00 [DBG] Committing transaction.
2025-11-23 19:36:21.904 +02:00 [DBG] Committed transaction.
2025-11-23 19:36:21.904 +02:00 [DBG] Disposing transaction.
2025-11-23 19:36:21.904 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:21.904 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:21.905 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:36:21.906 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:21.906 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:36:42.806 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 19:36:42.934 +02:00 [DBG] Hosting starting
2025-11-23 19:36:42.980 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 19:36:42.990 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 19:36:42.997 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 19:36:42.998 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 19:36:42.999 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 19:36:43.003 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 19:36:43.006 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 19:36:43.007 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 19:36:43.008 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 19:36:43.012 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 19:36:43.016 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:36:43.018 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 19:36:43.021 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 19:36:43.026 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 19:36:43.028 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 19:36:43.030 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 19:36:43.032 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 19:36:43.037 +02:00 [DBG] Middleware loaded
2025-11-23 19:36:43.038 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 19:36:43.040 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 19:36:43.123 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 19:36:43.232 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 19:36:43.234 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 19:36:43.235 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 19:36:43.236 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 19:36:43.237 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 19:36:43.238 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 19:36:43.313 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 19:36:43.314 +02:00 [INF] Hosting environment: Development
2025-11-23 19:36:43.315 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 19:36:43.316 +02:00 [DBG] Hosting started
2025-11-23 19:36:43.696 +02:00 [DBG] Connection id "0HNHAMRF6G4VI" accepted.
2025-11-23 19:36:43.696 +02:00 [DBG] Connection id "0HNHAMRF6G4VH" accepted.
2025-11-23 19:36:43.698 +02:00 [DBG] Connection id "0HNHAMRF6G4VI" started.
2025-11-23 19:36:43.698 +02:00 [DBG] Connection id "0HNHAMRF6G4VH" started.
2025-11-23 19:36:43.714 +02:00 [DBG] Connection id "0HNHAMRF6G4VH" received FIN.
2025-11-23 19:36:43.714 +02:00 [DBG] Connection id "0HNHAMRF6G4VI" received FIN.
2025-11-23 19:36:43.728 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:36:43.728 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:36:43.758 +02:00 [DBG] Connection id "0HNHAMRF6G4VI" stopped.
2025-11-23 19:36:43.758 +02:00 [DBG] Connection id "0HNHAMRF6G4VH" stopped.
2025-11-23 19:36:43.761 +02:00 [DBG] Connection id "0HNHAMRF6G4VH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:36:43.761 +02:00 [DBG] Connection id "0HNHAMRF6G4VI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:36:43.982 +02:00 [DBG] Connection id "0HNHAMRF6G4VJ" accepted.
2025-11-23 19:36:43.984 +02:00 [DBG] Connection id "0HNHAMRF6G4VJ" started.
2025-11-23 19:36:44.019 +02:00 [DBG] Connection 0HNHAMRF6G4VJ established using the following protocol: "Tls13"
2025-11-23 19:36:44.109 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 19:36:44.227 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 19:36:44.260 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 19:36:44.262 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:36:44.325 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 19:36:44.327 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 19:36:44.344 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 19:36:44.346 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 19:36:44.350 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 253.1725ms
2025-11-23 19:36:44.391 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 19:36:44.391 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 19:36:44.408 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 19:36:44.417 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 26.2151ms
2025-11-23 19:36:44.446 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.4812ms
2025-11-23 19:36:44.505 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 19:36:44.508 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 19:36:44.510 +02:00 [DBG] Request did not match any endpoints
2025-11-23 19:36:44.550 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.3984ms
2025-11-23 19:36:47.054 +02:00 [DBG] Connection id "0HNHAMRF6G4VK" accepted.
2025-11-23 19:36:47.054 +02:00 [DBG] Connection id "0HNHAMRF6G4VK" received FIN.
2025-11-23 19:36:47.055 +02:00 [DBG] Connection id "0HNHAMRF6G4VK" started.
2025-11-23 19:36:47.056 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" accepted.
2025-11-23 19:36:47.058 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 19:36:47.059 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" started.
2025-11-23 19:36:47.061 +02:00 [DBG] Connection id "0HNHAMRF6G4VK" stopped.
2025-11-23 19:36:47.062 +02:00 [DBG] Connection id "0HNHAMRF6G4VK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:36:47.065 +02:00 [DBG] Connection 0HNHAMRF6G4VL established using the following protocol: "Tls13"
2025-11-23 19:36:47.069 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 214
2025-11-23 19:36:47.074 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-23 19:36:47.078 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-23 19:36:47.080 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:36:47.083 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:36:47.126 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:36:47.129 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:36:47.159 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-23 19:36:47.162 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:36:47.164 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:36:47.165 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:36:47.167 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:36:47.169 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:36:47.172 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:36:47.324 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 19:36:47.488 +02:00 [DBG] Connection id "0HNHAMRF6G4VJ" received FIN.
2025-11-23 19:36:47.491 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VJ completed.
2025-11-23 19:36:47.493 +02:00 [DBG] Connection id "0HNHAMRF6G4VJ" is closed. The last processed stream ID was 7.
2025-11-23 19:36:47.495 +02:00 [DBG] Connection id "0HNHAMRF6G4VJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:36:47.497 +02:00 [DBG] Connection id "0HNHAMRF6G4VJ" stopped.
2025-11-23 19:36:47.544 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-23 19:36:47.557 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:36:47.561 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-23 19:36:47.563 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:36:47.570 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000001": started reading request body.
2025-11-23 19:36:47.571 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000001": done reading request body.
2025-11-23 19:36:47.716 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-23 19:36:47.717 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:36:47.718 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:36:47.719 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-23 19:36:47.730 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-23 19:36:47.850 +02:00 [INF] Create Branch called at "2025-11-23T19:36:47.8501015+02:00"
2025-11-23 19:36:48.244 +02:00 [INF] Creating new branch with name: adam4444
2025-11-23 19:36:49.328 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 19:36:49.334 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 19:36:49.336 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 19:36:49.338 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 19:36:49.340 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 19:36:49.466 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:36:49.468 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 19:36:49.672 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:36:49.733 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-23 19:36:49.858 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:36:49.887 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:36:49.908 +02:00 [DBG] Created DbConnection. (20ms).
2025-11-23 19:36:49.912 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:50.250 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:50.256 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:36:50.263 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-11-23 19:36:50.266 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-11-23 19:36:50.273 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:36:50.321 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-23 19:36:50.337 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:50.343 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-23 19:36:50.348 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:50.355 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (7ms).
2025-11-23 19:36:50.397 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:36:50.479 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:36:50.486 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:36:50.501 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:36:50.512 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:36:50.514 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:36:50.515 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:36:50.699 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:50.701 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:50.704 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:36:50.705 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:36:50.711 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-23 19:36:50.715 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-23 19:36:51.834 +02:00 [INF] Executed DbCommand (1,121ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (Size = 25), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-23 19:36:51.846 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:36:51.854 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:51.855 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-11-23 19:36:51.856 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:51.857 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:36:51.865 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:36:51.868 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:36:51.869 +02:00 [INF] Branch created successfully with ID: 1
2025-11-23 19:36:51.876 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:36:51.879 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:36:51.879 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:36:51.880 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:36:51.881 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:36:51.882 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-23 19:36:51.896 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[1],action=[GetById],controller=[Branch])
2025-11-23 19:36:51.900 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/1 and 
2025-11-23 19:36:51.902 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/1
2025-11-23 19:36:51.918 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 4745.2219ms
2025-11-23 19:36:51.919 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-23 19:36:51.921 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:36:51.924 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:36:51.927 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:36:51.929 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 19:36:51.931 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 4862.2517ms
2025-11-23 19:37:13.193 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 176
2025-11-23 19:37:13.198 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-23 19:37:13.199 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-23 19:37:13.200 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-23 19:37:13.202 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:37:13.204 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:37:13.205 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-23 19:37:13.343 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-23 19:37:13.344 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:37:13.345 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:37:13.346 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:37:13.347 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:37:13.348 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:37:13.349 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-23 19:37:13.351 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-23 19:37:13.353 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-23 19:37:13.354 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-23 19:37:13.355 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:37:13.360 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000002": started reading request body.
2025-11-23 19:37:13.361 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000002": done reading request body.
2025-11-23 19:37:13.365 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-23 19:37:13.366 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-23 19:37:13.368 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-23 19:37:13.369 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-23 19:37:13.372 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-23 19:37:13.375 +02:00 [INF] create Specialization called at "2025-11-23T19:37:13.3757494+02:00"
2025-11-23 19:37:13.378 +02:00 [INF] Adding specialization: legg
2025-11-23 19:37:13.413 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:37:13.420 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __branchIds_0.Contains(b.BranchId))'
2025-11-23 19:37:13.517 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT b0.value
            FROM OPENJSON(@__branchIds_0) WITH (value int '') AS b0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:37:13.529 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:37:13.531 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-23 19:37:13.532 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.533 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.534 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:13.535 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:13.540 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-23 19:37:13.541 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-23 19:37:13.556 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-23 19:37:13.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:13.565 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.567 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:37:13.568 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.569 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:37:13.574 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-23 19:37:13.592 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-23 19:37:13.596 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-23 19:37:13.604 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-23 19:37:13.681 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-23 19:37:13.687 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 5], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 6] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Branch.Address (string) MaxLength(250), 8], [Property: Branch.BranchName (string) Required MaxLength(150), 9], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 10], [Property: Branch.Description (string), 11], [Property: Branch.Email (string) MaxLength(200), 12], [Property: Branch.ImageURL (string) MaxLength(300), 13], [Property: Branch.Phone (string) MaxLength(25), 14], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15] }
            4 -> 5
            5 -> 6
            6 -> 7
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            9 -> 16
            10 -> 26
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:37:13.693 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.695 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.696 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:13.697 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:13.698 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:13.699 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-23 19:37:13.718 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-23 19:37:13.720 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.721 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:13.723 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.724 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:37:13.729 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:13.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:13.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:13.769 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:13.774 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:13.777 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:37:13.778 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:13.779 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:13.788 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.789 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.796 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:37:13.803 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:37:13.805 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:13.806 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:13.808 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:13.809 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-23 19:37:13.813 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 120), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-23 19:37:13.815 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:37:13.819 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:37:13.822 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.823 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:37:13.825 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:13.826 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:13.827 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:13.828 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-23 19:37:13.832 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p4, @p5);
2025-11-23 19:37:13.834 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.836 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:13.839 +02:00 [DBG] Committing transaction.
2025-11-23 19:37:13.843 +02:00 [DBG] Committed transaction.
2025-11-23 19:37:13.845 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.846 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:37:13.848 +02:00 [DBG] Disposing transaction.
2025-11-23 19:37:13.850 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:13.852 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:13.853 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 19:37:13.855 +02:00 [INF] Specialization 'legg' added successfully
2025-11-23 19:37:13.863 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:37:13.865 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:37:13.866 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:37:13.866 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:37:13.867 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:37:13.868 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-23 19:37:13.869 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[1],action=[Get],controller=[Specializations])
2025-11-23 19:37:13.871 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/1 and 
2025-11-23 19:37:13.872 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/1
2025-11-23 19:37:13.878 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 529.3741ms
2025-11-23 19:37:13.880 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-23 19:37:13.881 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:37:13.882 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:37:13.883 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:13.884 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:37:13.885 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 691.9658ms
2025-11-23 19:37:47.214 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 370
2025-11-23 19:37:47.221 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-23 19:37:47.222 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-23 19:37:47.223 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-23 19:37:47.223 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:37:47.226 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:37:47.227 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-23 19:37:47.231 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:37:47.232 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:37:47.233 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:37:47.234 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:37:47.236 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:37:47.237 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:37:47.238 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:37:47.255 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:37:47.256 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-23 19:37:47.257 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-23 19:37:47.258 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:37:47.266 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000003": started reading request body.
2025-11-23 19:37:47.267 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000003": done reading request body.
2025-11-23 19:37:47.273 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-23 19:37:47.273 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-23 19:37:47.274 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-23 19:37:47.275 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-23 19:37:47.278 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-23 19:37:47.281 +02:00 [INF] add doctor called at "2025-11-23T19:37:47.2808580+02:00"
2025-11-23 19:37:47.284 +02:00 [INF] Adding new doctor: Walaa, Email: walaa.elbishl8awy1@gmail
2025-11-23 19:37:47.292 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:37:47.298 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:37:47.299 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:37:47.299 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.301 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.301 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:37:47.303 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:37:47.317 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .FirstOrDefault(e => EF.Property<int>(e, "SpecializationId") == __p_0)'
2025-11-23 19:37:47.325 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Specialization>(
    asyncEnumerable: new SingleQueryingEnumerable<Specialization>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.Name (string) Required MaxLength(120), 3], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 4] }
            SELECT TOP(1) s.SpecializationId, s.CreatedAt, s.Description, s.Name, s.UpdatedAt
            FROM Specializations AS s
            WHERE s.SpecializationId == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:37:47.329 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.330 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.331 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.332 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-23 19:37:47.339 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-23 19:37:47.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.343 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.344 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:37:47.352 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-23 19:37:47.359 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:37:47.363 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.364 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.366 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.367 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:37:47.373 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:37:47.376 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.377 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:47.381 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-23 19:37:47.387 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:37:47.389 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.390 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.391 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.393 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:37:47.404 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:37:47.406 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.408 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:47.413 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-11-23 19:37:47.417 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:37:47.419 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.420 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.421 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.422 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 19:37:47.433 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 19:37:47.444 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.451 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.453 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-23 19:37:47.563 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.564 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.566 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.567 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:37:47.574 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:37:47.582 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.583 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:47.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.638 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.651 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:47.653 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.655 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.655 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:47.663 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:37:47.673 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:37:47.673 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.674 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:47.677 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:37:47.678 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 19:37:47.684 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 19:37:47.685 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.686 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-23 19:37:47.689 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.690 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:37:47.694 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-11-23 19:37:47.698 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:37:47.699 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.699 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:47.700 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.701 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:37:47.705 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:37:47.707 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.708 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:47.711 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-11-23 19:37:47.715 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:37:47.719 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.719 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:47.721 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.722 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 19:37:47.728 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 19:37:47.731 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.732 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:47.736 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.736 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:47.737 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.739 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:37:47.745 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:37:47.748 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.750 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:37:47.757 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.760 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.761 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.763 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:37:47.765 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:37:47.773 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:37:47.777 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.779 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:37:47.786 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.788 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.789 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:47.791 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.792 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.793 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:47.807 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-23 19:37:47.809 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:37:47.811 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:37:47.812 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.813 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.814 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.815 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 19:37:47.836 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 19:37:47.841 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.842 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:37:47.844 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.845 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.847 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 19:37:47.854 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __ids_0
        .Contains(b.BranchId))'
2025-11-23 19:37:47.862 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT i.value
            FROM OPENJSON(@__ids_0) WITH (value int '') AS i)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:37:47.864 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.865 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.867 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:37:47.869 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-23 19:37:47.877 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-23 19:37:47.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.881 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.882 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:37:47.891 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Doctor.DoctorId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.919 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.923 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.928 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:47.940 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.950 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:47.952 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.953 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:37:47.954 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:37:47.956 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:37:47.958 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:37:47.959 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.960 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:37:47.963 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:37:47.964 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-23 19:37:47.975 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-23 19:37:47.979 +02:00 [DBG] The foreign key property 'Doctor.DoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:37:47.982 +02:00 [DBG] The foreign key property 'BranchDoctor.DoctorsDoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:37:47.984 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:47.985 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:37:47.987 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:37:47.988 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:37:47.989 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:37:47.990 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-23 19:37:47.997 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-23 19:37:47.999 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:48.000 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:37:48.004 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:48.006 +02:00 [DBG] An entity of type 'BranchDoctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:37:48.008 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 19:37:48.010 +02:00 [DBG] Committing transaction.
2025-11-23 19:37:48.011 +02:00 [DBG] Committed transaction.
2025-11-23 19:37:48.012 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:48.013 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:37:51.054 +02:00 [INF] Sent registration email to walaa.elbishl8awy1@gmail
2025-11-23 19:37:51.060 +02:00 [DBG] Disposing transaction.
2025-11-23 19:37:51.062 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:37:51.064 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:37:51.065 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:37:51.066 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:37:51.066 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:37:51.067 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-23 19:37:51.079 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 3841.2699ms
2025-11-23 19:37:51.080 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-23 19:37:51.081 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:37:51.082 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:37:51.083 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:37:51.084 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:37:51.085 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 200 null application/json; charset=utf-8 3870.8943ms
2025-11-23 19:38:13.585 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 378
2025-11-23 19:38:13.589 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-23 19:38:13.590 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-23 19:38:13.591 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-23 19:38:13.592 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:38:13.593 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:38:13.593 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-23 19:38:13.594 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:38:13.596 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:38:13.597 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:38:13.599 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:38:13.600 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:38:13.602 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:38:13.603 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:38:13.606 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:38:13.608 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-23 19:38:13.609 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-23 19:38:13.610 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:38:13.611 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000004": started reading request body.
2025-11-23 19:38:13.612 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000004": done reading request body.
2025-11-23 19:38:13.614 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-23 19:38:13.614 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-23 19:38:13.616 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-23 19:38:13.617 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-23 19:38:13.618 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-23 19:38:13.619 +02:00 [INF] add doctor called at "2025-11-23T19:38:13.6196096+02:00"
2025-11-23 19:38:13.620 +02:00 [INF] Adding new doctor: Bassant, Email: Bassant.elbishl8awy1@gmail
2025-11-23 19:38:13.621 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:38:13.625 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:38:13.631 +02:00 [DBG] Created DbConnection. (6ms).
2025-11-23 19:38:13.632 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.634 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.635 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:38:13.636 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:38:13.638 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.638 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.639 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.640 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-23 19:38:13.645 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-23 19:38:13.647 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.648 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.650 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:38:13.651 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.653 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.654 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.655 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:38:13.659 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:38:13.661 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.663 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.664 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.665 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.666 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.667 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:13.671 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:13.673 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.674 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.676 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.677 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.678 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.679 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 19:38:13.684 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 19:38:13.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.687 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.688 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:38:13.773 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.774 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.776 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.777 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:13.781 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:13.783 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.784 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.786 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.787 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.788 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:13.789 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.790 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.792 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:13.793 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:38:13.795 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:38:13.796 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.797 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.799 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.800 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 19:38:13.805 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 19:38:13.807 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.808 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.810 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.811 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:38:13.813 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.814 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.815 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.816 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:13.820 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:13.821 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.822 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.824 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.825 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.826 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.827 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 19:38:13.830 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 19:38:13.832 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.833 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.835 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.836 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.837 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.838 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:13.841 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:13.842 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.843 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.845 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.846 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.847 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.848 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.849 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:13.851 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:13.853 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.854 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.855 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.857 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.858 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:13.859 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.860 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.861 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:13.862 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-23 19:38:13.863 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:38:13.865 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:38:13.871 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.872 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.873 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.874 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 19:38:13.881 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 19:38:13.883 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.884 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.885 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.887 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.889 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 19:38:13.891 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.892 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:13.893 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.894 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-23 19:38:13.899 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-23 19:38:13.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.902 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.903 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:38:13.906 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Doctor.DoctorId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.907 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.908 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.909 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.912 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.913 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:13.914 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.915 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:13.917 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:13.918 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:38:13.920 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:38:13.920 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.921 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.923 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.924 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-23 19:38:13.928 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-23 19:38:13.930 +02:00 [DBG] The foreign key property 'Doctor.DoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:38:13.932 +02:00 [DBG] The foreign key property 'BranchDoctor.DoctorsDoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:38:13.933 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.934 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:38:13.936 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:13.937 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:13.938 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:13.939 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-23 19:38:13.944 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-23 19:38:13.946 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.947 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:13.949 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.951 +02:00 [DBG] An entity of type 'BranchDoctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:13.952 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 19:38:13.953 +02:00 [DBG] Committing transaction.
2025-11-23 19:38:13.955 +02:00 [DBG] Committed transaction.
2025-11-23 19:38:13.955 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:13.957 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:15.667 +02:00 [INF] Sent registration email to Bassant.elbishl8awy1@gmail
2025-11-23 19:38:15.668 +02:00 [DBG] Disposing transaction.
2025-11-23 19:38:15.669 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:38:15.670 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:38:15.671 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:38:15.671 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:38:15.672 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:38:15.673 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-23 19:38:15.674 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 2071.4701ms
2025-11-23 19:38:15.675 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-23 19:38:15.676 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:38:15.677 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:38:15.678 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:15.679 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:38:15.681 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 200 null application/json; charset=utf-8 2095.2917ms
2025-11-23 19:38:59.180 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/register - application/json 164
2025-11-23 19:38:59.187 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-11-23 19:38:59.188 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-11-23 19:38:59.190 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-23 19:38:59.190 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:38:59.191 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:38:59.192 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-23 19:38:59.196 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(Hospital.Domain.Models.RegisterModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 19:38:59.197 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:38:59.198 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:38:59.200 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:38:59.201 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:38:59.202 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:38:59.203 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 19:38:59.207 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 19:38:59.208 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-23 19:38:59.209 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' using the name '' in request data ...
2025-11-23 19:38:59.211 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:38:59.212 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000005": started reading request body.
2025-11-23 19:38:59.213 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000005": done reading request body.
2025-11-23 19:38:59.215 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.RegisterModel'
2025-11-23 19:38:59.216 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-23 19:38:59.217 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-23 19:38:59.218 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-23 19:38:59.222 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-23 19:38:59.224 +02:00 [INF] Register called at "2025-11-23T19:38:59.2245882+02:00"
2025-11-23 19:38:59.228 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:38:59.230 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:38:59.231 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:38:59.232 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.233 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.235 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.236 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.237 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.238 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:38:59.244 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:38:59.246 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.248 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.249 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.250 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.252 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.253 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.254 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.255 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:59.256 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.257 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:59.261 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:59.263 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.264 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.265 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.267 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.268 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.270 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.271 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.272 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:59.273 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.274 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 19:38:59.278 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 19:38:59.280 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.281 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.282 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:38:59.283 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.284 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.373 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.375 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.377 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.379 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.381 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:38:59.382 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:59.387 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:59.396 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.398 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.400 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.401 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.405 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.406 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:59.408 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.409 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.410 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:59.412 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.414 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.415 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.417 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.418 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:38:59.420 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 19:38:59.425 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 19:38:59.428 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.430 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.432 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.433 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.435 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.437 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:38:59.439 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.441 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.442 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.444 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.445 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.446 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:59.450 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:59.452 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.454 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.455 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.457 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.459 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.461 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.462 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.463 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.465 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.466 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 19:38:59.470 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 19:38:59.473 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.474 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.475 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.477 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.479 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.480 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.482 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.483 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.484 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.486 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:59.489 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 19:38:59.491 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.492 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.494 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.495 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.498 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.500 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.501 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.502 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.504 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.505 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:59.508 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:38:59.510 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.511 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.513 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.514 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.515 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.517 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.518 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:59.519 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.520 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.521 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:59.522 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-23 19:38:59.524 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.525 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.526 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:38:59.528 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:38:59.529 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.530 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.531 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:38:59.533 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 19:38:59.543 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 19:38:59.545 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.546 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:38:59.547 +02:00 [DBG] Committing transaction.
2025-11-23 19:38:59.549 +02:00 [DBG] Committed transaction.
2025-11-23 19:38:59.549 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.551 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.552 +02:00 [DBG] Disposing transaction.
2025-11-23 19:38:59.553 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.554 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.556 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 19:38:59.561 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.575 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.578 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.581 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:59.583 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.584 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:38:59.585 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:38:59.586 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.587 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.588 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:38:59.589 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:38:59.590 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:38:59.591 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-23 19:38:59.600 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-23 19:38:59.602 +02:00 [DBG] The foreign key property 'Patient.PatientId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:38:59.605 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.606 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 19:38:59.607 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.608 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:38:59.610 +02:00 [DBG] An entity of type 'Patient' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:38:59.612 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:38:59.613 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:38:59.615 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:38:59.616 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:38:59.616 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:38:59.617 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:38:59.618 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Auth.RegisterDto'.
2025-11-23 19:38:59.620 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RegisterAsync (Hospital) in 417.1133ms
2025-11-23 19:38:59.622 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-23 19:38:59.623 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:38:59.624 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:38:59.625 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:38:59.626 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:38:59.627 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/register - 200 null application/json; charset=utf-8 447.358ms
2025-11-23 19:39:02.662 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 60
2025-11-23 19:39:02.666 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-23 19:39:02.667 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-23 19:39:02.668 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 19:39:02.669 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:39:02.670 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:39:02.671 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 19:39:02.675 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 19:39:02.676 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:39:02.678 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:39:02.679 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:39:02.681 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:39:02.682 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:39:02.683 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 19:39:02.685 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 19:39:02.686 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 19:39:02.687 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-23 19:39:02.688 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:39:02.690 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000006": started reading request body.
2025-11-23 19:39:02.691 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000006": done reading request body.
2025-11-23 19:39:02.693 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-23 19:39:02.695 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 19:39:02.696 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 19:39:02.698 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 19:39:02.700 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 19:39:02.702 +02:00 [INF] Login called at "2025-11-23T19:39:02.7023550+02:00"
2025-11-23 19:39:02.707 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:39:02.709 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:39:02.709 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:39:02.710 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:02.712 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:02.713 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:02.714 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:02.715 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:02.716 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:39:02.722 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:39:02.724 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:02.725 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:02.727 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:02.728 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:02.731 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:39:02.733 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:39:02.734 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:39:02.734 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:39:02.735 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-23 19:39:02.736 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-11-23 19:39:02.739 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 55.4671ms
2025-11-23 19:39:02.740 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 19:39:02.741 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:39:02.743 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:39:02.744 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:02.745 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:39:02.746 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 400 null text/plain; charset=utf-8 84.2551ms
2025-11-23 19:39:23.505 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 63
2025-11-23 19:39:23.511 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-23 19:39:23.512 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-23 19:39:23.513 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 19:39:23.514 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:39:23.515 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:39:23.516 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 19:39:23.517 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 19:39:23.519 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:39:23.520 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:39:23.521 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:39:23.523 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:39:23.525 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:39:23.526 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 19:39:23.539 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 19:39:23.541 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 19:39:23.542 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-23 19:39:23.544 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:39:23.545 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000007": started reading request body.
2025-11-23 19:39:23.546 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000007": done reading request body.
2025-11-23 19:39:23.548 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-23 19:39:23.549 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 19:39:23.550 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 19:39:23.551 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 19:39:23.552 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 19:39:23.553 +02:00 [INF] Login called at "2025-11-23T19:39:23.5538299+02:00"
2025-11-23 19:39:23.556 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:39:23.562 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:39:23.563 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:39:23.564 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.566 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.567 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.568 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:23.570 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:23.571 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:39:23.577 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 19:39:23.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:23.581 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.583 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:39:23.584 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.585 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:23.666 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-23 19:39:23.671 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:39:23.673 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.674 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.675 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.676 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:23.677 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:23.678 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-23 19:39:23.682 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-23 19:39:23.689 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.690 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:23.692 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.693 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:23.702 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-23 19:39:23.706 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:39:23.708 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.710 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.711 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.712 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:23.714 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:23.715 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 19:39:23.719 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 19:39:23.721 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.722 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:23.724 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.725 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:23.733 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.735 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.736 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.737 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:23.738 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:23.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 19:39:23.743 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 19:39:23.744 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.746 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:23.747 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.748 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:23.751 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.752 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.753 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.754 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:23.755 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:23.756 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:39:23.760 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 19:39:23.763 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.764 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:23.765 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.767 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:23.768 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:23.770 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:39:23.771 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:39:23.772 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:39:23.773 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:39:23.775 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:39:23.776 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.778 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.779 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.780 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:23.781 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:23.782 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-23 19:39:23.790 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-23 19:39:23.792 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.794 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:23.795 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.797 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:23.798 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:23.800 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:39:23.980 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-23 19:39:23.985 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:39:23.987 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.988 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:23.989 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:23.990 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:39:23.991 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:23.992 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-23 19:39:23.997 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-23 19:39:24.000 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:24.001 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:24.003 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:24.004 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 19:39:24.005 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:24.006 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:24.008 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:39:24.010 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:39:24.011 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:39:24.012 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:39:24.013 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:39:24.014 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-23 19:39:24.019 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 493.311ms
2025-11-23 19:39:24.021 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 19:39:24.022 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:39:24.023 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:39:24.024 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:24.026 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:39:24.028 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 523.1706ms
2025-11-23 19:39:46.108 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 160
2025-11-23 19:39:46.111 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 19:39:46.111 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 19:39:46.113 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:39:46.114 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:39:46.114 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:39:46.116 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:39:46.119 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:39:46.121 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:39:46.122 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:39:46.123 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:39:46.125 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:39:46.126 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:39:46.127 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:39:46.129 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:39:46.130 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:39:46.131 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 19:39:46.133 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:39:46.139 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000008": started reading request body.
2025-11-23 19:39:46.141 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000008": done reading request body.
2025-11-23 19:39:46.148 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 19:39:46.149 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:39:46.150 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:39:46.151 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:39:46.156 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:39:46.158 +02:00 [INF] Add Appointment called at "2025-11-23T19:39:46.1584121+02:00"
2025-11-23 19:39:46.162 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-14", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 19:39:46.172 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:39:46.180 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:39:46.181 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:39:46.182 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.183 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.185 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:39:46.186 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:39:46.190 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-23 19:39:46.192 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-23 19:39:46.193 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-23 19:39:46.196 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-23 19:39:46.197 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-23 19:39:46.217 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:39:46.220 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:46.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:46.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:46.224 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:39:46.242 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:39:46.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.246 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.251 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.252 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-23 19:39:46.255 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-23 19:39:46.257 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-23 19:39:46.259 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-23 19:39:46.260 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-23 19:39:46.261 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-23 19:39:46.277 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-23 19:39:46.285 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
                8 -> 38
                9 -> 39
                10 -> 40
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 51], [Property: Schedule.DoctorId (int) Required FK Index, 52], [Property: Schedule.EndTime (DateTime) Required, 53], [Property: Schedule.Shift (AppointmentShift) Required, 54], [Property: Schedule.StartTime (DateTime) Required, 55], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 56] }
                12 -> 49
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:39:46.288 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:46.289 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:46.291 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:46.292 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:39:46.307 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:39:46.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.313 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.316 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:39:46.325 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.327 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-23 19:39:46.330 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-23 19:39:46.335 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:39:46.338 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:39:46.339 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:39:46.341 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:39:46.342 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:39:46.347 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:39:46.349 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.350 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:39:46.353 +02:00 [WRN] Invalid payment method: "0"
2025-11-23 19:39:46.399 +02:00 [DBG] Rolling back transaction.
2025-11-23 19:39:46.402 +02:00 [DBG] Rolled back transaction.
2025-11-23 19:39:46.403 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.404 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:39:46.406 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Invalid payment method. Allowed: Cash or Paymob
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 81
2025-11-23 19:39:46.445 +02:00 [DBG] Disposing transaction.
2025-11-23 19:39:46.488 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 360.6323ms
2025-11-23 19:39:46.490 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:39:46.555 +02:00 [ERR]  Exception caught: Invalid payment method. Allowed: Cash or Paymob
System.ArgumentException: Invalid payment method. Allowed: Cash or Paymob
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 81
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 128
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 129
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-23 19:39:46.580 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:39:46.581 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:39:46.582 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:39:46.584 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:39:46.585 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/json 476.7927ms
2025-11-23 19:40:17.850 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 19:40:17.852 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 19:40:17.853 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 19:40:17.854 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:17.855 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:40:17.856 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:40:17.857 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:17.858 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:40:17.859 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:40:17.860 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:40:17.861 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:40:17.862 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:40:17.863 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:40:17.864 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:17.865 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:17.867 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:17.867 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 19:40:17.868 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:40:17.869 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000009": started reading request body.
2025-11-23 19:40:17.870 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:00000009": done reading request body.
2025-11-23 19:40:17.873 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 19:40:17.874 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:17.875 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:17.876 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:17.877 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:17.878 +02:00 [INF] Add Appointment called at "2025-11-23T19:40:17.8787770+02:00"
2025-11-23 19:40:17.879 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-14", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 19:40:17.881 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:40:17.883 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:40:17.884 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:40:17.884 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:17.886 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:17.887 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:40:17.888 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:40:17.889 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:17.890 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:17.891 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:17.892 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:17.904 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:17.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.908 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.910 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:17.912 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 19:40:17.914 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:17.915 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:17.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:17.917 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:17.928 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:17.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.932 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.934 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:17.939 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:17.940 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:40:17.942 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:17.943 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:17.944 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:17.945 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:17.948 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:17.950 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:17.951 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:17.954 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && a.Time == __time_2)'
2025-11-23 19:40:17.960 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Time == @__time_2))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 19:40:17.969 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:17.970 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:17.971 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:17.972 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:17.977 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:17.984 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:17.985 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:40:17.992 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.010 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.013 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.015 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.018 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.019 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:18.027 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:18.029 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:18.030 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:18.031 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:18.033 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:18.034 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:18.035 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:18.036 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:18.039 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:40:18.040 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:18.045 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:18.048 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:18.050 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:18.052 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 19:40:18.054 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.056 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:18.060 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.080 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.082 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.085 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:18.095 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:18.098 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:18.099 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:18.100 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:18.101 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:18.104 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:18.110 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:18.111 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:18.113 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:40:18.115 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:18.120 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:18.123 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:18.124 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:18.126 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:40:18.128 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:18.130 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:18.131 +02:00 [DBG] Committing transaction.
2025-11-23 19:40:18.132 +02:00 [DBG] Committed transaction.
2025-11-23 19:40:18.133 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:18.134 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:40:18.135 +02:00 [INF] Appointment created successfully with ID: 1
2025-11-23 19:40:18.139 +02:00 [DBG] Disposing transaction.
2025-11-23 19:40:18.140 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:40:18.142 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:40:18.143 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:40:18.143 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:40:18.144 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:40:18.145 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 19:40:18.146 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[1],action=[GetById],controller=[Appointment])
2025-11-23 19:40:18.148 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/1 and 
2025-11-23 19:40:18.149 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/1
2025-11-23 19:40:18.155 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 290.6705ms
2025-11-23 19:40:18.156 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:18.157 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:40:18.158 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:40:18.159 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:18.160 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:40:18.161 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 310.8654ms
2025-11-23 19:40:28.383 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 19:40:28.385 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 19:40:28.386 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 19:40:28.387 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:28.388 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:40:28.388 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:40:28.389 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:28.390 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:40:28.391 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:40:28.392 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:40:28.393 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:40:28.395 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:40:28.397 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:40:28.398 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:28.402 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:28.403 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:28.405 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 19:40:28.406 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:40:28.407 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000A": started reading request body.
2025-11-23 19:40:28.408 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000A": done reading request body.
2025-11-23 19:40:28.409 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 19:40:28.410 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:28.411 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:28.412 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:28.413 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:28.414 +02:00 [INF] Add Appointment called at "2025-11-23T19:40:28.4144500+02:00"
2025-11-23 19:40:28.415 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-15", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 19:40:28.417 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:40:28.418 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:40:28.419 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:40:28.420 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.421 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.422 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:40:28.423 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:40:28.424 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:28.425 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:28.426 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:28.427 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:28.440 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:28.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.444 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.446 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.447 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 19:40:28.449 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:28.450 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:28.452 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:28.453 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:28.463 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:28.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.467 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.469 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.474 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.476 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-23 19:40:28.478 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:28.479 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:28.480 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:28.482 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:28.485 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:28.488 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.489 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:28.491 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:28.491 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:28.493 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:28.494 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:28.507 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:28.510 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.511 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:28.513 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.515 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.516 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.517 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.520 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:28.522 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:28.523 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:28.524 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:28.525 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:28.527 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:28.529 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:28.530 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:28.531 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:28.533 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:28.534 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:28.541 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:28.544 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:28.545 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.547 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:40:28.548 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.550 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:28.552 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.553 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.555 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.556 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.557 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:28.559 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:28.560 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:28.561 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:28.563 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:28.565 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:28.567 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:28.568 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:28.569 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:28.571 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:28.572 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:28.577 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:28.580 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:28.582 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.583 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:40:28.585 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:28.587 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:28.589 +02:00 [DBG] Committing transaction.
2025-11-23 19:40:28.590 +02:00 [DBG] Committed transaction.
2025-11-23 19:40:28.591 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.593 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:40:28.594 +02:00 [INF] Appointment created successfully with ID: 2
2025-11-23 19:40:28.596 +02:00 [DBG] Disposing transaction.
2025-11-23 19:40:28.597 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:40:28.600 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:40:28.601 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:40:28.602 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:40:28.603 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:40:28.604 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 19:40:28.606 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[2],action=[GetById],controller=[Appointment])
2025-11-23 19:40:28.608 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/2 and 
2025-11-23 19:40:28.610 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/2
2025-11-23 19:40:28.612 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 214.1051ms
2025-11-23 19:40:28.613 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:28.615 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:40:28.616 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:40:28.617 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:28.619 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:40:28.621 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 238.2643ms
2025-11-23 19:40:42.429 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 19:40:42.431 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 19:40:42.432 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 19:40:42.433 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:42.434 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:40:42.435 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:40:42.436 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:42.437 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:40:42.439 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:40:42.440 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:40:42.441 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:40:42.443 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:40:42.445 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:40:42.447 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:42.449 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:42.451 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:42.452 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 19:40:42.454 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:40:42.456 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000B": started reading request body.
2025-11-23 19:40:42.457 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000B": done reading request body.
2025-11-23 19:40:42.458 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 19:40:42.459 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:42.460 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:42.462 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:42.463 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:42.465 +02:00 [INF] Add Appointment called at "2025-11-23T19:40:42.4656238+02:00"
2025-11-23 19:40:42.466 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 2, Date: "2025-12-14", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 19:40:42.469 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:40:42.472 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:40:42.473 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-23 19:40:42.474 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.475 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.476 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:40:42.478 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:40:42.480 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:42.481 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:42.482 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:42.483 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:42.499 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:42.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.504 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.505 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.506 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.508 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 19:40:42.510 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:42.510 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:42.512 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:42.513 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:42.524 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:42.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.528 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.531 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.536 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.537 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-23 19:40:42.540 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:42.541 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:42.542 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:42.543 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:42.547 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:42.549 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.550 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:42.552 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:42.553 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:42.554 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:42.555 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:42.559 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:42.562 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.563 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:42.565 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.566 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.568 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.569 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.572 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:42.573 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:42.574 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:42.575 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:42.576 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:42.577 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:42.579 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:42.580 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:42.581 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:42.582 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:42.583 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:42.587 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:42.589 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:42.590 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.591 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:40:42.593 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.594 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:42.595 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.597 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.598 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.600 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:42.601 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:42.602 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:42.603 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:42.604 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:42.605 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:42.607 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:42.608 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:42.608 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:42.609 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:42.611 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:42.614 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:42.616 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:42.617 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.618 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:40:42.619 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:42.621 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:42.622 +02:00 [DBG] Committing transaction.
2025-11-23 19:40:42.624 +02:00 [DBG] Committed transaction.
2025-11-23 19:40:42.624 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.625 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:40:42.627 +02:00 [INF] Appointment created successfully with ID: 3
2025-11-23 19:40:42.627 +02:00 [DBG] Disposing transaction.
2025-11-23 19:40:42.628 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:40:42.630 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:40:42.631 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:40:42.632 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:40:42.632 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:40:42.634 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 19:40:42.635 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[3],action=[GetById],controller=[Appointment])
2025-11-23 19:40:42.636 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/3 and 
2025-11-23 19:40:42.638 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/3
2025-11-23 19:40:42.639 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 192.5246ms
2025-11-23 19:40:42.641 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:42.642 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:40:42.643 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:40:42.644 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:42.645 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:40:42.647 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 217.898ms
2025-11-23 19:40:49.784 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 19:40:49.786 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 19:40:49.787 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 19:40:49.789 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:49.790 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:40:49.791 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:40:49.791 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:49.793 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:40:49.794 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:40:49.796 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:40:49.798 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:40:49.799 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:40:49.801 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:40:49.802 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:49.804 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:40:49.805 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:49.807 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 19:40:49.808 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:40:49.809 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000C": started reading request body.
2025-11-23 19:40:49.810 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000C": done reading request body.
2025-11-23 19:40:49.812 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 19:40:49.813 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:49.814 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:49.815 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:40:49.816 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:40:49.818 +02:00 [INF] Add Appointment called at "2025-11-23T19:40:49.8183114+02:00"
2025-11-23 19:40:49.819 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 2, Date: "2025-12-15", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 19:40:49.821 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:40:49.823 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:40:49.824 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-23 19:40:49.825 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.826 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.827 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:40:49.829 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:40:49.830 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:49.831 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:49.833 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:49.834 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:49.856 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:40:49.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.860 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.862 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.864 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.865 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-23 19:40:49.867 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:49.868 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:49.869 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:49.870 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:49.883 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:40:49.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.888 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.891 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.892 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.895 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.897 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.898 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-23 19:40:49.899 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:49.901 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:49.902 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:49.903 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:49.906 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:40:49.908 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.909 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:49.910 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:49.912 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:49.913 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:49.914 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:49.918 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:40:49.920 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.921 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:40:49.922 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.923 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.925 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.926 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.928 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:49.930 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:49.931 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:49.932 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:49.933 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:49.935 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:49.937 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:49.938 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:49.939 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:40:49.941 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:49.942 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:49.948 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:40:49.950 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:49.952 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.953 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:40:49.955 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.957 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:49.959 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.960 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.961 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.964 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:49.966 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:49.967 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:40:49.968 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:40:49.969 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:40:49.970 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:40:49.972 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:40:49.973 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:40:49.974 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:40:49.976 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:40:49.977 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:49.982 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:40:49.985 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:40:49.987 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.988 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:40:49.990 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:40:49.991 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:40:49.993 +02:00 [DBG] Committing transaction.
2025-11-23 19:40:49.994 +02:00 [DBG] Committed transaction.
2025-11-23 19:40:49.995 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:49.996 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:40:49.998 +02:00 [INF] Appointment created successfully with ID: 4
2025-11-23 19:40:49.999 +02:00 [DBG] Disposing transaction.
2025-11-23 19:40:50.000 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:40:50.002 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:40:50.003 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:40:50.004 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:40:50.004 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:40:50.006 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 19:40:50.007 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[4],action=[GetById],controller=[Appointment])
2025-11-23 19:40:50.009 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/4 and 
2025-11-23 19:40:50.010 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/4
2025-11-23 19:40:50.012 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 209.61ms
2025-11-23 19:40:50.013 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:40:50.015 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:40:50.016 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:40:50.017 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:40:50.018 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:40:50.019 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 235.3711ms
2025-11-23 19:41:10.650 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 19:41:10.658 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 19:41:10.659 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 19:41:10.660 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:41:10.661 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:41:10.662 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:41:10.663 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:41:10.664 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:41:10.666 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:41:10.667 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:41:10.668 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:41:10.669 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:41:10.671 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:41:10.672 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:41:10.673 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:41:10.675 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:41:10.676 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 19:41:10.677 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 19:41:10.678 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000D": started reading request body.
2025-11-23 19:41:10.679 +02:00 [DBG] Connection id "0HNHAMRF6G4VL", Request id "0HNHAMRF6G4VL:0000000D": done reading request body.
2025-11-23 19:41:10.681 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 19:41:10.682 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:41:10.683 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:41:10.684 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 19:41:10.685 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 19:41:10.686 +02:00 [INF] Add Appointment called at "2025-11-23T19:41:10.6867334+02:00"
2025-11-23 19:41:10.687 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-23", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 19:41:10.689 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:41:10.690 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:41:10.691 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:41:10.692 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.693 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.694 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 19:41:10.696 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 19:41:10.697 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:10.698 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:10.699 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:41:10.700 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:41:10.715 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 19:41:10.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.719 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.722 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.723 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 19:41:10.725 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:10.726 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:10.727 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:41:10.728 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:41:10.739 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:41:10.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.743 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.746 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.751 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.752 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-23 19:41:10.754 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:10.755 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:10.756 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:41:10.757 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:41:10.760 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 19:41:10.762 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.763 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:41:10.765 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:10.766 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:10.767 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:41:10.768 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:41:10.773 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 19:41:10.774 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.776 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:41:10.777 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.779 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.780 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.781 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.784 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:41:10.785 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:41:10.786 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:41:10.787 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:41:10.788 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:41:10.789 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:41:10.792 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:41:10.799 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:10.802 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:41:10.803 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 19:41:10.804 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:41:10.810 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 19:41:10.812 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:41:10.813 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.815 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 19:41:10.816 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.818 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:41:10.819 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.821 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.822 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.825 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:41:10.827 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:41:10.828 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 19:41:10.829 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 19:41:10.830 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 19:41:10.831 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 19:41:10.833 +02:00 [DBG] Created transaction savepoint.
2025-11-23 19:41:10.834 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:10.835 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:10.836 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:41:10.837 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:41:10.841 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 19:41:10.843 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 19:41:10.844 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.846 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 19:41:10.847 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:10.849 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 19:41:10.850 +02:00 [DBG] Committing transaction.
2025-11-23 19:41:10.851 +02:00 [DBG] Committed transaction.
2025-11-23 19:41:10.852 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.854 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:41:10.855 +02:00 [INF] Appointment created successfully with ID: 5
2025-11-23 19:41:10.856 +02:00 [DBG] Disposing transaction.
2025-11-23 19:41:10.857 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:41:10.859 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:41:10.859 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:41:10.860 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:41:10.861 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:41:10.862 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 19:41:10.863 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[5],action=[GetById],controller=[Appointment])
2025-11-23 19:41:10.865 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/5 and 
2025-11-23 19:41:10.866 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/5
2025-11-23 19:41:10.868 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 195.5425ms
2025-11-23 19:41:10.869 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 19:41:10.870 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:41:10.871 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:41:10.871 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:10.872 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:41:10.874 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 223.5525ms
2025-11-23 19:41:37.481 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/doctor/1/today - null null
2025-11-23 19:41:37.485 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/1/today'
2025-11-23 19:41:37.486 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/today' is valid for the request path '/api/Doctor/doctor/1/today'
2025-11-23 19:41:37.487 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-23 19:41:37.488 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:41:37.489 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:41:37.490 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-23 19:41:37.494 +02:00 [INF] Route matched with {action = "GetTodayAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTodayAppointmentsForDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:41:37.496 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:41:37.497 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:41:37.498 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:41:37.499 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:41:37.501 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:41:37.502 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:41:37.504 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:41:37.505 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:41:37.507 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:41:37.509 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:41:37.510 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:41:37.511 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:41:37.512 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:41:37.514 +02:00 [INF] GetTodayAppointmentsForDoctor  called at "2025-11-23T19:41:37.5145125+02:00"
2025-11-23 19:41:37.517 +02:00 [INF] Fetching today's appointments for doctor ID 1
2025-11-23 19:41:37.518 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:41:37.520 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:41:37.520 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:41:37.521 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.522 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.523 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:37.524 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:37.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:41:37.526 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:41:37.539 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:41:37.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.543 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.544 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.547 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:41:37.548 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.549 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:41:37.551 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.551 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:41:37.555 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Branch)
    .Where(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && (int)a.Status == 2)'
2025-11-23 19:41:37.557 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 19:41:37.559 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-23 19:41:37.561 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 19:41:37.575 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 17], [Property: User.AccessFailedCount (int) Required, 18], [Property: User.ConcurrencyStamp (string) Concurrency, 19], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: User.DateOfBirth (DateOnly?), 21], [Property: User.Email (string) Index MaxLength(256), 22], [Property: User.EmailConfirmed (bool) Required, 23], [Property: User.FullName (string) Required MaxLength(150), 24], [Property: User.Gender (GenderType?) MaxLength(10), 25], [Property: User.LockoutEnabled (bool) Required, 26], [Property: User.LockoutEnd (DateTimeOffset?), 27], [Property: User.NormalizedEmail (string) Index MaxLength(256), 28], [Property: User.NormalizedUserName (string) Index MaxLength(256), 29], [Property: User.PasswordHash (string), 30], [Property: User.PhoneNumber (string), 31], [Property: User.PhoneNumberConfirmed (bool) Required, 32], [Property: User.RefreshToken (string), 33], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 34], [Property: User.Role (string) Required MaxLength(50), 35], [Property: User.SecurityStamp (string), 36], [Property: User.TwoFactorEnabled (bool) Required, 37], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38], [Property: User.UserName (string) MaxLength(256), 39] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Status == N'Confirmed')), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:41:37.578 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.579 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.580 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:41:37.581 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:41:37.582 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:41:37.583 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:41:37.591 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:41:37.594 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.595 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:41:37.597 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.598 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:41:37.600 +02:00 [INF] No appointments found for doctor ID 1 today
2025-11-23 19:41:37.601 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:41:37.603 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:41:37.604 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:41:37.604 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:41:37.605 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:41:37.606 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:41:37.608 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital) in 106.3941ms
2025-11-23 19:41:37.610 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-23 19:41:37.610 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:41:37.611 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:41:37.612 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:41:37.613 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:41:37.614 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/doctor/1/today - 200 null application/json; charset=utf-8 133.0519ms
2025-11-23 19:42:28.885 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/doctor/1 - null null
2025-11-23 19:42:28.892 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/doctor/1'
2025-11-23 19:42:28.893 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByDoctorId (Hospital)' with route pattern 'api/Appointment/doctor/{doctorId:int}' is valid for the request path '/api/Appointment/doctor/1'
2025-11-23 19:42:28.895 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByDoctorId (Hospital)'
2025-11-23 19:42:28.896 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:42:28.897 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:42:28.898 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByDoctorId (Hospital)'
2025-11-23 19:42:28.903 +02:00 [INF] Route matched with {action = "GetByDoctorId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByDoctorId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 19:42:28.905 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:42:28.907 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:42:28.908 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:42:28.910 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:42:28.911 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:42:28.912 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:42:28.914 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 19:42:28.915 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:42:28.916 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:42:28.917 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:42:28.918 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:42:28.919 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:42:28.920 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:42:28.922 +02:00 [INF] Get Appointment by GetByDoctorId  called at "2025-11-23T19:42:28.9227903+02:00"
2025-11-23 19:42:28.924 +02:00 [INF] Fetching appointments for DoctorId: 1
2025-11-23 19:42:28.925 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:42:28.927 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:42:28.928 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:42:28.929 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:28.930 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:28.932 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:42:28.932 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:42:28.934 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:42:28.935 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:42:28.947 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:42:28.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.951 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.953 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.958 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:28.959 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:42:28.961 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:28.962 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:42:28.965 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.DoctorId == __doctorId_0)
    .Include(a => a.Patient)
    .Include(a => a.Branch)'
2025-11-23 19:42:28.967 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 19:42:28.968 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 19:42:28.975 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Branch.Address (string) MaxLength(250), 18], [Property: Branch.BranchName (string) Required MaxLength(150), 19], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Branch.Description (string), 21], [Property: Branch.Email (string) MaxLength(200), 22], [Property: Branch.ImageURL (string) MaxLength(300), 23], [Property: Branch.Phone (string) MaxLength(25), 24], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 19:42:28.977 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:28.978 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:28.979 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:42:28.980 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:42:28.981 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:42:28.983 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-11-23 19:42:28.990 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-11-23 19:42:28.995 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:28.998 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.001 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.003 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.006 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.007 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.008 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:42:29.010 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:29.011 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-11-23 19:42:29.013 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:29.014 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:42:29.022 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:42:29.024 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:42:29.025 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:42:29.025 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:42:29.026 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:42:29.028 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:42:29.030 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByDoctorId (Hospital) in 117.5441ms
2025-11-23 19:42:29.031 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByDoctorId (Hospital)'
2025-11-23 19:42:29.032 +02:00 [DBG] Connection id "0HNHAMRF6G4VL" completed keep alive response.
2025-11-23 19:42:29.033 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:42:29.034 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:42:29.035 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:42:29.037 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/doctor/1 - 200 null application/json; charset=utf-8 152.0193ms
2025-11-23 19:43:21.501 +02:00 [DBG] Connection id "0HNHAMRF6G4VM" accepted.
2025-11-23 19:43:21.512 +02:00 [DBG] Connection id "0HNHAMRF6G4VM" started.
2025-11-23 19:43:21.517 +02:00 [DBG] Connection 0HNHAMRF6G4VM established using the following protocol: "Tls13"
2025-11-23 19:43:21.521 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-14 - null null
2025-11-23 19:43:21.530 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/1/date/2025-12-14'
2025-11-23 19:43:21.535 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/1/date/2025-12-14'
2025-11-23 19:43:21.537 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:21.538 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:43:21.539 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:43:21.540 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:21.544 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:43:21.546 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:43:21.547 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:43:21.549 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:43:21.550 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:43:21.551 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:43:21.553 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:21.554 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:21.556 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:21.557 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:43:21.558 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:21.559 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:21.560 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:21.561 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:21.563 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:21.564 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:43:21.566 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:21.567 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:21.568 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:21.569 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:21.571 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:43:21.5714285+02:00"
2025-11-23 19:43:21.573 +02:00 [INF] Fetching "2025-12-14"'s appointments for doctor ID 1
2025-11-23 19:43:21.575 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:43:21.577 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:43:21.577 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:43:21.578 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.579 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.580 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:21.581 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:21.583 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:43:21.584 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:21.595 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:21.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.599 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.601 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.605 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.606 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:43:21.607 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.608 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:21.610 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.611 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.612 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:21.613 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:21.614 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:43:21.615 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:21.625 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:21.627 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.630 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.632 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:21.635 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.636 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:43:21.638 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.639 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:21.646 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:43:21.648 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:43:21.649 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:43:21.650 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:43:21.651 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:43:21.652 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:43:21.655 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 102.2464ms
2025-11-23 19:43:21.657 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:21.658 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:43:21.659 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:21.660 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:43:21.662 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-14 - 200 null application/json; charset=utf-8 141.2551ms
2025-11-23 19:43:22.548 +02:00 [DBG] Connection id "0HNHAMRF6G4VM" received FIN.
2025-11-23 19:43:22.549 +02:00 [DBG] Connection id "0HNHAMRF6G4VM" is closed. The last processed stream ID was 1.
2025-11-23 19:43:22.550 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VM completed.
2025-11-23 19:43:22.551 +02:00 [DBG] Connection id "0HNHAMRF6G4VM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:43:22.555 +02:00 [DBG] Connection id "0HNHAMRF6G4VM" stopped.
2025-11-23 19:43:36.621 +02:00 [DBG] Connection id "0HNHAMRF6G4VN" accepted.
2025-11-23 19:43:36.622 +02:00 [DBG] Connection id "0HNHAMRF6G4VN" started.
2025-11-23 19:43:36.626 +02:00 [DBG] Connection 0HNHAMRF6G4VN established using the following protocol: "Tls13"
2025-11-23 19:43:36.629 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-15 - null null
2025-11-23 19:43:36.632 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/1/date/2025-12-15'
2025-11-23 19:43:36.633 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/1/date/2025-12-15'
2025-11-23 19:43:36.635 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:36.636 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:43:36.637 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:43:36.638 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:36.639 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:43:36.640 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:43:36.641 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:43:36.643 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:43:36.644 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:43:36.645 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:43:36.646 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:36.648 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:36.649 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:36.650 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:43:36.651 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:36.652 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:36.653 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:36.655 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:36.656 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:36.657 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:43:36.658 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:36.659 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:36.660 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:36.661 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:36.662 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:43:36.6628232+02:00"
2025-11-23 19:43:36.663 +02:00 [INF] Fetching "2025-12-15"'s appointments for doctor ID 1
2025-11-23 19:43:36.665 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:43:36.667 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:43:36.667 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:43:36.668 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.669 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.670 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:36.671 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:36.672 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:43:36.673 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:36.686 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:36.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.690 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.692 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.696 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.697 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:43:36.699 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.700 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:36.701 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.703 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.704 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:36.705 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:36.706 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:43:36.707 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:36.716 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:36.718 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.720 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.723 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:36.724 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.726 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-23 19:43:36.727 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.728 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:36.729 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:43:36.731 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:43:36.732 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:43:36.733 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:43:36.733 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:43:36.735 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:43:36.736 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 89.6085ms
2025-11-23 19:43:36.737 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:36.738 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:43:36.739 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:36.740 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:43:36.741 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-15 - 200 null application/json; charset=utf-8 112.803ms
2025-11-23 19:43:37.551 +02:00 [DBG] Connection id "0HNHAMRF6G4VN" received FIN.
2025-11-23 19:43:37.551 +02:00 [DBG] Connection id "0HNHAMRF6G4VN" is closed. The last processed stream ID was 1.
2025-11-23 19:43:37.552 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VN completed.
2025-11-23 19:43:37.552 +02:00 [DBG] Connection id "0HNHAMRF6G4VN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:43:37.555 +02:00 [DBG] Connection id "0HNHAMRF6G4VN" stopped.
2025-11-23 19:43:46.156 +02:00 [DBG] Connection id "0HNHAMRF6G4VO" accepted.
2025-11-23 19:43:46.157 +02:00 [DBG] Connection id "0HNHAMRF6G4VO" started.
2025-11-23 19:43:46.160 +02:00 [DBG] Connection 0HNHAMRF6G4VO established using the following protocol: "Tls13"
2025-11-23 19:43:46.163 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/2/date/2025-12-15 - null null
2025-11-23 19:43:46.166 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/2/date/2025-12-15'
2025-11-23 19:43:46.167 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/2/date/2025-12-15'
2025-11-23 19:43:46.169 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:46.170 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:43:46.171 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:43:46.172 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:46.174 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:43:46.175 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:43:46.177 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:43:46.178 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:43:46.180 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:43:46.181 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:43:46.183 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:46.184 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:46.185 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:46.187 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:43:46.188 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:46.189 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:46.191 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:46.192 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:46.193 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:46.195 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:43:46.196 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:46.198 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:46.199 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:46.200 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:46.201 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:43:46.2016958+02:00"
2025-11-23 19:43:46.202 +02:00 [INF] Fetching "2025-12-15"'s appointments for doctor ID 2
2025-11-23 19:43:46.204 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:43:46.206 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:43:46.206 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:43:46.207 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.209 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.210 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:46.211 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:46.212 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:43:46.213 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:46.226 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:46.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.229 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.232 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.237 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.238 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:43:46.239 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.240 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:46.242 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.243 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.244 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:46.245 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:46.246 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:43:46.247 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:46.256 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:46.258 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.260 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.262 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.263 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:46.265 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.266 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:43:46.267 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.268 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:46.270 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:43:46.271 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:43:46.272 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:43:46.273 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:43:46.273 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:43:46.274 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:43:46.276 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 93.1848ms
2025-11-23 19:43:46.277 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:46.278 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:43:46.279 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:46.280 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:43:46.281 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/2/date/2025-12-15 - 200 null application/json; charset=utf-8 119.0254ms
2025-11-23 19:43:47.554 +02:00 [DBG] Connection id "0HNHAMRF6G4VO" received FIN.
2025-11-23 19:43:47.556 +02:00 [DBG] Connection id "0HNHAMRF6G4VO" is closed. The last processed stream ID was 1.
2025-11-23 19:43:47.556 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VO completed.
2025-11-23 19:43:47.558 +02:00 [DBG] Connection id "0HNHAMRF6G4VO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:43:47.560 +02:00 [DBG] Connection id "0HNHAMRF6G4VO" stopped.
2025-11-23 19:43:53.384 +02:00 [DBG] Connection id "0HNHAMRF6G4VP" accepted.
2025-11-23 19:43:53.385 +02:00 [DBG] Connection id "0HNHAMRF6G4VP" started.
2025-11-23 19:43:53.389 +02:00 [DBG] Connection 0HNHAMRF6G4VP established using the following protocol: "Tls13"
2025-11-23 19:43:53.393 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/2/date/2025-12-14 - null null
2025-11-23 19:43:53.397 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/2/date/2025-12-14'
2025-11-23 19:43:53.398 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/2/date/2025-12-14'
2025-11-23 19:43:53.400 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:53.401 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:43:53.401 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:43:53.402 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:53.403 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:43:53.406 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:43:53.408 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:43:53.409 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:43:53.410 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:43:53.411 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:43:53.413 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:53.414 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:43:53.415 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:53.416 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:43:53.417 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:53.418 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:53.419 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:43:53.420 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:43:53.421 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:53.422 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:43:53.424 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:53.425 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:53.426 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:43:53.427 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:43:53.428 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:43:53.4285330+02:00"
2025-11-23 19:43:53.429 +02:00 [INF] Fetching "2025-12-14"'s appointments for doctor ID 2
2025-11-23 19:43:53.431 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:43:53.433 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:43:53.433 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:43:53.434 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.435 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.436 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:53.437 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:53.438 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:43:53.439 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:53.450 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:43:53.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.454 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.456 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.461 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.462 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 19:43:53.463 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.464 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:53.466 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.467 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.468 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:43:53.469 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:43:53.470 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:43:53.471 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:53.478 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:43:53.480 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.481 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.482 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.484 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:43:53.487 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.488 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-23 19:43:53.489 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.490 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:43:53.491 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:43:53.493 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:43:53.494 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:43:53.495 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:43:53.495 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:43:53.496 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:43:53.498 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 85.0845ms
2025-11-23 19:43:53.499 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:43:53.500 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:43:53.500 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:43:53.502 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:43:53.503 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/2/date/2025-12-14 - 200 null application/json; charset=utf-8 109.7559ms
2025-11-23 19:43:57.556 +02:00 [DBG] Connection id "0HNHAMRF6G4VP" received FIN.
2025-11-23 19:43:57.557 +02:00 [DBG] Connection id "0HNHAMRF6G4VP" is closed. The last processed stream ID was 1.
2025-11-23 19:43:57.557 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VP completed.
2025-11-23 19:43:57.558 +02:00 [DBG] Connection id "0HNHAMRF6G4VP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:43:57.562 +02:00 [DBG] Connection id "0HNHAMRF6G4VP" stopped.
2025-11-23 19:44:01.947 +02:00 [DBG] Connection id "0HNHAMRF6G4VQ" accepted.
2025-11-23 19:44:01.948 +02:00 [DBG] Connection id "0HNHAMRF6G4VQ" started.
2025-11-23 19:44:01.951 +02:00 [DBG] Connection 0HNHAMRF6G4VQ established using the following protocol: "Tls13"
2025-11-23 19:44:01.953 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/23/date/2025-12-14 - null null
2025-11-23 19:44:01.962 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/23/date/2025-12-14'
2025-11-23 19:44:01.963 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/23/date/2025-12-14'
2025-11-23 19:44:01.965 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:01.966 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:44:01.967 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:44:01.968 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:01.969 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:44:01.970 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:44:01.971 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:44:01.973 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:44:01.974 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:44:01.975 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:44:01.977 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:44:01.978 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:44:01.979 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:44:01.980 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:44:01.982 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:01.983 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:01.984 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:44:01.985 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:01.986 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:44:01.987 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:44:01.989 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:01.990 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:01.991 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:44:01.992 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:01.993 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:44:01.9933822+02:00"
2025-11-23 19:44:01.994 +02:00 [INF] Fetching "2025-12-14"'s appointments for doctor ID 23
2025-11-23 19:44:01.995 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:44:01.997 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:44:01.998 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:44:01.999 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:02.000 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:02.002 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:44:02.003 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:44:02.004 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 19:44:02.005 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:44:02.017 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:44:02.020 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:02.021 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:44:02.022 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:02.023 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:44:02.025 +02:00 [WRN] Doctor with ID 23 does not exist
2025-11-23 19:44:02.074 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 96.7799ms
2025-11-23 19:44:02.075 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:02.123 +02:00 [ERR]  Exception caught: Doctor with ID 23 does not exist.
System.Collections.Generic.KeyNotFoundException: Doctor with ID 23 does not exist.
   at Hospital.Infrastructure.Services.DoctorService.GetAppoinmentsForDoctorByDateAsync(Int32 doctorId, DateOnly date) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\DoctorService.cs:line 313
   at Hospital.Controllers.DoctorController.GetAppointmentsForDoctor(Int32 doctorId, DateTime date) in D:\Hospital\Hospital\Hospital\Controllers\DoctorController.cs:line 237
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-23 19:44:02.128 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:44:02.129 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:02.130 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:44:02.131 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/23/date/2025-12-14 - 404 null application/json 178.1997ms
2025-11-23 19:44:02.556 +02:00 [DBG] Connection id "0HNHAMRF6G4VQ" received FIN.
2025-11-23 19:44:02.557 +02:00 [DBG] Connection id "0HNHAMRF6G4VQ" is closed. The last processed stream ID was 1.
2025-11-23 19:44:02.558 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VQ completed.
2025-11-23 19:44:02.558 +02:00 [DBG] Connection id "0HNHAMRF6G4VQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:44:02.563 +02:00 [DBG] Connection id "0HNHAMRF6G4VQ" stopped.
2025-11-23 19:44:12.321 +02:00 [DBG] Connection id "0HNHAMRF6G4VR" accepted.
2025-11-23 19:44:12.322 +02:00 [DBG] Connection id "0HNHAMRF6G4VR" started.
2025-11-23 19:44:12.326 +02:00 [DBG] Connection 0HNHAMRF6G4VR established using the following protocol: "Tls13"
2025-11-23 19:44:12.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/2/date/2025-12-23 - null null
2025-11-23 19:44:12.336 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/2/date/2025-12-23'
2025-11-23 19:44:12.337 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/2/date/2025-12-23'
2025-11-23 19:44:12.338 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:12.339 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:44:12.341 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:44:12.341 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:12.342 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:44:12.344 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:44:12.345 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:44:12.346 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:44:12.347 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:44:12.348 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:44:12.350 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:44:12.351 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:44:12.352 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:44:12.353 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:44:12.355 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:12.356 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:12.357 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:44:12.358 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:12.359 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:44:12.360 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:44:12.361 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:12.362 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:12.363 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:44:12.364 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:12.365 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:44:12.3657488+02:00"
2025-11-23 19:44:12.366 +02:00 [INF] Fetching "2025-12-23"'s appointments for doctor ID 2
2025-11-23 19:44:12.368 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:44:12.370 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:44:12.370 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:44:12.371 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.372 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.373 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:44:12.374 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:44:12.375 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:44:12.376 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:44:12.387 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:44:12.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.390 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.392 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.395 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.396 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:12.397 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.398 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:44:12.399 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.400 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:44:12.402 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.403 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.404 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:44:12.405 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:44:12.406 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:44:12.407 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:44:12.413 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:44:12.415 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.416 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 19:44:12.417 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.418 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:44:12.419 +02:00 [INF] No appointments found for doctor ID 2 today
2025-11-23 19:44:12.420 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:44:12.422 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:44:12.423 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:44:12.423 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:44:12.424 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:44:12.425 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:44:12.426 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 76.1019ms
2025-11-23 19:44:12.427 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:12.428 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:44:12.429 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:12.430 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 19:44:12.431 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/2/date/2025-12-23 - 200 null application/json; charset=utf-8 99.2736ms
2025-11-23 19:44:12.557 +02:00 [DBG] Connection id "0HNHAMRF6G4VR" received FIN.
2025-11-23 19:44:12.558 +02:00 [DBG] Connection id "0HNHAMRF6G4VR" is closed. The last processed stream ID was 1.
2025-11-23 19:44:12.558 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VR completed.
2025-11-23 19:44:12.559 +02:00 [DBG] Connection id "0HNHAMRF6G4VR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:44:12.562 +02:00 [DBG] Connection id "0HNHAMRF6G4VR" stopped.
2025-11-23 19:44:21.277 +02:00 [DBG] Connection id "0HNHAMRF6G4VS" accepted.
2025-11-23 19:44:21.278 +02:00 [DBG] Connection id "0HNHAMRF6G4VS" started.
2025-11-23 19:44:21.281 +02:00 [DBG] Connection 0HNHAMRF6G4VS established using the following protocol: "Tls13"
2025-11-23 19:44:21.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-23 - null null
2025-11-23 19:44:21.286 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/1/date/2025-12-23'
2025-11-23 19:44:21.287 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/1/date/2025-12-23'
2025-11-23 19:44:21.288 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:21.289 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 19:44:21.290 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 19:44:21.291 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:21.292 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 19:44:21.293 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 19:44:21.294 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 19:44:21.296 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 19:44:21.297 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 19:44:21.298 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 19:44:21.299 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:44:21.301 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 19:44:21.302 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:44:21.303 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 19:44:21.304 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:21.305 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:21.306 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 19:44:21.307 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 19:44:21.308 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:44:21.310 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 19:44:21.311 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:21.312 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:21.313 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 19:44:21.314 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 19:44:21.315 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T19:44:21.3154143+02:00"
2025-11-23 19:44:21.316 +02:00 [INF] Fetching "2025-12-23"'s appointments for doctor ID 1
2025-11-23 19:44:21.317 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 19:44:21.319 +02:00 [DBG] Creating DbConnection.
2025-11-23 19:44:21.320 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 19:44:21.320 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.322 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.323 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:44:21.324 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:44:21.325 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:44:21.326 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:44:21.338 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 19:44:21.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.341 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.344 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.346 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.348 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.349 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 19:44:21.350 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.351 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 19:44:21.353 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.354 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.355 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 19:44:21.356 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 19:44:21.357 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 19:44:21.358 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:44:21.366 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 19:44:21.367 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.369 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.372 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 19:44:21.374 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.375 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-23 19:44:21.376 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.377 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 19:44:21.379 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 19:44:21.380 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 19:44:21.381 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 19:44:21.381 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 19:44:21.382 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 19:44:21.383 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 19:44:21.384 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 84.9269ms
2025-11-23 19:44:21.386 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 19:44:21.387 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 19:44:21.387 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 19:44:21.388 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 19:44:21.389 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-23 - 200 null application/json; charset=utf-8 106.0672ms
2025-11-23 19:44:22.559 +02:00 [DBG] Connection id "0HNHAMRF6G4VS" received FIN.
2025-11-23 19:44:22.560 +02:00 [DBG] Connection id "0HNHAMRF6G4VS" is closed. The last processed stream ID was 1.
2025-11-23 19:44:22.560 +02:00 [DBG] The connection queue processing loop for 0HNHAMRF6G4VS completed.
2025-11-23 19:44:22.561 +02:00 [DBG] Connection id "0HNHAMRF6G4VS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 19:44:22.565 +02:00 [DBG] Connection id "0HNHAMRF6G4VS" stopped.
2025-11-23 20:38:17.911 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 20:38:18.055 +02:00 [DBG] Hosting starting
2025-11-23 20:38:18.083 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 20:38:18.094 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 20:38:18.110 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 20:38:18.139 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 20:38:18.155 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 20:38:18.162 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 20:38:18.169 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 20:38:18.170 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 20:38:18.171 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 20:38:18.177 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 20:38:18.181 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 20:38:18.185 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 20:38:18.187 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 20:38:18.192 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 20:38:18.193 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 20:38:18.195 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 20:38:18.197 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 20:38:18.203 +02:00 [DBG] Middleware loaded
2025-11-23 20:38:18.205 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 20:38:18.207 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 20:38:18.318 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 20:38:18.456 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 20:38:18.457 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 20:38:18.459 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 20:38:18.460 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 20:38:18.461 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 20:38:18.462 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 20:38:18.579 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 20:38:18.580 +02:00 [INF] Hosting environment: Development
2025-11-23 20:38:18.581 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 20:38:18.582 +02:00 [DBG] Hosting started
2025-11-23 20:38:18.819 +02:00 [DBG] Connection id "0HNHANTSDU42B" received FIN.
2025-11-23 20:38:18.826 +02:00 [DBG] Connection id "0HNHANTSDU42B" accepted.
2025-11-23 20:38:18.827 +02:00 [DBG] Connection id "0HNHANTSDU42B" started.
2025-11-23 20:38:18.847 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 20:38:19.011 +02:00 [DBG] Connection id "0HNHANTSDU42B" stopped.
2025-11-23 20:38:19.016 +02:00 [DBG] Connection id "0HNHANTSDU42B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 20:38:19.088 +02:00 [DBG] Connection id "0HNHANTSDU42C" accepted.
2025-11-23 20:38:19.090 +02:00 [DBG] Connection id "0HNHANTSDU42C" started.
2025-11-23 20:38:19.142 +02:00 [DBG] Connection 0HNHANTSDU42C established using the following protocol: "Tls13"
2025-11-23 20:38:19.247 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 20:38:19.397 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 20:38:19.432 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 20:38:19.434 +02:00 [DBG] Request did not match any endpoints
2025-11-23 20:38:19.488 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 20:38:19.490 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 20:38:19.512 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 20:38:19.514 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 20:38:19.524 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 286.6592ms
2025-11-23 20:38:19.570 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 20:38:19.570 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 20:38:19.581 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 20:38:19.584 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.0956ms
2025-11-23 20:38:19.636 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.7556ms
2025-11-23 20:38:19.704 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 20:38:19.707 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 20:38:19.708 +02:00 [DBG] Request did not match any endpoints
2025-11-23 20:38:19.760 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.6904ms
2025-11-23 20:38:23.118 +02:00 [DBG] Connection id "0HNHANTSDU42C" received FIN.
2025-11-23 20:38:23.122 +02:00 [DBG] The connection queue processing loop for 0HNHANTSDU42C completed.
2025-11-23 20:38:23.124 +02:00 [DBG] Connection id "0HNHANTSDU42C" is closed. The last processed stream ID was 7.
2025-11-23 20:38:23.125 +02:00 [DBG] Connection id "0HNHANTSDU42C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 20:38:23.127 +02:00 [DBG] Connection id "0HNHANTSDU42C" stopped.
2025-11-23 20:39:07.798 +02:00 [DBG] Connection id "0HNHANTSDU42D" accepted.
2025-11-23 20:39:07.801 +02:00 [DBG] Connection id "0HNHANTSDU42D" started.
2025-11-23 20:39:07.810 +02:00 [DBG] Connection 0HNHANTSDU42D established using the following protocol: "Tls13"
2025-11-23 20:39:07.819 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-14 - null null
2025-11-23 20:39:07.826 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/1/date/2025-12-14'
2025-11-23 20:39:07.833 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/1/date/2025-12-14'
2025-11-23 20:39:07.835 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 20:39:07.838 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 20:39:08.190 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 20:39:08.194 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 20:39:08.232 +02:00 [INF] Route matched with {action = "GetAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAppointmentsForDoctor(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 20:39:08.236 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 20:39:08.237 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 20:39:08.239 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 20:39:08.241 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 20:39:08.243 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 20:39:08.247 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 20:39:08.912 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 20:39:08.948 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 20:39:08.963 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 20:39:08.967 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 20:39:08.969 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 20:39:08.970 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 20:39:08.971 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 20:39:08.974 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 20:39:08.977 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 20:39:08.978 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 20:39:08.980 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 20:39:08.981 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 20:39:08.982 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 20:39:08.983 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 20:39:08.987 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T20:39:08.9870950+02:00"
2025-11-23 20:39:08.990 +02:00 [INF] Fetching "2025-12-14"'s appointments for doctor ID 1
2025-11-23 20:39:09.495 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 20:39:09.498 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 20:39:09.499 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 20:39:09.500 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 20:39:09.502 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 20:39:09.609 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 20:39:09.611 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 20:39:09.776 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 20:39:10.042 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-23 20:39:10.097 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-23 20:39:10.100 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-23 20:39:10.103 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-23 20:39:10.104 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-23 20:39:10.298 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-23 20:39:10.314 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
                8 -> 38
                9 -> 39
                10 -> 40
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 51], [Property: Schedule.DoctorId (int) Required FK Index, 52], [Property: Schedule.EndTime (DateTime) Required, 53], [Property: Schedule.Shift (AppointmentShift) Required, 54], [Property: Schedule.StartTime (DateTime) Required, 55], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 56] }
                12 -> 49
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 20:39:10.351 +02:00 [DBG] Creating DbConnection.
2025-11-23 20:39:10.372 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-23 20:39:10.377 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.061 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.065 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 20:39:11.070 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-23 20:39:11.078 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-11-23 20:39:11.086 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 20:39:11.201 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 20:39:11.257 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.324 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.371 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.376 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.399 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.435 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.444 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 235ms reading results.
2025-11-23 20:39:11.448 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.463 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (13ms).
2025-11-23 20:39:11.474 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Branch)
    .Where(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && (int)a.Status == 2)'
2025-11-23 20:39:11.478 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 20:39:11.481 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-23 20:39:11.483 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 20:39:11.518 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 17], [Property: User.AccessFailedCount (int) Required, 18], [Property: User.ConcurrencyStamp (string) Concurrency, 19], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: User.DateOfBirth (DateOnly?), 21], [Property: User.Email (string) Index MaxLength(256), 22], [Property: User.EmailConfirmed (bool) Required, 23], [Property: User.FullName (string) Required MaxLength(150), 24], [Property: User.Gender (GenderType?) MaxLength(10), 25], [Property: User.LockoutEnabled (bool) Required, 26], [Property: User.LockoutEnd (DateTimeOffset?), 27], [Property: User.NormalizedEmail (string) Index MaxLength(256), 28], [Property: User.NormalizedUserName (string) Index MaxLength(256), 29], [Property: User.PasswordHash (string), 30], [Property: User.PhoneNumber (string), 31], [Property: User.PhoneNumberConfirmed (bool) Required, 32], [Property: User.RefreshToken (string), 33], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 34], [Property: User.Role (string) Required MaxLength(50), 35], [Property: User.SecurityStamp (string), 36], [Property: User.TwoFactorEnabled (bool) Required, 37], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38], [Property: User.UserName (string) MaxLength(256), 39] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Status == N'Confirmed')), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 20:39:11.525 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.529 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.530 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 20:39:11.532 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 20:39:11.536 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-23 20:39:11.538 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 20:39:11.559 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 20:39:11.576 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.597 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.608 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 20:39:11.611 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.612 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 50ms reading results.
2025-11-23 20:39:11.614 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.615 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 20:39:11.635 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 20:39:11.639 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 20:39:11.640 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 20:39:11.641 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 20:39:11.642 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 20:39:11.644 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 20:39:11.667 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital) in 3419.6407ms
2025-11-23 20:39:11.669 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAppointmentsForDoctor (Hospital)'
2025-11-23 20:39:11.673 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 20:39:11.677 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 20:39:11.680 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 20:39:11.681 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/doctor/1/date/2025-12-14 - 200 null application/json; charset=utf-8 3863.4341ms
2025-11-23 20:39:13.124 +02:00 [DBG] Connection id "0HNHANTSDU42D" received FIN.
2025-11-23 20:39:13.125 +02:00 [DBG] Connection id "0HNHANTSDU42D" is closed. The last processed stream ID was 1.
2025-11-23 20:39:13.126 +02:00 [DBG] The connection queue processing loop for 0HNHANTSDU42D completed.
2025-11-23 20:39:13.126 +02:00 [DBG] Connection id "0HNHANTSDU42D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 20:39:13.129 +02:00 [DBG] Connection id "0HNHANTSDU42D" stopped.
2025-11-23 21:09:12.696 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 21:09:12.827 +02:00 [DBG] Hosting starting
2025-11-23 21:09:12.859 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 21:09:12.870 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 21:09:12.883 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 21:09:12.885 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 21:09:12.886 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 21:09:12.892 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 21:09:12.898 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 21:09:12.899 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 21:09:12.900 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 21:09:12.905 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 21:09:12.909 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 21:09:12.912 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 21:09:12.913 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 21:09:12.917 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 21:09:12.919 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 21:09:12.921 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 21:09:12.923 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 21:09:12.929 +02:00 [DBG] Middleware loaded
2025-11-23 21:09:12.930 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 21:09:12.932 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 21:09:13.023 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 21:09:13.132 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 21:09:13.133 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 21:09:13.134 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 21:09:13.135 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 21:09:13.136 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 21:09:13.137 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 21:09:13.219 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 21:09:13.220 +02:00 [INF] Hosting environment: Development
2025-11-23 21:09:13.221 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 21:09:13.223 +02:00 [DBG] Hosting started
2025-11-23 21:09:13.308 +02:00 [DBG] Connection id "0HNHAOF53N9K4" accepted.
2025-11-23 21:09:13.309 +02:00 [DBG] Connection id "0HNHAOF53N9K5" accepted.
2025-11-23 21:09:13.310 +02:00 [DBG] Connection id "0HNHAOF53N9K4" started.
2025-11-23 21:09:13.310 +02:00 [DBG] Connection id "0HNHAOF53N9K5" started.
2025-11-23 21:09:13.332 +02:00 [DBG] Connection id "0HNHAOF53N9K4" received FIN.
2025-11-23 21:09:13.332 +02:00 [DBG] Connection id "0HNHAOF53N9K5" received FIN.
2025-11-23 21:09:13.351 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:09:13.351 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:09:13.558 +02:00 [DBG] Connection id "0HNHAOF53N9K5" stopped.
2025-11-23 21:09:13.558 +02:00 [DBG] Connection id "0HNHAOF53N9K4" stopped.
2025-11-23 21:09:13.561 +02:00 [DBG] Connection id "0HNHAOF53N9K5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:09:13.561 +02:00 [DBG] Connection id "0HNHAOF53N9K4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:09:13.648 +02:00 [DBG] Connection id "0HNHAOF53N9K6" accepted.
2025-11-23 21:09:13.649 +02:00 [DBG] Connection id "0HNHAOF53N9K6" started.
2025-11-23 21:09:13.686 +02:00 [DBG] Connection 0HNHAOF53N9K6 established using the following protocol: "Tls13"
2025-11-23 21:09:13.771 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 21:09:13.885 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 21:09:13.920 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 21:09:13.922 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:09:13.967 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 21:09:13.969 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 21:09:13.988 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 21:09:13.990 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 21:09:13.996 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 236.3095ms
2025-11-23 21:09:13.998 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 21:09:14.013 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 21:09:14.016 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 17.6883ms
2025-11-23 21:09:14.035 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 21:09:14.087 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.7447ms
2025-11-23 21:09:14.178 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 21:09:14.183 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 21:09:14.184 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:09:14.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.855ms
2025-11-23 21:09:18.433 +02:00 [DBG] Connection id "0HNHAOF53N9K6" received FIN.
2025-11-23 21:09:18.436 +02:00 [DBG] The connection queue processing loop for 0HNHAOF53N9K6 completed.
2025-11-23 21:09:18.438 +02:00 [DBG] Connection id "0HNHAOF53N9K6" is closed. The last processed stream ID was 7.
2025-11-23 21:09:18.439 +02:00 [DBG] Connection id "0HNHAOF53N9K6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:09:18.440 +02:00 [DBG] Connection id "0HNHAOF53N9K6" stopped.
2025-11-23 21:09:37.064 +02:00 [DBG] Connection id "0HNHAOF53N9K7" accepted.
2025-11-23 21:09:37.065 +02:00 [DBG] Connection id "0HNHAOF53N9K7" started.
2025-11-23 21:09:37.069 +02:00 [DBG] Connection 0HNHAOF53N9K7 established using the following protocol: "Tls13"
2025-11-23 21:09:37.076 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment - null null
2025-11-23 21:09:37.083 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 21:09:37.087 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 21:09:37.089 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:09:37.093 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:09:37.133 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:09:37.137 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:09:37.164 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:09:37.167 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:09:37.168 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:09:37.169 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:09:37.171 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:09:37.172 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:09:37.176 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:09:37.337 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 21:09:37.575 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:09:37.579 +02:00 [INF] Get All Appointments called at "2025-11-23T21:09:37.5791477+02:00"
2025-11-23 21:09:37.581 +02:00 [INF] Fetching all appointments
2025-11-23 21:09:38.086 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 21:09:38.088 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 21:09:38.089 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 21:09:38.091 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 21:09:38.092 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 21:09:38.192 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 21:09:38.194 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 21:09:38.360 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:09:38.411 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-23 21:09:38.478 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 21:09:38.480 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-23 21:09:38.482 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 21:09:38.616 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Phone (string) MaxLength(25), 34], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 35] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 21:09:38.644 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:09:38.664 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-23 21:09:38.667 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:09:38.931 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:09:38.935 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:09:38.939 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-23 21:09:38.941 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-23 21:09:38.948 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:09:38.998 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:09:39.034 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.087 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.109 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.141 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.143 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.156 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.158 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.160 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.162 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.165 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.166 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.168 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.169 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.170 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:09:39.175 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:09:39.182 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 177ms reading results.
2025-11-23 21:09:39.186 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:09:39.192 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (5ms).
2025-11-23 21:09:39.207 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:09:39.211 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:09:39.212 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:09:39.212 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:09:39.214 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:09:39.215 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 21:09:39.236 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 2059.8972ms
2025-11-23 21:09:39.237 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:09:39.240 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:09:39.245 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:09:39.248 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 21:09:39.249 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment - 200 null application/json; charset=utf-8 2173.2883ms
2025-11-23 21:09:48.439 +02:00 [DBG] Connection id "0HNHAOF53N9K7" received FIN.
2025-11-23 21:09:48.440 +02:00 [DBG] Connection id "0HNHAOF53N9K7" is closed. The last processed stream ID was 1.
2025-11-23 21:09:48.441 +02:00 [DBG] The connection queue processing loop for 0HNHAOF53N9K7 completed.
2025-11-23 21:09:48.442 +02:00 [DBG] Connection id "0HNHAOF53N9K7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:09:48.444 +02:00 [DBG] Connection id "0HNHAOF53N9K7" stopped.
2025-11-23 21:10:15.351 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 21:10:15.522 +02:00 [DBG] Hosting starting
2025-11-23 21:10:15.550 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 21:10:15.564 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 21:10:15.573 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 21:10:15.576 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 21:10:15.578 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 21:10:15.588 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 21:10:15.594 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 21:10:15.595 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 21:10:15.597 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 21:10:15.604 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 21:10:15.609 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 21:10:15.616 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 21:10:15.619 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 21:10:15.628 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 21:10:15.631 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 21:10:15.634 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 21:10:15.636 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 21:10:15.651 +02:00 [DBG] Middleware loaded
2025-11-23 21:10:15.654 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 21:10:15.657 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 21:10:15.751 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 21:10:15.852 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 21:10:15.853 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 21:10:15.854 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 21:10:15.855 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 21:10:15.856 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 21:10:15.857 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 21:10:15.957 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 21:10:15.958 +02:00 [INF] Hosting environment: Development
2025-11-23 21:10:15.958 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 21:10:15.959 +02:00 [DBG] Hosting started
2025-11-23 21:10:16.219 +02:00 [DBG] Connection id "0HNHAOFNRM0D3" accepted.
2025-11-23 21:10:16.219 +02:00 [DBG] Connection id "0HNHAOFNRM0D4" accepted.
2025-11-23 21:10:16.221 +02:00 [DBG] Connection id "0HNHAOFNRM0D3" started.
2025-11-23 21:10:16.221 +02:00 [DBG] Connection id "0HNHAOFNRM0D4" started.
2025-11-23 21:10:16.239 +02:00 [DBG] Connection id "0HNHAOFNRM0D3" received FIN.
2025-11-23 21:10:16.239 +02:00 [DBG] Connection id "0HNHAOFNRM0D4" received FIN.
2025-11-23 21:10:16.258 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:10:16.258 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:10:16.298 +02:00 [DBG] Connection id "0HNHAOFNRM0D4" stopped.
2025-11-23 21:10:16.298 +02:00 [DBG] Connection id "0HNHAOFNRM0D3" stopped.
2025-11-23 21:10:16.301 +02:00 [DBG] Connection id "0HNHAOFNRM0D4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:10:16.301 +02:00 [DBG] Connection id "0HNHAOFNRM0D3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:10:16.404 +02:00 [DBG] Connection id "0HNHAOFNRM0D5" accepted.
2025-11-23 21:10:16.406 +02:00 [DBG] Connection id "0HNHAOFNRM0D5" started.
2025-11-23 21:10:16.438 +02:00 [DBG] Connection 0HNHAOFNRM0D5 established using the following protocol: "Tls13"
2025-11-23 21:10:16.506 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 21:10:16.592 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 21:10:16.626 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 21:10:16.627 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:10:16.672 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 21:10:16.674 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 21:10:16.692 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 21:10:16.694 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 21:10:16.700 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 200.9894ms
2025-11-23 21:10:16.760 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 21:10:16.760 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 21:10:16.775 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 21:10:16.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 25.1439ms
2025-11-23 21:10:16.820 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.7043ms
2025-11-23 21:10:16.894 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 21:10:16.899 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 21:10:16.900 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:10:16.957 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 63.5482ms
2025-11-23 21:10:18.446 +02:00 [DBG] Connection id "0HNHAOFNRM0D5" received FIN.
2025-11-23 21:10:18.450 +02:00 [DBG] The connection queue processing loop for 0HNHAOFNRM0D5 completed.
2025-11-23 21:10:18.451 +02:00 [DBG] Connection id "0HNHAOFNRM0D5" is closed. The last processed stream ID was 7.
2025-11-23 21:10:18.452 +02:00 [DBG] Connection id "0HNHAOFNRM0D5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:10:18.455 +02:00 [DBG] Connection id "0HNHAOFNRM0D5" stopped.
2025-11-23 21:11:55.668 +02:00 [DBG] Connection id "0HNHAOFNRM0D6" accepted.
2025-11-23 21:11:55.671 +02:00 [DBG] Connection id "0HNHAOFNRM0D6" started.
2025-11-23 21:11:55.676 +02:00 [DBG] Connection 0HNHAOFNRM0D6 established using the following protocol: "Tls13"
2025-11-23 21:11:55.683 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/register - application/json 169
2025-11-23 21:11:55.688 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-11-23 21:11:55.692 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-11-23 21:11:55.693 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-23 21:11:55.696 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:11:55.697 +02:00 [DBG] The request has an origin header: 'https://localhost:7217'.
2025-11-23 21:11:55.698 +02:00 [INF] CORS policy execution failed.
2025-11-23 21:11:55.699 +02:00 [INF] Request origin https://localhost:7217 does not have permission to access the resource.
2025-11-23 21:11:55.730 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:11:55.732 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-23 21:11:55.759 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(Hospital.Domain.Models.RegisterModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 21:11:55.763 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:11:55.764 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:11:55.766 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:11:55.767 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:11:55.769 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:11:55.771 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 21:11:55.895 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 21:11:55.929 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 21:11:55.945 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-23 21:11:55.949 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' using the name '' in request data ...
2025-11-23 21:11:55.951 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:11:55.961 +02:00 [DBG] Connection id "0HNHAOFNRM0D6", Request id "0HNHAOFNRM0D6:00000001": started reading request body.
2025-11-23 21:11:55.962 +02:00 [DBG] Connection id "0HNHAOFNRM0D6", Request id "0HNHAOFNRM0D6:00000001": done reading request body.
2025-11-23 21:11:55.974 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.RegisterModel'
2025-11-23 21:11:55.975 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-23 21:11:55.977 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-23 21:11:55.978 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-23 21:11:55.988 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-23 21:11:55.991 +02:00 [INF] Register called at "2025-11-23T21:11:55.9911875+02:00"
2025-11-23 21:11:56.528 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 21:11:56.530 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 21:11:56.531 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 21:11:56.532 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 21:11:56.533 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 21:11:56.637 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 21:11:56.638 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 21:11:56.808 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:11:56.865 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-23 21:11:57.035 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:11:57.068 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:11:57.086 +02:00 [DBG] Created DbConnection. (16ms).
2025-11-23 21:11:57.090 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.309 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.313 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.316 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-23 21:11:57.323 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-11-23 21:11:57.330 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 21:11:57.382 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 21:11:57.395 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.400 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-23 21:11:57.403 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.407 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-23 21:11:57.411 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-23 21:11:57.417 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:11:57.418 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.420 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.422 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.424 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:11:57.425 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 21:11:57.426 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:11:57.432 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:11:57.434 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.435 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:11:57.436 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.437 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:57.443 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-11-23 21:11:57.450 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:11:57.452 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.453 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.455 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.456 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:57.457 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:11:57.459 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 21:11:57.465 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-23 21:11:57.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:57.518 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.521 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 53ms reading results.
2025-11-23 21:11:57.522 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.523 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:57.616 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.618 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.620 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.621 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:11:57.622 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:11:57.623 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:11:57.629 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:11:57.631 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.633 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:11:57.634 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.635 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:11:57.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:57.701 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:11:57.722 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:11:57.731 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:11:57.732 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:11:57.733 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:11:57.776 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.778 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.781 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.781 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:11:57.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-23 21:11:57.787 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 21:11:57.792 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-23 21:11:57.796 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.797 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 21:11:57.798 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.799 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:11:57.805 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:57.808 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:11:57.813 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-11-23 21:11:57.817 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:11:57.819 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.820 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.821 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.821 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:11:57.822 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:57.823 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 21:11:57.827 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 21:11:57.829 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.830 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:11:57.831 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.832 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:11:57.843 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-11-23 21:11:57.859 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:11:57.862 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.863 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.864 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.865 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:11:57.865 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:57.866 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 21:11:57.871 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-23 21:11:57.873 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.874 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:11:57.875 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.876 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:57.880 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.881 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.882 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.883 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:11:57.884 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:57.885 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 21:11:57.890 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-23 21:11:57.892 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.893 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:11:57.894 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.896 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:57.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:57.913 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.915 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.916 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.917 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:57.918 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:11:57.920 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:11:57.926 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:11:57.931 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.933 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 21:11:57.934 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.936 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:57.941 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:57.943 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:11:57.945 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:11:57.946 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:11:57.947 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:11:57.949 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:11:57.965 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-23 21:11:57.967 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.969 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:57.971 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 21:11:57.979 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 21:11:57.981 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:57.982 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:57.984 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-23 21:11:57.986 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 21:11:57.996 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-23 21:11:58.002 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.003 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 21:11:58.007 +02:00 [DBG] Committing transaction.
2025-11-23 21:11:58.011 +02:00 [DBG] Committed transaction.
2025-11-23 21:11:58.014 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.015 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:58.019 +02:00 [DBG] Disposing transaction.
2025-11-23 21:11:58.020 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:58.022 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:58.024 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-23 21:11:58.036 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:58.058 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:58.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:58.063 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:11:58.065 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:11:58.067 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:11:58.068 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:11:58.068 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:11:58.073 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.074 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.075 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:11:58.076 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:11:58.077 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:11:58.078 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-23 21:11:58.084 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-23 21:11:58.091 +02:00 [DBG] The foreign key property 'Patient.PatientId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 21:11:58.094 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.096 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-23 21:11:58.097 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.098 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:11:58.101 +02:00 [DBG] An entity of type 'Patient' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:11:58.102 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:11:58.107 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:11:58.111 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:11:58.112 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:11:58.112 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:11:58.114 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:11:58.115 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Auth.RegisterDto'.
2025-11-23 21:11:58.124 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RegisterAsync (Hospital) in 2350.9813ms
2025-11-23 21:11:58.125 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-23 21:11:58.129 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:11:58.133 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:11:58.135 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 21:11:58.137 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/register - 200 null application/json; charset=utf-8 2454.7385ms
2025-11-23 21:11:58.461 +02:00 [DBG] Connection id "0HNHAOFNRM0D6" received FIN.
2025-11-23 21:11:58.463 +02:00 [DBG] Connection id "0HNHAOFNRM0D6" is closed. The last processed stream ID was 1.
2025-11-23 21:11:58.463 +02:00 [DBG] The connection queue processing loop for 0HNHAOFNRM0D6 completed.
2025-11-23 21:11:58.465 +02:00 [DBG] Connection id "0HNHAOFNRM0D6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:11:58.469 +02:00 [DBG] Connection id "0HNHAOFNRM0D6" stopped.
2025-11-23 21:12:57.334 +02:00 [DBG] Connection id "0HNHAOFNRM0D7" accepted.
2025-11-23 21:12:57.341 +02:00 [DBG] Connection id "0HNHAOFNRM0D7" started.
2025-11-23 21:12:57.347 +02:00 [DBG] Connection 0HNHAOFNRM0D7 established using the following protocol: "Tls13"
2025-11-23 21:12:57.354 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 72
2025-11-23 21:12:57.366 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-23 21:12:57.367 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-23 21:12:57.369 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 21:12:57.371 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:12:57.373 +02:00 [DBG] The request has an origin header: 'https://localhost:7217'.
2025-11-23 21:12:57.374 +02:00 [INF] CORS policy execution failed.
2025-11-23 21:12:57.375 +02:00 [INF] Request origin https://localhost:7217 does not have permission to access the resource.
2025-11-23 21:12:57.378 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:12:57.380 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 21:12:57.394 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 21:12:57.395 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:12:57.397 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:12:57.398 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:12:57.400 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:12:57.401 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:12:57.402 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 21:12:57.406 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 21:12:57.408 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 21:12:57.410 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-23 21:12:57.412 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:12:57.415 +02:00 [DBG] Connection id "0HNHAOFNRM0D7", Request id "0HNHAOFNRM0D7:00000001": started reading request body.
2025-11-23 21:12:57.416 +02:00 [DBG] Connection id "0HNHAOFNRM0D7", Request id "0HNHAOFNRM0D7:00000001": done reading request body.
2025-11-23 21:12:57.425 +02:00 [DBG] JSON input formatter threw an exception: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 3 | BytePositionInLine: 0.
2025-11-23 21:12:57.426 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 21:12:57.427 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 21:12:57.428 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 21:12:57.431 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 21:12:57.433 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-23 21:12:57.435 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-23 21:12:57.437 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:12:57.438 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:12:57.439 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-23 21:12:57.442 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-23 21:12:57.443 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-23 21:12:57.464 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 62.1215ms
2025-11-23 21:12:57.466 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 21:12:57.467 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 400 null application/problem+json; charset=utf-8 113.2246ms
2025-11-23 21:12:58.471 +02:00 [DBG] Connection id "0HNHAOFNRM0D7" received FIN.
2025-11-23 21:12:58.472 +02:00 [DBG] Connection id "0HNHAOFNRM0D7" is closed. The last processed stream ID was 1.
2025-11-23 21:12:58.473 +02:00 [DBG] The connection queue processing loop for 0HNHAOFNRM0D7 completed.
2025-11-23 21:12:58.473 +02:00 [DBG] Connection id "0HNHAOFNRM0D7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:12:58.476 +02:00 [DBG] Connection id "0HNHAOFNRM0D7" stopped.
2025-11-23 21:13:03.115 +02:00 [DBG] Connection id "0HNHAOFNRM0D8" accepted.
2025-11-23 21:13:03.116 +02:00 [DBG] Connection id "0HNHAOFNRM0D8" started.
2025-11-23 21:13:03.118 +02:00 [DBG] Connection 0HNHAOFNRM0D8 established using the following protocol: "Tls13"
2025-11-23 21:13:03.121 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 71
2025-11-23 21:13:03.123 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-23 21:13:03.125 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-23 21:13:03.126 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 21:13:03.127 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:13:03.129 +02:00 [DBG] The request has an origin header: 'https://localhost:7217'.
2025-11-23 21:13:03.130 +02:00 [INF] CORS policy execution failed.
2025-11-23 21:13:03.131 +02:00 [INF] Request origin https://localhost:7217 does not have permission to access the resource.
2025-11-23 21:13:03.133 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:13:03.134 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 21:13:03.135 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 21:13:03.137 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:13:03.138 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:13:03.139 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:13:03.141 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:13:03.142 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:13:03.144 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 21:13:03.157 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 21:13:03.159 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 21:13:03.160 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-23 21:13:03.162 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:13:03.163 +02:00 [DBG] Connection id "0HNHAOFNRM0D8", Request id "0HNHAOFNRM0D8:00000001": started reading request body.
2025-11-23 21:13:03.164 +02:00 [DBG] Connection id "0HNHAOFNRM0D8", Request id "0HNHAOFNRM0D8:00000001": done reading request body.
2025-11-23 21:13:03.165 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-23 21:13:03.166 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 21:13:03.168 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 21:13:03.169 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 21:13:03.172 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 21:13:03.174 +02:00 [INF] Login called at "2025-11-23T21:13:03.1745748+02:00"
2025-11-23 21:13:03.219 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:13:03.222 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:13:03.223 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-23 21:13:03.224 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.226 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.228 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.229 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:13:03.231 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:13:03.232 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 21:13:03.245 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 21:13:03.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:13:03.250 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.252 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-23 21:13:03.253 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.254 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:13:03.452 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-23 21:13:03.475 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 21:13:03.478 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.479 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.481 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.481 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:13:03.483 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:13:03.484 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-23 21:13:03.510 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-23 21:13:03.513 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.514 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:13:03.515 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.516 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:13:03.523 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-23 21:13:03.537 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 21:13:03.539 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.540 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.542 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.542 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:13:03.544 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:13:03.545 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 21:13:03.660 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 21:13:03.662 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.663 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:13:03.664 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.665 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:13:03.671 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.672 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.673 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.674 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:13:03.675 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:13:03.676 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 21:13:03.681 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 21:13:03.683 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.684 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:13:03.684 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.685 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:13:03.687 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.688 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.689 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.690 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:13:03.691 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:13:03.692 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:13:03.697 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 21:13:03.698 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.699 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:13:03.700 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.701 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:13:03.703 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:13:03.704 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:13:03.705 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:13:03.706 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:13:03.707 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:13:03.708 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:13:03.710 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.711 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.712 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.713 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:13:03.714 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:13:03.715 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-23 21:13:03.735 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-23 21:13:03.737 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.738 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-23 21:13:03.739 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.740 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:13:03.741 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:13:03.742 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:13:03.820 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-23 21:13:03.825 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:13:03.827 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.829 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.830 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:13:03.831 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:13:03.832 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:13:03.833 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-23 21:13:03.838 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-23 21:13:03.844 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:13:03.845 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:13:03.847 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.848 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 21:13:03.849 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.850 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:13:03.852 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:13:03.854 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:13:03.854 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:13:03.855 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:13:03.856 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:13:03.857 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-23 21:13:03.866 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 722.409ms
2025-11-23 21:13:03.868 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 21:13:03.869 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:13:03.870 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:13:03.871 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:13:03.872 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 751.3455ms
2025-11-23 21:13:08.473 +02:00 [DBG] Connection id "0HNHAOFNRM0D8" received FIN.
2025-11-23 21:13:08.475 +02:00 [DBG] Connection id "0HNHAOFNRM0D8" is closed. The last processed stream ID was 1.
2025-11-23 21:13:08.475 +02:00 [DBG] The connection queue processing loop for 0HNHAOFNRM0D8 completed.
2025-11-23 21:13:08.476 +02:00 [DBG] Connection id "0HNHAOFNRM0D8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:13:08.479 +02:00 [DBG] Connection id "0HNHAOFNRM0D8" stopped.
2025-11-23 21:14:18.318 +02:00 [DBG] Connection id "0HNHAOFNRM0D9" received FIN.
2025-11-23 21:14:18.325 +02:00 [DBG] Connection id "0HNHAOFNRM0D9" accepted.
2025-11-23 21:14:18.326 +02:00 [DBG] Connection id "0HNHAOFNRM0D9" started.
2025-11-23 21:14:18.329 +02:00 [DBG] Connection id "0HNHAOFNRM0DA" accepted.
2025-11-23 21:14:18.332 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:14:18.332 +02:00 [DBG] Connection id "0HNHAOFNRM0DA" started.
2025-11-23 21:14:18.334 +02:00 [DBG] Connection id "0HNHAOFNRM0D9" stopped.
2025-11-23 21:14:18.335 +02:00 [DBG] Connection id "0HNHAOFNRM0D9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:14:18.337 +02:00 [DBG] Connection 0HNHAOFNRM0DA established using the following protocol: "Tls13"
2025-11-23 21:14:18.343 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 21:14:18.345 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 21:14:18.346 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 21:14:18.347 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:14:18.348 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:14:18.348 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:14:18.349 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:14:18.353 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:14:18.354 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:14:18.355 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:14:18.356 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:14:18.357 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:14:18.358 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:14:18.359 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:14:18.534 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:14:18.535 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:14:18.536 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 21:14:18.538 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:14:18.545 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000001": started reading request body.
2025-11-23 21:14:18.547 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000001": done reading request body.
2025-11-23 21:14:18.555 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 21:14:18.556 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:14:18.557 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:14:18.558 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:14:18.563 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:14:18.566 +02:00 [INF] Add Appointment called at "2025-11-23T21:14:18.5660014+02:00"
2025-11-23 21:14:18.570 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-12-14", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 21:14:18.587 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:14:18.592 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:14:18.593 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:14:18.594 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.596 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.597 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 21:14:18.598 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 21:14:18.606 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-23 21:14:18.620 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-23 21:14:18.623 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-23 21:14:18.627 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-23 21:14:18.629 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-23 21:14:18.682 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:14:18.687 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:14:18.688 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:14:18.689 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:14:18.691 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:14:18.710 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:14:18.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.715 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.720 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.722 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 21:14:18.726 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-23 21:14:18.729 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-23 21:14:18.731 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-23 21:14:18.734 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-23 21:14:18.736 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-23 21:14:18.770 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-23 21:14:18.777 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.Name (string) Required MaxLength(120), 36], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 38], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 39] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
                8 -> 38
                9 -> 39
                10 -> 40
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 51], [Property: Schedule.DoctorId (int) Required FK Index, 52], [Property: Schedule.EndTime (DateTime) Required, 53], [Property: Schedule.Shift (AppointmentShift) Required, 54], [Property: Schedule.StartTime (DateTime) Required, 55], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 56] }
                12 -> 49
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:14:18.780 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:14:18.781 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:14:18.782 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:14:18.783 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:14:18.796 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:14:18.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.826 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.834 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:14:18.878 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.880 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 81ms reading results.
2025-11-23 21:14:18.884 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-23 21:14:18.888 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Phone (string) MaxLength(25), 7], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:14:18.890 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:14:18.891 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:14:18.892 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:14:18.894 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:14:18.900 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:14:18.902 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.904 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:14:18.908 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && a.Time == __time_2)'
2025-11-23 21:14:18.914 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Time == @__time_2))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:14:18.923 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:14:18.924 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:14:18.925 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:14:18.927 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:14:18.933 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:14:18.936 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.937 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 21:14:18.939 +02:00 [WRN] Doctor 1 already has an appointment at "2025-12-14" "2025-11-21T15:33:47.5410000Z"
2025-11-23 21:14:18.980 +02:00 [DBG] Rolling back transaction.
2025-11-23 21:14:18.983 +02:00 [DBG] Rolled back transaction.
2025-11-23 21:14:18.983 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:18.985 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:14:18.986 +02:00 [ERR] Failed to create appointment for PatientId: 2, DoctorId: 1
System.ArgumentException: Doctor already has an appointment at this time.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 94
2025-11-23 21:14:19.018 +02:00 [DBG] Disposing transaction.
2025-11-23 21:14:19.051 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 692.1521ms
2025-11-23 21:14:19.053 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:14:19.109 +02:00 [ERR]  Exception caught: Doctor already has an appointment at this time.
System.ArgumentException: Doctor already has an appointment at this time.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 94
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 128
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 129
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-23 21:14:19.132 +02:00 [DBG] Connection id "0HNHAOFNRM0DA" completed keep alive response.
2025-11-23 21:14:19.133 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:14:19.134 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:14:19.135 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:14:19.136 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/json 793.7959ms
2025-11-23 21:15:09.378 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 21:15:09.382 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 21:15:09.383 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 21:15:09.384 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:09.385 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:15:09.386 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:15:09.386 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:09.387 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:15:09.389 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:15:09.390 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:15:09.391 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:15:09.393 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:15:09.394 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:15:09.395 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:15:09.397 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:15:09.398 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:15:09.399 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 21:15:09.401 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:15:09.402 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000002": started reading request body.
2025-11-23 21:15:09.403 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000002": done reading request body.
2025-11-23 21:15:09.404 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 21:15:09.405 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:09.406 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:09.407 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:15:09.409 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:09.410 +02:00 [INF] Add Appointment called at "2025-11-23T21:15:09.4109043+02:00"
2025-11-23 21:15:09.411 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-12-14", Time: "2025-11-21T15:33:47.5410000Z"
2025-11-23 21:15:09.414 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:15:09.417 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:15:09.421 +02:00 [DBG] Created DbConnection. (3ms).
2025-11-23 21:15:09.424 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.425 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.427 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 21:15:09.428 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 21:15:09.429 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:09.430 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:09.431 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:09.433 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:15:09.450 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:15:09.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.454 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.457 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.458 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 21:15:09.460 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:09.460 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:09.461 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:09.463 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:15:09.477 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:15:09.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.481 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.482 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.484 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.486 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:09.489 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.490 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-23 21:15:09.492 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:09.493 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:09.494 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:09.495 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:15:09.501 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:15:09.503 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.504 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:15:09.505 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:09.506 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:09.507 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:09.509 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:15:09.513 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:15:09.515 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.517 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:15:09.518 +02:00 [WRN] Doctor 1 already has an appointment at "2025-12-14" "2025-11-21T15:33:47.5410000Z"
2025-11-23 21:15:09.534 +02:00 [DBG] Rolling back transaction.
2025-11-23 21:15:09.535 +02:00 [DBG] Rolled back transaction.
2025-11-23 21:15:09.536 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.537 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:15:09.538 +02:00 [ERR] Failed to create appointment for PatientId: 2, DoctorId: 1
System.ArgumentException: Doctor already has an appointment at this time.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 94
2025-11-23 21:15:09.556 +02:00 [DBG] Disposing transaction.
2025-11-23 21:15:09.593 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 197.731ms
2025-11-23 21:15:09.595 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:09.631 +02:00 [ERR]  Exception caught: Doctor already has an appointment at this time.
System.ArgumentException: Doctor already has an appointment at this time.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 94
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 128
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 129
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-23 21:15:09.638 +02:00 [DBG] Connection id "0HNHAOFNRM0DA" completed keep alive response.
2025-11-23 21:15:09.639 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:15:09.640 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:09.642 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:15:09.643 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/json 265.0847ms
2025-11-23 21:15:14.028 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 21:15:14.031 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 21:15:14.032 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 21:15:14.033 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:14.034 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:15:14.035 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:15:14.037 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:14.038 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:15:14.039 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:15:14.041 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:15:14.043 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:15:14.045 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:15:14.046 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:15:14.048 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:15:14.053 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:15:14.055 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:15:14.056 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 21:15:14.057 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:15:14.058 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000003": started reading request body.
2025-11-23 21:15:14.059 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000003": done reading request body.
2025-11-23 21:15:14.061 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 21:15:14.062 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:14.063 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:14.064 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:15:14.065 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:14.067 +02:00 [INF] Add Appointment called at "2025-11-23T21:15:14.0670082+02:00"
2025-11-23 21:15:14.067 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-12-14", Time: "2025-11-21T16:33:47.5410000Z"
2025-11-23 21:15:14.070 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:15:14.079 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:15:14.079 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:15:14.080 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.082 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.083 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 21:15:14.084 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 21:15:14.086 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:14.087 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:14.088 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:14.089 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:15:14.106 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:15:14.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.110 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.113 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.115 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-23 21:15:14.117 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:14.118 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:14.119 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:14.121 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:15:14.135 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:15:14.138 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.140 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.143 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.146 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.148 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.150 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.152 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-23 21:15:14.154 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:14.155 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:14.157 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:14.158 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:15:14.163 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:15:14.165 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.167 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:15:14.169 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:14.170 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:14.172 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:14.173 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:15:14.179 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:15:14.182 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.184 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:15:14.198 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.219 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.222 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.225 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.232 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:14.265 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:14.268 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:15:14.270 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:14.271 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:14.277 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 21:15:14.291 +02:00 [DBG] Created transaction savepoint.
2025-11-23 21:15:14.292 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:14.293 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:14.296 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-23 21:15:14.298 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 21:15:14.307 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 21:15:14.310 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 21:15:14.313 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.314 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 21:15:14.317 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.318 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:15:14.323 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.341 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.343 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.345 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:14.354 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:14.355 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:15:14.356 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:14.357 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:14.359 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 21:15:14.361 +02:00 [DBG] Created transaction savepoint.
2025-11-23 21:15:14.363 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:14.364 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:14.367 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-23 21:15:14.369 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 21:15:14.378 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 21:15:14.380 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 21:15:14.383 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.384 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 21:15:14.386 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:14.388 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:15:14.389 +02:00 [DBG] Committing transaction.
2025-11-23 21:15:14.391 +02:00 [DBG] Committed transaction.
2025-11-23 21:15:14.391 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.392 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:15:14.394 +02:00 [INF] Appointment created successfully with ID: 6
2025-11-23 21:15:14.398 +02:00 [DBG] Disposing transaction.
2025-11-23 21:15:14.400 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:15:14.402 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:15:14.403 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:15:14.404 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:15:14.405 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:15:14.406 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 21:15:14.425 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[6],action=[GetById],controller=[Appointment])
2025-11-23 21:15:14.429 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/6 and 
2025-11-23 21:15:14.432 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/6
2025-11-23 21:15:14.439 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 391.4988ms
2025-11-23 21:15:14.440 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:14.441 +02:00 [DBG] Connection id "0HNHAOFNRM0DA" completed keep alive response.
2025-11-23 21:15:14.443 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:15:14.443 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:14.445 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:15:14.447 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 418.2507ms
2025-11-23 21:15:23.234 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 183
2025-11-23 21:15:23.236 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-23 21:15:23.238 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-23 21:15:23.239 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:23.240 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:15:23.240 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:15:23.241 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:23.242 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:15:23.244 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:15:23.245 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:15:23.247 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:15:23.248 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:15:23.249 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:15:23.251 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:15:23.252 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:15:23.253 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:15:23.254 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-23 21:15:23.255 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 21:15:23.257 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000004": started reading request body.
2025-11-23 21:15:23.258 +02:00 [DBG] Connection id "0HNHAOFNRM0DA", Request id "0HNHAOFNRM0DA:00000004": done reading request body.
2025-11-23 21:15:23.259 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-23 21:15:23.259 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:23.260 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:23.261 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-23 21:15:23.263 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-23 21:15:23.264 +02:00 [INF] Add Appointment called at "2025-11-23T21:15:23.2641594+02:00"
2025-11-23 21:15:23.265 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-12-15", Time: "2025-11-21T16:33:47.5410000Z"
2025-11-23 21:15:23.266 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:15:23.268 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:15:23.269 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:15:23.270 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.271 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.272 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-23 21:15:23.273 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-23 21:15:23.274 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:23.275 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:23.277 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:23.278 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:15:23.291 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-23 21:15:23.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.295 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.297 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.298 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 21:15:23.299 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:23.300 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:23.301 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:23.302 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:15:23.312 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:15:23.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.316 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.318 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.323 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.324 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-23 21:15:23.325 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:23.326 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:23.328 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:23.329 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:15:23.331 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-23 21:15:23.333 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.334 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:15:23.335 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:23.336 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:23.337 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:23.338 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:15:23.343 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2), @__time_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Time] = @__time_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-23 21:15:23.345 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.346 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:15:23.349 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.350 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.351 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.353 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.355 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:23.356 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:23.357 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:15:23.357 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:23.358 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:23.360 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 21:15:23.361 +02:00 [DBG] Created transaction savepoint.
2025-11-23 21:15:23.362 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:23.363 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:23.364 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:15:23.365 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 21:15:23.369 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Status], [Time], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-23 21:15:23.371 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 21:15:23.372 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.373 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 21:15:23.375 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.376 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:15:23.377 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.379 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.380 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.381 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.382 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:23.383 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:23.384 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:15:23.385 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:15:23.387 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:15:23.388 +02:00 [DBG] Creating transaction savepoint.
2025-11-23 21:15:23.390 +02:00 [DBG] Created transaction savepoint.
2025-11-23 21:15:23.390 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:15:23.391 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:15:23.392 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:15:23.394 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 21:15:23.397 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-23 21:15:23.399 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-23 21:15:23.400 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.401 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 21:15:23.403 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:15:23.404 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:15:23.405 +02:00 [DBG] Committing transaction.
2025-11-23 21:15:23.407 +02:00 [DBG] Committed transaction.
2025-11-23 21:15:23.408 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.409 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:15:23.410 +02:00 [INF] Appointment created successfully with ID: 7
2025-11-23 21:15:23.411 +02:00 [DBG] Disposing transaction.
2025-11-23 21:15:23.412 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:15:23.414 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:15:23.414 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:15:23.415 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:15:23.416 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:15:23.417 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-23 21:15:23.418 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[7],action=[GetById],controller=[Appointment])
2025-11-23 21:15:23.419 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/7 and 
2025-11-23 21:15:23.421 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/7
2025-11-23 21:15:23.423 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 171.7827ms
2025-11-23 21:15:23.423 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-23 21:15:23.424 +02:00 [DBG] Connection id "0HNHAOFNRM0DA" completed keep alive response.
2025-11-23 21:15:23.425 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:15:23.426 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:15:23.427 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:15:23.429 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 194.7147ms
2025-11-23 21:17:21.324 +02:00 [DBG] Connection id "0HNHAOFNRM0DB" accepted.
2025-11-23 21:17:21.328 +02:00 [DBG] Connection id "0HNHAOFNRM0DB" started.
2025-11-23 21:17:21.339 +02:00 [DBG] Connection 0HNHAOFNRM0DB established using the following protocol: "Tls13"
2025-11-23 21:17:21.348 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7217/api/Doctor/doctor/1/date/2025-12-14 - null 0
2025-11-23 21:17:21.356 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/doctor/1/date/2025-12-14'
2025-11-23 21:17:21.361 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.CancelAppointmentsForDoctorbyDate (Hospital)' with route pattern 'api/Doctor/doctor/{doctorId:int}/date/{date:datetime}' is valid for the request path '/api/Doctor/doctor/1/date/2025-12-14'
2025-11-23 21:17:21.362 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.CancelAppointmentsForDoctorbyDate (Hospital)'
2025-11-23 21:17:21.363 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:17:21.364 +02:00 [DBG] The request has an origin header: 'https://localhost:7217'.
2025-11-23 21:17:21.365 +02:00 [INF] CORS policy execution failed.
2025-11-23 21:17:21.366 +02:00 [INF] Request origin https://localhost:7217 does not have permission to access the resource.
2025-11-23 21:17:21.368 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:17:21.369 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.CancelAppointmentsForDoctorbyDate (Hospital)'
2025-11-23 21:17:21.374 +02:00 [INF] Route matched with {action = "CancelAppointmentsForDoctorbyDate", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CancelAppointmentsForDoctorbyDate(Int32, System.DateTime) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-23 21:17:21.375 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:17:21.377 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:17:21.378 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:17:21.380 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:17:21.381 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:17:21.382 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 21:17:21.385 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-23 21:17:21.386 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 21:17:21.387 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-23 21:17:21.390 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 21:17:21.391 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-23 21:17:21.392 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-23 21:17:21.393 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-23 21:17:21.394 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' ...
2025-11-23 21:17:21.395 +02:00 [DBG] Attempting to bind parameter 'date' of type 'System.DateTime' using the name 'date' in request data ...
2025-11-23 21:17:21.397 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 21:17:21.398 +02:00 [DBG] Done attempting to bind parameter 'date' of type 'System.DateTime'.
2025-11-23 21:17:21.399 +02:00 [DBG] Attempting to validate the bound parameter 'date' of type 'System.DateTime' ...
2025-11-23 21:17:21.400 +02:00 [DBG] Done attempting to validate the bound parameter 'date' of type 'System.DateTime'.
2025-11-23 21:17:21.402 +02:00 [INF] GetAppointmentsForDoctor called at "2025-11-23T21:17:21.4025913+02:00"
2025-11-23 21:17:21.405 +02:00 [INF] Cancelling appointments for doctor ID 1 on date "2025-11-23T19:17:21.4055259Z"
2025-11-23 21:17:21.407 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:17:21.408 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:17:21.409 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:17:21.410 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.411 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.412 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:17:21.413 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:17:21.414 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:17:21.415 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:17:21.435 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-23 21:17:21.437 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.438 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.440 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.441 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.442 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.444 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.445 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-23 21:17:21.446 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.447 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:17:21.450 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Branch)
    .Where(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && (int)a.Status == 2)'
2025-11-23 21:17:21.452 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 21:17:21.453 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-23 21:17:21.454 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 21:17:21.468 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 17], [Property: User.AccessFailedCount (int) Required, 18], [Property: User.ConcurrencyStamp (string) Concurrency, 19], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: User.DateOfBirth (DateOnly?), 21], [Property: User.Email (string) Index MaxLength(256), 22], [Property: User.EmailConfirmed (bool) Required, 23], [Property: User.FullName (string) Required MaxLength(150), 24], [Property: User.Gender (GenderType?) MaxLength(10), 25], [Property: User.LockoutEnabled (bool) Required, 26], [Property: User.LockoutEnd (DateTimeOffset?), 27], [Property: User.NormalizedEmail (string) Index MaxLength(256), 28], [Property: User.NormalizedUserName (string) Index MaxLength(256), 29], [Property: User.PasswordHash (string), 30], [Property: User.PhoneNumber (string), 31], [Property: User.PhoneNumberConfirmed (bool) Required, 32], [Property: User.RefreshToken (string), 33], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 34], [Property: User.Role (string) Required MaxLength(50), 35], [Property: User.SecurityStamp (string), 36], [Property: User.TwoFactorEnabled (bool) Required, 37], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38], [Property: User.UserName (string) MaxLength(256), 39] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Phone (string) MaxLength(25), 47], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 48] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Status == N'Confirmed')), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 21:17:21.471 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.472 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.473 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:17:21.474 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:17:21.476 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:17:21.477 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 21:17:21.485 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-23 21:17:21.490 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.493 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.494 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.495 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.498 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.500 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.502 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.504 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.505 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 18ms reading results.
2025-11-23 21:17:21.506 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.507 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:17:21.510 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.511 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:17:21.513 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:17:21.514 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:17:21.514 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:17:21.515 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:17:21.517 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.518 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.519 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:17:21.520 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:17:21.521 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:17:21.522 +02:00 [DBG] Executing DbCommand [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [Notes] = @p5, [PatientId] = @p6, [PaymentMethod] = @p7, [Status] = @p8, [Time] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [AppointmentId] = @p11;
2025-11-23 21:17:21.529 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [Notes] = @p5, [PatientId] = @p6, [PaymentMethod] = @p7, [Status] = @p8, [Time] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [AppointmentId] = @p11;
2025-11-23 21:17:21.531 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.531 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-23 21:17:21.532 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:21.533 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:17:21.534 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:21.536 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:17:25.062 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:25.064 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:17:25.065 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:17:25.066 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:17:25.067 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:17:25.067 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:17:25.069 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:25.070 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:25.071 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:17:25.072 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:17:25.073 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:17:25.075 +02:00 [DBG] Executing DbCommand [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [Notes] = @p5, [PatientId] = @p6, [PaymentMethod] = @p7, [Status] = @p8, [Time] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [AppointmentId] = @p11;
2025-11-23 21:17:25.081 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [Notes] = @p5, [PatientId] = @p6, [PaymentMethod] = @p7, [Status] = @p8, [Time] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [AppointmentId] = @p11;
2025-11-23 21:17:25.083 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:25.084 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 21:17:25.085 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:25.086 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:17:25.087 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:17:25.088 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:17:26.887 +02:00 [INF] Cancelled 2 appointments for doctor ID 1 on date "2025-11-23T19:17:26.8869806Z"
2025-11-23 21:17:26.889 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:17:26.890 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:17:26.891 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:17:26.891 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:17:26.892 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-23 21:17:26.893 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-23 21:17:26.894 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.CancelAppointmentsForDoctorbyDate (Hospital) in 5512.3057ms
2025-11-23 21:17:26.896 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.CancelAppointmentsForDoctorbyDate (Hospital)'
2025-11-23 21:17:26.897 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:17:26.898 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:17:26.899 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 21:17:26.900 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7217/api/Doctor/doctor/1/date/2025-12-14 - 200 null text/plain; charset=utf-8 5552.6384ms
2025-11-23 21:17:28.519 +02:00 [DBG] Connection id "0HNHAOFNRM0DB" received FIN.
2025-11-23 21:17:28.520 +02:00 [DBG] Connection id "0HNHAOFNRM0DB" is closed. The last processed stream ID was 1.
2025-11-23 21:17:28.520 +02:00 [DBG] The connection queue processing loop for 0HNHAOFNRM0DB completed.
2025-11-23 21:17:28.521 +02:00 [DBG] Connection id "0HNHAOFNRM0DB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:17:28.523 +02:00 [DBG] Connection id "0HNHAOFNRM0DB" stopped.
2025-11-23 21:20:54.731 +02:00 [DBG] Connection id "0HNHAOFNRM0DC" accepted.
2025-11-23 21:20:54.737 +02:00 [DBG] Connection id "0HNHAOFNRM0DC" started.
2025-11-23 21:20:54.742 +02:00 [DBG] Connection 0HNHAOFNRM0DC established using the following protocol: "Tls13"
2025-11-23 21:20:54.749 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-23 21:20:54.757 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-23 21:20:54.758 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-23 21:20:54.759 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:20:54.760 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:20:54.761 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:20:54.762 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:20:54.765 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:20:54.767 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:20:54.768 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:20:54.769 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:20:54.771 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:20:54.773 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:20:54.774 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:20:54.775 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:20:54.777 +02:00 [INF] Get All Appointments called at "2025-11-23T21:20:54.7776967+02:00"
2025-11-23 21:20:54.780 +02:00 [INF] Fetching all appointments
2025-11-23 21:20:54.782 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:20:54.785 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-23 21:20:54.787 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 21:20:54.790 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-23 21:20:54.791 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 21:20:54.804 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Phone (string) MaxLength(25), 34], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 35] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 21:20:54.806 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:20:54.807 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:20:54.808 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:20:54.809 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:20:54.811 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:20:54.812 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:20:54.813 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:20:54.815 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:20:54.834 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:20:54.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.837 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.840 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.841 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.843 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.846 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.847 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.850 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.851 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.853 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.855 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.856 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.859 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.860 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.862 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.863 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.864 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.867 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.868 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:20:54.871 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:20:54.872 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-23 21:20:54.873 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:20:54.875 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:20:54.892 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:20:54.894 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:20:54.895 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:20:54.896 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:20:54.897 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:20:54.898 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 21:20:54.901 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 127.3365ms
2025-11-23 21:20:54.903 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:20:54.905 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:20:54.906 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:20:54.908 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:20:54.910 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 161.5484ms
2025-11-23 21:20:58.554 +02:00 [DBG] Connection id "0HNHAOFNRM0DC" received FIN.
2025-11-23 21:20:58.556 +02:00 [DBG] Connection id "0HNHAOFNRM0DC" is closed. The last processed stream ID was 1.
2025-11-23 21:20:58.556 +02:00 [DBG] The connection queue processing loop for 0HNHAOFNRM0DC completed.
2025-11-23 21:20:58.557 +02:00 [DBG] Connection id "0HNHAOFNRM0DC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:20:58.559 +02:00 [DBG] Connection id "0HNHAOFNRM0DC" stopped.
2025-11-23 21:22:17.331 +02:00 [DBG] Connection id "0HNHAOFNRM0DD" received FIN.
2025-11-23 21:22:17.336 +02:00 [DBG] Connection id "0HNHAOFNRM0DD" accepted.
2025-11-23 21:22:17.342 +02:00 [DBG] Connection id "0HNHAOFNRM0DD" started.
2025-11-23 21:22:17.346 +02:00 [DBG] Connection id "0HNHAOFNRM0DE" accepted.
2025-11-23 21:22:17.350 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:22:17.350 +02:00 [DBG] Connection id "0HNHAOFNRM0DE" started.
2025-11-23 21:22:17.352 +02:00 [DBG] Connection id "0HNHAOFNRM0DD" stopped.
2025-11-23 21:22:17.353 +02:00 [DBG] Connection id "0HNHAOFNRM0DD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:22:17.357 +02:00 [DBG] Connection 0HNHAOFNRM0DE established using the following protocol: "Tls13"
2025-11-23 21:22:17.363 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll
 - null null
2025-11-23 21:22:17.366 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll
'
2025-11-23 21:22:17.370 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetById (Hospital)' with route pattern 'api/Appointment/{id:int}' was rejected by constraint 'id':'Microsoft.AspNetCore.Routing.Constraints.IntRouteConstraint' with value 'GetAll
' for the request path '/api/Appointment/GetAll%0A'
2025-11-23 21:22:17.372 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetById (Hospital)' with route pattern 'api/Appointment/{id:int}' is not valid for the request path '/api/Appointment/GetAll
'
2025-11-23 21:22:17.373 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:22:17.375 +02:00 [DBG] The request path  does not match the path filter
2025-11-23 21:22:17.376 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:22:17.377 +02:00 [DBG] Connection id "0HNHAOFNRM0DE" completed keep alive response.
2025-11-23 21:22:17.378 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll
 - 404 0 null 15.1952ms
2025-11-23 21:22:17.382 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7217/api/Appointment/GetAll%0A, Response status code: 404
2025-11-23 21:22:22.186 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-23 21:22:22.188 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-23 21:22:22.189 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-23 21:22:22.190 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:22:22.191 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:22:22.191 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:22:22.193 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:22:22.194 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:22:22.195 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:22:22.196 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:22:22.197 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:22:22.199 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:22:22.200 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:22:22.201 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:22:22.203 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:22:22.204 +02:00 [INF] Get All Appointments called at "2025-11-23T21:22:22.2042538+02:00"
2025-11-23 21:22:22.205 +02:00 [INF] Fetching all appointments
2025-11-23 21:22:22.206 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:22:22.208 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:22:22.209 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:22:22.210 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:22:22.211 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:22:22.212 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:22:22.213 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:22:22.215 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:22:22.216 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:22:22.234 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:22:22.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.238 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.240 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.243 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.246 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.248 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.251 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.254 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.256 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.258 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.259 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.263 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.264 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.265 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.267 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.268 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.269 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.270 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.272 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.273 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:22:22.276 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:22:22.278 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 41ms reading results.
2025-11-23 21:22:22.279 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:22:22.281 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:22:22.282 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:22:22.284 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:22:22.285 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:22:22.286 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:22:22.287 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:22:22.288 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 21:22:22.290 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 88.7975ms
2025-11-23 21:22:22.292 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:22:22.293 +02:00 [DBG] Connection id "0HNHAOFNRM0DE" completed keep alive response.
2025-11-23 21:22:22.294 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:22:22.295 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:22:22.297 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:22:22.298 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 112.4688ms
2025-11-23 21:31:49.009 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 21:31:49.160 +02:00 [DBG] Hosting starting
2025-11-23 21:31:49.186 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 21:31:49.196 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 21:31:49.210 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 21:31:49.212 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 21:31:49.213 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 21:31:49.219 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 21:31:49.224 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 21:31:49.225 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 21:31:49.226 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 21:31:49.230 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 21:31:49.232 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 21:31:49.235 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 21:31:49.236 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 21:31:49.240 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 21:31:49.242 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 21:31:49.244 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 21:31:49.245 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 21:31:49.250 +02:00 [DBG] Middleware loaded
2025-11-23 21:31:49.252 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 21:31:49.254 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 21:31:49.347 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 21:31:49.442 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 21:31:49.443 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 21:31:49.444 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 21:31:49.444 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 21:31:49.445 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 21:31:49.445 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 21:31:49.533 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 21:31:49.533 +02:00 [INF] Hosting environment: Development
2025-11-23 21:31:49.534 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 21:31:49.535 +02:00 [DBG] Hosting started
2025-11-23 21:31:49.849 +02:00 [DBG] Connection id "0HNHAORPCMNRB" received FIN.
2025-11-23 21:31:49.856 +02:00 [DBG] Connection id "0HNHAORPCMNRB" accepted.
2025-11-23 21:31:49.857 +02:00 [DBG] Connection id "0HNHAORPCMNRB" started.
2025-11-23 21:31:49.874 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 21:31:50.061 +02:00 [DBG] Connection id "0HNHAORPCMNRB" stopped.
2025-11-23 21:31:50.065 +02:00 [DBG] Connection id "0HNHAORPCMNRB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:31:50.141 +02:00 [DBG] Connection id "0HNHAORPCMNRC" accepted.
2025-11-23 21:31:50.143 +02:00 [DBG] Connection id "0HNHAORPCMNRC" started.
2025-11-23 21:31:50.190 +02:00 [DBG] Connection 0HNHAORPCMNRC established using the following protocol: "Tls13"
2025-11-23 21:31:50.279 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 21:31:50.393 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 21:31:50.419 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 21:31:50.421 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:31:50.470 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 21:31:50.473 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 21:31:50.489 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 21:31:50.490 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 21:31:50.494 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 225.1367ms
2025-11-23 21:31:50.502 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 21:31:50.511 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 21:31:50.514 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 12.0798ms
2025-11-23 21:31:50.531 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 21:31:50.573 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.9617ms
2025-11-23 21:31:50.635 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 21:31:50.638 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 21:31:50.639 +02:00 [DBG] Request did not match any endpoints
2025-11-23 21:31:50.678 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 43.7747ms
2025-11-23 21:31:53.671 +02:00 [DBG] Connection id "0HNHAORPCMNRC" received FIN.
2025-11-23 21:31:53.675 +02:00 [DBG] The connection queue processing loop for 0HNHAORPCMNRC completed.
2025-11-23 21:31:53.676 +02:00 [DBG] Connection id "0HNHAORPCMNRC" is closed. The last processed stream ID was 7.
2025-11-23 21:31:53.677 +02:00 [DBG] Connection id "0HNHAORPCMNRC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:31:53.681 +02:00 [DBG] Connection id "0HNHAORPCMNRC" stopped.
2025-11-23 21:31:57.301 +02:00 [DBG] Connection id "0HNHAORPCMNRD" accepted.
2025-11-23 21:31:57.302 +02:00 [DBG] Connection id "0HNHAORPCMNRD" started.
2025-11-23 21:31:57.306 +02:00 [DBG] Connection 0HNHAORPCMNRD established using the following protocol: "Tls13"
2025-11-23 21:31:57.309 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-23 21:31:57.318 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-23 21:31:57.323 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-23 21:31:57.325 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:31:57.328 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:31:57.368 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:31:57.371 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:31:57.400 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:31:57.403 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:31:57.405 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:31:57.406 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:31:57.408 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:31:57.410 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:31:57.413 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:31:57.559 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 21:31:57.781 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:31:57.784 +02:00 [INF] Get All Appointments called at "2025-11-23T21:31:57.7845649+02:00"
2025-11-23 21:31:57.786 +02:00 [INF] Fetching all appointments
2025-11-23 21:31:58.299 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 21:31:58.301 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 21:31:58.302 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 21:31:58.304 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 21:31:58.305 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 21:31:58.426 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 21:31:58.427 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 21:31:58.576 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:31:58.625 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-23 21:31:58.685 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 21:31:58.688 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-23 21:31:58.689 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 21:31:58.856 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Phone (string) MaxLength(25), 34], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 35] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 21:31:58.885 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:31:58.904 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-23 21:31:58.908 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:31:59.154 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:31:59.157 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:31:59.161 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-23 21:31:59.164 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-23 21:31:59.171 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:31:59.220 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:31:59.265 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.307 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.331 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.362 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.365 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.376 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.377 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.379 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.381 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.383 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.384 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.384 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.385 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.386 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.387 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.388 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.390 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.391 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.392 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:31:59.398 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:31:59.402 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 177ms reading results.
2025-11-23 21:31:59.405 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:31:59.411 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (5ms).
2025-11-23 21:31:59.426 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:31:59.430 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:31:59.430 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:31:59.431 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:31:59.432 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:31:59.434 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 21:31:59.454 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 2040.6109ms
2025-11-23 21:31:59.456 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:31:59.459 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:31:59.462 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:31:59.464 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 21:31:59.465 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 2156.296ms
2025-11-23 21:32:03.673 +02:00 [DBG] Connection id "0HNHAORPCMNRD" received FIN.
2025-11-23 21:32:03.675 +02:00 [DBG] Connection id "0HNHAORPCMNRD" is closed. The last processed stream ID was 1.
2025-11-23 21:32:03.675 +02:00 [DBG] The connection queue processing loop for 0HNHAORPCMNRD completed.
2025-11-23 21:32:03.676 +02:00 [DBG] Connection id "0HNHAORPCMNRD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:32:03.679 +02:00 [DBG] Connection id "0HNHAORPCMNRD" stopped.
2025-11-23 21:32:18.490 +02:00 [DBG] Connection id "0HNHAORPCMNRE" accepted.
2025-11-23 21:32:18.491 +02:00 [DBG] Connection id "0HNHAORPCMNRE" started.
2025-11-23 21:32:18.495 +02:00 [DBG] Connection 0HNHAORPCMNRE established using the following protocol: "Tls13"
2025-11-23 21:32:18.505 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7217/api/Appointment/MarkAsCompleted/2 - null 0
2025-11-23 21:32:18.512 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/MarkAsCompleted/2'
2025-11-23 21:32:18.513 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.MarkAsCompleted (Hospital)' with route pattern 'api/Appointment/MarkAsCompleted/{id:int}' is valid for the request path '/api/Appointment/MarkAsCompleted/2'
2025-11-23 21:32:18.515 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.MarkAsCompleted (Hospital)'
2025-11-23 21:32:18.516 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:32:18.519 +02:00 [DBG] The request has an origin header: 'https://localhost:7217'.
2025-11-23 21:32:18.521 +02:00 [INF] CORS policy execution failed.
2025-11-23 21:32:18.522 +02:00 [INF] Request origin https://localhost:7217 does not have permission to access the resource.
2025-11-23 21:32:18.526 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:32:18.527 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.MarkAsCompleted (Hospital)'
2025-11-23 21:32:18.538 +02:00 [INF] Route matched with {action = "MarkAsCompleted", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsCompleted(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:32:18.539 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:32:18.540 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:32:18.542 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:32:18.543 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:32:18.545 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:32:18.546 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:32:18.548 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:32:18.564 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-23 21:32:18.567 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-23 21:32:18.569 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-23 21:32:18.570 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-23 21:32:18.571 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-23 21:32:18.574 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-23 21:32:18.577 +02:00 [INF] Mark Appointment as Completed called at "2025-11-23T21:32:18.5772432+02:00"
2025-11-23 21:32:18.616 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:32:18.623 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .FirstOrDefault(a => a.AppointmentId == __id_0)'
2025-11-23 21:32:18.628 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-23 21:32:18.629 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-23 21:32:18.630 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-23 21:32:18.647 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.Time (DateTime) Required, 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
                2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
                3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Phone (string) MaxLength(25), 34], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 35] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Status, a.Time, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Phone, b.UpdatedAt
            FROM Appointments AS a
            INNER JOIN Patients AS p ON a.PatientId == p.PatientId
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Branches AS b ON a.BranchId == b.BranchId
            WHERE a.AppointmentId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 21:32:18.655 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:32:18.656 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:32:18.657 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.658 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.659 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:32:18.660 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 21:32:18.663 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-23 21:32:18.666 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[AppointmentId] = @__id_0
2025-11-23 21:32:18.701 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[AppointmentId] = @__id_0
2025-11-23 21:32:18.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.704 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.706 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.708 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.709 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.711 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.713 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-23 21:32:18.714 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.715 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-23 21:32:18.726 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.730 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:32:18.765 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:32:18.774 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 21:32:18.777 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 21:32:18.778 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 21:32:18.851 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.853 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.857 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:32:18.858 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:32:18.864 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-23 21:32:18.865 +02:00 [DBG] Executing DbCommand [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [Notes] = @p5, [PatientId] = @p6, [PaymentMethod] = @p7, [Status] = @p8, [Time] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [AppointmentId] = @p11;
2025-11-23 21:32:18.874 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [Notes] = @p5, [PatientId] = @p6, [PaymentMethod] = @p7, [Status] = @p8, [Time] = @p9, [UpdatedAt] = @p10
OUTPUT 1
WHERE [AppointmentId] = @p11;
2025-11-23 21:32:18.881 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.882 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-23 21:32:18.885 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.886 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:32:18.890 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:18.892 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 21:32:18.894 +02:00 [INF] Appointment with ID 2 marked as completed
2025-11-23 21:32:18.895 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:32:18.896 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:32:18.897 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:32:18.897 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:32:18.898 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-23 21:32:18.899 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-11-23 21:32:18.901 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.MarkAsCompleted (Hospital) in 354.8762ms
2025-11-23 21:32:18.902 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.MarkAsCompleted (Hospital)'
2025-11-23 21:32:18.903 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:32:18.903 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:18.904 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 21:32:18.905 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7217/api/Appointment/MarkAsCompleted/2 - 200 null text/plain; charset=utf-8 400.5117ms
2025-11-23 21:32:23.680 +02:00 [DBG] Connection id "0HNHAORPCMNRE" received FIN.
2025-11-23 21:32:23.681 +02:00 [DBG] Connection id "0HNHAORPCMNRE" is closed. The last processed stream ID was 1.
2025-11-23 21:32:23.682 +02:00 [DBG] The connection queue processing loop for 0HNHAORPCMNRE completed.
2025-11-23 21:32:23.682 +02:00 [DBG] Connection id "0HNHAORPCMNRE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:32:23.685 +02:00 [DBG] Connection id "0HNHAORPCMNRE" stopped.
2025-11-23 21:32:25.362 +02:00 [DBG] Connection id "0HNHAORPCMNRF" accepted.
2025-11-23 21:32:25.363 +02:00 [DBG] Connection id "0HNHAORPCMNRF" started.
2025-11-23 21:32:25.367 +02:00 [DBG] Connection 0HNHAORPCMNRF established using the following protocol: "Tls13"
2025-11-23 21:32:25.371 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-23 21:32:25.375 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-23 21:32:25.376 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-23 21:32:25.378 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:32:25.379 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 21:32:25.382 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 21:32:25.383 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:32:25.384 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-23 21:32:25.386 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 21:32:25.387 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 21:32:25.389 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 21:32:25.390 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 21:32:25.392 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 21:32:25.393 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:32:25.400 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-23 21:32:25.401 +02:00 [INF] Get All Appointments called at "2025-11-23T21:32:25.4016369+02:00"
2025-11-23 21:32:25.402 +02:00 [INF] Fetching all appointments
2025-11-23 21:32:25.411 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 21:32:25.417 +02:00 [DBG] Creating DbConnection.
2025-11-23 21:32:25.418 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-23 21:32:25.419 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:25.421 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:25.422 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 21:32:25.423 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 21:32:25.424 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 21:32:25.425 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:32:25.435 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Status], [a].[Time], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-23 21:32:25.437 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.439 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.440 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.441 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.444 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.447 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.448 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.450 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.453 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.455 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.456 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.459 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.460 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.463 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.465 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.467 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.468 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 21:32:25.470 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:25.471 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 33ms reading results.
2025-11-23 21:32:25.472 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:25.474 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 21:32:25.476 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 21:32:25.477 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 21:32:25.478 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 21:32:25.479 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 21:32:25.479 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 21:32:25.480 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 21:32:25.482 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 88.6722ms
2025-11-23 21:32:25.483 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-23 21:32:25.484 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 21:32:25.485 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 21:32:25.486 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-23 21:32:25.487 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 115.8334ms
2025-11-23 21:32:33.681 +02:00 [DBG] Connection id "0HNHAORPCMNRF" received FIN.
2025-11-23 21:32:33.682 +02:00 [DBG] Connection id "0HNHAORPCMNRF" is closed. The last processed stream ID was 1.
2025-11-23 21:32:33.682 +02:00 [DBG] The connection queue processing loop for 0HNHAORPCMNRF completed.
2025-11-23 21:32:33.684 +02:00 [DBG] Connection id "0HNHAORPCMNRF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 21:32:33.686 +02:00 [DBG] Connection id "0HNHAORPCMNRF" stopped.
2025-11-23 22:04:16.584 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:04:16.699 +02:00 [DBG] Hosting starting
2025-11-23 22:04:16.724 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:04:16.733 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:04:16.748 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:04:16.749 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:04:16.751 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:04:16.756 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:04:16.761 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:04:16.762 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:04:16.763 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:04:16.767 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:04:16.770 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:04:16.772 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:04:16.774 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:04:16.778 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:04:16.780 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:04:16.782 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:04:16.784 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:04:16.789 +02:00 [DBG] Middleware loaded
2025-11-23 22:04:16.791 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:04:16.793 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:04:16.886 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:04:16.987 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:04:16.988 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:04:16.989 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:04:16.989 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:04:16.990 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:04:16.991 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:04:17.036 +02:00 [DBG] Connection id "0HNHAPDTMH46R" received FIN.
2025-11-23 22:04:17.043 +02:00 [DBG] Connection id "0HNHAPDTMH46R" accepted.
2025-11-23 22:04:17.045 +02:00 [DBG] Connection id "0HNHAPDTMH46R" started.
2025-11-23 22:04:17.068 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:04:17.091 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:04:17.280 +02:00 [INF] Hosting environment: Development
2025-11-23 22:04:17.281 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:04:17.282 +02:00 [DBG] Hosting started
2025-11-23 22:04:17.283 +02:00 [DBG] Connection id "0HNHAPDTMH46R" stopped.
2025-11-23 22:04:17.287 +02:00 [DBG] Connection id "0HNHAPDTMH46R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:04:17.370 +02:00 [DBG] Connection id "0HNHAPDTMH46S" accepted.
2025-11-23 22:04:17.372 +02:00 [DBG] Connection id "0HNHAPDTMH46S" started.
2025-11-23 22:04:17.413 +02:00 [DBG] Connection 0HNHAPDTMH46S established using the following protocol: "Tls13"
2025-11-23 22:04:17.497 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:04:17.619 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:04:17.648 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:04:17.650 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:04:17.704 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:04:17.706 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:04:17.724 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:04:17.727 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:04:17.731 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 243.1162ms
2025-11-23 22:04:17.808 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:04:17.808 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:04:17.816 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:04:17.818 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.5105ms
2025-11-23 22:04:17.861 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.2396ms
2025-11-23 22:04:17.901 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:04:17.904 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:04:17.905 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:04:17.944 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 43.736ms
2025-11-23 22:04:49.952 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:04:50.092 +02:00 [DBG] Hosting starting
2025-11-23 22:04:50.116 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:04:50.130 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:04:50.137 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:04:50.138 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:04:50.139 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:04:50.144 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:04:50.149 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:04:50.150 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:04:50.151 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:04:50.157 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:04:50.161 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:04:50.163 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:04:50.165 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:04:50.170 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:04:50.172 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:04:50.175 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:04:50.176 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:04:50.182 +02:00 [DBG] Middleware loaded
2025-11-23 22:04:50.184 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:04:50.187 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:04:50.266 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:04:50.363 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:04:50.365 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:04:50.366 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:04:50.367 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:04:50.367 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:04:50.368 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:04:50.456 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:04:50.457 +02:00 [INF] Hosting environment: Development
2025-11-23 22:04:50.458 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:04:50.459 +02:00 [DBG] Hosting started
2025-11-23 22:04:50.736 +02:00 [DBG] Connection id "0HNHAPE7NTH1N" accepted.
2025-11-23 22:04:50.737 +02:00 [DBG] Connection id "0HNHAPE7NTH1M" accepted.
2025-11-23 22:04:50.744 +02:00 [DBG] Connection id "0HNHAPE7NTH1M" started.
2025-11-23 22:04:50.744 +02:00 [DBG] Connection id "0HNHAPE7NTH1N" started.
2025-11-23 22:04:50.745 +02:00 [DBG] Connection id "0HNHAPE7NTH1M" received FIN.
2025-11-23 22:04:50.745 +02:00 [DBG] Connection id "0HNHAPE7NTH1N" received FIN.
2025-11-23 22:04:50.764 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:04:50.764 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:04:50.798 +02:00 [DBG] Connection id "0HNHAPE7NTH1N" stopped.
2025-11-23 22:04:50.798 +02:00 [DBG] Connection id "0HNHAPE7NTH1M" stopped.
2025-11-23 22:04:50.802 +02:00 [DBG] Connection id "0HNHAPE7NTH1M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:04:50.802 +02:00 [DBG] Connection id "0HNHAPE7NTH1N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:04:50.883 +02:00 [DBG] Connection id "0HNHAPE7NTH1O" accepted.
2025-11-23 22:04:50.885 +02:00 [DBG] Connection id "0HNHAPE7NTH1O" started.
2025-11-23 22:04:50.926 +02:00 [DBG] Connection 0HNHAPE7NTH1O established using the following protocol: "Tls13"
2025-11-23 22:04:51.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:04:51.137 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:04:51.166 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:04:51.168 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:04:51.216 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:04:51.219 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:04:51.234 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:04:51.236 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:04:51.240 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 207.9911ms
2025-11-23 22:04:51.251 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:04:51.261 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:04:51.264 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 13.298ms
2025-11-23 22:04:51.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:04:51.330 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.5425ms
2025-11-23 22:04:51.410 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:04:51.414 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:04:51.415 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:04:51.457 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.9412ms
2025-11-23 22:04:54.020 +02:00 [DBG] Connection id "0HNHAPE7NTH1O" received FIN.
2025-11-23 22:04:54.024 +02:00 [DBG] The connection queue processing loop for 0HNHAPE7NTH1O completed.
2025-11-23 22:04:54.025 +02:00 [DBG] Connection id "0HNHAPE7NTH1O" is closed. The last processed stream ID was 7.
2025-11-23 22:04:54.027 +02:00 [DBG] Connection id "0HNHAPE7NTH1O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:04:54.029 +02:00 [DBG] Connection id "0HNHAPE7NTH1O" stopped.
2025-11-23 22:04:59.996 +02:00 [DBG] Connection id "0HNHAPE7NTH1P" received FIN.
2025-11-23 22:04:59.998 +02:00 [DBG] Connection id "0HNHAPE7NTH1P" accepted.
2025-11-23 22:05:00.000 +02:00 [DBG] Connection id "0HNHAPE7NTH1P" started.
2025-11-23 22:05:00.000 +02:00 [DBG] Connection id "0HNHAPE7NTH1Q" accepted.
2025-11-23 22:05:00.002 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:05:00.002 +02:00 [DBG] Connection id "0HNHAPE7NTH1Q" started.
2025-11-23 22:05:00.005 +02:00 [DBG] Connection id "0HNHAPE7NTH1P" stopped.
2025-11-23 22:05:00.006 +02:00 [DBG] Connection id "0HNHAPE7NTH1P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:05:00.010 +02:00 [DBG] Connection 0HNHAPE7NTH1Q established using the following protocol: "Tls13"
2025-11-23 22:05:00.017 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 65
2025-11-23 22:05:00.024 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-23 22:05:00.028 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-23 22:05:00.030 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 22:05:00.033 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:05:00.070 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:05:00.073 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 22:05:00.105 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:05:00.109 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:05:00.110 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:05:00.111 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:05:00.113 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:05:00.114 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:05:00.117 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:05:00.276 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:05:00.309 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:05:00.324 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 22:05:00.327 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-23 22:05:00.329 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-23 22:05:00.336 +02:00 [DBG] Connection id "0HNHAPE7NTH1Q", Request id "0HNHAPE7NTH1Q:00000001": started reading request body.
2025-11-23 22:05:00.337 +02:00 [DBG] Connection id "0HNHAPE7NTH1Q", Request id "0HNHAPE7NTH1Q:00000001": done reading request body.
2025-11-23 22:05:00.347 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-23 22:05:00.348 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 22:05:00.349 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 22:05:00.350 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-23 22:05:00.357 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-23 22:05:00.360 +02:00 [INF] Login called at "2025-11-23T22:05:00.3606076+02:00"
2025-11-23 22:05:00.364 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-11-23 22:05:00.891 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:05:00.893 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:05:00.894 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:05:00.896 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:05:00.897 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:05:01.032 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:05:01.033 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:05:01.232 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:05:01.306 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-23 22:05:01.453 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 22:05:01.492 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:05:01.513 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-23 22:05:01.516 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:01.785 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:01.788 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:05:01.792 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-23 22:05:01.800 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-11-23 22:05:01.808 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 22:05:01.874 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-23 22:05:01.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:05:01.984 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:01.991 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 109ms reading results.
2025-11-23 22:05:01.996 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.002 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (5ms).
2025-11-23 22:05:02.085 +02:00 [DBG] Creating JWT token for user 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:05:02.093 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-23 22:05:02.122 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 22:05:02.125 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.127 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.129 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:05:02.130 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 22:05:02.131 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 22:05:02.133 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-23 22:05:02.141 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-23 22:05:02.144 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.146 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 22:05:02.148 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.149 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 22:05:02.160 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-23 22:05:02.175 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-23 22:05:02.178 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.179 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.180 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:05:02.181 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-23 22:05:02.182 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 22:05:02.184 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 22:05:02.191 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 22:05:02.194 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.196 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-23 22:05:02.197 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.198 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 22:05:02.206 +02:00 [DBG] JWT token created for user 6b3f5b23-f63c-47d7-9173-12860664cfb9, expires at "2025-11-23T21:05:02.0000000Z"
2025-11-23 22:05:02.212 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.213 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.214 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:05:02.216 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 22:05:02.217 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 22:05:02.218 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 22:05:02.224 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-23 22:05:02.227 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.228 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 22:05:02.230 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.232 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 22:05:02.239 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-23 22:05:02.247 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-23 22:05:02.249 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.251 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.252 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:05:02.253 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 22:05:02.255 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 22:05:02.256 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 22:05:02.263 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-23 22:05:02.265 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.267 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-23 22:05:02.268 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.269 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 22:05:02.285 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:05:02.290 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 22:05:02.300 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 22:05:02.314 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-23 22:05:02.316 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-23 22:05:02.317 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-23 22:05:02.389 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.391 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.395 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:05:02.396 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 22:05:02.401 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-23 22:05:02.403 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] IS NULL;
2025-11-23 22:05:02.416 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] IS NULL;
2025-11-23 22:05:02.424 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.425 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-23 22:05:02.428 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.430 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 22:05:02.435 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:05:02.439 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-23 22:05:02.463 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-11-23 22:05:02.469 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 22:05:02.472 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 22:05:02.473 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 22:05:02.474 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 22:05:02.476 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 22:05:02.478 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-23 22:05:02.498 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 2380.5995ms
2025-11-23 22:05:02.500 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-23 22:05:02.502 +02:00 [DBG] Connection id "0HNHAPE7NTH1Q" completed keep alive response.
2025-11-23 22:05:02.506 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 22:05:02.510 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:05:02.513 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 22:05:02.515 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 2498.6247ms
2025-11-23 22:06:36.122 +02:00 [DBG] Connection id "0HNHAPE7NTH1R" accepted.
2025-11-23 22:06:36.128 +02:00 [DBG] Connection id "0HNHAPE7NTH1R" started.
2025-11-23 22:06:36.133 +02:00 [DBG] Connection 0HNHAPE7NTH1R established using the following protocol: "Tls13"
2025-11-23 22:06:36.142 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth - null null
2025-11-23 22:06:36.147 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth'
2025-11-23 22:06:36.148 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth' is valid for the request path '/api/Auth'
2025-11-23 22:06:36.149 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:06:36.150 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:06:36.152 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:06:36.156 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-23 22:06:36.161 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-23 22:06:36.167 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-23 22:06:36.169 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth - 401 0 null 27.5279ms
2025-11-23 22:06:44.037 +02:00 [DBG] Connection id "0HNHAPE7NTH1R" received FIN.
2025-11-23 22:06:44.038 +02:00 [DBG] Connection id "0HNHAPE7NTH1R" is closed. The last processed stream ID was 1.
2025-11-23 22:06:44.038 +02:00 [DBG] The connection queue processing loop for 0HNHAPE7NTH1R completed.
2025-11-23 22:06:44.039 +02:00 [DBG] Connection id "0HNHAPE7NTH1R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:06:44.044 +02:00 [DBG] Connection id "0HNHAPE7NTH1R" stopped.
2025-11-23 22:07:06.264 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:07:06.400 +02:00 [DBG] Hosting starting
2025-11-23 22:07:06.427 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:07:06.442 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:07:06.453 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:07:06.455 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:07:06.457 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:07:06.463 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:07:06.468 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:07:06.470 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:07:06.471 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:07:06.478 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:07:06.483 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:07:06.487 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:07:06.489 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:07:06.496 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:07:06.499 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:07:06.502 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:07:06.504 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:07:06.512 +02:00 [DBG] Middleware loaded
2025-11-23 22:07:06.514 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:07:06.516 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:07:06.604 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:07:06.707 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:07:06.709 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:07:06.710 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:07:06.710 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:07:06.711 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:07:06.712 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:07:06.792 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:07:06.793 +02:00 [INF] Hosting environment: Development
2025-11-23 22:07:06.793 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:07:06.794 +02:00 [DBG] Hosting started
2025-11-23 22:07:07.175 +02:00 [DBG] Connection id "0HNHAPFGD37AE" accepted.
2025-11-23 22:07:07.176 +02:00 [DBG] Connection id "0HNHAPFGD37AD" accepted.
2025-11-23 22:07:07.178 +02:00 [DBG] Connection id "0HNHAPFGD37AE" started.
2025-11-23 22:07:07.178 +02:00 [DBG] Connection id "0HNHAPFGD37AD" started.
2025-11-23 22:07:07.198 +02:00 [DBG] Connection id "0HNHAPFGD37AD" received FIN.
2025-11-23 22:07:07.198 +02:00 [DBG] Connection id "0HNHAPFGD37AE" received FIN.
2025-11-23 22:07:07.216 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:07:07.216 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:07:07.260 +02:00 [DBG] Connection id "0HNHAPFGD37AD" stopped.
2025-11-23 22:07:07.260 +02:00 [DBG] Connection id "0HNHAPFGD37AE" stopped.
2025-11-23 22:07:07.264 +02:00 [DBG] Connection id "0HNHAPFGD37AD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:07:07.264 +02:00 [DBG] Connection id "0HNHAPFGD37AE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:07:07.512 +02:00 [DBG] Connection id "0HNHAPFGD37AF" accepted.
2025-11-23 22:07:07.514 +02:00 [DBG] Connection id "0HNHAPFGD37AF" started.
2025-11-23 22:07:07.550 +02:00 [DBG] Connection 0HNHAPFGD37AF established using the following protocol: "Tls13"
2025-11-23 22:07:07.621 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:07:07.733 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:07:07.767 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:07:07.769 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:07:07.829 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:07:07.831 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:07:07.850 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:07:07.852 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:07:07.858 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 248.6438ms
2025-11-23 22:07:07.901 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:07:07.901 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:07:07.913 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:07:07.916 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 15.8939ms
2025-11-23 22:07:07.947 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.1736ms
2025-11-23 22:07:08.015 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:07:08.018 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:07:08.020 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:07:08.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.5339ms
2025-11-23 22:07:09.043 +02:00 [DBG] Connection id "0HNHAPFGD37AF" received FIN.
2025-11-23 22:07:09.048 +02:00 [DBG] The connection queue processing loop for 0HNHAPFGD37AF completed.
2025-11-23 22:07:09.051 +02:00 [DBG] Connection id "0HNHAPFGD37AF" is closed. The last processed stream ID was 7.
2025-11-23 22:07:09.055 +02:00 [DBG] Connection id "0HNHAPFGD37AF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:07:09.059 +02:00 [DBG] Connection id "0HNHAPFGD37AF" stopped.
2025-11-23 22:07:23.703 +02:00 [DBG] Connection id "0HNHAPFGD37AG" accepted.
2025-11-23 22:07:23.704 +02:00 [DBG] Connection id "0HNHAPFGD37AG" started.
2025-11-23 22:07:23.708 +02:00 [DBG] Connection 0HNHAPFGD37AG established using the following protocol: "Tls13"
2025-11-23 22:07:23.711 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:07:23.718 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:07:23.724 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:07:23.727 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:07:23.732 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:07:23.768 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:07:23.773 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-23 22:07:23.777 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-11-23 22:07:23.781 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-23 22:07:23.783 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 401 0 null 71.7929ms
2025-11-23 22:07:29.044 +02:00 [DBG] Connection id "0HNHAPFGD37AG" received FIN.
2025-11-23 22:07:29.045 +02:00 [DBG] Connection id "0HNHAPFGD37AG" is closed. The last processed stream ID was 1.
2025-11-23 22:07:29.046 +02:00 [DBG] The connection queue processing loop for 0HNHAPFGD37AG completed.
2025-11-23 22:07:29.047 +02:00 [DBG] Connection id "0HNHAPFGD37AG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:07:29.049 +02:00 [DBG] Connection id "0HNHAPFGD37AG" stopped.
2025-11-23 22:07:31.458 +02:00 [DBG] Connection id "0HNHAPFGD37AH" received FIN.
2025-11-23 22:07:31.458 +02:00 [DBG] Connection id "0HNHAPFGD37AH" accepted.
2025-11-23 22:07:31.459 +02:00 [DBG] Connection id "0HNHAPFGD37AH" started.
2025-11-23 22:07:31.460 +02:00 [DBG] Connection id "0HNHAPFGD37AI" accepted.
2025-11-23 22:07:31.462 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:07:31.462 +02:00 [DBG] Connection id "0HNHAPFGD37AI" started.
2025-11-23 22:07:31.464 +02:00 [DBG] Connection id "0HNHAPFGD37AH" stopped.
2025-11-23 22:07:31.466 +02:00 [DBG] Connection id "0HNHAPFGD37AH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:07:31.467 +02:00 [DBG] Connection 0HNHAPFGD37AI established using the following protocol: "Tls13"
2025-11-23 22:07:31.471 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:07:31.476 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:07:31.477 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:07:31.478 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:07:31.479 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:07:31.536 +02:00 [DBG] Successfully validated the token.
2025-11-23 22:07:31.538 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-23 22:07:31.542 +02:00 [DBG] Authorization was successful.
2025-11-23 22:07:31.543 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:07:31.563 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:07:31.566 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:07:31.568 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:07:31.570 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:07:31.572 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:07:31.573 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:07:31.576 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:07:31.691 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:07:31.721 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:07:31.722 +02:00 [INF] GetAdminData called at "2025-11-23T22:07:31.7227001+02:00"
2025-11-23 22:07:31.731 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:07:32.236 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:07:32.238 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:07:32.240 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:07:32.241 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:07:32.242 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:07:32.350 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:07:32.352 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:07:32.528 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:07:32.571 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-11-23 22:07:32.772 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-11-23 22:07:32.817 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:07:32.840 +02:00 [DBG] Created DbConnection. (22ms).
2025-11-23 22:07:32.844 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:07:33.063 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:07:33.067 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:07:33.072 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-23 22:07:33.080 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-11-23 22:07:33.088 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:07:33.131 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:07:33.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:07:33.223 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:07:33.232 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 94ms reading results.
2025-11-23 22:07:33.236 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:07:33.243 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (6ms).
2025-11-23 22:07:33.246 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:07:33.250 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 22:07:33.255 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 22:07:33.257 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 22:07:33.258 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 22:07:33.261 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 22:07:33.263 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[Hospital.Application.DTO.Admin.AdminDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 22:07:33.303 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 1725.7051ms
2025-11-23 22:07:33.305 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:07:33.306 +02:00 [DBG] Connection id "0HNHAPFGD37AI" completed keep alive response.
2025-11-23 22:07:33.310 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 22:07:33.316 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:07:33.320 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-11-23 22:07:33.322 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 1850.4883ms
2025-11-23 22:08:58.128 +02:00 [DBG] Connection id "0HNHAPFGD37AJ" received FIN.
2025-11-23 22:08:58.136 +02:00 [DBG] Connection id "0HNHAPFGD37AJ" accepted.
2025-11-23 22:08:58.137 +02:00 [DBG] Connection id "0HNHAPFGD37AJ" started.
2025-11-23 22:08:58.142 +02:00 [DBG] Connection id "0HNHAPFGD37AK" accepted.
2025-11-23 22:08:58.144 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:08:58.144 +02:00 [DBG] Connection id "0HNHAPFGD37AK" started.
2025-11-23 22:08:58.146 +02:00 [DBG] Connection id "0HNHAPFGD37AJ" stopped.
2025-11-23 22:08:58.148 +02:00 [DBG] Connection id "0HNHAPFGD37AJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:08:58.150 +02:00 [DBG] Connection 0HNHAPFGD37AK established using the following protocol: "Tls13"
2025-11-23 22:08:58.152 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:08:58.154 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:08:58.155 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:08:58.156 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:08:58.157 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:08:58.159 +02:00 [DBG] Successfully validated the token.
2025-11-23 22:08:58.160 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-23 22:08:58.163 +02:00 [DBG] Authorization was successful.
2025-11-23 22:08:58.164 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:08:58.165 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:08:58.166 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:08:58.168 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:08:58.169 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:08:58.171 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:08:58.172 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:08:58.174 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:08:58.178 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:08:58.179 +02:00 [INF] GetAdminData called at "2025-11-23T22:08:58.1798524+02:00"
2025-11-23 22:08:58.180 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:08:58.193 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:08:58.201 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:08:58.202 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-23 22:08:58.204 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:08:58.207 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:08:58.209 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:08:58.210 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-23 22:08:58.211 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-23 22:08:58.213 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:08:58.221 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:08:58.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:08:58.225 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:08:58.228 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-23 22:08:58.230 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:08:58.231 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-23 22:08:58.232 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:08:58.234 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 22:08:58.236 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 22:08:58.237 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 22:08:58.237 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 22:08:58.238 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 22:08:58.239 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[Hospital.Application.DTO.Admin.AdminDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 22:08:58.241 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 67.4851ms
2025-11-23 22:08:58.243 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:08:58.244 +02:00 [DBG] Connection id "0HNHAPFGD37AK" completed keep alive response.
2025-11-23 22:08:58.245 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 22:08:58.246 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:08:58.247 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-23 22:08:58.249 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 97.2865ms
2025-11-23 22:10:35.663 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:10:35.795 +02:00 [DBG] Hosting starting
2025-11-23 22:10:35.818 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:10:35.832 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:10:35.848 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:10:35.851 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:10:35.854 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:10:35.863 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:10:35.869 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:10:35.871 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:10:35.872 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:10:35.882 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:10:35.889 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:10:35.895 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:10:35.899 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:10:35.908 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:10:35.911 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:10:35.914 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:10:35.916 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:10:35.925 +02:00 [DBG] Middleware loaded
2025-11-23 22:10:35.928 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:10:35.932 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:10:36.010 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:10:36.101 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:10:36.102 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:10:36.103 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:10:36.104 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:10:36.105 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:10:36.106 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:10:36.195 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:10:36.197 +02:00 [INF] Hosting environment: Development
2025-11-23 22:10:36.198 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:10:36.199 +02:00 [DBG] Hosting started
2025-11-23 22:10:36.278 +02:00 [DBG] Connection id "0HNHAPHEN8EH0" received FIN.
2025-11-23 22:10:36.278 +02:00 [DBG] Connection id "0HNHAPHEN8EH1" received FIN.
2025-11-23 22:10:36.299 +02:00 [DBG] Connection id "0HNHAPHEN8EH0" accepted.
2025-11-23 22:10:36.299 +02:00 [DBG] Connection id "0HNHAPHEN8EH1" accepted.
2025-11-23 22:10:36.302 +02:00 [DBG] Connection id "0HNHAPHEN8EH0" started.
2025-11-23 22:10:36.303 +02:00 [DBG] Connection id "0HNHAPHEN8EH1" started.
2025-11-23 22:10:36.326 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:10:36.326 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:10:36.364 +02:00 [DBG] Connection id "0HNHAPHEN8EH0" stopped.
2025-11-23 22:10:36.364 +02:00 [DBG] Connection id "0HNHAPHEN8EH1" stopped.
2025-11-23 22:10:36.368 +02:00 [DBG] Connection id "0HNHAPHEN8EH1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:10:36.368 +02:00 [DBG] Connection id "0HNHAPHEN8EH0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:10:36.586 +02:00 [DBG] Connection id "0HNHAPHEN8EH2" accepted.
2025-11-23 22:10:36.588 +02:00 [DBG] Connection id "0HNHAPHEN8EH2" started.
2025-11-23 22:10:36.628 +02:00 [DBG] Connection 0HNHAPHEN8EH2 established using the following protocol: "Tls13"
2025-11-23 22:10:36.700 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:10:36.786 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:10:36.810 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:10:36.811 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:10:36.849 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:10:36.851 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:10:36.865 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:10:36.867 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:10:36.871 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 178.1164ms
2025-11-23 22:10:36.914 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:10:36.914 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:10:36.924 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:10:36.926 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 12.9058ms
2025-11-23 22:10:36.966 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.026ms
2025-11-23 22:10:37.019 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:10:37.022 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:10:37.023 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:10:37.064 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.0841ms
2025-11-23 22:10:39.078 +02:00 [DBG] Connection id "0HNHAPHEN8EH2" received FIN.
2025-11-23 22:10:39.082 +02:00 [DBG] The connection queue processing loop for 0HNHAPHEN8EH2 completed.
2025-11-23 22:10:39.083 +02:00 [DBG] Connection id "0HNHAPHEN8EH2" is closed. The last processed stream ID was 7.
2025-11-23 22:10:39.085 +02:00 [DBG] Connection id "0HNHAPHEN8EH2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:10:39.087 +02:00 [DBG] Connection id "0HNHAPHEN8EH2" stopped.
2025-11-23 22:10:44.203 +02:00 [DBG] Connection id "0HNHAPHEN8EH3" accepted.
2025-11-23 22:10:44.205 +02:00 [DBG] Connection id "0HNHAPHEN8EH3" started.
2025-11-23 22:10:44.208 +02:00 [DBG] Connection 0HNHAPHEN8EH3 established using the following protocol: "Tls13"
2025-11-23 22:10:44.212 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:10:44.219 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:10:44.225 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:10:44.228 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:10:44.232 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:10:44.269 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:10:44.272 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:10:44.292 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:10:44.295 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:10:44.297 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:10:44.298 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:10:44.300 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:10:44.301 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:10:44.304 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:10:44.411 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:10:44.445 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:10:44.448 +02:00 [INF] GetAdminData called at "2025-11-23T22:10:44.4485715+02:00"
2025-11-23 22:10:44.460 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:10:44.980 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:10:44.982 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:10:44.984 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:10:44.985 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:10:44.987 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:10:45.094 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:10:45.095 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:10:45.237 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:10:45.280 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-11-23 22:10:45.446 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-11-23 22:10:45.476 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:10:45.496 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-23 22:10:45.499 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:10:45.716 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:10:45.720 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:10:45.724 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-23 22:10:45.732 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-11-23 22:10:45.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:10:45.783 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:10:45.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:10:45.861 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:10:45.868 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 80ms reading results.
2025-11-23 22:10:45.871 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:10:45.875 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-23 22:10:45.877 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:10:45.880 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 22:10:45.883 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 22:10:45.884 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 22:10:45.884 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 22:10:45.885 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 22:10:45.887 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[Hospital.Application.DTO.Admin.AdminDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-23 22:10:45.911 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 1605.8745ms
2025-11-23 22:10:45.913 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:10:45.916 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 22:10:45.921 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:10:45.924 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 22:10:45.925 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 1713.9185ms
2025-11-23 22:10:49.079 +02:00 [DBG] Connection id "0HNHAPHEN8EH3" received FIN.
2025-11-23 22:10:49.080 +02:00 [DBG] Connection id "0HNHAPHEN8EH3" is closed. The last processed stream ID was 1.
2025-11-23 22:10:49.081 +02:00 [DBG] The connection queue processing loop for 0HNHAPHEN8EH3 completed.
2025-11-23 22:10:49.082 +02:00 [DBG] Connection id "0HNHAPHEN8EH3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:10:49.085 +02:00 [DBG] Connection id "0HNHAPHEN8EH3" stopped.
2025-11-23 22:12:27.000 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:12:27.138 +02:00 [DBG] Hosting starting
2025-11-23 22:12:27.168 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:12:27.189 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:12:27.199 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:12:27.200 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:12:27.201 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:12:27.206 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:12:27.212 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:12:27.213 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:12:27.215 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:12:27.225 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:12:27.231 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:12:27.235 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:12:27.237 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:12:27.243 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:12:27.246 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:12:27.249 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:12:27.251 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:12:27.265 +02:00 [DBG] Middleware loaded
2025-11-23 22:12:27.268 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:12:27.270 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:12:27.395 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:12:27.521 +02:00 [DBG] Connection id "0HNHAPIFS4VMB" received FIN.
2025-11-23 22:12:27.521 +02:00 [DBG] Connection id "0HNHAPIFS4VMC" received FIN.
2025-11-23 22:12:27.530 +02:00 [DBG] Connection id "0HNHAPIFS4VMB" accepted.
2025-11-23 22:12:27.530 +02:00 [DBG] Connection id "0HNHAPIFS4VMC" accepted.
2025-11-23 22:12:27.531 +02:00 [DBG] Connection id "0HNHAPIFS4VMB" started.
2025-11-23 22:12:27.532 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:12:27.532 +02:00 [DBG] Connection id "0HNHAPIFS4VMC" started.
2025-11-23 22:12:27.535 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:12:27.537 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:12:27.538 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:12:27.539 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:12:27.543 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:12:27.554 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:12:27.554 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:12:27.596 +02:00 [DBG] Connection id "0HNHAPIFS4VMB" stopped.
2025-11-23 22:12:27.596 +02:00 [DBG] Connection id "0HNHAPIFS4VMC" stopped.
2025-11-23 22:12:27.600 +02:00 [DBG] Connection id "0HNHAPIFS4VMC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:12:27.600 +02:00 [DBG] Connection id "0HNHAPIFS4VMB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:12:27.682 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:12:27.683 +02:00 [INF] Hosting environment: Development
2025-11-23 22:12:27.684 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:12:27.685 +02:00 [DBG] Hosting started
2025-11-23 22:12:27.813 +02:00 [DBG] Connection id "0HNHAPIFS4VMD" accepted.
2025-11-23 22:12:27.815 +02:00 [DBG] Connection id "0HNHAPIFS4VMD" started.
2025-11-23 22:12:27.868 +02:00 [DBG] Connection 0HNHAPIFS4VMD established using the following protocol: "Tls13"
2025-11-23 22:12:27.943 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:12:28.067 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:12:28.098 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:12:28.099 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:12:28.156 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:12:28.159 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:12:28.176 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:12:28.177 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:12:28.181 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 245.832ms
2025-11-23 22:12:28.234 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:12:28.234 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:12:28.245 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:12:28.247 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.0641ms
2025-11-23 22:12:28.291 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.3979ms
2025-11-23 22:12:28.355 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:12:28.359 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:12:28.360 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:12:28.399 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 43.5374ms
2025-11-23 22:12:29.094 +02:00 [DBG] Connection id "0HNHAPIFS4VMD" received FIN.
2025-11-23 22:12:29.096 +02:00 [DBG] The connection queue processing loop for 0HNHAPIFS4VMD completed.
2025-11-23 22:12:29.098 +02:00 [DBG] Connection id "0HNHAPIFS4VMD" is closed. The last processed stream ID was 7.
2025-11-23 22:12:29.099 +02:00 [DBG] Connection id "0HNHAPIFS4VMD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:12:29.101 +02:00 [DBG] Connection id "0HNHAPIFS4VMD" stopped.
2025-11-23 22:12:33.315 +02:00 [DBG] Connection id "0HNHAPIFS4VME" accepted.
2025-11-23 22:12:33.316 +02:00 [DBG] Connection id "0HNHAPIFS4VME" started.
2025-11-23 22:12:33.320 +02:00 [DBG] Connection 0HNHAPIFS4VME established using the following protocol: "Tls13"
2025-11-23 22:12:33.329 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:12:33.338 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:12:33.345 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:12:33.348 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:12:33.352 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:12:33.390 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:12:33.393 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:12:33.418 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:12:33.421 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:12:33.423 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:12:33.425 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:12:33.428 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:12:33.430 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:12:33.434 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:12:33.563 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:12:33.595 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:12:37.168 +02:00 [INF] GetAdminData called at "2025-11-23T22:12:37.1617407+02:00"
2025-11-23 22:12:45.308 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:12:50.463 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:12:50.465 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:12:50.467 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:12:50.469 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:12:50.470 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:12:50.579 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:12:50.580 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:12:50.730 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:12:50.767 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-11-23 22:12:50.946 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-11-23 22:12:50.974 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:12:50.993 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-23 22:12:50.996 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:12:51.248 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:12:51.252 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:12:51.256 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-23 22:12:51.263 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-11-23 22:12:51.270 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:12:51.312 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:12:51.356 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:12:51.395 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:12:51.402 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 84ms reading results.
2025-11-23 22:12:51.404 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:12:51.409 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-23 22:13:26.550 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:13:27.779 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 22:13:27.782 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 22:13:27.783 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 22:13:27.784 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 22:13:27.785 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 22:13:27.787 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[Hospital.Application.DTO.Admin.AdminDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-23 22:13:27.798 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 54364.0259ms
2025-11-23 22:13:27.801 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:13:27.816 +02:00 [ERR]  Exception caught: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[Hospital.Application.DTO.Admin.AdminDto,System.Runtime.CompilerServices.IAsyncStateMachine]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
System.InvalidOperationException: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[Hospital.Application.DTO.Admin.AdminDto,System.Runtime.CompilerServices.IAsyncStateMachine]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_CannotSerializeInvalidType(Type typeToConvert, Type declaringType, MemberInfo memberInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-23 22:13:27.858 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 22:13:27.863 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:13:27.867 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-11-23 22:13:27.869 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 500 null application/json 54540.498ms
2025-11-23 22:13:29.104 +02:00 [DBG] Connection id "0HNHAPIFS4VME" received FIN.
2025-11-23 22:13:29.105 +02:00 [DBG] Connection id "0HNHAPIFS4VME" is closed. The last processed stream ID was 1.
2025-11-23 22:13:29.105 +02:00 [DBG] The connection queue processing loop for 0HNHAPIFS4VME completed.
2025-11-23 22:13:29.106 +02:00 [DBG] Connection id "0HNHAPIFS4VME" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:13:29.109 +02:00 [DBG] Connection id "0HNHAPIFS4VME" stopped.
2025-11-23 22:14:33.147 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:14:33.291 +02:00 [DBG] Hosting starting
2025-11-23 22:14:33.313 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:14:33.324 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:14:33.330 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:14:33.331 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:14:33.332 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:14:33.336 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:14:33.342 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:14:33.343 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:14:33.344 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:14:33.351 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:14:33.355 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:14:33.358 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:14:33.360 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:14:33.365 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:14:33.368 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:14:33.372 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:14:33.374 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:14:33.382 +02:00 [DBG] Middleware loaded
2025-11-23 22:14:33.385 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:14:33.387 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:14:33.487 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:14:33.593 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:14:33.594 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:14:33.595 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:14:33.596 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:14:33.596 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:14:33.597 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:14:33.675 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:14:33.676 +02:00 [INF] Hosting environment: Development
2025-11-23 22:14:33.677 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:14:33.678 +02:00 [DBG] Hosting started
2025-11-23 22:14:33.807 +02:00 [DBG] Connection id "0HNHAPJLGGHR8" accepted.
2025-11-23 22:14:33.807 +02:00 [DBG] Connection id "0HNHAPJLGGHR7" accepted.
2025-11-23 22:14:33.815 +02:00 [DBG] Connection id "0HNHAPJLGGHR8" started.
2025-11-23 22:14:33.815 +02:00 [DBG] Connection id "0HNHAPJLGGHR7" started.
2025-11-23 22:14:33.822 +02:00 [DBG] Connection id "0HNHAPJLGGHR8" received FIN.
2025-11-23 22:14:33.822 +02:00 [DBG] Connection id "0HNHAPJLGGHR7" received FIN.
2025-11-23 22:14:33.836 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:14:33.836 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:14:33.868 +02:00 [DBG] Connection id "0HNHAPJLGGHR8" stopped.
2025-11-23 22:14:33.868 +02:00 [DBG] Connection id "0HNHAPJLGGHR7" stopped.
2025-11-23 22:14:33.872 +02:00 [DBG] Connection id "0HNHAPJLGGHR8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:14:33.872 +02:00 [DBG] Connection id "0HNHAPJLGGHR7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:14:34.080 +02:00 [DBG] Connection id "0HNHAPJLGGHR9" accepted.
2025-11-23 22:14:34.082 +02:00 [DBG] Connection id "0HNHAPJLGGHR9" started.
2025-11-23 22:14:34.121 +02:00 [DBG] Connection 0HNHAPJLGGHR9 established using the following protocol: "Tls13"
2025-11-23 22:14:34.209 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:14:34.355 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:14:34.393 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:14:34.395 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:14:34.444 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:14:34.445 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:14:34.460 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:14:34.462 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:14:34.466 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 270.1245ms
2025-11-23 22:14:34.538 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:14:34.538 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:14:34.552 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:14:34.555 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 17.5585ms
2025-11-23 22:14:34.583 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.3341ms
2025-11-23 22:14:34.621 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:14:34.624 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:14:34.625 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:14:34.669 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 48.873ms
2025-11-23 22:14:38.250 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:14:38.258 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:14:38.264 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:14:38.266 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:14:38.270 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:14:38.307 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:14:38.310 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:14:38.329 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:14:38.333 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:14:38.334 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:14:38.336 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:14:38.337 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:14:38.339 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:14:38.342 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:14:38.447 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:14:38.479 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:15:16.282 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:15:16.513 +02:00 [DBG] Hosting starting
2025-11-23 22:15:16.553 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:15:16.574 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:15:16.582 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:15:16.583 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:15:16.584 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:15:16.589 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:15:16.594 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:15:16.595 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:15:16.596 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:15:16.605 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:15:16.612 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:15:16.619 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:15:16.622 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:15:16.630 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:15:16.632 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:15:16.635 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:15:16.638 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:15:16.645 +02:00 [DBG] Middleware loaded
2025-11-23 22:15:16.647 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:15:16.649 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:15:16.747 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:15:16.857 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:15:16.859 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:15:16.860 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:15:16.861 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:15:16.861 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:15:16.862 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:15:16.956 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:15:16.957 +02:00 [INF] Hosting environment: Development
2025-11-23 22:15:16.958 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:15:16.959 +02:00 [DBG] Hosting started
2025-11-23 22:15:17.233 +02:00 [DBG] Connection id "0HNHAPK2EKU6T" accepted.
2025-11-23 22:15:17.233 +02:00 [DBG] Connection id "0HNHAPK2EKU6U" accepted.
2025-11-23 22:15:17.235 +02:00 [DBG] Connection id "0HNHAPK2EKU6T" started.
2025-11-23 22:15:17.235 +02:00 [DBG] Connection id "0HNHAPK2EKU6U" started.
2025-11-23 22:15:17.262 +02:00 [DBG] Connection id "0HNHAPK2EKU6T" received FIN.
2025-11-23 22:15:17.262 +02:00 [DBG] Connection id "0HNHAPK2EKU6U" received FIN.
2025-11-23 22:15:17.282 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:15:17.282 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:15:17.323 +02:00 [DBG] Connection id "0HNHAPK2EKU6T" stopped.
2025-11-23 22:15:17.323 +02:00 [DBG] Connection id "0HNHAPK2EKU6U" stopped.
2025-11-23 22:15:17.327 +02:00 [DBG] Connection id "0HNHAPK2EKU6U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:15:17.327 +02:00 [DBG] Connection id "0HNHAPK2EKU6T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:15:17.437 +02:00 [DBG] Connection id "0HNHAPK2EKU6V" accepted.
2025-11-23 22:15:17.439 +02:00 [DBG] Connection id "0HNHAPK2EKU6V" started.
2025-11-23 22:15:17.476 +02:00 [DBG] Connection 0HNHAPK2EKU6V established using the following protocol: "Tls13"
2025-11-23 22:15:17.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:15:17.622 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:15:17.653 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:15:17.655 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:15:17.706 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:15:17.709 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:15:17.726 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:15:17.729 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:15:17.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 205.1727ms
2025-11-23 22:15:17.792 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:15:17.792 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:15:17.800 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:15:17.802 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.3453ms
2025-11-23 22:15:17.853 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.4482ms
2025-11-23 22:15:17.927 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:15:17.932 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:15:17.933 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:15:17.999 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.3995ms
2025-11-23 22:15:19.131 +02:00 [DBG] Connection id "0HNHAPK2EKU6V" received FIN.
2025-11-23 22:15:19.134 +02:00 [DBG] The connection queue processing loop for 0HNHAPK2EKU6V completed.
2025-11-23 22:15:19.135 +02:00 [DBG] Connection id "0HNHAPK2EKU6V" is closed. The last processed stream ID was 7.
2025-11-23 22:15:19.137 +02:00 [DBG] Connection id "0HNHAPK2EKU6V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:15:19.140 +02:00 [DBG] Connection id "0HNHAPK2EKU6V" stopped.
2025-11-23 22:15:22.570 +02:00 [DBG] Connection id "0HNHAPK2EKU70" accepted.
2025-11-23 22:15:22.572 +02:00 [DBG] Connection id "0HNHAPK2EKU70" started.
2025-11-23 22:15:22.578 +02:00 [DBG] Connection 0HNHAPK2EKU70 established using the following protocol: "Tls13"
2025-11-23 22:15:22.583 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:15:22.591 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:15:22.597 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:15:22.600 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:15:22.608 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:15:22.656 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:15:22.659 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:15:22.679 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:15:22.683 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:15:22.684 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:15:22.686 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:15:22.688 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:15:22.689 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:15:22.692 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:15:22.811 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:15:22.859 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:15:27.452 +02:00 [INF] GetAdminData called at "2025-11-23T22:15:27.4456184+02:00"
2025-11-23 22:15:28.675 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:15:29.119 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:15:29.121 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:15:29.123 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:15:29.125 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:15:29.127 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:15:29.233 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:15:29.235 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:15:29.388 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:15:29.427 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-11-23 22:15:29.608 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-11-23 22:15:29.642 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:15:29.661 +02:00 [DBG] Created DbConnection. (17ms).
2025-11-23 22:15:29.664 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:15:29.912 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:15:29.916 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:15:29.921 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-23 22:15:29.930 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-11-23 22:15:29.938 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:15:29.991 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:15:30.044 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:15:30.098 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:15:30.106 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 108ms reading results.
2025-11-23 22:15:30.110 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:15:30.117 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (7ms).
2025-11-23 22:15:30.119 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:16:49.783 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:16:49.924 +02:00 [DBG] Hosting starting
2025-11-23 22:16:49.951 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:16:49.966 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:16:49.973 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:16:49.975 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:16:49.976 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:16:49.981 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:16:49.986 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:16:49.987 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:16:49.988 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:16:49.994 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:16:49.998 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:16:50.001 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:16:50.003 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:16:50.010 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:16:50.013 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:16:50.015 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:16:50.017 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:16:50.024 +02:00 [DBG] Middleware loaded
2025-11-23 22:16:50.026 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:16:50.028 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:16:50.110 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:16:50.186 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:16:50.188 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:16:50.189 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:16:50.189 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:16:50.190 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:16:50.191 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:16:50.277 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:16:50.278 +02:00 [INF] Hosting environment: Development
2025-11-23 22:16:50.279 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:16:50.280 +02:00 [DBG] Hosting started
2025-11-23 22:16:50.501 +02:00 [DBG] Connection id "0HNHAPKU848Q1" accepted.
2025-11-23 22:16:50.501 +02:00 [DBG] Connection id "0HNHAPKU848Q0" accepted.
2025-11-23 22:16:50.502 +02:00 [DBG] Connection id "0HNHAPKU848Q1" started.
2025-11-23 22:16:50.503 +02:00 [DBG] Connection id "0HNHAPKU848Q0" started.
2025-11-23 22:16:50.524 +02:00 [DBG] Connection id "0HNHAPKU848Q1" received FIN.
2025-11-23 22:16:50.524 +02:00 [DBG] Connection id "0HNHAPKU848Q0" received FIN.
2025-11-23 22:16:50.536 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:16:50.536 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:16:50.591 +02:00 [DBG] Connection id "0HNHAPKU848Q1" stopped.
2025-11-23 22:16:50.591 +02:00 [DBG] Connection id "0HNHAPKU848Q0" stopped.
2025-11-23 22:16:50.593 +02:00 [DBG] Connection id "0HNHAPKU848Q1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:16:50.593 +02:00 [DBG] Connection id "0HNHAPKU848Q0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:16:50.814 +02:00 [DBG] Connection id "0HNHAPKU848Q2" accepted.
2025-11-23 22:16:50.816 +02:00 [DBG] Connection id "0HNHAPKU848Q2" started.
2025-11-23 22:16:50.851 +02:00 [DBG] Connection 0HNHAPKU848Q2 established using the following protocol: "Tls13"
2025-11-23 22:16:50.922 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:16:51.017 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:16:51.047 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:16:51.048 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:16:51.092 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:16:51.094 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:16:51.107 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:16:51.108 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:16:51.115 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 200.2474ms
2025-11-23 22:16:51.156 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:16:51.156 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:16:51.167 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:16:51.171 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.3443ms
2025-11-23 22:16:51.222 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.8593ms
2025-11-23 22:16:51.291 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:16:51.295 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:16:51.296 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:16:51.350 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 59.4518ms
2025-11-23 22:16:54.151 +02:00 [DBG] Connection id "0HNHAPKU848Q2" received FIN.
2025-11-23 22:16:54.154 +02:00 [DBG] The connection queue processing loop for 0HNHAPKU848Q2 completed.
2025-11-23 22:16:54.155 +02:00 [DBG] Connection id "0HNHAPKU848Q2" is closed. The last processed stream ID was 7.
2025-11-23 22:16:54.156 +02:00 [DBG] Connection id "0HNHAPKU848Q2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:16:54.159 +02:00 [DBG] Connection id "0HNHAPKU848Q2" stopped.
2025-11-23 22:16:55.896 +02:00 [DBG] Connection id "0HNHAPKU848Q3" accepted.
2025-11-23 22:16:55.897 +02:00 [DBG] Connection id "0HNHAPKU848Q3" started.
2025-11-23 22:16:55.901 +02:00 [DBG] Connection 0HNHAPKU848Q3 established using the following protocol: "Tls13"
2025-11-23 22:16:55.906 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:16:55.914 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:16:55.922 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:16:55.926 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:16:55.931 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:16:55.979 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:16:55.983 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:16:56.009 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:16:56.014 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:16:56.016 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:16:56.018 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:16:56.021 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:16:56.022 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:16:56.026 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:16:56.160 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:16:56.193 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:16:58.482 +02:00 [INF] GetAdminData called at "2025-11-23T22:16:58.4743790+02:00"
2025-11-23 22:16:58.942 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:16:59.479 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:16:59.481 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:16:59.482 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:16:59.484 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:16:59.485 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:16:59.595 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:16:59.597 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:16:59.728 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:16:59.764 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-11-23 22:16:59.909 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-11-23 22:16:59.939 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:16:59.963 +02:00 [DBG] Created DbConnection. (22ms).
2025-11-23 22:16:59.967 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:00.222 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:00.225 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:17:00.228 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-23 22:17:00.234 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-11-23 22:17:00.243 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:17:00.286 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:17:00.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:17:00.383 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:00.391 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 99ms reading results.
2025-11-23 22:17:00.395 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:00.401 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (6ms).
2025-11-23 22:17:00.404 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:17:14.876 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-23 22:17:14.973 +02:00 [DBG] Hosting starting
2025-11-23 22:17:14.983 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-23 22:17:14.992 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-23 22:17:14.996 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-23 22:17:14.997 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-23 22:17:14.998 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-23 22:17:15.001 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-23 22:17:15.005 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-23 22:17:15.006 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-23 22:17:15.007 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-23 22:17:15.012 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-23 22:17:15.015 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:17:15.018 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-23 22:17:15.019 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-23 22:17:15.024 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-23 22:17:15.026 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-23 22:17:15.028 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-23 22:17:15.029 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-23 22:17:15.033 +02:00 [DBG] Middleware loaded
2025-11-23 22:17:15.034 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-23 22:17:15.036 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-23 22:17:15.068 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-23 22:17:15.111 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-23 22:17:15.113 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-23 22:17:15.114 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-23 22:17:15.115 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-23 22:17:15.115 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-23 22:17:15.116 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-23 22:17:15.194 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-23 22:17:15.196 +02:00 [INF] Hosting environment: Development
2025-11-23 22:17:15.196 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-23 22:17:15.198 +02:00 [DBG] Hosting started
2025-11-23 22:17:15.392 +02:00 [DBG] Connection id "0HNHAPL5LG8J6" accepted.
2025-11-23 22:17:15.392 +02:00 [DBG] Connection id "0HNHAPL5LG8J7" accepted.
2025-11-23 22:17:15.393 +02:00 [DBG] Connection id "0HNHAPL5LG8J6" started.
2025-11-23 22:17:15.393 +02:00 [DBG] Connection id "0HNHAPL5LG8J7" started.
2025-11-23 22:17:15.395 +02:00 [DBG] Connection id "0HNHAPL5LG8J7" received FIN.
2025-11-23 22:17:15.395 +02:00 [DBG] Connection id "0HNHAPL5LG8J6" received FIN.
2025-11-23 22:17:15.402 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:17:15.402 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-23 22:17:15.418 +02:00 [DBG] Connection id "0HNHAPL5LG8J6" stopped.
2025-11-23 22:17:15.418 +02:00 [DBG] Connection id "0HNHAPL5LG8J7" stopped.
2025-11-23 22:17:15.422 +02:00 [DBG] Connection id "0HNHAPL5LG8J6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:17:15.422 +02:00 [DBG] Connection id "0HNHAPL5LG8J7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:17:15.480 +02:00 [DBG] Connection id "0HNHAPL5LG8J8" accepted.
2025-11-23 22:17:15.481 +02:00 [DBG] Connection id "0HNHAPL5LG8J8" started.
2025-11-23 22:17:15.510 +02:00 [DBG] Connection 0HNHAPL5LG8J8 established using the following protocol: "Tls13"
2025-11-23 22:17:15.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-23 22:17:15.603 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-23 22:17:15.626 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-23 22:17:15.627 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:17:15.669 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-23 22:17:15.671 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-23 22:17:15.681 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-23 22:17:15.682 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-23 22:17:15.685 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 137.7634ms
2025-11-23 22:17:15.702 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-23 22:17:15.711 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-23 22:17:15.714 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 12.5145ms
2025-11-23 22:17:15.731 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-23 22:17:15.773 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.4178ms
2025-11-23 22:17:15.872 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-23 22:17:15.877 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-23 22:17:15.879 +02:00 [DBG] Request did not match any endpoints
2025-11-23 22:17:15.918 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.2241ms
2025-11-23 22:17:20.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-11-23 22:17:20.591 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-11-23 22:17:20.596 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-11-23 22:17:20.599 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:17:20.602 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-23 22:17:20.616 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-23 22:17:20.619 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:17:20.633 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-11-23 22:17:20.636 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-23 22:17:20.637 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-23 22:17:20.639 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-23 22:17:20.641 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-23 22:17:20.642 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-23 22:17:20.644 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:17:20.701 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-23 22:17:20.728 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-23 22:17:20.730 +02:00 [INF] GetAdminData called at "2025-11-23T22:17:20.7302273+02:00"
2025-11-23 22:17:20.733 +02:00 [INF] Fetching user details for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:17:21.227 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-23 22:17:21.229 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-23 22:17:21.231 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-23 22:17:21.233 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-23 22:17:21.234 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-23 22:17:21.332 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:17:21.334 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-23 22:17:21.480 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-23 22:17:21.503 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-11-23 22:17:21.641 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-11-23 22:17:21.663 +02:00 [DBG] Creating DbConnection.
2025-11-23 22:17:21.677 +02:00 [DBG] Created DbConnection. (13ms).
2025-11-23 22:17:21.681 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:21.806 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:21.809 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-23 22:17:21.814 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-23 22:17:21.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-11-23 22:17:21.827 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:17:21.861 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-11-23 22:17:21.897 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-23 22:17:21.933 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:21.940 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 73ms reading results.
2025-11-23 22:17:21.942 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:21.946 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-23 22:17:21.948 +02:00 [INF] User details retrieved successfully for userId: 6b3f5b23-f63c-47d7-9173-12860664cfb9
2025-11-23 22:17:21.950 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-23 22:17:21.952 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-23 22:17:21.953 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-23 22:17:21.953 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-23 22:17:21.954 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-23 22:17:21.955 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Admin.AdminDto'.
2025-11-23 22:17:21.963 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 1316.8384ms
2025-11-23 22:17:21.964 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-11-23 22:17:21.966 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-23 22:17:21.969 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-23 22:17:21.972 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-23 22:17:21.974 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 1387.083ms
2025-11-23 22:17:24.155 +02:00 [DBG] Connection id "0HNHAPL5LG8J8" received FIN.
2025-11-23 22:17:24.158 +02:00 [DBG] Connection id "0HNHAPL5LG8J8" is closed. The last processed stream ID was 9.
2025-11-23 22:17:24.159 +02:00 [DBG] Connection id "0HNHAPL5LG8J8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-23 22:17:24.159 +02:00 [DBG] The connection queue processing loop for 0HNHAPL5LG8J8 completed.
2025-11-23 22:17:24.162 +02:00 [DBG] Connection id "0HNHAPL5LG8J8" stopped.
