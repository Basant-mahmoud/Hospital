2025-12-03 00:15:10.037 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-03 00:15:10.140 +02:00 [DBG] Hosting starting
2025-12-03 00:15:10.151 +02:00 [INF] User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 00:15:10.159 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-171dc15b-9d2d-45d5-9fcb-18badfdae667.xml'.
2025-12-03 00:15:10.165 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-328565d1-c612-402c-9473-6f50dc1bcb2f.xml'.
2025-12-03 00:15:10.167 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3853d745-e818-4ecf-b264-c04445fb406d.xml'.
2025-12-03 00:15:10.168 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3a7083ac-1a8b-48f5-9e81-d3a63254e8eb.xml'.
2025-12-03 00:15:10.169 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-77f0ec14-5c63-448f-b8e4-a2bd27bd6ead.xml'.
2025-12-03 00:15:10.170 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc.xml'.
2025-12-03 00:15:10.171 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-a21099c1-ceb7-4545-b251-882dccb0fb5b.xml'.
2025-12-03 00:15:10.173 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-e626ca21-42a8-439d-97f1-774b663fbc67.xml'.
2025-12-03 00:15:10.177 +02:00 [DBG] Found key {171dc15b-9d2d-45d5-9fcb-18badfdae667}.
2025-12-03 00:15:10.179 +02:00 [DBG] Found key {328565d1-c612-402c-9473-6f50dc1bcb2f}.
2025-12-03 00:15:10.180 +02:00 [DBG] Found key {3853d745-e818-4ecf-b264-c04445fb406d}.
2025-12-03 00:15:10.181 +02:00 [DBG] Found key {3a7083ac-1a8b-48f5-9e81-d3a63254e8eb}.
2025-12-03 00:15:10.182 +02:00 [DBG] Found key {77f0ec14-5c63-448f-b8e4-a2bd27bd6ead}.
2025-12-03 00:15:10.183 +02:00 [DBG] Found key {9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc}.
2025-12-03 00:15:10.183 +02:00 [DBG] Found key {a21099c1-ceb7-4545-b251-882dccb0fb5b}.
2025-12-03 00:15:10.184 +02:00 [DBG] Found key {e626ca21-42a8-439d-97f1-774b663fbc67}.
2025-12-03 00:15:10.188 +02:00 [DBG] Considering key {e626ca21-42a8-439d-97f1-774b663fbc67} with expiration date 2025-12-29 20:28:34Z as default key.
2025-12-03 00:15:10.191 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 00:15:10.195 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-03 00:15:10.196 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 00:15:10.200 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-03 00:15:10.202 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-03 00:15:10.203 +02:00 [DBG] Using key {e626ca21-42a8-439d-97f1-774b663fbc67} as the default key.
2025-12-03 00:15:10.204 +02:00 [DBG] Key ring with default key {e626ca21-42a8-439d-97f1-774b663fbc67} was loaded during application startup.
2025-12-03 00:15:10.284 +02:00 [INF] Now listening on: https://localhost:7217
2025-12-03 00:15:10.285 +02:00 [INF] Now listening on: http://localhost:5163
2025-12-03 00:15:10.288 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-12-03 00:15:10.289 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-03 00:15:10.290 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-03 00:15:10.291 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-03 00:15:10.362 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 00:15:10.364 +02:00 [INF] Hosting environment: Development
2025-12-03 00:15:10.366 +02:00 [INF] Content root path: D:\Work\HospitalWebSite\Hospital\Hospital
2025-12-03 00:15:10.368 +02:00 [DBG] Hosting started
2025-12-03 00:15:10.465 +02:00 [DBG] Connection id "0HNHHU1124OKH" received FIN.
2025-12-03 00:15:10.476 +02:00 [DBG] Connection id "0HNHHU1124OKH" accepted.
2025-12-03 00:15:10.477 +02:00 [DBG] Connection id "0HNHHU1124OKH" started.
2025-12-03 00:15:10.488 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 00:15:10.496 +02:00 [DBG] Connection id "0HNHHU1124OKI" accepted.
2025-12-03 00:15:10.502 +02:00 [DBG] Connection id "0HNHHU1124OKI" started.
2025-12-03 00:15:10.504 +02:00 [DBG] Connection id "0HNHHU1124OKH" stopped.
2025-12-03 00:15:10.508 +02:00 [DBG] Connection id "0HNHHU1124OKH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:15:10.529 +02:00 [DBG] Connection 0HNHHU1124OKI established using the following protocol: "Tls12"
2025-12-03 00:15:10.563 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-12-03 00:15:10.608 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-03 00:15:10.629 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-03 00:15:10.630 +02:00 [DBG] Request did not match any endpoints
2025-12-03 00:15:10.675 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-03 00:15:10.677 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-03 00:15:10.687 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-03 00:15:10.688 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-03 00:15:10.692 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 129.5476ms
2025-12-03 00:15:11.177 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-12-03 00:15:11.183 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-12-03 00:15:11.189 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 11.1854ms
2025-12-03 00:15:11.215 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.9534ms
2025-12-03 00:15:13.563 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-12-03 00:15:13.568 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-03 00:15:13.569 +02:00 [DBG] Request did not match any endpoints
2025-12-03 00:15:13.605 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.5459ms
2025-12-03 00:15:48.323 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/patient/1 - null null
2025-12-03 00:15:48.344 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/patient/1'
2025-12-03 00:15:48.366 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)' with route pattern 'api/Appointment/patient/{patientId:int}' is valid for the request path '/api/Appointment/patient/1'
2025-12-03 00:15:48.371 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:15:48.377 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:15:48.401 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:15:48.404 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:15:48.429 +02:00 [INF] Route matched with {action = "GetByPatientId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByPatientId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-12-03 00:15:48.434 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:15:48.436 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:15:48.438 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:15:48.442 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:15:48.443 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:15:48.446 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:15:48.605 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-03 00:15:48.886 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:15:48.898 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:15:48.904 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-12-03 00:15:48.907 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:15:48.911 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:15:48.913 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:15:48.916 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:15:48.921 +02:00 [INF] Get Appointment by GetByPatientId  called at "2025-12-03T00:15:48.9211340+02:00"
2025-12-03 00:15:48.924 +02:00 [INF] Fetching appointments for PatientId: 1
2025-12-03 00:15:49.759 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-12-03 00:15:49.765 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-12-03 00:15:49.768 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-12-03 00:15:49.769 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-12-03 00:15:49.773 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-12-03 00:15:50.061 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 00:15:50.064 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 00:15:50.346 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:15:50.447 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-12-03 00:15:50.536 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-12-03 00:15:50.538 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-12-03 00:15:50.544 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-12-03 00:15:50.547 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:15:50.818 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:15:50.867 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:15:50.889 +02:00 [DBG] Created DbConnection. (21ms).
2025-12-03 00:15:50.892 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.128 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.139 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:15:51.155 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (10ms).
2025-12-03 00:15:51.174 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (35ms).
2025-12-03 00:15:51.190 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:15:51.310 +02:00 [INF] Executed DbCommand (121ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:15:51.404 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.490 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.565 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.588 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.594 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.597 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.599 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.601 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.603 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.605 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.607 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.608 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.609 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.611 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.613 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.615 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.617 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.618 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.621 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.625 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.628 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.629 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.631 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.633 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.635 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.641 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:15:51.647 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 322ms reading results.
2025-12-03 00:15:51.650 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.654 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:15:51.661 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.PatientId == __patientId_0)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.Specialization)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 00:15:51.663 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-12-03 00:15:51.664 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:15:51.666 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:15:51.667 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:15:51.668 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 00:15:51.692 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Doctor.Available (bool?), 12], [Property: Doctor.Biography (string), 13], [Property: Doctor.ConsultationFees (decimal) Required, 14], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Doctor.ExperienceYears (int?), 16], [Property: Doctor.ImageURL (string) MaxLength(300), 17], [Property: Doctor.SpecializationId (int) Required FK Index, 18], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: Doctor.UserId (string) Required FK Index, 20] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 21], [Property: User.AccessFailedCount (int) Required, 22], [Property: User.ConcurrencyStamp (string) Concurrency, 23], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: User.DateOfBirth (DateOnly?), 25], [Property: User.Email (string) Index MaxLength(256), 26], [Property: User.EmailConfirmed (bool) Required, 27], [Property: User.FullName (string) Required MaxLength(150), 28], [Property: User.Gender (GenderType?) MaxLength(10), 29], [Property: User.LockoutEnabled (bool) Required, 30], [Property: User.LockoutEnd (DateTimeOffset?), 31], [Property: User.NormalizedEmail (string) Index MaxLength(256), 32], [Property: User.NormalizedUserName (string) Index MaxLength(256), 33], [Property: User.PasswordHash (string), 34], [Property: User.PhoneNumber (string), 35], [Property: User.PhoneNumberConfirmed (bool) Required, 36], [Property: User.RefreshToken (string), 37], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 38], [Property: User.Role (string) Required MaxLength(50), 39], [Property: User.SecurityStamp (string), 40], [Property: User.TwoFactorEnabled (bool) Required, 41], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 42], [Property: User.UserName (string) MaxLength(256), 43] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 44], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Specialization.Description (string), 46], [Property: Specialization.ImageURL (string) MaxLength(300), 47], [Property: Specialization.Name (string) Required MaxLength(120), 48], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 50], [Property: Branch.Address (string) MaxLength(250), 51], [Property: Branch.BranchName (string) Required MaxLength(150), 52], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 53], [Property: Branch.Description (string), 54], [Property: Branch.Email (string) MaxLength(200), 55], [Property: Branch.ImageURL (string) MaxLength(300), 56], [Property: Branch.Latitude (double?), 57], [Property: Branch.Longitude (double?), 58], [Property: Branch.Phone (string) MaxLength(25), 59], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            5 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: Payment.Amount (decimal) Required, 62], [Property: Payment.AppointmentId (int) Required FK Index, 63], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: Payment.Currency (string) Required MaxLength(3), 65], [Property: Payment.GatewayResponse (string), 66], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 67], [Property: Payment.PaymobOrderId (long?), 68], [Property: Payment.PaymobTransactionId (long?), 69], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 70], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 71] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p ON a.AppointmentId == p.AppointmentId
        WHERE a.PatientId == @__patientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:15:51.697 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.698 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.700 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:15:51.702 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:15:51.703 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:15:51.704 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
WHERE [a].[PatientId] = @__patientId_0
2025-12-03 00:15:51.718 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
WHERE [a].[PatientId] = @__patientId_0
2025-12-03 00:15:51.732 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.736 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.737 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.739 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.741 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.742 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.743 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.744 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.746 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.747 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.749 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.750 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.751 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.752 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.754 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.756 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.757 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.758 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.759 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.761 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.762 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.783 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.785 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.818 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.842 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.844 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.848 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.849 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.852 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.853 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.855 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.859 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.860 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.863 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.864 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.866 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.867 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.876 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.877 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:15:51.895 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:15:51.897 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 175ms reading results.
2025-12-03 00:15:51.898 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.899 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:15:51.919 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:15:51.927 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:15:51.928 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:15:51.929 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:15:51.930 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:15:51.931 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:15:51.969 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital) in 3519.2777ms
2025-12-03 00:15:51.972 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:15:51.980 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:15:51.988 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:15:51.990 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:15:51.993 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/patient/1 - 200 null application/json; charset=utf-8 3670.1536ms
2025-12-03 00:19:04.592 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-03 00:19:04.712 +02:00 [DBG] Hosting starting
2025-12-03 00:19:04.729 +02:00 [INF] User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 00:19:04.739 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-171dc15b-9d2d-45d5-9fcb-18badfdae667.xml'.
2025-12-03 00:19:04.752 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-328565d1-c612-402c-9473-6f50dc1bcb2f.xml'.
2025-12-03 00:19:04.755 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3853d745-e818-4ecf-b264-c04445fb406d.xml'.
2025-12-03 00:19:04.759 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3a7083ac-1a8b-48f5-9e81-d3a63254e8eb.xml'.
2025-12-03 00:19:04.762 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-77f0ec14-5c63-448f-b8e4-a2bd27bd6ead.xml'.
2025-12-03 00:19:04.768 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc.xml'.
2025-12-03 00:19:04.769 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-a21099c1-ceb7-4545-b251-882dccb0fb5b.xml'.
2025-12-03 00:19:04.771 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-e626ca21-42a8-439d-97f1-774b663fbc67.xml'.
2025-12-03 00:19:04.777 +02:00 [DBG] Found key {171dc15b-9d2d-45d5-9fcb-18badfdae667}.
2025-12-03 00:19:04.784 +02:00 [DBG] Found key {328565d1-c612-402c-9473-6f50dc1bcb2f}.
2025-12-03 00:19:04.786 +02:00 [DBG] Found key {3853d745-e818-4ecf-b264-c04445fb406d}.
2025-12-03 00:19:04.787 +02:00 [DBG] Found key {3a7083ac-1a8b-48f5-9e81-d3a63254e8eb}.
2025-12-03 00:19:04.788 +02:00 [DBG] Found key {77f0ec14-5c63-448f-b8e4-a2bd27bd6ead}.
2025-12-03 00:19:04.789 +02:00 [DBG] Found key {9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc}.
2025-12-03 00:19:04.789 +02:00 [DBG] Found key {a21099c1-ceb7-4545-b251-882dccb0fb5b}.
2025-12-03 00:19:04.790 +02:00 [DBG] Found key {e626ca21-42a8-439d-97f1-774b663fbc67}.
2025-12-03 00:19:04.798 +02:00 [DBG] Considering key {e626ca21-42a8-439d-97f1-774b663fbc67} with expiration date 2025-12-29 20:28:34Z as default key.
2025-12-03 00:19:04.803 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 00:19:04.806 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-03 00:19:04.807 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 00:19:04.813 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-03 00:19:04.815 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-03 00:19:04.817 +02:00 [DBG] Using key {e626ca21-42a8-439d-97f1-774b663fbc67} as the default key.
2025-12-03 00:19:04.819 +02:00 [DBG] Key ring with default key {e626ca21-42a8-439d-97f1-774b663fbc67} was loaded during application startup.
2025-12-03 00:19:04.928 +02:00 [INF] Now listening on: https://localhost:7217
2025-12-03 00:19:04.929 +02:00 [INF] Now listening on: http://localhost:5163
2025-12-03 00:19:04.930 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-12-03 00:19:04.931 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-03 00:19:04.931 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-03 00:19:04.932 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-03 00:19:05.019 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 00:19:05.020 +02:00 [INF] Hosting environment: Development
2025-12-03 00:19:05.021 +02:00 [INF] Content root path: D:\Work\HospitalWebSite\Hospital\Hospital
2025-12-03 00:19:05.022 +02:00 [DBG] Hosting started
2025-12-03 00:19:05.383 +02:00 [DBG] Connection id "0HNHHU372FV7P" accepted.
2025-12-03 00:19:05.385 +02:00 [DBG] Connection id "0HNHHU372FV7P" started.
2025-12-03 00:19:05.421 +02:00 [DBG] Connection id "0HNHHU372FV7Q" received FIN.
2025-12-03 00:19:05.422 +02:00 [DBG] Connection id "0HNHHU372FV7P" received FIN.
2025-12-03 00:19:05.423 +02:00 [DBG] Connection id "0HNHHU372FV7Q" accepted.
2025-12-03 00:19:05.425 +02:00 [DBG] Connection id "0HNHHU372FV7Q" started.
2025-12-03 00:19:05.432 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 00:19:05.436 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 00:19:05.465 +02:00 [DBG] Connection id "0HNHHU372FV7Q" stopped.
2025-12-03 00:19:05.465 +02:00 [DBG] Connection id "0HNHHU372FV7P" stopped.
2025-12-03 00:19:05.468 +02:00 [DBG] Connection id "0HNHHU372FV7P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:19:05.468 +02:00 [DBG] Connection id "0HNHHU372FV7Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:19:05.538 +02:00 [DBG] Connection id "0HNHHU372FV7R" accepted.
2025-12-03 00:19:05.545 +02:00 [DBG] Connection id "0HNHHU372FV7R" started.
2025-12-03 00:19:05.594 +02:00 [DBG] Connection 0HNHHU372FV7R established using the following protocol: "Tls12"
2025-12-03 00:19:05.662 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-12-03 00:19:05.754 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-03 00:19:05.789 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-03 00:19:05.790 +02:00 [DBG] Request did not match any endpoints
2025-12-03 00:19:05.843 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-03 00:19:05.845 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-03 00:19:05.871 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-03 00:19:05.875 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-03 00:19:05.897 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 236.398ms
2025-12-03 00:19:05.908 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-12-03 00:19:05.957 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 49.0545ms
2025-12-03 00:19:06.419 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-12-03 00:19:06.458 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.7208ms
2025-12-03 00:19:07.802 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-12-03 00:19:07.806 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-03 00:19:07.807 +02:00 [DBG] Request did not match any endpoints
2025-12-03 00:19:07.862 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 59.9398ms
2025-12-03 00:19:17.797 +02:00 [DBG] Connection id "0HNHHU372FV7S" accepted.
2025-12-03 00:19:17.807 +02:00 [DBG] Connection id "0HNHHU372FV7S" started.
2025-12-03 00:19:17.818 +02:00 [DBG] Connection 0HNHHU372FV7S established using the following protocol: "Tls12"
2025-12-03 00:19:17.821 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-12-03 00:19:17.827 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-12-03 00:19:17.835 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-12-03 00:19:17.837 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:19:17.841 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:19:17.842 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:19:17.843 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:19:17.866 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:19:17.871 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:19:17.903 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:19:17.911 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:19:17.913 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:19:17.914 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:19:17.917 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:19:17.918 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:19:17.921 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:19:18.171 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-03 00:19:18.200 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:19:18.206 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:19:18.208 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:19:18.211 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:19:18.212 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:19:18.213 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:19:18.215 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:19:18.219 +02:00 [INF] Get  doctor By Id called at "2025-12-03T00:19:18.2190820+02:00"
2025-12-03 00:19:18.221 +02:00 [INF] Fetching doctor with ID 1
2025-12-03 00:19:18.669 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-12-03 00:19:18.671 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-12-03 00:19:18.672 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-12-03 00:19:18.673 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-12-03 00:19:18.674 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-12-03 00:19:18.784 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 00:19:18.788 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 00:19:18.953 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:19:19.031 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-12-03 00:19:19.105 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:19:19.108 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:19:19.114 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 00:19:19.116 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 00:19:19.293 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:19:19.350 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:19:19.357 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:19:19.359 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:19.360 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:19:19.361 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:19:19.363 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:19:19.365 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:19:19.366 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:19.371 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:19:19.373 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:19:19.374 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:19:19.376 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:19:19.377 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:19:19.386 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:19:19.387 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:19:19.390 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:19:19.392 +02:00 [INF] get all schedule called at "2025-12-03T00:19:19.3926254+02:00"
2025-12-03 00:19:19.394 +02:00 [INF] Fetching all schedules
2025-12-03 00:19:19.400 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 00:19:19.424 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:19:19.456 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:19:20.536 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-12-03 00:19:20.539 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-12-03 00:19:20.540 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:19:20.541 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:19:20.543 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:19:20.543 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-12-03 00:19:20.556 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:19:20.560 +02:00 [DBG] Created DbConnection. (14ms).
2025-12-03 00:19:20.564 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:19:20.565 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:19:20.567 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:20.567 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:20.720 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:20.724 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:20.725 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:19:20.725 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:19:20.732 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:19:20.732 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:19:20.734 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-12-03 00:19:20.737 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-12-03 00:19:20.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:19:20.740 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:19:20.779 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:19:20.779 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:19:20.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.842 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.859 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.859 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.860 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.890 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.890 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.892 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.907 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.922 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.923 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.923 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.925 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.926 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.929 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.932 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.933 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.936 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.936 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:20.943 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:19:20.943 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:19:20.949 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 162ms reading results.
2025-12-03 00:19:20.949 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 160ms reading results.
2025-12-03 00:19:20.952 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:20.952 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:20.956 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 00:19:20.956 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 00:19:20.967 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:19:20.968 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:19:20.970 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:19:20.971 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:19:20.971 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:19:20.972 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:19:20.973 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:19:20.974 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:19:20.975 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:19:20.975 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:19:20.976 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:19:20.976 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-12-03 00:19:20.995 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 1605.6126ms
2025-12-03 00:19:20.997 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 3077.1589ms
2025-12-03 00:19:20.997 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:20.998 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:19:21.001 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:19:21.001 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:19:21.005 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:21.005 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:21.007 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:19:21.007 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:19:21.009 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 3187.9963ms
2025-12-03 00:19:21.010 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 1716.312ms
2025-12-03 00:19:23.320 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:19:23.323 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:19:23.325 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:19:23.328 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:23.329 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:19:23.331 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:19:23.331 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:19:23.333 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:19:23.334 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:23.335 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:19:23.337 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:19:23.339 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:19:23.341 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:19:23.346 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:19:23.347 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:19:23.349 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:19:23.352 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:19:23.354 +02:00 [INF] get all schedule called at "2025-12-03T00:19:23.3540569+02:00"
2025-12-03 00:19:23.354 +02:00 [INF] Fetching all schedules
2025-12-03 00:19:23.365 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:19:23.369 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:19:23.370 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:19:23.371 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:23.373 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:23.374 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:19:23.375 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:19:23.376 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:19:23.377 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:19:23.612 +02:00 [INF] Executed DbCommand (235ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:19:23.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.617 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.619 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.621 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.623 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.625 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.627 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.631 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.634 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.635 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:23.636 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:19:23.637 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 21ms reading results.
2025-12-03 00:19:23.638 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:23.639 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:19:23.640 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:19:23.642 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:19:23.643 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:19:23.643 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:19:23.644 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:19:23.645 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:19:23.648 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 299.4206ms
2025-12-03 00:19:23.649 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:23.650 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:19:23.651 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:23.651 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:19:23.652 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 499 null application/json; charset=utf-8 332.255ms
2025-12-03 00:19:24.079 +02:00 [DBG] Connection id "0HNHHU372FV7S" received FIN.
2025-12-03 00:19:24.082 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV7S completed.
2025-12-03 00:19:24.082 +02:00 [DBG] Connection id "0HNHHU372FV7S" is closed. The last processed stream ID was 5.
2025-12-03 00:19:24.084 +02:00 [DBG] Connection id "0HNHHU372FV7S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:19:24.097 +02:00 [DBG] Connection id "0HNHHU372FV7S" stopped.
2025-12-03 00:19:25.367 +02:00 [DBG] Connection id "0HNHHU372FV7T" accepted.
2025-12-03 00:19:25.371 +02:00 [DBG] Connection id "0HNHHU372FV7T" started.
2025-12-03 00:19:25.377 +02:00 [DBG] Connection 0HNHHU372FV7T established using the following protocol: "Tls12"
2025-12-03 00:19:25.379 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:19:25.383 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:19:25.384 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:19:25.385 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:25.386 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:19:25.387 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:19:25.387 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:19:25.388 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:19:25.389 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:25.390 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:19:25.392 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:19:25.393 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:19:25.393 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:19:25.395 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:19:25.396 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:19:25.397 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:19:25.400 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:19:25.401 +02:00 [INF] get all schedule called at "2025-12-03T00:19:25.4016078+02:00"
2025-12-03 00:19:25.402 +02:00 [INF] Fetching all schedules
2025-12-03 00:19:25.402 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:19:25.404 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:19:25.405 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:19:25.405 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:25.406 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:25.407 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:19:25.407 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:19:25.408 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:19:25.409 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:19:25.418 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:19:25.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.422 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.424 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.426 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.431 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.434 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.436 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.437 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.438 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.441 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.442 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.443 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:19:25.447 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:19:25.448 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 27ms reading results.
2025-12-03 00:19:25.449 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:25.450 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:19:25.451 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:19:25.453 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:19:25.454 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:19:25.454 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:19:25.455 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:19:25.456 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:19:25.457 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 59.9142ms
2025-12-03 00:19:25.458 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:19:25.459 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:19:25.459 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:19:25.460 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:19:25.462 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 83.0457ms
2025-12-03 00:19:29.093 +02:00 [DBG] Connection id "0HNHHU372FV7T" received FIN.
2025-12-03 00:19:29.095 +02:00 [DBG] Connection id "0HNHHU372FV7T" is closed. The last processed stream ID was 1.
2025-12-03 00:19:29.095 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV7T completed.
2025-12-03 00:19:29.099 +02:00 [DBG] Connection id "0HNHHU372FV7T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:19:29.108 +02:00 [DBG] Connection id "0HNHHU372FV7T" stopped.
2025-12-03 00:20:20.145 +02:00 [DBG] Connection id "0HNHHU372FV7U" accepted.
2025-12-03 00:20:20.147 +02:00 [DBG] Connection id "0HNHHU372FV7U" started.
2025-12-03 00:20:20.156 +02:00 [DBG] Connection 0HNHHU372FV7U established using the following protocol: "Tls12"
2025-12-03 00:20:20.160 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:20:20.163 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:20:20.165 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:20:20.168 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:20:20.170 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:20.172 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:20.174 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:20.176 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:20:20.177 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:20:20.179 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:20:20.184 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:20:20.186 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:20:20.189 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:20:20.193 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:20:20.195 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:20:20.198 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:20:20.201 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:20:20.202 +02:00 [INF] get all schedule called at "2025-12-03T00:20:20.2026812+02:00"
2025-12-03 00:20:20.204 +02:00 [INF] Fetching all schedules
2025-12-03 00:20:20.206 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:20:20.209 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:20:20.211 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:20:20.212 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:20.214 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:20.216 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:20.217 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:20.218 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:20.220 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:20:20.241 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:20:20.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.253 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.255 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.256 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.258 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.261 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.263 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.265 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.267 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.269 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.270 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.271 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.274 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.279 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.282 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:20.284 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:20.286 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 00:20:20.287 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:20.289 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:20.291 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:20:20.294 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:20:20.295 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:20:20.296 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:20:20.298 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:20:20.299 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:20:20.301 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 103.008ms
2025-12-03 00:20:20.303 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:20:20.304 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:20:20.305 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:20.307 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:20:20.309 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 149.1013ms
2025-12-03 00:20:28.882 +02:00 [DBG] Connection id "0HNHHU372FV7U" received FIN.
2025-12-03 00:20:28.884 +02:00 [DBG] Connection id "0HNHHU372FV7U" is closed. The last processed stream ID was 1.
2025-12-03 00:20:28.884 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV7U completed.
2025-12-03 00:20:28.886 +02:00 [DBG] Connection id "0HNHHU372FV7U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:20:28.897 +02:00 [DBG] Connection id "0HNHHU372FV7U" stopped.
2025-12-03 00:20:35.087 +02:00 [DBG] Connection id "0HNHHU372FV7V" accepted.
2025-12-03 00:20:35.090 +02:00 [DBG] Connection id "0HNHHU372FV7V" started.
2025-12-03 00:20:35.094 +02:00 [DBG] Connection 0HNHHU372FV7V established using the following protocol: "Tls12"
2025-12-03 00:20:35.098 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-12-03 00:20:35.103 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-12-03 00:20:35.106 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-12-03 00:20:35.108 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:20:35.109 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:35.110 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:35.110 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:35.111 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:20:35.112 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:20:35.112 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:20:35.114 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:20:35.115 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:20:35.115 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:20:35.116 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:20:35.118 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:20:35.119 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:20:35.122 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:20:35.123 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:20:35.124 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:20:35.125 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:20:35.126 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:20:35.127 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:20:35.128 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:20:35.129 +02:00 [INF] Get  doctor By Id called at "2025-12-03T00:20:35.1292050+02:00"
2025-12-03 00:20:35.129 +02:00 [INF] Fetching doctor with ID 1
2025-12-03 00:20:35.130 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:20:35.132 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:20:35.133 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:20:35.133 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:35.134 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:35.135 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:35.135 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:20:35.136 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:35.137 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:20:35.142 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:20:35.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.146 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.148 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.152 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.154 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.155 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.156 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.157 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.159 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:35.162 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:35.162 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 17ms reading results.
2025-12-03 00:20:35.163 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:35.164 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:20:35.165 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:20:35.166 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:20:35.167 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:20:35.167 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:20:35.168 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:20:35.169 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-12-03 00:20:35.170 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 51.0161ms
2025-12-03 00:20:35.171 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:20:35.171 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:20:35.172 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:35.173 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:20:35.174 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 76.1382ms
2025-12-03 00:20:38.886 +02:00 [DBG] Connection id "0HNHHU372FV7V" received FIN.
2025-12-03 00:20:38.892 +02:00 [DBG] Connection id "0HNHHU372FV7V" is closed. The last processed stream ID was 1.
2025-12-03 00:20:38.892 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV7V completed.
2025-12-03 00:20:38.893 +02:00 [DBG] Connection id "0HNHHU372FV7V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:20:38.900 +02:00 [DBG] Connection id "0HNHHU372FV7V" stopped.
2025-12-03 00:20:41.454 +02:00 [DBG] Connection id "0HNHHU372FV80" accepted.
2025-12-03 00:20:41.457 +02:00 [DBG] Connection id "0HNHHU372FV80" started.
2025-12-03 00:20:41.459 +02:00 [DBG] Connection 0HNHHU372FV80 established using the following protocol: "Tls12"
2025-12-03 00:20:41.461 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-12-03 00:20:41.463 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-12-03 00:20:41.464 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:20:41.467 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:41.467 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:41.469 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:41.470 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:20:41.472 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 10.7933ms
2025-12-03 00:20:41.475 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-12-03 00:20:41.479 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-12-03 00:20:41.480 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-12-03 00:20:41.483 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-12-03 00:20:41.484 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:41.485 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:41.485 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:41.486 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:20:41.486 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-12-03 00:20:41.490 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-12-03 00:20:41.492 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:20:41.493 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:20:41.494 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:20:41.496 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:20:41.497 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:20:41.498 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:20:41.502 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:20:41.503 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-12-03 00:20:41.504 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-12-03 00:20:41.506 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:20:41.515 +02:00 [DBG] Connection id "0HNHHU372FV80", Request id "0HNHHU372FV80:00000003": started reading request body.
2025-12-03 00:20:41.516 +02:00 [DBG] Connection id "0HNHHU372FV80", Request id "0HNHHU372FV80:00000003": done reading request body.
2025-12-03 00:20:41.530 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-12-03 00:20:41.532 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-12-03 00:20:41.533 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-12-03 00:20:41.534 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-12-03 00:20:41.541 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-12-03 00:20:41.543 +02:00 [INF] Add Appointment called at "2025-12-03T00:20:41.5434885+02:00"
2025-12-03 00:20:41.547 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-12-03", Shift: "Morning"
2025-12-03 00:20:41.565 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:20:41.571 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:20:41.572 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:20:41.573 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:41.574 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:41.576 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-12-03 00:20:41.583 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-12-03 00:20:41.587 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-12-03 00:20:41.589 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-12-03 00:20:41.590 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-12-03 00:20:41.592 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-12-03 00:20:41.594 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:20:41.616 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:20:41.625 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:41.626 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:41.628 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:20:41.629 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:20:41.657 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:20:41.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.676 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.682 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:41.683 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:20:41.684 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:41.685 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:20:41.687 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:41.688 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:20:41.695 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:20:41.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.702 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.704 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.710 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.712 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.715 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.718 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.720 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:41.723 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:41.724 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 24ms reading results.
2025-12-03 00:20:41.728 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-12-03 00:20:41.735 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:20:41.738 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:41.739 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:20:41.740 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:41.742 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:20:41.749 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:20:41.752 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:41.753 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:20:41.761 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-12-03 00:20:41.768 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:20:41.781 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:41.782 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:41.786 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-03 00:20:41.787 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-03 00:20:41.806 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-03 00:20:41.812 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:41.813 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:20:41.818 +02:00 [DBG] Rolling back transaction.
2025-12-03 00:20:41.821 +02:00 [DBG] Rolled back transaction.
2025-12-03 00:20:41.824 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:41.826 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:20:41.828 +02:00 [ERR] Failed to create appointment for PatientId: 2, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Work\HospitalWebSite\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-12-03 00:20:41.877 +02:00 [DBG] Disposing transaction.
2025-12-03 00:20:41.879 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 380.6016ms
2025-12-03 00:20:41.881 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-12-03 00:20:41.883 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Work\HospitalWebSite\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Work\HospitalWebSite\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Work\HospitalWebSite\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Work\HospitalWebSite\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Work\HospitalWebSite\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-12-03 00:20:41.917 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:20:41.918 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:41.920 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:20:41.922 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 447.1703ms
2025-12-03 00:20:48.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:20:48.539 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:20:48.541 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:20:48.543 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:20:48.545 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:48.545 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:48.546 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:48.547 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:20:48.548 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:20:48.550 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:20:48.551 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:20:48.552 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:20:48.553 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:20:48.555 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:20:48.556 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:20:48.557 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:20:48.558 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:20:48.559 +02:00 [INF] get all schedule called at "2025-12-03T00:20:48.5598716+02:00"
2025-12-03 00:20:48.560 +02:00 [INF] Fetching all schedules
2025-12-03 00:20:48.561 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:20:48.564 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:20:48.565 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:20:48.566 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:48.567 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:48.568 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:48.569 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:20:48.570 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:48.570 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:20:48.584 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:20:48.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.589 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.591 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.595 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.598 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.600 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.603 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.606 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.610 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:48.613 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:48.614 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 25ms reading results.
2025-12-03 00:20:48.615 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:48.616 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:48.617 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:20:48.620 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:20:48.620 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:20:48.621 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:20:48.622 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:20:48.623 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:20:48.627 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 70.5835ms
2025-12-03 00:20:48.629 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:20:48.630 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:20:48.631 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:48.632 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:20:48.634 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 100.7985ms
2025-12-03 00:20:48.894 +02:00 [DBG] Connection id "0HNHHU372FV80" received FIN.
2025-12-03 00:20:48.897 +02:00 [DBG] Connection id "0HNHHU372FV80" is closed. The last processed stream ID was 5.
2025-12-03 00:20:48.897 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV80 completed.
2025-12-03 00:20:48.899 +02:00 [DBG] Connection id "0HNHHU372FV80" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:20:48.912 +02:00 [DBG] Connection id "0HNHHU372FV80" stopped.
2025-12-03 00:20:58.083 +02:00 [DBG] Connection id "0HNHHU372FV81" accepted.
2025-12-03 00:20:58.085 +02:00 [DBG] Connection id "0HNHHU372FV81" started.
2025-12-03 00:20:58.087 +02:00 [DBG] Connection 0HNHHU372FV81 established using the following protocol: "Tls12"
2025-12-03 00:20:58.089 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 00:20:58.092 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:20:58.094 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:20:58.097 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:58.098 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:58.099 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:58.100 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:20:58.101 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 12.5393ms
2025-12-03 00:20:58.106 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 62
2025-12-03 00:20:58.113 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:20:58.115 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 00:20:58.117 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:20:58.119 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:58.120 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:58.122 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:58.123 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:20:58.125 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:20:58.135 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 00:20:58.138 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:20:58.140 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:20:58.142 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:20:58.146 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:20:58.148 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:20:58.150 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:20:58.154 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:20:58.155 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:20:58.157 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 00:20:58.160 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:20:58.164 +02:00 [DBG] Connection id "0HNHHU372FV81", Request id "0HNHHU372FV81:00000003": started reading request body.
2025-12-03 00:20:58.166 +02:00 [DBG] Connection id "0HNHHU372FV81", Request id "0HNHHU372FV81:00000003": done reading request body.
2025-12-03 00:20:58.170 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 00:20:58.171 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:20:58.173 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:20:58.174 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:20:58.178 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:20:58.181 +02:00 [INF] Login called at "2025-12-03T00:20:58.1815420+02:00"
2025-12-03 00:20:58.187 +02:00 [INF] Login attempt for email: walaa.elbishlawy1@gmail.com
2025-12-03 00:20:58.192 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:20:58.198 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-12-03 00:20:58.206 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:20:58.218 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:20:58.219 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:20:58.220 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.222 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.223 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.226 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:58.231 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:20:58.233 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:20:58.245 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:20:58.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:58.252 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.253 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:20:58.255 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.256 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:58.410 +02:00 [DBG] Creating JWT token for user 97578185-d8e5-4b14-80c7-571c67a822e1
2025-12-03 00:20:58.420 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-12-03 00:20:58.431 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:20:58.436 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.438 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.440 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.441 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:58.443 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:20:58.445 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:20:58.457 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:20:58.461 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.463 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:20:58.466 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.467 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:58.480 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-12-03 00:20:58.487 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:20:58.491 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.493 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.495 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.497 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:58.498 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:58.500 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:20:58.516 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:20:58.519 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.521 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:20:58.522 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.524 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:58.534 +02:00 [DBG] JWT token created for user 97578185-d8e5-4b14-80c7-571c67a822e1, expires at "2025-12-02T23:20:58.0000000Z"
2025-12-03 00:20:58.536 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.538 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.539 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.540 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:58.542 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:20:58.544 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:20:58.548 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:20:58.550 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.552 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:20:58.553 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.555 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:58.563 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-12-03 00:20:58.570 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:20:58.574 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.576 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.578 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.580 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:58.582 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:20:58.584 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:20:58.598 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:20:58.602 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.603 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:20:58.605 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.606 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:20:58.627 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:58.636 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:20:58.646 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:20:58.661 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:20:58.664 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:20:58.666 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:20:58.766 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.768 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.772 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.774 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:20:58.780 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:20:58.782 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:20:58.851 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:20:58.872 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.877 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 13ms reading results.
2025-12-03 00:20:58.881 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.883 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:20:58.892 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:58.898 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:20:58.931 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .FirstOrDefault(d => d.UserId == __user_Id_0)'
2025-12-03 00:20:58.939 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId
            FROM Doctors AS d
            WHERE d.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:20:58.945 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.947 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.951 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:58.953 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:58.956 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:20:58.958 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId]
FROM [Doctors] AS [d]
WHERE [d].[UserId] = @__user_Id_0
2025-12-03 00:20:58.968 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId]
FROM [Doctors] AS [d]
WHERE [d].[UserId] = @__user_Id_0
2025-12-03 00:20:58.977 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:58.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:58.983 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:58.985 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 12ms reading results.
2025-12-03 00:20:58.988 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:58.990 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:20:58.993 +02:00 [INF] Doctor 1 logged in successfully
2025-12-03 00:20:58.999 +02:00 [INF] User walaa.elbishlawy1@gmail.com logged in successfully with roles: Doctor
2025-12-03 00:20:59.001 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:20:59.006 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:20:59.008 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:20:59.012 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:20:59.014 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:20:59.018 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 00:20:59.026 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 876.3536ms
2025-12-03 00:20:59.030 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:20:59.032 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:20:59.034 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:59.036 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:20:59.039 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 933.1061ms
2025-12-03 00:20:59.138 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/schedule/doctor/1 - null null
2025-12-03 00:20:59.144 +02:00 [DBG] 1 candidate(s) found for the request path '/api/schedule/doctor/1'
2025-12-03 00:20:59.147 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)' with route pattern 'api/Schedule/doctor/{doctorId}' is valid for the request path '/api/schedule/doctor/1'
2025-12-03 00:20:59.150 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-12-03 00:20:59.153 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:20:59.162 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:20:59.166 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:20:59.168 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:20:59.219 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-12-03 00:20:59.231 +02:00 [INF] Route matched with {action = "GetByDoctorId", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetByDoctorId(Int32) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:20:59.240 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:20:59.246 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:20:59.249 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:20:59.253 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:20:59.257 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:20:59.261 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:20:59.269 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:20:59.274 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:20:59.276 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:20:59.278 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:20:59.281 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:20:59.284 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:20:59.287 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:20:59.303 +02:00 [INF] get schedule by doctor id called at "2025-12-03T00:20:59.3038014+02:00"
2025-12-03 00:20:59.307 +02:00 [INF] Fetching schedules for DoctorId: 1
2025-12-03 00:20:59.316 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:20:59.322 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DoctorId == __doctorId_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-12-03 00:20:59.326 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-12-03 00:20:59.329 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:20:59.331 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:20:59.334 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-12-03 00:20:59.362 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId
        WHERE s.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:20:59.380 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:20:59.382 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 00:20:59.385 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:59.388 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:59.396 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:20:59.398 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:20:59.401 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:20:59.404 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE [s].[DoctorId] = @__doctorId_0
2025-12-03 00:20:59.452 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE [s].[DoctorId] = @__doctorId_0
2025-12-03 00:20:59.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.481 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.486 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.489 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.495 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.503 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.506 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.514 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.527 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.535 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.548 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:20:59.554 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:20:59.560 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 82ms reading results.
2025-12-03 00:20:59.563 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:59.567 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:20:59.571 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:20:59.577 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:20:59.579 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:20:59.581 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:20:59.583 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:20:59.594 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:20:59.606 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital) in 345.4139ms
2025-12-03 00:20:59.621 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-12-03 00:20:59.624 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:20:59.630 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:20:59.636 +02:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-12-03 00:20:59.639 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/schedule/doctor/1 - 200 null application/json; charset=utf-8 500.8204ms
2025-12-03 00:21:03.248 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1/today - null null
2025-12-03 00:21:03.253 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1/today'
2025-12-03 00:21:03.255 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId:int}/today' is valid for the request path '/api/Doctor/1/today'
2025-12-03 00:21:03.259 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:03.262 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:03.263 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:03.266 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:03.267 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:03.269 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:03.278 +02:00 [INF] Route matched with {action = "GetTodayAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTodayAppointmentsForDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:21:03.282 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:03.284 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:03.287 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:03.289 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:03.292 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:03.295 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:03.312 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:03.315 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:03.316 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:03.319 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:03.321 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:03.323 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:03.329 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:03.332 +02:00 [INF] GetTodayAppointmentsForDoctor  called at "2025-12-03T00:21:03.3328303+02:00"
2025-12-03 00:21:03.336 +02:00 [INF] Fetching today's appointments for doctor ID 1
2025-12-03 00:21:03.338 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:03.343 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:03.345 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:21:03.347 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.348 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.350 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:03.351 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:03.353 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:03.355 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:03.365 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:03.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.374 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.380 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.385 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.388 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.393 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.395 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.397 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.398 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.399 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.403 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.406 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:03.410 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 00:21:03.413 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.414 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:03.419 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Branch)
    .Where(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && (int)a.Status == 2)'
2025-12-03 00:21:03.423 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 00:21:03.429 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-12-03 00:21:03.431 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:21:03.455 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 16], [Property: User.AccessFailedCount (int) Required, 17], [Property: User.ConcurrencyStamp (string) Concurrency, 18], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: User.DateOfBirth (DateOnly?), 20], [Property: User.Email (string) Index MaxLength(256), 21], [Property: User.EmailConfirmed (bool) Required, 22], [Property: User.FullName (string) Required MaxLength(150), 23], [Property: User.Gender (GenderType?) MaxLength(10), 24], [Property: User.LockoutEnabled (bool) Required, 25], [Property: User.LockoutEnd (DateTimeOffset?), 26], [Property: User.NormalizedEmail (string) Index MaxLength(256), 27], [Property: User.NormalizedUserName (string) Index MaxLength(256), 28], [Property: User.PasswordHash (string), 29], [Property: User.PhoneNumber (string), 30], [Property: User.PhoneNumberConfirmed (bool) Required, 31], [Property: User.RefreshToken (string), 32], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 33], [Property: User.Role (string) Required MaxLength(50), 34], [Property: User.SecurityStamp (string), 35], [Property: User.TwoFactorEnabled (bool) Required, 36], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37], [Property: User.UserName (string) MaxLength(256), 38] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Branch.Address (string) MaxLength(250), 40], [Property: Branch.BranchName (string) Required MaxLength(150), 41], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 42], [Property: Branch.Description (string), 43], [Property: Branch.Email (string) MaxLength(200), 44], [Property: Branch.ImageURL (string) MaxLength(300), 45], [Property: Branch.Latitude (double?), 46], [Property: Branch.Longitude (double?), 47], [Property: Branch.Phone (string) MaxLength(25), 48], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Status == N'Confirmed')), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:21:03.468 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.470 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.471 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:03.472 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:03.477 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-03 00:21:03.479 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-12-03 00:21:03.502 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-12-03 00:21:03.522 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.548 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.551 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:03.556 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:03.561 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 53ms reading results.
2025-12-03 00:21:03.564 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.565 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:03.580 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:03.583 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:03.584 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:03.586 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:03.587 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:03.588 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:21:03.611 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital) in 316.5677ms
2025-12-03 00:21:03.613 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:03.615 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:03.617 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:03.619 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:03.620 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1/today - 200 null application/json; charset=utf-8 372.4666ms
2025-12-03 00:21:08.909 +02:00 [DBG] Connection id "0HNHHU372FV81" received FIN.
2025-12-03 00:21:08.910 +02:00 [DBG] Connection id "0HNHHU372FV81" is closed. The last processed stream ID was 7.
2025-12-03 00:21:08.910 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV81 completed.
2025-12-03 00:21:08.911 +02:00 [DBG] Connection id "0HNHHU372FV81" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:21:08.923 +02:00 [DBG] Connection id "0HNHHU372FV81" stopped.
2025-12-03 00:21:11.021 +02:00 [DBG] Connection id "0HNHHU372FV82" accepted.
2025-12-03 00:21:11.026 +02:00 [DBG] Connection id "0HNHHU372FV82" started.
2025-12-03 00:21:11.028 +02:00 [DBG] Connection 0HNHHU372FV82 established using the following protocol: "Tls12"
2025-12-03 00:21:11.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-12-03 00:21:11.033 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-12-03 00:21:11.034 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-12-03 00:21:11.036 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-12-03 00:21:11.037 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:11.038 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:11.039 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:11.040 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:11.042 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-12-03 00:21:11.046 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-12-03 00:21:11.048 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:11.050 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:11.051 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:11.053 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:11.055 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:11.057 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-12-03 00:21:11.060 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-12-03 00:21:11.062 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-12-03 00:21:11.063 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-12-03 00:21:11.065 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-12-03 00:21:11.066 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-12-03 00:21:11.068 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-12-03 00:21:11.070 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-12-03 00:21:11.073 +02:00 [INF] get patient by id called at "2025-12-03T00:21:11.0732679+02:00"
2025-12-03 00:21:11.076 +02:00 [INF] Fetching patient with ID: 2
2025-12-03 00:21:11.077 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:11.079 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:11.080 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:11.081 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.082 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.083 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:11.084 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:11.086 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:11.088 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:21:11.114 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:21:11.118 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.119 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.122 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:11.123 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 00:21:11.125 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.126 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:11.128 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-12-03 00:21:11.132 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:11.136 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:11.137 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:11.138 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:11.139 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:11.140 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-12-03 00:21:11.143 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 86.4737ms
2025-12-03 00:21:11.145 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-12-03 00:21:11.146 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:11.147 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.148 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:11.150 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/MedicalRecord/records/doctor/1/patient/2 - null null
2025-12-03 00:21:11.150 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 119.1463ms
2025-12-03 00:21:11.152 +02:00 [DBG] 1 candidate(s) found for the request path '/api/MedicalRecord/records/doctor/1/patient/2'
2025-12-03 00:21:11.155 +02:00 [DBG] Endpoint 'Hospital.Controllers.MedicalRecordController.GetHistory (Hospital)' with route pattern 'api/MedicalRecord/records/doctor/{doctorId}/patient/{patientId}' is valid for the request path '/api/MedicalRecord/records/doctor/1/patient/2'
2025-12-03 00:21:11.157 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.MedicalRecordController.GetHistory (Hospital)'
2025-12-03 00:21:11.158 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:11.159 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:11.160 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:11.161 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:11.162 +02:00 [INF] Executing endpoint 'Hospital.Controllers.MedicalRecordController.GetHistory (Hospital)'
2025-12-03 00:21:11.166 +02:00 [INF] Route matched with {action = "GetHistory", controller = "MedicalRecord"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHistory(Int32, Int32) on controller Hospital.Controllers.MedicalRecordController (Hospital).
2025-12-03 00:21:11.167 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:11.168 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:11.170 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:11.171 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:11.173 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:11.174 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.MedicalRecordController (Hospital)
2025-12-03 00:21:11.177 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.MedicalRecordController (Hospital)
2025-12-03 00:21:11.178 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:11.179 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:11.180 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:11.181 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:11.182 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:11.183 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:11.184 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:21:11.185 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-12-03 00:21:11.187 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:21:11.188 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:21:11.189 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:21:11.190 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:21:11.193 +02:00 [INF] get medical record history by doctor id and patient id   called at "2025-12-03T00:21:11.1931944+02:00"
2025-12-03 00:21:11.195 +02:00 [INF] Fetching medical records between DoctorId 1 and PatientId 2
2025-12-03 00:21:11.197 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:11.198 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:11.199 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:11.200 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.201 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.202 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:11.203 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:11.204 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:11.205 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:11.212 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:11.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.217 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.218 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.219 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.224 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.228 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.230 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.232 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.234 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.237 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:11.238 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 00:21:11.239 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.240 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:11.242 +02:00 [INF] Fetching patient with ID: 2
2025-12-03 00:21:11.243 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.245 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.246 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:11.248 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:11.249 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:11.250 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:21:11.254 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:21:11.258 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.261 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.262 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:11.263 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:11.264 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-12-03 00:21:11.266 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.267 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:11.268 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-12-03 00:21:11.272 +02:00 [DBG] Compiling query expression: 
'DbSet<MedicalRecord>()
    .Include(r => r.Doctor)
    .ThenInclude(d => d.User)
    .Include(r => r.Patient)
    .ThenInclude(p => p.User)
    .Include(r => r.Appointment)
    .ThenInclude(a => a.Branch)
    .Where(r => r.DoctorId == __doctorId_0 && r.PatientId == __patientId_1)'
2025-12-03 00:21:11.274 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-12-03 00:21:11.275 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:21:11.277 +02:00 [DBG] Including navigation: 'MedicalRecord.Patient'.
2025-12-03 00:21:11.279 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-12-03 00:21:11.282 +02:00 [DBG] Including navigation: 'MedicalRecord.Appointment'.
2025-12-03 00:21:11.283 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:21:11.302 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<MedicalRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 1], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: MedicalRecord.Diagnosis (string), 3], [Property: MedicalRecord.DoctorId (int) Required FK Index, 4], [Property: MedicalRecord.Notes (string), 5], [Property: MedicalRecord.PatientId (int) Required FK Index, 6], [Property: MedicalRecord.TreatmentPlan (string), 7], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Patient.EmergencyContact (string) MaxLength(150), 44], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Patient.UserId (string) Required FK Index, 46] }
            4 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
            5 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 70], [Property: Appointment.BranchId (int) Required FK Index, 71], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 72], [Property: Appointment.CreatedBy (string) FK Index, 73], [Property: Appointment.Date (DateOnly) Required, 74], [Property: Appointment.DoctorId (int) Required FK Index, 75], [Property: Appointment.PatientId (int) Required FK Index, 76], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 77], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 78], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 79], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 80] }
            6 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 81], [Property: Branch.Address (string) MaxLength(250), 82], [Property: Branch.BranchName (string) Required MaxLength(150), 83], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 84], [Property: Branch.Description (string), 85], [Property: Branch.Email (string) MaxLength(200), 86], [Property: Branch.ImageURL (string) MaxLength(300), 87], [Property: Branch.Latitude (double?), 88], [Property: Branch.Longitude (double?), 89], [Property: Branch.Phone (string) MaxLength(25), 90], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 91] }
        SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt, u0.UserName, a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM MedicalRecords AS m
        INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Patients AS p ON m.PatientId == p.PatientId
        INNER JOIN Users AS u0 ON p.UserId == u0.Id
        INNER JOIN Appointments AS a ON m.AppointmentId == a.AppointmentId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE (m.DoctorId == @__doctorId_0) && (m.PatientId == @__patientId_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MedicalRecord>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:21:11.311 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.314 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.316 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:11.316 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:11.317 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:11.318 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__patientId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName], [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [MedicalRecords] AS [m]
INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Patients] AS [p] ON [m].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u0] ON [p].[UserId] = [u0].[Id]
INNER JOIN [Appointments] AS [a] ON [m].[AppointmentId] = [a].[AppointmentId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [m].[DoctorId] = @__doctorId_0 AND [m].[PatientId] = @__patientId_1
2025-12-03 00:21:11.344 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__patientId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName], [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [MedicalRecords] AS [m]
INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Patients] AS [p] ON [m].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u0] ON [p].[UserId] = [u0].[Id]
INNER JOIN [Appointments] AS [a] ON [m].[AppointmentId] = [a].[AppointmentId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [m].[DoctorId] = @__doctorId_0 AND [m].[PatientId] = @__patientId_1
2025-12-03 00:21:11.351 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:11.353 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:21:11.355 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.356 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:11.358 +02:00 [INF] No medical records found between DoctorId 1 and PatientId 2
2025-12-03 00:21:11.359 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:11.362 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:11.363 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:11.364 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:11.364 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:11.366 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.MedicalRecord.MedicalRecordDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:21:11.369 +02:00 [INF] Executed action Hospital.Controllers.MedicalRecordController.GetHistory (Hospital) in 194.3277ms
2025-12-03 00:21:11.371 +02:00 [INF] Executed endpoint 'Hospital.Controllers.MedicalRecordController.GetHistory (Hospital)'
2025-12-03 00:21:11.373 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:11.374 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:11.376 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:11.377 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/MedicalRecord/records/doctor/1/patient/2 - 200 null application/json; charset=utf-8 227.6203ms
2025-12-03 00:21:15.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1/today - null null
2025-12-03 00:21:15.797 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1/today'
2025-12-03 00:21:15.798 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId:int}/today' is valid for the request path '/api/Doctor/1/today'
2025-12-03 00:21:15.799 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:15.800 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:15.800 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:15.801 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:15.801 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:15.802 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:15.802 +02:00 [INF] Route matched with {action = "GetTodayAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTodayAppointmentsForDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:21:15.804 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:15.805 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:15.806 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:15.808 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:15.809 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:15.810 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:15.812 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:15.813 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:15.813 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:15.814 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:15.815 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:15.816 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:15.817 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:15.817 +02:00 [INF] GetTodayAppointmentsForDoctor  called at "2025-12-03T00:21:15.8179134+02:00"
2025-12-03 00:21:15.818 +02:00 [INF] Fetching today's appointments for doctor ID 1
2025-12-03 00:21:15.819 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:15.821 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:15.821 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:15.822 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.823 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.825 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:15.825 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:15.827 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:15.829 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:15.833 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:15.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.837 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.839 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.841 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.843 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.845 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.847 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.849 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.851 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.853 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:15.854 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 18ms reading results.
2025-12-03 00:21:15.855 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.856 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:15.858 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.859 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.860 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:15.861 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:15.862 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:15.863 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-12-03 00:21:15.876 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-12-03 00:21:15.879 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.881 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.882 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.883 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:15.885 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:15.886 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-12-03 00:21:15.887 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.887 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:15.888 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:15.891 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:15.891 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:15.892 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:15.893 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:15.894 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:21:15.895 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital) in 84.7716ms
2025-12-03 00:21:15.896 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:15.897 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:15.898 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:15.899 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:15.900 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1/today - 200 null application/json; charset=utf-8 108.9542ms
2025-12-03 00:21:18.922 +02:00 [DBG] Connection id "0HNHHU372FV82" received FIN.
2025-12-03 00:21:18.924 +02:00 [DBG] Connection id "0HNHHU372FV82" is closed. The last processed stream ID was 5.
2025-12-03 00:21:18.924 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV82 completed.
2025-12-03 00:21:18.927 +02:00 [DBG] Connection id "0HNHHU372FV82" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:21:18.938 +02:00 [DBG] Connection id "0HNHHU372FV82" stopped.
2025-12-03 00:21:19.678 +02:00 [DBG] Connection id "0HNHHU372FV7R" is closing.
2025-12-03 00:21:19.682 +02:00 [DBG] Connection id "0HNHHU372FV7R" is closed. The last processed stream ID was 7.
2025-12-03 00:21:19.685 +02:00 [DBG] Connection id "0HNHHU372FV7R" received FIN.
2025-12-03 00:21:19.686 +02:00 [DBG] Connection id "0HNHHU372FV7R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:21:19.686 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV7R completed.
2025-12-03 00:21:19.689 +02:00 [DBG] Connection id "0HNHHU372FV7R" stopped.
2025-12-03 00:21:23.971 +02:00 [DBG] Connection id "0HNHHU372FV83" accepted.
2025-12-03 00:21:23.973 +02:00 [DBG] Connection id "0HNHHU372FV83" started.
2025-12-03 00:21:23.983 +02:00 [DBG] Connection 0HNHHU372FV83 established using the following protocol: "Tls12"
2025-12-03 00:21:23.985 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Doctor/convertStatuesOFPaymentToPaied/9 - null null
2025-12-03 00:21:23.989 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/convertStatuesOFPaymentToPaied/9'
2025-12-03 00:21:23.991 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:21:23.992 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:23.995 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:23.997 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:23.999 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:21:24.000 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Doctor/convertStatuesOFPaymentToPaied/9 - 204 null null 14.2088ms
2025-12-03 00:21:24.004 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7217/api/Doctor/convertStatuesOFPaymentToPaied/9 - null 0
2025-12-03 00:21:24.008 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/convertStatuesOFPaymentToPaied/9'
2025-12-03 00:21:24.010 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.convertStatuesOFPaymentToPayied (Hospital)' with route pattern 'api/Doctor/convertStatuesOFPaymentToPaied/{Appoimentid:int}' is valid for the request path '/api/Doctor/convertStatuesOFPaymentToPaied/9'
2025-12-03 00:21:24.013 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.convertStatuesOFPaymentToPayied (Hospital)'
2025-12-03 00:21:24.015 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:24.016 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:24.018 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:24.019 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:24.020 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.convertStatuesOFPaymentToPayied (Hospital)'
2025-12-03 00:21:24.028 +02:00 [INF] Route matched with {action = "convertStatuesOFPaymentToPayied", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] convertStatuesOFPaymentToPayied(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:21:24.032 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:24.034 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:24.036 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:24.041 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:24.043 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:24.045 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:24.047 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:24.049 +02:00 [DBG] Attempting to bind parameter 'Appoimentid' of type 'System.Int32' ...
2025-12-03 00:21:24.050 +02:00 [DBG] Attempting to bind parameter 'Appoimentid' of type 'System.Int32' using the name 'Appoimentid' in request data ...
2025-12-03 00:21:24.052 +02:00 [DBG] Done attempting to bind parameter 'Appoimentid' of type 'System.Int32'.
2025-12-03 00:21:24.054 +02:00 [DBG] Done attempting to bind parameter 'Appoimentid' of type 'System.Int32'.
2025-12-03 00:21:24.056 +02:00 [DBG] Attempting to validate the bound parameter 'Appoimentid' of type 'System.Int32' ...
2025-12-03 00:21:24.062 +02:00 [DBG] Done attempting to validate the bound parameter 'Appoimentid' of type 'System.Int32'.
2025-12-03 00:21:24.065 +02:00 [INF] convertStatuesOFPaymentToPayied pay by cach  called at "2025-12-03T00:21:24.0650929+02:00"
2025-12-03 00:21:24.068 +02:00 [INF] Converting payment status to Paid for appointment ID 9
2025-12-03 00:21:24.073 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:24.077 +02:00 [DBG] Compiling query expression: 
'DbSet<Payment>()
    .FirstOrDefault(p => p.AppointmentId == __appointmentId_0)'
2025-12-03 00:21:24.086 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Payment>(
    asyncEnumerable: new SingleQueryingEnumerable<Payment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Payment.Amount (decimal) Required, 1], [Property: Payment.AppointmentId (int) Required FK Index, 2], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Payment.Currency (string) Required MaxLength(3), 4], [Property: Payment.GatewayResponse (string), 5], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 6], [Property: Payment.PaymobOrderId (long?), 7], [Property: Payment.PaymobTransactionId (long?), 8], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 9], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt
            FROM Payments AS p
            WHERE p.AppointmentId == @__appointmentId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Payment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:21:24.093 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:24.095 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:21:24.098 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.101 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.104 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:24.108 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:24.112 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:21:24.114 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Payments] AS [p]
WHERE [p].[AppointmentId] = @__appointmentId_0
2025-12-03 00:21:24.126 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Payments] AS [p]
WHERE [p].[AppointmentId] = @__appointmentId_0
2025-12-03 00:21:24.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.166 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:24.170 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 00:21:24.180 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.183 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:21:24.192 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(a => a.Branch)
    .Include(a => a.Payment)
    .FirstOrDefault(a => a.AppointmentId == __id_0)'
2025-12-03 00:21:24.197 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 00:21:24.200 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-12-03 00:21:24.204 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:21:24.208 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:21:24.215 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:21:24.219 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 00:21:24.249 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
                1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
                2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
                3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
                4 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Specialization.Description (string), 51], [Property: Specialization.ImageURL (string) MaxLength(300), 52], [Property: Specialization.Name (string) Required MaxLength(120), 53], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 54] }
                5 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 55], [Property: Branch.Address (string) MaxLength(250), 56], [Property: Branch.BranchName (string) Required MaxLength(150), 57], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 58], [Property: Branch.Description (string), 59], [Property: Branch.Email (string) MaxLength(200), 60], [Property: Branch.ImageURL (string) MaxLength(300), 61], [Property: Branch.Latitude (double?), 62], [Property: Branch.Longitude (double?), 63], [Property: Branch.Phone (string) MaxLength(25), 64], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 65] }
                6 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 66], [Property: Payment.Amount (decimal) Required, 67], [Property: Payment.AppointmentId (int) Required FK Index, 68], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 69], [Property: Payment.Currency (string) Required MaxLength(3), 70], [Property: Payment.GatewayResponse (string), 71], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 72], [Property: Payment.PaymobOrderId (long?), 73], [Property: Payment.PaymobTransactionId (long?), 74], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 75], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 76] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
            FROM Appointments AS a
            INNER JOIN Patients AS p ON a.PatientId == p.PatientId
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Users AS u ON d.UserId == u.Id
            INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
            INNER JOIN Branches AS b ON a.BranchId == b.BranchId
            LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId
            WHERE a.AppointmentId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:21:24.261 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.263 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.265 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:24.267 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:24.270 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:21:24.272 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[AppointmentId] = @__id_0
2025-12-03 00:21:24.324 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[AppointmentId] = @__id_0
2025-12-03 00:21:24.333 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.337 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.341 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.345 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.348 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.352 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.353 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.355 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:24.358 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 00:21:24.360 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.362 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:21:24.367 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.370 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:21:24.390 +02:00 [DBG] The unchanged property 'Appointment.Status' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-12-03 00:21:24.392 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.439 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:21:24.443 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:21:24.445 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:21:24.447 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:21:24.473 +02:00 [DBG] Executing 2 update commands as a batch.
2025-12-03 00:21:24.474 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.476 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.478 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-12-03 00:21:24.480 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-12-03 00:21:24.483 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:24.484 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:24.489 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-03 00:21:24.491 +02:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2), @p13='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 3), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (DbType = Int64), @p10='?' (DbType = Int64), @p11='?' (Size = 20), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Appointments] SET [Status] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [AppointmentId] = @p2;
UPDATE [Payments] SET [Amount] = @p3, [AppointmentId] = @p4, [CreatedAt] = @p5, [Currency] = @p6, [GatewayResponse] = @p7, [PaymobMerchantOrderId] = @p8, [PaymobOrderId] = @p9, [PaymobTransactionId] = @p10, [Status] = @p11, [UpdatedAt] = @p12
OUTPUT 1
WHERE [PaymentId] = @p13;
2025-12-03 00:21:24.521 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2), @p13='?' (DbType = Int32), @p3='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 3), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (DbType = Int64), @p10='?' (DbType = Int64), @p11='?' (Size = 20), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Appointments] SET [Status] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [AppointmentId] = @p2;
UPDATE [Payments] SET [Amount] = @p3, [AppointmentId] = @p4, [CreatedAt] = @p5, [Currency] = @p6, [GatewayResponse] = @p7, [PaymobMerchantOrderId] = @p8, [PaymobOrderId] = @p9, [PaymobTransactionId] = @p10, [Status] = @p11, [UpdatedAt] = @p12
OUTPUT 1
WHERE [PaymentId] = @p13;
2025-12-03 00:21:24.526 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:24.527 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:21:24.532 +02:00 [DBG] Committing transaction.
2025-12-03 00:21:24.537 +02:00 [DBG] Committed transaction.
2025-12-03 00:21:24.538 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.539 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:24.542 +02:00 [DBG] Disposing transaction.
2025-12-03 00:21:24.544 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.548 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.550 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-12-03 00:21:24.553 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.555 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:21:24.558 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:21:24.560 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:21:24.562 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:21:24.563 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:21:24.571 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.573 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.575 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:24.577 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:24.580 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:21:24.582 +02:00 [DBG] Executing DbCommand [Parameters=[@p10='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 20), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [PatientId] = @p5, [PaymentMethod] = @p6, [Shift] = @p7, [Status] = @p8, [UpdatedAt] = @p9
OUTPUT 1
WHERE [AppointmentId] = @p10;
2025-12-03 00:21:24.615 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (Size = 20), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointments] SET [BranchId] = @p0, [CreatedAt] = @p1, [CreatedBy] = @p2, [Date] = @p3, [DoctorId] = @p4, [PatientId] = @p5, [PaymentMethod] = @p6, [Shift] = @p7, [Status] = @p8, [UpdatedAt] = @p9
OUTPUT 1
WHERE [AppointmentId] = @p10;
2025-12-03 00:21:24.619 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:24.620 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:21:24.623 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.624 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:24.627 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.629 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:21:24.630 +02:00 [INF] Payment status updated to Paid for appointment ID 9 and appointment become confirmed
2025-12-03 00:21:24.632 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:24.635 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:24.636 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:24.638 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:24.639 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-03 00:21:24.641 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-12-03 00:21:24.643 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.convertStatuesOFPaymentToPayied (Hospital) in 598.2345ms
2025-12-03 00:21:24.645 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.convertStatuesOFPaymentToPayied (Hospital)'
2025-12-03 00:21:24.647 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:24.648 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.651 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:21:24.653 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7217/api/Doctor/convertStatuesOFPaymentToPaied/9 - 200 null text/plain; charset=utf-8 649.7763ms
2025-12-03 00:21:24.655 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1/today - null null
2025-12-03 00:21:24.661 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1/today'
2025-12-03 00:21:24.663 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId:int}/today' is valid for the request path '/api/Doctor/1/today'
2025-12-03 00:21:24.665 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:24.667 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:24.669 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:24.670 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:24.671 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:24.672 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:24.674 +02:00 [INF] Route matched with {action = "GetTodayAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTodayAppointmentsForDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:21:24.677 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:24.679 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:24.681 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:24.684 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:24.686 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:24.688 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:24.690 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:24.692 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:24.694 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:24.696 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:24.697 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:24.699 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:24.701 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:24.703 +02:00 [INF] GetTodayAppointmentsForDoctor  called at "2025-12-03T00:21:24.7034898+02:00"
2025-12-03 00:21:24.704 +02:00 [INF] Fetching today's appointments for doctor ID 1
2025-12-03 00:21:24.706 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:24.709 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:24.710 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:21:24.712 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.714 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.715 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:24.717 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:24.718 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:24.720 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:24.730 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:24.736 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.738 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.742 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.749 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.753 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.756 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.760 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.764 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:24.768 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:24.769 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 00:21:24.771 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.773 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:24.775 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.779 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.781 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:24.782 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:24.784 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:24.786 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-12-03 00:21:24.811 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-12-03 00:21:24.818 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:24.821 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:21:24.828 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.831 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:21:24.834 +02:00 [INF] No appointments found for doctor ID 1 today
2025-12-03 00:21:24.836 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:24.845 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:24.847 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:24.848 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:24.849 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:24.851 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:21:24.853 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital) in 164.7326ms
2025-12-03 00:21:24.855 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-12-03 00:21:24.859 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:24.862 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:24.864 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:21:24.867 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1/today - 200 null application/json; charset=utf-8 211.8877ms
2025-12-03 00:21:28.939 +02:00 [DBG] Connection id "0HNHHU372FV83" received FIN.
2025-12-03 00:21:28.941 +02:00 [DBG] Connection id "0HNHHU372FV83" is closed. The last processed stream ID was 5.
2025-12-03 00:21:28.941 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV83 completed.
2025-12-03 00:21:28.946 +02:00 [DBG] Connection id "0HNHHU372FV83" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:21:28.958 +02:00 [DBG] Connection id "0HNHHU372FV83" stopped.
2025-12-03 00:21:43.319 +02:00 [DBG] Connection id "0HNHHU372FV84" accepted.
2025-12-03 00:21:43.322 +02:00 [DBG] Connection id "0HNHHU372FV84" started.
2025-12-03 00:21:43.326 +02:00 [DBG] Connection 0HNHHU372FV84 established using the following protocol: "Tls12"
2025-12-03 00:21:43.329 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 00:21:43.335 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:21:43.338 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:21:43.340 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:43.341 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:43.342 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:43.343 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:21:43.344 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 15.2539ms
2025-12-03 00:21:43.348 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-12-03 00:21:43.352 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:21:43.354 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 00:21:43.357 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:21:43.358 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:43.359 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:43.360 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:43.362 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:43.363 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:21:43.364 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 00:21:43.366 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:43.367 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:43.369 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:43.371 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:43.372 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:43.375 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:21:43.377 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:21:43.378 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:21:43.379 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 00:21:43.381 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:21:43.382 +02:00 [DBG] Connection id "0HNHHU372FV84", Request id "0HNHHU372FV84:00000003": started reading request body.
2025-12-03 00:21:43.383 +02:00 [DBG] Connection id "0HNHHU372FV84", Request id "0HNHHU372FV84:00000003": done reading request body.
2025-12-03 00:21:43.385 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 00:21:43.385 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:21:43.386 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:21:43.388 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:21:43.390 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:21:43.391 +02:00 [INF] Login called at "2025-12-03T00:21:43.3914323+02:00"
2025-12-03 00:21:43.392 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-12-03 00:21:43.393 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:43.395 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:43.396 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:43.397 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.400 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.402 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.403 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:43.404 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:43.406 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:21:43.415 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:21:43.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:43.420 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.421 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:21:43.422 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.424 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:43.527 +02:00 [DBG] Creating JWT token for user 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 00:21:43.531 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.532 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.533 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.534 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:43.535 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:43.536 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:21:43.543 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:21:43.546 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.547 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:21:43.549 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.550 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:43.552 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.553 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.554 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.555 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:43.556 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:43.558 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:21:43.563 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:21:43.566 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.567 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:21:43.570 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.571 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:43.573 +02:00 [DBG] JWT token created for user 50f20790-c7c3-4baa-bee5-da27ac4985c3, expires at "2025-12-02T23:21:43.0000000Z"
2025-12-03 00:21:43.575 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.576 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.578 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.579 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:43.580 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:43.581 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:21:43.598 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:21:43.601 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.603 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:21:43.604 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.605 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:43.608 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.610 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.611 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.612 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:43.614 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:43.616 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:21:43.626 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:21:43.631 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.633 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:21:43.636 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.638 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:43.640 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:43.643 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:21:43.644 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:21:43.645 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:21:43.646 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:21:43.647 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:21:43.648 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.650 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.651 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.652 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:43.653 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:43.655 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:21:43.670 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:21:43.676 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.678 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:21:43.679 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.682 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:21:43.683 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:43.685 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:21:43.687 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-12-03 00:21:43.689 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:43.693 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:43.694 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:43.695 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:43.696 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:43.698 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 00:21:43.699 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 323.7051ms
2025-12-03 00:21:43.700 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:21:43.702 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:43.703 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.704 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:43.707 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 358.4406ms
2025-12-03 00:21:43.789 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:21:43.789 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:21:43.790 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:21:43.793 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:21:43.798 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:21:43.802 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:21:43.803 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:21:43.805 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:21:43.807 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:21:43.810 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:21:43.813 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:21:43.815 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:21:43.818 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:21:43.820 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:43.822 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:43.824 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:43.825 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:43.827 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:43.828 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:43.829 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:43.830 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:43.831 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:43.832 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:43.834 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:43.836 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:43.837 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:21:43.838 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:21:43.840 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:21:43.846 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:21:43.847 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:43.849 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:21:43.849 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:43.852 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:43.855 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:43.857 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:43.859 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:43.861 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:43.864 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:43.866 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:43.868 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:43.871 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:43.874 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:43.877 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:43.879 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:43.881 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:43.883 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:43.885 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:21:43.888 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:43.894 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:43.898 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:21:43.899 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:43.900 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:21:43.904 +02:00 [INF] Get All Branch called at "2025-12-03T00:21:43.9039383+02:00"
2025-12-03 00:21:43.907 +02:00 [INF] get all doctor in system called at "2025-12-03T00:21:43.9079021+02:00"
2025-12-03 00:21:43.909 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:43.910 +02:00 [INF] Fetching all branches
2025-12-03 00:21:43.910 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:21:43.916 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:43.913 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 00:21:43.918 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:43.920 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-12-03 00:21:43.923 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 00:21:43.926 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .ThenInclude(s => s.Branch)'
2025-12-03 00:21:43.929 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-12-03 00:21:43.932 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:21:43.932 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:21:43.933 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:21:43.934 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:21:43.937 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:43.939 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:21:43.941 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 00:21:43.941 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 00:21:43.943 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:21:43.944 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 00:21:43.945 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.946 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 00:21:43.948 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-12-03 00:21:43.949 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.954 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:43.956 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:43.957 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:43.959 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:21:43.966 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:21:43.969 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:43.971 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:21:43.973 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.974 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            4 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Specialization.Description (string), 51], [Property: Specialization.ImageURL (string) MaxLength(300), 52], [Property: Specialization.Name (string) Required MaxLength(120), 53], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 54] }
            5 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 55], [Property: Branch.Address (string) MaxLength(250), 56], [Property: Branch.BranchName (string) Required MaxLength(150), 57], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 58], [Property: Branch.Description (string), 59], [Property: Branch.Email (string) MaxLength(200), 60], [Property: Branch.ImageURL (string) MaxLength(300), 61], [Property: Branch.Latitude (double?), 62], [Property: Branch.Longitude (double?), 63], [Property: Branch.Phone (string) MaxLength(25), 64], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 65] }
            6 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 66], [Property: Payment.Amount (decimal) Required, 67], [Property: Payment.AppointmentId (int) Required FK Index, 68], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 69], [Property: Payment.Currency (string) Required MaxLength(3), 70], [Property: Payment.GatewayResponse (string), 71], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 72], [Property: Payment.PaymobOrderId (long?), 73], [Property: Payment.PaymobTransactionId (long?), 74], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 75], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 76] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:21:43.975 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:43.976 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 00:21:43.986 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:43.991 +02:00 [DBG] Created DbConnection. (4ms).
2025-12-03 00:21:43.993 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.994 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:43.995 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:43.998 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:44.000 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:44.002 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:44.003 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
            8 -> 39
            9 -> 40
            10 -> 41
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            12 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: Branch.Address (string) MaxLength(250), 62], [Property: Branch.BranchName (string) Required MaxLength(150), 63], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: Branch.Description (string), 65], [Property: Branch.Email (string) MaxLength(200), 66], [Property: Branch.ImageURL (string) MaxLength(300), 67], [Property: Branch.Latitude (double?), 68], [Property: Branch.Longitude (double?), 69], [Property: Branch.Phone (string) MaxLength(25), 70], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 71] }
            13 -> 52
            14 -> 61
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.ScheduleId, t0.BranchId, t0.CreatedAt, t0.DayOfWeek, t0.DoctorId, t0.EndTime, t0.Shift, t0.StartTime, t0.UpdatedAt, t0.BranchId0, t0.Address, t0.BranchName, t0.CreatedAt0, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt0
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN 
        (
            SELECT s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt AS CreatedAt0, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt AS UpdatedAt0
            FROM Schedules AS s0
            INNER JOIN Branches AS b0 ON s0.BranchId == b0.BranchId
        ) AS t0 ON d.DoctorId == t0.DoctorId
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC, t0.ScheduleId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:21:44.003 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:44.005 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:44.016 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:44.018 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-12-03 00:21:44.019 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:44.019 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 00:21:44.021 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:21:44.023 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:21:44.024 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.032 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.033 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 147.3748ms
2025-12-03 00:21:44.034 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:44.036 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:21:44.037 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:21:44.038 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:44.040 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-03 00:21:44.043 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.044 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:21:44.046 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:21:44.047 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:21:44.054 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 264.279ms
2025-12-03 00:21:44.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.065 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.069 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.073 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.076 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.078 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.081 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:21:44.082 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.090 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.092 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.094 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.097 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.099 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.106 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.110 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.116 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.118 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.122 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.124 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.128 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.130 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.131 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.133 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.138 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.141 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.143 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.147 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.149 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.155 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.160 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.161 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.169 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.170 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.173 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.177 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.178 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:44.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.181 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 94ms reading results.
2025-12-03 00:21:44.183 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.185 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.189 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:21:44.191 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.197 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.199 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.200 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.202 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.203 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:44.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:44.207 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:44.210 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:44.211 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:44.212 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 152ms reading results.
2025-12-03 00:21:44.214 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:44.216 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.217 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:44.219 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:21:44.221 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:21:44.225 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:44.227 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 332.9591ms
2025-12-03 00:21:44.229 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:44.231 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:21:44.233 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:44.235 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:44.236 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:44.237 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.239 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:44.241 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:21:44.244 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:44.245 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 455.9408ms
2025-12-03 00:21:44.250 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 362.2634ms
2025-12-03 00:21:44.253 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:21:44.255 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:44.257 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:44.259 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:21:44.260 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 469.8588ms
2025-12-03 00:21:48.745 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:21:48.751 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:21:48.753 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:21:48.755 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:48.756 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:48.757 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:48.758 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:48.758 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:48.759 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:48.762 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:48.763 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:48.764 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:48.765 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:48.766 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:48.767 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:48.770 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:48.771 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:48.772 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:48.773 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:48.775 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:48.775 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:48.776 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:48.777 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:48.779 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:48.780 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:48.781 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:48.781 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.782 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.783 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:48.784 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:48.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:48.785 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:48.789 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:48.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.793 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.794 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.795 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.796 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.798 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.799 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.801 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.803 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.807 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.809 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.811 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:48.811 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:21:48.812 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.813 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:48.815 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.DoctorId == __doctorId_0)
    .Include(a => a.Patient)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 00:21:48.816 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 00:21:48.817 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:21:48.818 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 00:21:48.829 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Branch.Address (string) MaxLength(250), 17], [Property: Branch.BranchName (string) Required MaxLength(150), 18], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: Branch.Description (string), 20], [Property: Branch.Email (string) MaxLength(200), 21], [Property: Branch.ImageURL (string) MaxLength(300), 22], [Property: Branch.Latitude (double?), 23], [Property: Branch.Longitude (double?), 24], [Property: Branch.Phone (string) MaxLength(25), 25], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Payment.Amount (decimal) Required, 28], [Property: Payment.AppointmentId (int) Required FK Index, 29], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Payment.Currency (string) Required MaxLength(3), 31], [Property: Payment.GatewayResponse (string), 32], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 33], [Property: Payment.PaymobOrderId (long?), 34], [Property: Payment.PaymobTransactionId (long?), 35], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 36], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId
        WHERE a.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:21:48.834 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.835 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.836 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:48.837 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:48.838 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:48.840 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:48.850 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:48.852 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.855 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.858 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.860 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.862 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.863 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.864 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.866 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.867 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.870 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.871 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.873 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.874 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.875 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.877 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.880 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.881 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.882 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.883 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.885 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.887 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.888 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.890 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.892 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.893 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.894 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.895 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:48.897 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:48.898 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 45ms reading results.
2025-12-03 00:21:48.899 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.900 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:48.902 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:48.904 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:48.904 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:48.905 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:48.906 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:48.907 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:48.908 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 137.9215ms
2025-12-03 00:21:48.909 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:48.910 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:48.911 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:48.912 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:48.913 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 167.6081ms
2025-12-03 00:21:48.962 +02:00 [DBG] Connection id "0HNHHU372FV84" received FIN.
2025-12-03 00:21:48.963 +02:00 [DBG] Connection id "0HNHHU372FV84" is closed. The last processed stream ID was 11.
2025-12-03 00:21:48.963 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV84 completed.
2025-12-03 00:21:48.964 +02:00 [DBG] Connection id "0HNHHU372FV84" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:21:48.977 +02:00 [DBG] Connection id "0HNHHU372FV84" stopped.
2025-12-03 00:21:50.246 +02:00 [DBG] Connection id "0HNHHU372FV85" accepted.
2025-12-03 00:21:50.247 +02:00 [DBG] Connection id "0HNHHU372FV85" started.
2025-12-03 00:21:50.248 +02:00 [DBG] Connection 0HNHHU372FV85 established using the following protocol: "Tls12"
2025-12-03 00:21:50.249 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:21:50.251 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:21:50.252 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:21:50.253 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:50.254 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:50.254 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:50.255 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:50.256 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:50.256 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:50.258 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:50.259 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:50.260 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:50.261 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:50.262 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:50.263 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:50.264 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:50.266 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:50.267 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:50.267 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:50.268 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:50.269 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:50.270 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:50.270 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:50.272 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:50.274 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:50.274 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:50.275 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.276 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.276 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:50.277 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:50.278 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:50.278 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:50.282 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:50.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.286 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.287 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.288 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.291 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.293 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.295 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.297 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.298 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.299 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.300 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:50.301 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:21:50.301 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.302 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:50.303 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.304 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.305 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:50.306 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:50.307 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:50.308 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:50.314 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:50.316 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.317 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.319 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.320 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.322 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.323 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.326 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.326 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.328 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.329 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.330 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.331 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.333 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.334 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.336 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.339 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.342 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.344 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.346 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.347 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.348 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.349 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.351 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:50.351 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 35ms reading results.
2025-12-03 00:21:50.352 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.354 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:50.355 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:50.357 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:50.357 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:50.358 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:50.359 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:50.360 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:50.361 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 96.2904ms
2025-12-03 00:21:50.362 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:50.363 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:50.363 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.364 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:50.365 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 115.8835ms
2025-12-03 00:21:50.623 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:21:50.628 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:21:50.629 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:21:50.630 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:50.631 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:50.631 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:50.632 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:50.632 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:50.633 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:50.634 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:50.635 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:50.636 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:50.637 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:50.641 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:50.642 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:50.643 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:50.644 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:50.644 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:50.645 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:50.646 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:50.647 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:50.648 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:50.649 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:50.650 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:50.651 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:50.652 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:50.652 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.653 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.654 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:50.655 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:50.656 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:50.657 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:50.660 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:50.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.664 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.665 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.666 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.669 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.671 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.673 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.675 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.677 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.679 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:50.680 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:21:50.680 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.681 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:50.682 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.683 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.684 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:50.685 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:50.685 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:50.686 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:50.692 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:50.694 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.697 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.699 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.700 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.701 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.702 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.704 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.705 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.708 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.709 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.709 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.710 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.711 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.713 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.714 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.716 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.718 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.719 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.721 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.723 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.724 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.725 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.726 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:50.728 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:50.729 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 34ms reading results.
2025-12-03 00:21:50.729 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.730 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:50.732 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:50.734 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:50.734 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:50.735 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:50.736 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:50.737 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:50.738 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 95.1168ms
2025-12-03 00:21:50.740 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:21:50.741 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:50.742 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:50.743 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:50.744 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 120.7575ms
2025-12-03 00:21:55.083 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:55.086 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.088 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.090 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.092 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:55.093 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:55.095 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:55.095 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:55.096 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.099 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:55.100 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:55.101 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:55.102 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:55.103 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:55.104 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:55.105 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.106 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.107 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.107 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:55.109 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.109 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.110 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.111 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.111 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.112 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:55.113 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.114 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.115 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.115 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.117 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:55.119 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:55.119 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:55.120 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.121 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.122 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.122 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.123 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.124 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.129 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.132 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.133 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.135 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.141 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.143 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.144 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.144 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.146 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.148 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.150 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.151 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 18ms reading results.
2025-12-03 00:21:55.152 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.152 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.154 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.155 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.156 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.156 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.158 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:55.159 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.163 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.165 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.166 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:55.167 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.167 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.168 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.169 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.170 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.171 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.172 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.173 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.179 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.181 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.182 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.183 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.184 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.186 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.187 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.188 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.191 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.192 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.193 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.194 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.196 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.196 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.198 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.199 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.200 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.201 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.202 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.203 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.205 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.207 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.209 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.210 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.211 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.212 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.213 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.214 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.215 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 34ms reading results.
2025-12-03 00:21:55.217 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.218 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:55.219 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:55.221 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:55.222 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:55.223 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:55.223 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:55.224 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:55.225 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 120.7405ms
2025-12-03 00:21:55.226 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.227 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:55.228 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.229 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:55.230 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 147.8401ms
2025-12-03 00:21:55.479 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:55.483 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.484 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.485 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.486 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:55.487 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:55.487 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:55.489 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:55.490 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.492 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:55.494 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:55.495 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:55.496 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:55.497 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:55.498 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:55.499 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.500 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.501 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.502 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:55.502 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.504 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.507 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.508 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.509 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.510 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:55.511 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.511 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.512 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.513 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.514 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:55.515 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:55.516 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:55.517 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.517 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.518 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.519 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.520 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.521 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.525 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.529 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.531 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.534 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.536 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.538 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.540 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.542 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.544 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.544 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:21:55.545 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.546 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.547 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.548 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.549 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.549 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.550 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.551 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.555 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.557 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.557 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:55.558 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.559 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.560 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.561 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.561 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.562 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.563 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.564 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.570 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.572 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.574 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.575 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.576 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.578 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.579 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.580 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.582 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.584 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.584 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.586 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.587 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.589 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.590 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.592 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.596 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.598 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.599 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.601 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.601 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.603 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.605 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.606 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 34ms reading results.
2025-12-03 00:21:55.607 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.608 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.609 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:55.611 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:55.611 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:55.612 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:55.612 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:55.613 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:55.614 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 114.9004ms
2025-12-03 00:21:55.615 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.616 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:55.617 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.617 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:55.618 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 139.2528ms
2025-12-03 00:21:55.703 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:55.709 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.711 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.712 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.713 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:55.713 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:55.714 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:55.715 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:55.715 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.716 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:55.717 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:55.718 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:55.720 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:55.722 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:55.723 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:55.724 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.725 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.726 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.727 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:55.728 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.728 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.729 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.730 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.731 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.732 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:55.734 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.735 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.737 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.739 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.740 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:55.743 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:55.744 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:55.744 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.745 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.746 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.746 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.747 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.748 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.752 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.756 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.757 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.758 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.761 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.763 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.765 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.767 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.769 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.771 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.771 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 17ms reading results.
2025-12-03 00:21:55.773 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.773 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.774 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.775 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.776 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.777 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.777 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.778 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.781 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.783 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.783 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:55.784 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.785 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:55.786 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.787 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.788 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.789 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.789 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.790 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.797 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.799 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.801 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.802 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.803 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.804 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.805 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.807 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.809 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.810 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.812 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.812 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.814 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.815 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.816 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.817 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.818 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.819 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.820 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.822 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.824 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.825 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.826 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.827 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.828 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.830 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.831 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 31ms reading results.
2025-12-03 00:21:55.832 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.832 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.833 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:55.835 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:55.835 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:55.836 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:55.836 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:55.837 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:55.838 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 113.8498ms
2025-12-03 00:21:55.840 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.841 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:55.842 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.842 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:55.843 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 140.5204ms
2025-12-03 00:21:55.886 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:55.890 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.892 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:55.893 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.894 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:55.894 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:55.895 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:55.895 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:55.896 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:55.897 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:55.898 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:55.899 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:55.900 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:55.902 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:55.903 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:55.904 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.905 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:55.906 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.907 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:55.908 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.908 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.909 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:55.910 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:55.911 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.911 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:55.912 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.913 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.914 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:55.914 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:55.915 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:55.917 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:55.918 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:55.918 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.919 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.920 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.921 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.922 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.923 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.927 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:55.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.931 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.933 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.939 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.942 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.944 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.945 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.947 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.950 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.950 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 20ms reading results.
2025-12-03 00:21:55.951 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.952 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:55.954 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.954 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.956 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.956 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.957 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.958 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.961 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:55.962 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:55.963 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:55.964 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.965 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:55.966 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.966 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:55.967 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:55.968 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:55.968 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:55.969 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.976 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:55.978 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.980 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.981 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.983 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.984 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.985 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.986 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.987 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.989 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.989 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.990 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.991 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.992 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.993 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.994 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.995 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.997 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.998 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:55.999 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.000 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.001 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.003 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.005 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.007 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.008 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.010 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.011 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.012 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.013 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 35ms reading results.
2025-12-03 00:21:56.014 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.014 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:56.015 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:56.017 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:56.017 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:56.018 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:56.019 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:56.019 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:56.020 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 116.3547ms
2025-12-03 00:21:56.022 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.023 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:56.024 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.026 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:56.027 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 140.3435ms
2025-12-03 00:21:56.061 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:56.064 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.065 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.066 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.067 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:56.068 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:56.068 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:56.069 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:56.069 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.070 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:56.072 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:56.074 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:56.075 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:56.076 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:56.077 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:56.078 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.079 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.079 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.080 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:56.081 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.082 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.083 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.083 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.084 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.085 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:56.087 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.088 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.089 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.090 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.091 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:56.092 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:56.092 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:56.093 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.094 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.095 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.095 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.096 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.097 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.100 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.104 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.106 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.109 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.109 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.111 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.112 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.113 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.114 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.115 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.116 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.118 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.118 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:21:56.119 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.120 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:56.121 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.122 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.123 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.123 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.124 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.125 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.128 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.129 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.130 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:56.131 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.132 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.134 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.135 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.136 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.137 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.137 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.138 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.144 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.146 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.148 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.151 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.152 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.154 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.155 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.158 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.160 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.163 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.164 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.166 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.167 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.168 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.169 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.170 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.171 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.173 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.177 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.180 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.181 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.182 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.183 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.184 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.186 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.188 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.190 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 43ms reading results.
2025-12-03 00:21:56.191 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.192 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.195 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:56.197 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:56.198 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:56.198 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:56.199 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:56.200 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:56.201 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 123.3736ms
2025-12-03 00:21:56.203 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.204 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:56.206 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.207 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:56.209 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 147.6328ms
2025-12-03 00:21:56.438 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:56.445 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.446 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.448 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.449 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:56.450 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:56.450 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:56.451 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:56.452 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.452 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:56.454 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:56.454 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:56.456 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:56.458 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:56.460 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:56.461 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.462 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.462 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.463 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:56.464 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.465 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.466 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.467 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.468 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.468 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:56.469 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.470 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.472 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.473 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.474 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:56.476 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:56.477 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:56.477 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.478 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.479 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.479 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.480 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.481 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.485 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.489 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.490 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.491 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.494 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.495 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.496 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.498 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.500 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.500 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.501 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.504 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.505 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:21:56.506 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.507 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.508 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.509 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.510 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.510 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.511 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.512 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.515 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.517 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.518 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:56.519 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.520 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:56.521 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.521 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.522 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.523 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.525 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.533 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.536 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.537 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.540 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.541 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.543 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.544 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.545 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.547 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.549 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.550 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.552 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.553 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.555 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.556 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.557 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.558 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.559 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.560 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.562 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.564 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.566 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.567 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.569 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.571 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.572 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 36ms reading results.
2025-12-03 00:21:56.573 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.574 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:21:56.575 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:56.576 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:56.577 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:56.577 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:56.578 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:56.579 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:56.580 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 119.6355ms
2025-12-03 00:21:56.581 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.583 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:56.584 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.584 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:21:56.585 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 147.0272ms
2025-12-03 00:21:56.630 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:56.635 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.636 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.637 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.638 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:56.638 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:56.639 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:56.640 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:56.642 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.643 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:56.644 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:56.645 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:56.646 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:56.647 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:56.648 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:56.649 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.650 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.651 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.652 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:56.653 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.654 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.655 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.658 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.659 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.660 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:56.661 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.662 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.663 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.663 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.665 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:56.666 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:56.667 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:56.667 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.668 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.670 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.671 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.672 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:56.674 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.680 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.684 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.687 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.692 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.694 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.697 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.699 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.701 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.703 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.704 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 21ms reading results.
2025-12-03 00:21:56.705 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.707 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.708 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.709 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.710 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.711 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.712 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.713 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.717 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.719 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.720 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:56.721 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.723 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.726 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.727 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.728 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.729 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.730 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:56.731 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.740 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.743 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.746 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.749 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.750 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.752 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.754 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.757 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.758 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.762 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.763 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.767 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.768 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.772 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.773 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.775 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.778 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.780 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.782 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.785 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.786 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.787 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.788 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.790 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.793 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.795 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.796 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.798 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.800 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 56ms reading results.
2025-12-03 00:21:56.801 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.802 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.803 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:56.806 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:56.807 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:56.808 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:56.810 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:56.811 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:56.813 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 163.0732ms
2025-12-03 00:21:56.814 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:56.814 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.816 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.817 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:56.818 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:56.819 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.820 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.821 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:21:56.823 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:56.824 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 194.5423ms
2025-12-03 00:21:56.825 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:56.829 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:56.829 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:56.830 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:56.831 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:56.833 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:56.834 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:56.835 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:56.837 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:56.838 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:56.839 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.841 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:56.844 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.845 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:56.846 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.847 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.848 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:56.849 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:56.850 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.851 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:56.852 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.853 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.854 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:56.856 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:56.857 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:56.859 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:56.860 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:56.861 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.862 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.863 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.863 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.865 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.866 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.871 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:56.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.877 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.878 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.879 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.882 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.884 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.886 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.890 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.893 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.894 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.895 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.897 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.898 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 00:21:56.899 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.900 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.902 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.903 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.905 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.906 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:56.907 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:56.908 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.912 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:56.915 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.916 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:21:56.917 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.918 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:56.920 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.921 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.923 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:56.924 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:56.925 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:56.926 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.939 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:56.943 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.947 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.950 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.951 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.953 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.955 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.958 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.959 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.961 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.962 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.965 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.967 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.969 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.970 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.974 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.977 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.978 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.979 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.982 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.983 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.984 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.985 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.986 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.988 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:56.991 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:56.993 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 50ms reading results.
2025-12-03 00:21:56.994 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:56.996 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:57.000 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:57.003 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:57.004 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:57.005 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:57.006 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:57.008 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:57.009 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 169.5518ms
2025-12-03 00:21:57.010 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:21:57.010 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:57.013 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:57.014 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:57.016 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:21:57.017 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.019 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:57.020 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:21:57.021 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:21:57.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 208.7308ms
2025-12-03 00:21:57.023 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:21:57.029 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:21:57.030 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:21:57.031 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:57.032 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:21:57.034 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:21:57.035 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:21:57.037 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:21:57.039 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:21:57.040 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:21:57.043 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:57.044 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:21:57.045 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:57.046 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:21:57.047 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:57.048 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:57.050 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:21:57.051 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:21:57.052 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:57.053 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:21:57.054 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:57.056 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:57.058 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:21:57.059 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:21:57.060 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:21:57.062 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:21:57.063 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:21:57.064 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.065 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.066 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:57.067 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:57.068 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:57.069 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:57.076 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:21:57.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.082 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.083 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.085 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.086 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.091 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.094 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.096 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.099 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.101 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.104 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:57.105 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 25ms reading results.
2025-12-03 00:21:57.107 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.108 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:57.110 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.111 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.112 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:57.113 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:57.114 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:21:57.115 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:57.119 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:21:57.121 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:57.123 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:21:57.124 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.125 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:57.127 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.128 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.129 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:21:57.130 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:21:57.131 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:21:57.132 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:57.142 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:21:57.145 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.148 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.150 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.152 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.154 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.156 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.159 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.160 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.163 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.164 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.166 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.168 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.171 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.173 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.176 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.179 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.181 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.185 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.188 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.190 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.194 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:21:57.196 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:21:57.197 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 52ms reading results.
2025-12-03 00:21:57.199 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.201 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:21:57.202 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:21:57.206 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:21:57.207 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:21:57.208 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:21:57.209 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:21:57.211 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:21:57.212 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 169.5218ms
2025-12-03 00:21:57.215 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:21:57.217 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:21:57.219 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:21:57.221 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:21:57.223 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 213.4673ms
2025-12-03 00:21:58.965 +02:00 [DBG] Connection id "0HNHHU372FV85" received FIN.
2025-12-03 00:21:58.970 +02:00 [DBG] Connection id "0HNHHU372FV85" is closed. The last processed stream ID was 21.
2025-12-03 00:21:58.970 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV85 completed.
2025-12-03 00:21:58.972 +02:00 [DBG] Connection id "0HNHHU372FV85" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:21:58.976 +02:00 [DBG] Connection id "0HNHHU372FV85" stopped.
2025-12-03 00:22:14.782 +02:00 [DBG] Connection id "0HNHHU372FV86" accepted.
2025-12-03 00:22:14.784 +02:00 [DBG] Connection id "0HNHHU372FV86" started.
2025-12-03 00:22:14.788 +02:00 [DBG] Connection 0HNHHU372FV86 established using the following protocol: "Tls12"
2025-12-03 00:22:14.789 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-12-03 00:22:14.789 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:22:14.791 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-12-03 00:22:14.794 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:22:14.795 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-12-03 00:22:14.795 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:22:14.796 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-12-03 00:22:14.799 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:22:14.798 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:22:14.799 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:22:14.800 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:22:14.801 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:22:14.801 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:22:14.802 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:22:14.802 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:22:14.803 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-12-03 00:22:14.804 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:22:14.806 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:22:14.807 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:22:14.808 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-12-03 00:22:14.808 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:22:14.809 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:22:14.810 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:22:14.811 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:22:14.812 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:22:14.814 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:22:14.814 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:22:14.813 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:22:14.815 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:22:14.817 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:22:14.818 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:22:14.818 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:22:14.819 +02:00 [INF] Get All Branch called at "2025-12-03T00:22:14.8197309+02:00"
2025-12-03 00:22:14.820 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-12-03 00:22:14.821 +02:00 [INF] Fetching all branches
2025-12-03 00:22:14.822 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-12-03 00:22:14.823 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:22:14.824 +02:00 [INF] get all Specialization called at "2025-12-03T00:22:14.8247042+02:00"
2025-12-03 00:22:14.825 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:22:14.826 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:22:14.826 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.826 +02:00 [INF] Fetching all specializations in the system
2025-12-03 00:22:14.827 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.828 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:22:14.829 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:22:14.830 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:22:14.830 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:22:14.828 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:22:14.833 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:22:14.833 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-12-03 00:22:14.835 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:22:14.836 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-12-03 00:22:14.837 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:22:14.837 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-12-03 00:22:14.838 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.839 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:22:14.840 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:22:14.841 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:22:14.843 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:22:14.843 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:22:14.844 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:22:14.844 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:22:14.845 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:22:14.846 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 30.6831ms
2025-12-03 00:22:14.847 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:22:14.848 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:22:14.849 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.849 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:22:14.850 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 60.9586ms
2025-12-03 00:22:14.851 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 00:22:14.856 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.ImageURL (string) MaxLength(300), 3], [Property: Specialization.Name (string) Required MaxLength(120), 4], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Latitude (double?), 15], [Property: Branch.Longitude (double?), 16], [Property: Branch.Phone (string) MaxLength(25), 17], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 18] }
            4 -> 6
            5 -> 7
            6 -> 8
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Doctor.Available (bool?), 20], [Property: Doctor.Biography (string), 21], [Property: Doctor.ConsultationFees (decimal) Required, 22], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 23], [Property: Doctor.ExperienceYears (int?), 24], [Property: Doctor.ImageURL (string) MaxLength(300), 25], [Property: Doctor.SpecializationId (int) Required FK Index, 26], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 27], [Property: Doctor.UserId (string) Required FK Index, 28] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 29], [Property: User.AccessFailedCount (int) Required, 30], [Property: User.ConcurrencyStamp (string) Concurrency, 31], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: User.DateOfBirth (DateOnly?), 33], [Property: User.Email (string) Index MaxLength(256), 34], [Property: User.EmailConfirmed (bool) Required, 35], [Property: User.FullName (string) Required MaxLength(150), 36], [Property: User.Gender (GenderType?) MaxLength(10), 37], [Property: User.LockoutEnabled (bool) Required, 38], [Property: User.LockoutEnd (DateTimeOffset?), 39], [Property: User.NormalizedEmail (string) Index MaxLength(256), 40], [Property: User.NormalizedUserName (string) Index MaxLength(256), 41], [Property: User.PasswordHash (string), 42], [Property: User.PhoneNumber (string), 43], [Property: User.PhoneNumberConfirmed (bool) Required, 44], [Property: User.RefreshToken (string), 45], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 46], [Property: User.Role (string) Required MaxLength(50), 47], [Property: User.SecurityStamp (string), 48], [Property: User.TwoFactorEnabled (bool) Required, 49], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.UserName (string) MaxLength(256), 51] }
            9 -> 19
            10 -> 29
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:22:14.860 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:22:14.861 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:22:14.861 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.862 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.863 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:22:14.863 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:22:14.864 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:22:14.865 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-12-03 00:22:14.889 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-12-03 00:22:14.894 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.897 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.898 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.901 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.903 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:14.905 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:22:14.906 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 12ms reading results.
2025-12-03 00:22:14.908 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.909 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:22:14.913 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:22:14.915 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:22:14.916 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:22:14.917 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:22:14.917 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:22:14.918 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:22:14.921 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 101.0671ms
2025-12-03 00:22:14.922 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-12-03 00:22:14.923 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:22:14.924 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:14.925 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:22:14.926 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 136.9463ms
2025-12-03 00:22:17.051 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:22:17.051 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:22:17.052 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:22:17.057 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:22:17.064 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:22:17.066 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:22:17.067 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:22:17.068 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:22:17.068 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:22:17.069 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:22:17.070 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:22:17.072 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:22:17.073 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:22:17.074 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:22:17.075 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:22:17.075 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:22:17.078 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:22:17.079 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:22:17.076 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:22:17.077 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:22:17.079 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:22:17.081 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:22:17.081 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:22:17.082 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:22:17.082 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:22:17.083 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:22:17.083 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:22:17.084 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:22:17.084 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:22:17.086 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:22:17.086 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:22:17.088 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:22:17.088 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:22:17.090 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:22:17.091 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:22:17.092 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:22:17.095 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:22:17.096 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:22:17.093 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:22:17.094 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:22:17.097 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:22:17.098 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:22:17.099 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:22:17.100 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:22:17.101 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:22:17.103 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:22:17.104 +02:00 [INF] get all doctor in system called at "2025-12-03T00:22:17.1040151+02:00"
2025-12-03 00:22:17.104 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:22:17.105 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:22:17.106 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:22:17.107 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:22:17.108 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:22:17.109 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:22:17.110 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:22:17.110 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:22:17.112 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:22:17.113 +02:00 [INF] Get All Branch called at "2025-12-03T00:22:17.1131469+02:00"
2025-12-03 00:22:17.114 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:22:17.114 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:22:17.115 +02:00 [INF] Fetching all branches
2025-12-03 00:22:17.116 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:22:17.117 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.117 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:22:17.118 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:22:17.119 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.121 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:22:17.121 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.122 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:22:17.122 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:22:17.123 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.124 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:22:17.125 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.125 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:22:17.126 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:22:17.129 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:22:17.128 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:22:17.132 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.133 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:22:17.134 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:22:17.135 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:22:17.136 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:22:17.139 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:22:17.140 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:22:17.142 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:22:17.143 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:22:17.144 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:22:17.145 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.146 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:22:17.147 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:22:17.148 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:22:17.149 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:22:17.149 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:22:17.150 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:22:17.151 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:22:17.152 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 44.6103ms
2025-12-03 00:22:17.152 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:22:17.153 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:22:17.154 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:22:17.154 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.157 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:22:17.158 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.159 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:22:17.159 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 107.9943ms
2025-12-03 00:22:17.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.165 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.166 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.168 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.169 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.170 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.171 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.172 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.173 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.173 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.175 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.176 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.176 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.178 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.179 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.182 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.183 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.184 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.185 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.188 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.189 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.190 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.191 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.193 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.194 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.196 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.197 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.198 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:22:17.199 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.200 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 43ms reading results.
2025-12-03 00:22:17.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.202 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.203 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.203 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:22:17.204 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.205 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:22:17.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.208 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:22:17.209 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:22:17.209 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:22:17.210 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:22:17.208 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.211 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:22:17.212 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.215 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 117.81ms
2025-12-03 00:22:17.216 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.217 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:22:17.218 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.218 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:22:17.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.220 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.221 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.222 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:22:17.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.224 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 173.1295ms
2025-12-03 00:22:17.225 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.229 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.231 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.231 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.233 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:22:17.235 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:22:17.236 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 74ms reading results.
2025-12-03 00:22:17.237 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.238 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:22:17.239 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:22:17.241 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:22:17.241 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:22:17.242 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:22:17.243 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:22:17.244 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:22:17.244 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 136.5599ms
2025-12-03 00:22:17.245 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:22:17.247 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:22:17.254 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:22:17.255 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:22:17.257 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 205.0855ms
2025-12-03 00:22:18.995 +02:00 [DBG] Connection id "0HNHHU372FV86" received FIN.
2025-12-03 00:22:18.999 +02:00 [DBG] Connection id "0HNHHU372FV86" is closed. The last processed stream ID was 9.
2025-12-03 00:22:18.999 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV86 completed.
2025-12-03 00:22:19.000 +02:00 [DBG] Connection id "0HNHHU372FV86" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:22:19.016 +02:00 [DBG] Connection id "0HNHHU372FV86" stopped.
2025-12-03 00:23:46.825 +02:00 [DBG] Connection id "0HNHHU372FV87" received FIN.
2025-12-03 00:23:46.829 +02:00 [DBG] Connection id "0HNHHU372FV87" accepted.
2025-12-03 00:23:46.833 +02:00 [DBG] Connection id "0HNHHU372FV87" started.
2025-12-03 00:23:46.836 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 00:23:46.842 +02:00 [DBG] Connection id "0HNHHU372FV87" stopped.
2025-12-03 00:23:46.843 +02:00 [DBG] Connection id "0HNHHU372FV87" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:23:46.995 +02:00 [DBG] Connection id "0HNHHU372FV88" accepted.
2025-12-03 00:23:47.014 +02:00 [DBG] Connection id "0HNHHU372FV88" started.
2025-12-03 00:23:47.024 +02:00 [DBG] Connection 0HNHHU372FV88 established using the following protocol: "Tls12"
2025-12-03 00:23:47.030 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-12-03 00:23:47.073 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-03 00:23:47.097 +02:00 [DBG] Request did not match any endpoints
2025-12-03 00:23:47.413 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-03 00:23:47.429 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-03 00:23:47.432 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-03 00:23:47.435 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-03 00:23:47.446 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 416.5421ms
2025-12-03 00:23:47.493 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-12-03 00:23:47.556 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 63.2396ms
2025-12-03 00:23:48.686 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-12-03 00:23:52.375 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 3689.8218ms
2025-12-03 00:23:55.669 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-12-03 00:23:55.676 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-03 00:23:55.681 +02:00 [DBG] Request did not match any endpoints
2025-12-03 00:23:55.889 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 219.6294ms
2025-12-03 00:24:48.278 +02:00 [DBG] Connection id "0HNHHU372FV89" accepted.
2025-12-03 00:24:48.281 +02:00 [DBG] Connection id "0HNHHU372FV89" started.
2025-12-03 00:24:48.291 +02:00 [DBG] Connection 0HNHHU372FV89 established using the following protocol: "Tls12"
2025-12-03 00:24:48.294 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 00:24:48.300 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:24:48.304 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:24:48.306 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:24:48.307 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:24:48.309 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:24:48.310 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:24:48.311 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 16.6351ms
2025-12-03 00:24:48.315 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-12-03 00:24:48.320 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:24:48.324 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 00:24:48.327 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:24:48.329 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:24:48.330 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:24:48.332 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:24:48.333 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:24:48.335 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:24:48.337 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 00:24:48.340 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:24:48.343 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:24:48.345 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:24:48.349 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:24:48.351 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:24:48.353 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:24:48.355 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:24:48.357 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:24:48.359 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 00:24:48.361 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:24:48.363 +02:00 [DBG] Connection id "0HNHHU372FV89", Request id "0HNHHU372FV89:00000003": started reading request body.
2025-12-03 00:24:48.366 +02:00 [DBG] Connection id "0HNHHU372FV89", Request id "0HNHHU372FV89:00000003": done reading request body.
2025-12-03 00:24:48.368 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 00:24:48.369 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:24:48.370 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:24:48.372 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:24:48.374 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:24:48.376 +02:00 [INF] Login called at "2025-12-03T00:24:48.3762862+02:00"
2025-12-03 00:24:48.377 +02:00 [INF] Login attempt for email: Basant@gmail.com
2025-12-03 00:24:48.379 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:24:48.382 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:24:48.383 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:24:48.384 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.386 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.387 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.388 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:48.390 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:24:48.392 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:24:48.406 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:24:48.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:48.411 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.413 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:24:48.416 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.417 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.571 +02:00 [DBG] Creating JWT token for user e52d8511-82c6-4f1c-a7c7-e71ef2b7ab0d
2025-12-03 00:24:48.573 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.575 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.576 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.578 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:48.579 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:24:48.582 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:24:48.589 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:24:48.591 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.593 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:24:48.594 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.596 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.600 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.602 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.604 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.606 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:48.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:24:48.609 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:24:48.621 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:24:48.624 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.626 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:24:48.629 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.630 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.634 +02:00 [DBG] JWT token created for user e52d8511-82c6-4f1c-a7c7-e71ef2b7ab0d, expires at "2025-12-02T23:24:48.0000000Z"
2025-12-03 00:24:48.637 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.639 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.641 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.643 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:48.644 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:24:48.646 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:24:48.649 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:24:48.651 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.652 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:24:48.654 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.656 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.658 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.661 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.662 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.663 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:48.665 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:24:48.667 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:24:48.677 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:24:48.680 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.682 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:24:48.684 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.686 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.688 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:48.691 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:24:48.692 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:24:48.693 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:24:48.695 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:24:48.696 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:24:48.699 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.702 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.704 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.707 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:24:48.709 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:24:48.711 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:24:48.736 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:24:48.741 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.743 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:24:48.745 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.746 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.749 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:48.754 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:24:48.757 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-12-03 00:24:48.765 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 00:24:48.770 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.773 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.775 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:48.776 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:48.778 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:24:48.781 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-12-03 00:24:48.787 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-12-03 00:24:48.791 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:48.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:48.794 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:48.796 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-12-03 00:24:48.799 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.800 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:48.803 +02:00 [INF] Patient 2 logged in successfully
2025-12-03 00:24:48.804 +02:00 [INF] User Basant@gmail.com logged in successfully with roles: Patient
2025-12-03 00:24:48.806 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:24:48.810 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:24:48.811 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:24:48.813 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:24:48.815 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:24:48.817 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 00:24:48.820 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 466.8553ms
2025-12-03 00:24:48.822 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:24:48.824 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:24:48.826 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:48.830 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-03 00:24:48.834 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 519.2759ms
2025-12-03 00:24:54.333 +02:00 [DBG] Connection id "0HNHHU372FV89" received FIN.
2025-12-03 00:24:54.335 +02:00 [DBG] Connection id "0HNHHU372FV89" is closed. The last processed stream ID was 3.
2025-12-03 00:24:54.335 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV89 completed.
2025-12-03 00:24:54.336 +02:00 [DBG] Connection id "0HNHHU372FV89" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:24:54.347 +02:00 [DBG] Connection id "0HNHHU372FV89" stopped.
2025-12-03 00:24:55.268 +02:00 [DBG] Connection id "0HNHHU372FV8A" accepted.
2025-12-03 00:24:55.270 +02:00 [DBG] Connection id "0HNHHU372FV8A" started.
2025-12-03 00:24:55.275 +02:00 [DBG] Connection 0HNHHU372FV8A established using the following protocol: "Tls12"
2025-12-03 00:24:55.286 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:24:55.290 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:24:55.292 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:24:55.295 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:24:55.296 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:24:55.297 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:24:55.301 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:24:55.302 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:24:55.304 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:24:55.306 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:24:55.309 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:24:55.311 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:24:55.312 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:24:55.316 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:24:55.319 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:24:55.320 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:24:55.321 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:24:55.323 +02:00 [INF] get all schedule called at "2025-12-03T00:24:55.3234415+02:00"
2025-12-03 00:24:55.324 +02:00 [INF] Fetching all schedules
2025-12-03 00:24:55.325 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:24:55.328 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:24:55.329 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:24:55.330 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:55.332 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:55.334 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:24:55.335 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:24:55.336 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:24:55.338 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:24:55.356 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:24:55.360 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.361 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.363 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.366 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.371 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.374 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.377 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.380 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.381 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.383 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.385 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.387 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:24:55.390 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:24:55.391 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 31ms reading results.
2025-12-03 00:24:55.393 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:55.394 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:24:55.396 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:24:55.400 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:24:55.401 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:24:55.402 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:24:55.403 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:24:55.404 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:24:55.406 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 86.5643ms
2025-12-03 00:24:55.409 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:24:55.410 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:24:55.411 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:24:55.413 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:24:55.414 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 128.5659ms
2025-12-03 00:25:02.378 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/patient/2 - null null
2025-12-03 00:25:02.384 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/patient/2'
2025-12-03 00:25:02.387 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)' with route pattern 'api/Appointment/patient/{patientId:int}' is valid for the request path '/api/Appointment/patient/2'
2025-12-03 00:25:02.392 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:25:02.394 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:25:02.395 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:25:02.395 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:25:02.396 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:25:02.397 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:25:02.401 +02:00 [INF] Route matched with {action = "GetByPatientId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByPatientId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-12-03 00:25:02.404 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:25:02.405 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:25:02.406 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:25:02.407 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:25:02.409 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:25:02.410 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:25:02.411 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:25:02.411 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:25:02.412 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-12-03 00:25:02.414 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:25:02.416 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:25:02.417 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:25:02.418 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:25:02.420 +02:00 [INF] Get Appointment by GetByPatientId  called at "2025-12-03T00:25:02.4208725+02:00"
2025-12-03 00:25:02.423 +02:00 [INF] Fetching appointments for PatientId: 2
2025-12-03 00:25:02.424 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:25:02.425 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:25:02.426 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:25:02.427 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.428 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.428 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:25:02.429 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:25:02.430 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:25:02.431 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:25:02.461 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:25:02.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.465 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.467 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:25:02.468 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 00:25:02.470 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.470 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:25:02.473 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.PatientId == __patientId_0)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.Specialization)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 00:25:02.475 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-12-03 00:25:02.476 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:25:02.477 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:25:02.479 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 00:25:02.480 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 00:25:02.495 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Doctor.Available (bool?), 12], [Property: Doctor.Biography (string), 13], [Property: Doctor.ConsultationFees (decimal) Required, 14], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Doctor.ExperienceYears (int?), 16], [Property: Doctor.ImageURL (string) MaxLength(300), 17], [Property: Doctor.SpecializationId (int) Required FK Index, 18], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: Doctor.UserId (string) Required FK Index, 20] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 21], [Property: User.AccessFailedCount (int) Required, 22], [Property: User.ConcurrencyStamp (string) Concurrency, 23], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: User.DateOfBirth (DateOnly?), 25], [Property: User.Email (string) Index MaxLength(256), 26], [Property: User.EmailConfirmed (bool) Required, 27], [Property: User.FullName (string) Required MaxLength(150), 28], [Property: User.Gender (GenderType?) MaxLength(10), 29], [Property: User.LockoutEnabled (bool) Required, 30], [Property: User.LockoutEnd (DateTimeOffset?), 31], [Property: User.NormalizedEmail (string) Index MaxLength(256), 32], [Property: User.NormalizedUserName (string) Index MaxLength(256), 33], [Property: User.PasswordHash (string), 34], [Property: User.PhoneNumber (string), 35], [Property: User.PhoneNumberConfirmed (bool) Required, 36], [Property: User.RefreshToken (string), 37], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 38], [Property: User.Role (string) Required MaxLength(50), 39], [Property: User.SecurityStamp (string), 40], [Property: User.TwoFactorEnabled (bool) Required, 41], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 42], [Property: User.UserName (string) MaxLength(256), 43] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 44], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Specialization.Description (string), 46], [Property: Specialization.ImageURL (string) MaxLength(300), 47], [Property: Specialization.Name (string) Required MaxLength(120), 48], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 50], [Property: Branch.Address (string) MaxLength(250), 51], [Property: Branch.BranchName (string) Required MaxLength(150), 52], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 53], [Property: Branch.Description (string), 54], [Property: Branch.Email (string) MaxLength(200), 55], [Property: Branch.ImageURL (string) MaxLength(300), 56], [Property: Branch.Latitude (double?), 57], [Property: Branch.Longitude (double?), 58], [Property: Branch.Phone (string) MaxLength(25), 59], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            5 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: Payment.Amount (decimal) Required, 62], [Property: Payment.AppointmentId (int) Required FK Index, 63], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: Payment.Currency (string) Required MaxLength(3), 65], [Property: Payment.GatewayResponse (string), 66], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 67], [Property: Payment.PaymobOrderId (long?), 68], [Property: Payment.PaymobTransactionId (long?), 69], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 70], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 71] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p ON a.AppointmentId == p.AppointmentId
        WHERE a.PatientId == @__patientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:25:02.500 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.502 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.503 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:25:02.504 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:25:02.505 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:25:02.506 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
WHERE [a].[PatientId] = @__patientId_0
2025-12-03 00:25:02.525 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
WHERE [a].[PatientId] = @__patientId_0
2025-12-03 00:25:02.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.530 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.532 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.534 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.536 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.538 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.540 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.541 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.542 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:02.544 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:25:02.545 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 17ms reading results.
2025-12-03 00:25:02.547 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.548 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:25:02.555 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:25:02.557 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:25:02.558 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:25:02.558 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:25:02.559 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:25:02.561 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:25:02.568 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital) in 158.7382ms
2025-12-03 00:25:02.571 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:25:02.572 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:25:02.573 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:02.575 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:25:02.577 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/patient/2 - 200 null application/json; charset=utf-8 199.1288ms
2025-12-03 00:25:04.332 +02:00 [DBG] Connection id "0HNHHU372FV8A" received FIN.
2025-12-03 00:25:04.335 +02:00 [DBG] Connection id "0HNHHU372FV8A" is closed. The last processed stream ID was 3.
2025-12-03 00:25:04.335 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8A completed.
2025-12-03 00:25:04.337 +02:00 [DBG] Connection id "0HNHHU372FV8A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:25:04.348 +02:00 [DBG] Connection id "0HNHHU372FV8A" stopped.
2025-12-03 00:25:29.066 +02:00 [DBG] Connection id "0HNHHU372FV8B" accepted.
2025-12-03 00:25:29.071 +02:00 [DBG] Connection id "0HNHHU372FV8B" started.
2025-12-03 00:25:29.074 +02:00 [DBG] Connection 0HNHHU372FV8B established using the following protocol: "Tls12"
2025-12-03 00:25:29.076 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:25:29.078 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:25:29.079 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:25:29.080 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:25:29.081 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:25:29.082 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:25:29.083 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:25:29.084 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:25:29.084 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:25:29.085 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:25:29.087 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:25:29.088 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:25:29.089 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:25:29.090 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:25:29.091 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:25:29.092 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:25:29.093 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:25:29.094 +02:00 [INF] get all schedule called at "2025-12-03T00:25:29.0947228+02:00"
2025-12-03 00:25:29.095 +02:00 [INF] Fetching all schedules
2025-12-03 00:25:29.096 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:25:29.098 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:25:29.099 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:25:29.100 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:29.100 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:29.101 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:25:29.102 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:25:29.103 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:25:29.104 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:25:29.115 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:25:29.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.120 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.122 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.124 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.126 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.128 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.131 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.132 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.134 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.136 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:29.139 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:25:29.140 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 20ms reading results.
2025-12-03 00:25:29.141 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:29.141 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:25:29.142 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:25:29.144 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:25:29.144 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:25:29.145 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:25:29.146 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:25:29.147 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:25:29.149 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 56.5774ms
2025-12-03 00:25:29.150 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:25:29.151 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:25:29.152 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:29.153 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:25:29.155 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 78.7543ms
2025-12-03 00:25:33.940 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/patient/2 - null null
2025-12-03 00:25:33.950 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/patient/2'
2025-12-03 00:25:33.952 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)' with route pattern 'api/Appointment/patient/{patientId:int}' is valid for the request path '/api/Appointment/patient/2'
2025-12-03 00:25:33.953 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:25:33.954 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:25:33.955 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:25:33.955 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:25:33.956 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:25:33.957 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:25:33.959 +02:00 [INF] Route matched with {action = "GetByPatientId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByPatientId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-12-03 00:25:33.961 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:25:33.962 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:25:33.964 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:25:33.966 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:25:33.967 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:25:33.968 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:25:33.969 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-12-03 00:25:33.970 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:25:33.971 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-12-03 00:25:33.972 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:25:33.972 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:25:33.974 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-12-03 00:25:33.975 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-12-03 00:25:33.975 +02:00 [INF] Get Appointment by GetByPatientId  called at "2025-12-03T00:25:33.9758337+02:00"
2025-12-03 00:25:33.976 +02:00 [INF] Fetching appointments for PatientId: 2
2025-12-03 00:25:33.977 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:25:33.980 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:25:33.981 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:25:33.982 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:33.984 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:33.985 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:25:33.987 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:25:33.988 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:25:33.989 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:25:34.019 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-12-03 00:25:34.026 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.027 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.029 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.031 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:25:34.033 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-12-03 00:25:34.035 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:34.036 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:25:34.037 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:34.038 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:34.039 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:25:34.040 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:25:34.041 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:25:34.042 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
WHERE [a].[PatientId] = @__patientId_0
2025-12-03 00:25:34.060 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
WHERE [a].[PatientId] = @__patientId_0
2025-12-03 00:25:34.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.064 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.070 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.072 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.072 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.074 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.076 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.077 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.078 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.080 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.081 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.084 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.085 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:34.086 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:25:34.088 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 00:25:34.089 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:34.090 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:25:34.091 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:25:34.093 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:25:34.094 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:25:34.094 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:25:34.095 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:25:34.096 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:25:34.099 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital) in 130.7723ms
2025-12-03 00:25:34.101 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-12-03 00:25:34.102 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:25:34.103 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:34.104 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:25:34.106 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/patient/2 - 200 null application/json; charset=utf-8 166.4573ms
2025-12-03 00:25:34.364 +02:00 [DBG] Connection id "0HNHHU372FV8B" received FIN.
2025-12-03 00:25:34.367 +02:00 [DBG] Connection id "0HNHHU372FV8B" is closed. The last processed stream ID was 3.
2025-12-03 00:25:34.367 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8B completed.
2025-12-03 00:25:34.370 +02:00 [DBG] Connection id "0HNHHU372FV8B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:25:34.376 +02:00 [DBG] Connection id "0HNHHU372FV8B" stopped.
2025-12-03 00:25:52.337 +02:00 [DBG] Connection id "0HNHHU372FV8C" accepted.
2025-12-03 00:25:52.340 +02:00 [DBG] Connection id "0HNHHU372FV8C" started.
2025-12-03 00:25:52.343 +02:00 [DBG] Connection 0HNHHU372FV8C established using the following protocol: "Tls12"
2025-12-03 00:25:52.349 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:25:52.356 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:25:52.357 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:25:52.359 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:25:52.359 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:25:52.360 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:25:52.361 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:25:52.362 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:25:52.363 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:25:52.364 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:25:52.365 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:25:52.368 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:25:52.370 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:25:52.371 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:25:52.373 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:25:52.375 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:25:52.376 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:25:52.378 +02:00 [INF] get all schedule called at "2025-12-03T00:25:52.3779975+02:00"
2025-12-03 00:25:52.379 +02:00 [INF] Fetching all schedules
2025-12-03 00:25:52.380 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:25:52.382 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:25:52.383 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:25:52.385 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:52.386 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:52.388 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:25:52.389 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:25:52.390 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:25:52.391 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:25:52.407 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:25:52.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.414 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.417 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.422 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.427 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.430 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.432 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.433 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.437 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.441 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:25:52.444 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:25:52.446 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 00:25:52.448 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:52.449 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:25:52.451 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:25:52.453 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:25:52.454 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:25:52.455 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:25:52.455 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:25:52.457 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:25:52.459 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 84.2558ms
2025-12-03 00:25:52.461 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:25:52.462 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:25:52.463 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:25:52.465 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:25:52.468 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 118.7272ms
2025-12-03 00:25:54.386 +02:00 [DBG] Connection id "0HNHHU372FV8C" received FIN.
2025-12-03 00:25:54.389 +02:00 [DBG] Connection id "0HNHHU372FV8C" is closed. The last processed stream ID was 1.
2025-12-03 00:25:54.389 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8C completed.
2025-12-03 00:25:54.391 +02:00 [DBG] Connection id "0HNHHU372FV8C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:25:54.401 +02:00 [DBG] Connection id "0HNHHU372FV8C" stopped.
2025-12-03 00:26:01.629 +02:00 [DBG] Connection id "0HNHHU372FV8D" accepted.
2025-12-03 00:26:01.632 +02:00 [DBG] Connection id "0HNHHU372FV8D" started.
2025-12-03 00:26:01.634 +02:00 [DBG] Connection 0HNHHU372FV8D established using the following protocol: "Tls12"
2025-12-03 00:26:01.637 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-12-03 00:26:01.641 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-12-03 00:26:01.642 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-12-03 00:26:01.645 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:26:01.647 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:26:01.650 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:26:01.651 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:26:01.652 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:26:01.653 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:26:01.654 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:26:01.655 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:26:01.658 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:26:01.659 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:26:01.660 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:26:01.662 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:26:01.664 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:26:01.666 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:26:01.668 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:26:01.669 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:26:01.670 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:26:01.672 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:26:01.673 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:26:01.674 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:26:01.675 +02:00 [INF] Get  doctor By Id called at "2025-12-03T00:26:01.6756822+02:00"
2025-12-03 00:26:01.676 +02:00 [INF] Fetching doctor with ID 1
2025-12-03 00:26:01.678 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:26:01.680 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:26:01.681 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:26:01.681 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:01.683 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:01.684 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:26:01.685 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:26:01.686 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:26:01.687 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:26:01.690 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:26:01.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.694 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.696 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.702 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.705 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.707 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.709 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.713 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:01.716 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:26:01.717 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 24ms reading results.
2025-12-03 00:26:01.718 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:01.719 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:26:01.721 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:26:01.723 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:26:01.724 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:26:01.724 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:26:01.725 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:26:01.726 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-12-03 00:26:01.727 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 63.5306ms
2025-12-03 00:26:01.741 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-12-03 00:26:01.742 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:26:01.744 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:01.747 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:26:01.750 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 113.3831ms
2025-12-03 00:26:04.393 +02:00 [DBG] Connection id "0HNHHU372FV8D" received FIN.
2025-12-03 00:26:04.398 +02:00 [DBG] Connection id "0HNHHU372FV8D" is closed. The last processed stream ID was 1.
2025-12-03 00:26:04.398 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8D completed.
2025-12-03 00:26:04.406 +02:00 [DBG] Connection id "0HNHHU372FV8D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:26:04.420 +02:00 [DBG] Connection id "0HNHHU372FV8D" stopped.
2025-12-03 00:26:07.642 +02:00 [DBG] Connection id "0HNHHU372FV88" is closing.
2025-12-03 00:26:07.645 +02:00 [DBG] Connection id "0HNHHU372FV88" is closed. The last processed stream ID was 7.
2025-12-03 00:26:07.651 +02:00 [DBG] Connection id "0HNHHU372FV88" received FIN.
2025-12-03 00:26:07.651 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV88 completed.
2025-12-03 00:26:07.653 +02:00 [DBG] Connection id "0HNHHU372FV88" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:26:07.658 +02:00 [DBG] Connection id "0HNHHU372FV88" stopped.
2025-12-03 00:26:32.793 +02:00 [DBG] Connection id "0HNHHU372FV8E" accepted.
2025-12-03 00:26:32.795 +02:00 [DBG] Connection id "0HNHHU372FV8E" started.
2025-12-03 00:26:32.797 +02:00 [DBG] Connection 0HNHHU372FV8E established using the following protocol: "Tls12"
2025-12-03 00:26:32.801 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:26:32.803 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:26:32.806 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:26:32.808 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:26:32.809 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:26:32.809 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:26:32.810 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:26:32.811 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:26:32.811 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:26:32.812 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:26:32.814 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:26:32.815 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:26:32.816 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:26:32.818 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:26:32.819 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:26:32.820 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:26:32.821 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:26:32.822 +02:00 [INF] get all schedule called at "2025-12-03T00:26:32.8224623+02:00"
2025-12-03 00:26:32.823 +02:00 [INF] Fetching all schedules
2025-12-03 00:26:32.824 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:26:32.825 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:26:32.826 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:26:32.827 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:32.829 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:32.831 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:26:32.832 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:26:32.833 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:26:32.834 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:26:32.846 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:26:32.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.849 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.851 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.852 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.854 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.855 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.856 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.858 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.862 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.863 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.865 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.867 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:26:32.869 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:26:32.870 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 21ms reading results.
2025-12-03 00:26:32.871 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:32.872 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:26:32.873 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:26:32.875 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:26:32.876 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:26:32.877 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:26:32.878 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:26:32.879 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:26:32.881 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 60.6458ms
2025-12-03 00:26:32.882 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:26:32.883 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:26:32.883 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:26:32.884 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:26:32.886 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 84.9387ms
2025-12-03 00:26:34.433 +02:00 [DBG] Connection id "0HNHHU372FV8E" received FIN.
2025-12-03 00:26:34.437 +02:00 [DBG] Connection id "0HNHHU372FV8E" is closed. The last processed stream ID was 1.
2025-12-03 00:26:34.438 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8E completed.
2025-12-03 00:26:34.441 +02:00 [DBG] Connection id "0HNHHU372FV8E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:26:34.449 +02:00 [DBG] Connection id "0HNHHU372FV8E" stopped.
2025-12-03 00:27:04.481 +02:00 [DBG] Connection id "0HNHHU372FV8F" accepted.
2025-12-03 00:27:04.483 +02:00 [DBG] Connection id "0HNHHU372FV8F" started.
2025-12-03 00:27:04.486 +02:00 [DBG] Connection 0HNHHU372FV8F established using the following protocol: "Tls12"
2025-12-03 00:27:04.489 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-12-03 00:27:04.501 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-12-03 00:27:04.502 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-12-03 00:27:04.505 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:27:04.506 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:27:04.511 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:27:04.516 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:27:04.521 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:27:04.522 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:27:04.524 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-12-03 00:27:04.529 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:27:04.533 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:27:04.544 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:27:04.548 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:27:04.552 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:27:04.554 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:27:04.556 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-12-03 00:27:04.559 +02:00 [INF] get all schedule called at "2025-12-03T00:27:04.5591385+02:00"
2025-12-03 00:27:04.561 +02:00 [INF] Fetching all schedules
2025-12-03 00:27:04.564 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:27:04.568 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:27:04.569 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:27:04.571 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:27:04.573 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:27:04.575 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:27:04.590 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (14ms).
2025-12-03 00:27:04.595 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-12-03 00:27:04.597 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:27:04.621 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-12-03 00:27:04.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.629 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.638 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.646 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.652 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.656 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.661 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.666 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.670 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:27:04.673 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:27:04.674 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 48ms reading results.
2025-12-03 00:27:04.677 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:27:04.679 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:27:04.681 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:27:04.684 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:27:04.685 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:27:04.686 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:27:04.688 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:27:04.690 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:27:04.693 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 138.8139ms
2025-12-03 00:27:04.695 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-12-03 00:27:04.697 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:27:04.700 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:27:04.702 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:27:04.704 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 215.6709ms
2025-12-03 00:27:14.463 +02:00 [DBG] Connection id "0HNHHU372FV8F" received FIN.
2025-12-03 00:27:14.465 +02:00 [DBG] Connection id "0HNHHU372FV8F" is closed. The last processed stream ID was 1.
2025-12-03 00:27:14.466 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8F completed.
2025-12-03 00:27:14.467 +02:00 [DBG] Connection id "0HNHHU372FV8F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:27:14.478 +02:00 [DBG] Connection id "0HNHHU372FV8F" stopped.
2025-12-03 00:29:19.263 +02:00 [DBG] Connection id "0HNHHU372FV8G" accepted.
2025-12-03 00:29:19.265 +02:00 [DBG] Connection id "0HNHHU372FV8G" started.
2025-12-03 00:29:19.279 +02:00 [DBG] Connection 0HNHHU372FV8G established using the following protocol: "Tls12"
2025-12-03 00:29:19.281 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 00:29:19.284 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:29:19.285 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:29:19.290 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:19.291 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:19.292 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:19.292 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:29:19.294 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 12.548ms
2025-12-03 00:29:19.298 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-12-03 00:29:19.301 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:29:19.303 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 00:29:19.306 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:29:19.307 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:19.308 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:19.309 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:19.310 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:19.311 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:29:19.312 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 00:29:19.314 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:19.315 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:19.316 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:19.319 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:19.321 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:19.323 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:29:19.325 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:29:19.327 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:29:19.328 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 00:29:19.330 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:29:19.331 +02:00 [DBG] Connection id "0HNHHU372FV8G", Request id "0HNHHU372FV8G:00000003": started reading request body.
2025-12-03 00:29:19.333 +02:00 [DBG] Connection id "0HNHHU372FV8G", Request id "0HNHHU372FV8G:00000003": done reading request body.
2025-12-03 00:29:19.335 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 00:29:19.336 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:29:19.339 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:29:19.340 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:29:19.342 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:29:19.344 +02:00 [INF] Login called at "2025-12-03T00:29:19.3441563+02:00"
2025-12-03 00:29:19.344 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-12-03 00:29:19.346 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:19.349 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:19.349 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:19.350 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.351 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.354 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.355 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:19.356 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:19.357 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:29:19.371 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:29:19.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:19.375 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:19.376 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:29:19.378 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.379 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:19.524 +02:00 [DBG] Creating JWT token for user 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 00:29:19.526 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.527 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.528 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.529 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:19.530 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:19.532 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:29:19.541 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:29:19.544 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:19.546 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:29:19.548 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.549 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:19.551 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.555 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.556 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.558 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:19.560 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:29:19.561 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:29:19.571 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:29:19.575 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:19.579 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 00:29:19.581 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.582 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:19.584 +02:00 [DBG] JWT token created for user 50f20790-c7c3-4baa-bee5-da27ac4985c3, expires at "2025-12-02T23:29:19.0000000Z"
2025-12-03 00:29:19.586 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.589 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.590 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.591 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:19.593 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:19.595 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:29:19.597 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:29:19.601 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:19.605 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 00:29:19.607 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.611 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:29:19.613 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.614 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.616 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.617 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:19.620 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:29:19.622 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:29:19.632 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:29:19.636 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:19.641 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-12-03 00:29:19.644 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.646 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:19.648 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:19.650 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:29:19.652 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:29:19.655 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:29:19.657 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:29:19.658 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:29:19.660 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.662 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.663 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.664 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:19.666 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:19.667 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:29:19.701 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:29:19.710 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:19.712 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:29:19.714 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.716 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:19.718 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:19.722 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:29:19.724 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-12-03 00:29:19.726 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:19.729 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:19.730 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:19.730 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:19.732 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:19.733 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 00:29:19.735 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 411.7938ms
2025-12-03 00:29:19.738 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:29:19.740 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:19.742 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.743 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:29:19.747 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 448.6567ms
2025-12-03 00:29:19.827 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:29:19.827 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:29:19.827 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:29:19.839 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:29:19.834 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:29:19.830 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:29:19.841 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:29:19.843 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:29:19.845 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:29:19.847 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:29:19.850 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:29:19.852 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:29:19.855 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:29:19.857 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:19.858 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:19.859 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:19.860 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:19.861 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:19.862 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:19.864 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:19.865 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:19.866 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:19.867 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:19.868 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:19.870 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:19.871 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:29:19.872 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:29:19.874 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:29:19.875 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:19.877 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:29:19.878 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:29:19.881 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:19.884 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:19.888 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:19.890 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:19.891 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:19.894 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:19.895 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:19.897 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:19.900 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:19.902 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:19.906 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:19.908 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:19.910 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:19.912 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:19.914 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:19.917 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:19.920 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:29:19.922 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:29:19.924 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:19.926 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:29:19.928 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:29:19.930 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:19.931 +02:00 [INF] Get All Branch called at "2025-12-03T00:29:19.9309836+02:00"
2025-12-03 00:29:19.933 +02:00 [INF] get all doctor in system called at "2025-12-03T00:29:19.9335806+02:00"
2025-12-03 00:29:19.936 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:19.938 +02:00 [INF] Fetching all branches
2025-12-03 00:29:19.939 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:29:19.940 +02:00 [DBG] Created DbConnection. (4ms).
2025-12-03 00:29:19.942 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:19.943 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:19.944 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.948 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:19.951 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:19.954 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.958 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.956 +02:00 [DBG] Created DbConnection. (4ms).
2025-12-03 00:29:19.955 +02:00 [DBG] Created DbConnection. (6ms).
2025-12-03 00:29:19.960 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:19.962 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.963 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.965 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:29:19.973 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:29:19.980 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:19.985 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:19.987 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:19.989 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:29:19.991 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:29:20.011 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:29:20.013 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.020 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:20.022 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.024 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:29:20.026 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.028 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:29:20.029 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.031 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:29:20.033 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.038 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.039 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:29:20.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.043 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:20.046 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.048 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-12-03 00:29:20.051 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:29:20.051 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.055 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.059 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.061 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.063 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (7ms).
2025-12-03 00:29:20.064 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.069 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:20.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.072 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.075 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:20.077 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.079 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.080 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:20.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.085 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:20.088 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.090 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.091 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:20.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.094 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.096 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:29:20.098 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.102 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 182.0851ms
2025-12-03 00:29:20.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.106 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.107 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:29:20.109 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.110 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.111 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:20.113 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.115 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.116 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.118 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.120 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.122 +02:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-12-03 00:29:20.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.124 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.126 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 299.299ms
2025-12-03 00:29:20.128 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.137 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.140 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.141 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.144 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.146 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.148 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.150 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.151 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.159 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.166 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.167 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:20.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.170 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 111ms reading results.
2025-12-03 00:29:20.172 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.174 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.178 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 00:29:20.180 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.181 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:20.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.186 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:20.189 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.190 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:20.191 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.193 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:20.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.196 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:20.197 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.199 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:29:20.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:20.204 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 281.9837ms
2025-12-03 00:29:20.205 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:20.208 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:29:20.210 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 193ms reading results.
2025-12-03 00:29:20.211 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:20.214 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.220 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (6ms).
2025-12-03 00:29:20.216 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.225 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:20.227 +02:00 [DBG] Disposed connection to database '' on server '' (11ms).
2025-12-03 00:29:20.230 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:20.233 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 405.7807ms
2025-12-03 00:29:20.234 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:20.240 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:20.242 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:20.244 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:20.246 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 328.8451ms
2025-12-03 00:29:20.248 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:29:20.250 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:20.252 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:20.254 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:29:20.257 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 430.3697ms
2025-12-03 00:29:30.600 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:30.604 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:30.607 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:30.610 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:30.612 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:30.614 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:30.615 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:30.615 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:30.616 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:30.617 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:30.619 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:30.621 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:30.622 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:30.624 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:30.626 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:30.628 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:30.630 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:30.631 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:30.632 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:30.634 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:30.635 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:30.636 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:30.640 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:30.642 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:30.644 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:30.645 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:30.646 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.647 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.648 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:30.649 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:30.650 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:30.651 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:30.657 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:30.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.663 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.665 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.672 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.674 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.676 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.678 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.680 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.682 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:30.684 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 00:29:30.686 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.687 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:30.689 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.690 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.691 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:30.692 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:30.693 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:30.694 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:30.706 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:30.709 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.711 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.713 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.715 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.717 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.719 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.723 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.725 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.728 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.730 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.732 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.733 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.736 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.737 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.738 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.741 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.743 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.745 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.748 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.750 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.751 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.754 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.755 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:30.756 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:30.757 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 48ms reading results.
2025-12-03 00:29:30.758 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.759 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:29:30.761 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:30.763 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:30.764 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:30.764 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:30.765 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:30.766 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:30.768 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 139.3164ms
2025-12-03 00:29:30.770 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:30.771 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:30.772 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:30.774 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:29:30.776 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 176.1926ms
2025-12-03 00:29:31.779 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:31.784 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:31.786 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:31.788 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:31.790 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:31.791 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:31.794 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:31.794 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:31.795 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:31.796 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:31.798 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:31.799 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:31.800 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:31.803 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:31.806 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:31.808 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:31.809 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:31.810 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:31.811 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:31.812 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:31.814 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:31.815 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:31.816 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:31.818 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:31.821 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:31.822 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:31.822 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.823 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.826 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:31.827 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:31.828 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:31.829 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:31.833 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:31.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.838 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.841 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.845 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.848 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.851 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.854 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.855 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.856 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.859 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:31.860 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 23ms reading results.
2025-12-03 00:29:31.861 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.862 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:29:31.864 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.865 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.866 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:31.867 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:31.868 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:31.869 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:31.882 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:31.884 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.888 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.890 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.891 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.892 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.895 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.896 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.897 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.898 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.899 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.901 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.903 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.905 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.906 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.907 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.911 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.912 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.914 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.916 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.918 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.922 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.923 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.924 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.925 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.928 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:31.930 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:31.931 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 47ms reading results.
2025-12-03 00:29:31.932 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.933 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:31.935 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:31.938 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:31.939 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:31.941 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:31.942 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:31.944 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:31.945 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 137.3635ms
2025-12-03 00:29:31.947 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:31.950 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:31.951 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:31.953 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:29:31.956 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 177.596ms
2025-12-03 00:29:54.255 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:54.260 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:54.262 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:54.265 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:54.267 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:54.269 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:54.270 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:54.272 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:54.274 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:54.277 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:54.280 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:54.283 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:54.284 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:54.287 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:54.289 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:54.290 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:54.292 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:54.293 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:54.294 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:54.296 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:54.298 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:54.299 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:54.300 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:54.303 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:54.305 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:54.305 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:54.306 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.307 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.309 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:54.310 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:54.311 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:54.312 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:54.317 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:54.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.323 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.326 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.331 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.333 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.336 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.340 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.342 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.344 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:54.345 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 23ms reading results.
2025-12-03 00:29:54.347 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.348 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:54.349 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.350 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.352 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:54.353 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:54.355 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:29:54.356 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:54.369 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:54.373 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.375 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.376 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.377 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.378 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.379 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.380 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.381 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.385 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.386 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.388 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.389 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.390 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.392 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.393 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.395 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.396 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.397 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.398 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.399 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.400 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.402 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.404 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.405 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.407 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.409 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.410 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.412 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.415 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:54.417 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 44ms reading results.
2025-12-03 00:29:54.419 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.420 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:54.421 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:54.424 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:54.424 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:54.425 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:54.425 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:54.426 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:54.428 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 137.7185ms
2025-12-03 00:29:54.429 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:54.430 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:54.433 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.435 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:29:54.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 181.1847ms
2025-12-03 00:29:54.853 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:54.857 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:54.858 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:54.860 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:54.862 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:54.864 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:54.866 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:54.867 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:54.868 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:54.870 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:54.871 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:54.873 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:54.874 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:54.875 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:54.878 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:54.879 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:54.880 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:54.881 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:54.882 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:54.883 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:54.885 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:54.886 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:54.888 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:54.889 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:54.890 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:54.891 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:54.892 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.893 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.894 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:54.895 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:54.896 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:54.897 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:54.901 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:54.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.905 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.907 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.912 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.913 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.915 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.918 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.922 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:54.923 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:29:54.924 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.926 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:54.927 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.928 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.929 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:54.930 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:54.930 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:54.931 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:54.934 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:54.936 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.938 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.940 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.941 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.944 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.945 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.946 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.947 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.949 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.950 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.952 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.953 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.955 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.956 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.959 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.960 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.962 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.964 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.966 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.967 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.969 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.970 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:54.971 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:54.972 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 36ms reading results.
2025-12-03 00:29:54.973 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.974 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:54.975 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:54.977 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:54.978 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:54.979 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:54.979 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:54.980 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:54.981 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 101.8794ms
2025-12-03 00:29:54.982 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:54.983 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:54.984 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:54.985 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:29:54.986 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 132.9985ms
2025-12-03 00:29:55.092 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:55.098 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:55.102 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:55.105 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.106 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:55.106 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:55.108 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:55.109 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:55.110 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.111 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:55.112 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:55.114 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:55.115 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:55.116 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:55.117 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:55.119 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:55.120 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:55.121 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:55.122 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:55.123 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.124 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.125 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:55.125 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.127 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:55.129 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:55.129 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:55.130 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.131 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.132 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:55.133 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:55.134 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:55.135 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:55.139 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:55.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.143 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.144 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.144 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.146 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.148 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.150 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.152 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.154 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.155 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.156 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.159 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:55.159 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 17ms reading results.
2025-12-03 00:29:55.160 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.161 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:29:55.163 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.164 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.165 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:55.165 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:55.166 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:55.168 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:55.171 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:55.173 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.175 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.176 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.177 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.178 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.180 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.181 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.182 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.182 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.183 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.185 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.186 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.189 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.190 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.190 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.191 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.192 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.194 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.196 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.198 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.199 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.200 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.203 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.204 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.205 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.207 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:55.208 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 35ms reading results.
2025-12-03 00:29:55.209 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.210 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:29:55.212 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:55.213 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:55.214 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:55.215 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:55.215 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:55.216 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:55.217 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 98.5651ms
2025-12-03 00:29:55.220 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.221 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:55.222 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.223 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:29:55.224 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 131.4335ms
2025-12-03 00:29:55.306 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:55.313 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:55.316 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:55.319 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.320 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:55.321 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:55.322 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:55.322 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:55.324 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.326 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:55.328 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:55.329 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:55.331 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:55.332 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:55.334 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:55.337 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:55.338 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:55.340 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:55.344 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:55.346 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.347 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.348 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:55.349 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.350 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:55.353 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:55.354 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:55.355 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.356 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.357 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:55.358 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:55.359 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:55.360 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:55.364 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:55.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.368 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.369 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.371 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.376 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.377 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.378 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.379 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.380 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.381 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.383 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.384 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.386 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.387 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.389 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:55.390 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 23ms reading results.
2025-12-03 00:29:55.391 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.392 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:29:55.393 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.395 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.396 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:55.396 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:55.398 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:55.399 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:55.401 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:55.404 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.407 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.409 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.410 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.412 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.413 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.416 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.417 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.420 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.421 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.423 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.424 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.426 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.428 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.430 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.432 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.433 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.434 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.435 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.436 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.438 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.439 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.440 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.441 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.442 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.444 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:55.445 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 40ms reading results.
2025-12-03 00:29:55.446 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.447 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:55.448 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:55.450 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:55.452 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:55.454 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:55.454 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:55.455 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:55.457 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 120.2253ms
2025-12-03 00:29:55.458 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.460 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:55.461 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.462 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:29:55.463 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 157.3145ms
2025-12-03 00:29:55.537 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:29:55.545 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:55.550 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:29:55.554 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.556 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:29:55.558 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:29:55.561 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:29:55.563 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:29:55.565 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.565 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:29:55.567 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:29:55.569 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:29:55.572 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:29:55.573 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:29:55.575 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:29:55.576 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:55.577 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:29:55.578 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:55.579 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:29:55.580 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.581 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.582 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:29:55.583 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:29:55.585 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:29:55.588 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:29:55.588 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:29:55.590 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.591 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.592 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:55.593 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:55.594 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:29:55.595 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:55.599 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:29:55.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.605 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.608 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.625 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.628 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.630 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.634 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.638 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:55.640 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 36ms reading results.
2025-12-03 00:29:55.641 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.642 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:29:55.644 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.645 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.646 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:29:55.647 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:29:55.648 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:29:55.650 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:55.654 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:29:55.656 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.659 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.662 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.663 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.666 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.667 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.670 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.671 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.674 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.675 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.677 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.679 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.681 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.682 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.685 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.688 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.690 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.693 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.696 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.697 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.700 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:29:55.703 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:29:55.704 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 47ms reading results.
2025-12-03 00:29:55.705 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.706 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:29:55.708 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:29:55.709 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:29:55.710 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:29:55.711 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:29:55.711 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:29:55.713 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:29:55.714 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 137.6897ms
2025-12-03 00:29:55.715 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:29:55.716 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:29:55.717 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:29:55.719 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:29:55.720 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 183.9407ms
2025-12-03 00:30:04.540 +02:00 [DBG] Connection id "0HNHHU372FV8G" received FIN.
2025-12-03 00:30:04.541 +02:00 [DBG] Connection id "0HNHHU372FV8G" is closed. The last processed stream ID was 23.
2025-12-03 00:30:04.541 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8G completed.
2025-12-03 00:30:04.544 +02:00 [DBG] Connection id "0HNHHU372FV8G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:30:04.553 +02:00 [DBG] Connection id "0HNHHU372FV8G" stopped.
2025-12-03 00:30:14.247 +02:00 [DBG] Connection id "0HNHHU372FV8H" accepted.
2025-12-03 00:30:14.250 +02:00 [DBG] Connection id "0HNHHU372FV8H" started.
2025-12-03 00:30:14.254 +02:00 [DBG] Connection 0HNHHU372FV8H established using the following protocol: "Tls12"
2025-12-03 00:30:14.256 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:30:14.260 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:30:14.263 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:30:14.264 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:30:14.265 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:30:14.265 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:30:14.266 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:30:14.266 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:30:14.267 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:30:14.269 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:30:14.271 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:30:14.272 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:30:14.273 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:30:14.274 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:30:14.275 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:30:14.276 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:30:14.277 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:30:14.278 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:30:14.279 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:30:14.280 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:30:14.281 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:30:14.282 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:30:14.283 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:30:14.285 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:30:14.288 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:30:14.288 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:30:14.289 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.290 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.291 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:30:14.291 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:30:14.292 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:30:14.293 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:30:14.297 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:30:14.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.301 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.303 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.307 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.309 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.311 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.313 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.316 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.318 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:30:14.320 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 20ms reading results.
2025-12-03 00:30:14.321 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.322 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:30:14.323 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.324 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.325 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:30:14.326 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:30:14.327 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:30:14.328 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:30:14.330 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:30:14.332 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.334 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.336 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.337 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.339 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.340 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.342 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.343 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.345 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.346 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.348 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.349 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.351 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.352 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.355 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.355 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.356 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.357 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.358 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.359 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.360 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.362 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.363 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.365 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.365 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:30:14.366 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:30:14.368 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 35ms reading results.
2025-12-03 00:30:14.369 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.370 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:30:14.371 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:30:14.372 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:30:14.373 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:30:14.374 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:30:14.374 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:30:14.375 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:30:14.376 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 100.4374ms
2025-12-03 00:30:14.377 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:30:14.378 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:30:14.379 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:30:14.380 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:30:14.381 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 125.567ms
2025-12-03 00:30:14.546 +02:00 [DBG] Connection id "0HNHHU372FV8H" received FIN.
2025-12-03 00:30:14.551 +02:00 [DBG] Connection id "0HNHHU372FV8H" is closed. The last processed stream ID was 1.
2025-12-03 00:30:14.552 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8H completed.
2025-12-03 00:30:14.559 +02:00 [DBG] Connection id "0HNHHU372FV8H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:30:14.577 +02:00 [DBG] Connection id "0HNHHU372FV8H" stopped.
2025-12-03 00:32:07.447 +02:00 [DBG] Connection id "0HNHHU372FV8I" accepted.
2025-12-03 00:32:07.448 +02:00 [DBG] Connection id "0HNHHU372FV8I" started.
2025-12-03 00:32:07.450 +02:00 [DBG] Connection 0HNHHU372FV8I established using the following protocol: "Tls12"
2025-12-03 00:32:07.452 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:32:07.452 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:32:07.453 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:32:07.455 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:32:07.457 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:32:07.458 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:32:07.459 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:32:07.460 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:32:07.461 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:32:07.464 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:32:07.463 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:32:07.462 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:32:07.465 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:32:07.466 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:32:07.467 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:32:07.468 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:32:07.469 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:32:07.469 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:32:07.470 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:32:07.471 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:32:07.472 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:32:07.472 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:32:07.473 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:32:07.473 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:32:07.474 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:32:07.475 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:32:07.475 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:32:07.476 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:32:07.478 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:32:07.482 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:32:07.484 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:32:07.485 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:32:07.487 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:32:07.488 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:32:07.489 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:32:07.490 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:32:07.490 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:32:07.491 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:32:07.492 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:32:07.493 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:32:07.494 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:32:07.495 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:32:07.496 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:32:07.498 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:32:07.500 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:32:07.500 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:32:07.501 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:32:07.503 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:32:07.504 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:32:07.504 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:32:07.505 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:32:07.506 +02:00 [INF] Get All Branch called at "2025-12-03T00:32:07.5061193+02:00"
2025-12-03 00:32:07.506 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:32:07.507 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:32:07.508 +02:00 [INF] Fetching all branches
2025-12-03 00:32:07.508 +02:00 [INF] get all doctor in system called at "2025-12-03T00:32:07.5088768+02:00"
2025-12-03 00:32:07.510 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:32:07.510 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:32:07.510 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:32:07.511 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:32:07.513 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:32:07.514 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:32:07.514 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.515 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:32:07.516 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:32:07.517 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.518 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.518 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:32:07.520 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.519 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.521 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:32:07.521 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.519 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:32:07.522 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:32:07.522 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:32:07.523 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:32:07.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:32:07.524 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:32:07.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-03 00:32:07.526 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:32:07.526 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:32:07.527 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:32:07.530 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:32:07.532 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:32:07.536 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:32:07.536 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:32:07.538 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.539 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:32:07.539 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:32:07.541 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:32:07.541 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:32:07.541 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:32:07.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.543 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:32:07.544 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.545 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:32:07.547 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:32:07.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.549 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 48.4457ms
2025-12-03 00:32:07.550 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.550 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:32:07.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.553 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:32:07.554 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.555 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.556 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.557 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:32:07.557 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:32:07.557 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.558 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 105.5776ms
2025-12-03 00:32:07.560 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.560 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.564 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.565 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.568 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.569 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.570 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.574 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.575 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.576 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.579 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.581 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.582 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.583 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.585 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.586 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.588 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.588 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.591 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.593 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.594 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.596 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.598 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.601 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.602 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:32:07.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.604 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 44ms reading results.
2025-12-03 00:32:07.605 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.606 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.609 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:32:07.610 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.611 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:32:07.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.613 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:32:07.614 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.614 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:32:07.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.615 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:32:07.616 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.617 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:32:07.618 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.619 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:32:07.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.620 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 115.9338ms
2025-12-03 00:32:07.621 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.622 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:32:07.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:07.623 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:32:07.624 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:32:07.625 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.626 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 82ms reading results.
2025-12-03 00:32:07.626 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:32:07.627 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.628 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 175.7103ms
2025-12-03 00:32:07.629 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:32:07.632 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:32:07.633 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:32:07.634 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:32:07.634 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:32:07.635 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:32:07.636 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:32:07.637 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 134.1914ms
2025-12-03 00:32:07.638 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:32:07.639 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:32:07.640 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:07.640 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:32:07.641 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 188.9837ms
2025-12-03 00:32:14.725 +02:00 [DBG] Connection id "0HNHHU372FV8I" received FIN.
2025-12-03 00:32:14.727 +02:00 [DBG] Connection id "0HNHHU372FV8I" is closed. The last processed stream ID was 5.
2025-12-03 00:32:14.727 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8I completed.
2025-12-03 00:32:14.728 +02:00 [DBG] Connection id "0HNHHU372FV8I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:32:14.740 +02:00 [DBG] Connection id "0HNHHU372FV8I" stopped.
2025-12-03 00:32:31.331 +02:00 [DBG] Connection id "0HNHHU372FV8J" accepted.
2025-12-03 00:32:31.333 +02:00 [DBG] Connection id "0HNHHU372FV8J" started.
2025-12-03 00:32:31.334 +02:00 [DBG] Connection 0HNHHU372FV8J established using the following protocol: "Tls12"
2025-12-03 00:32:31.335 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:32:31.337 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:32:31.338 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:32:31.339 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:32:31.339 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:32:31.340 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:32:31.341 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:32:31.341 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:32:31.342 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:32:31.343 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:32:31.345 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:32:31.348 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:32:31.349 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:32:31.350 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:32:31.352 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:32:31.353 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:32:31.354 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:32:31.356 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:32:31.357 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:32:31.358 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:32:31.358 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:31.361 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:31.363 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:32:31.364 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:32:31.365 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:32:31.366 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:32:31.380 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:32:31.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.384 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.385 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.386 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.387 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.388 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.390 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.392 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.394 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.399 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.400 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.401 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.402 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.404 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.405 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.406 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.407 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.409 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.410 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.412 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.414 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.415 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.418 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.419 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.421 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.423 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.424 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.426 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:32:31.431 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:32:31.434 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 50ms reading results.
2025-12-03 00:32:31.435 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:31.436 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:32:31.437 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:32:31.438 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:32:31.439 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:32:31.440 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:32:31.441 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:32:31.442 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:32:31.443 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 89.538ms
2025-12-03 00:32:31.444 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:32:31.445 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:32:31.448 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:32:31.449 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:32:31.450 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 115.0462ms
2025-12-03 00:32:34.750 +02:00 [DBG] Connection id "0HNHHU372FV8J" received FIN.
2025-12-03 00:32:34.753 +02:00 [DBG] Connection id "0HNHHU372FV8J" is closed. The last processed stream ID was 1.
2025-12-03 00:32:34.753 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8J completed.
2025-12-03 00:32:34.756 +02:00 [DBG] Connection id "0HNHHU372FV8J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:32:34.766 +02:00 [DBG] Connection id "0HNHHU372FV8J" stopped.
2025-12-03 00:33:22.761 +02:00 [DBG] Connection id "0HNHHU372FV8K" accepted.
2025-12-03 00:33:22.763 +02:00 [DBG] Connection id "0HNHHU372FV8K" received FIN.
2025-12-03 00:33:22.764 +02:00 [DBG] Connection id "0HNHHU372FV8K" started.
2025-12-03 00:33:22.764 +02:00 [DBG] Connection id "0HNHHU372FV8L" accepted.
2025-12-03 00:33:22.772 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 00:33:22.773 +02:00 [DBG] Connection id "0HNHHU372FV8L" started.
2025-12-03 00:33:22.774 +02:00 [DBG] Connection id "0HNHHU372FV8K" stopped.
2025-12-03 00:33:22.776 +02:00 [DBG] Connection id "0HNHHU372FV8K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:33:22.784 +02:00 [DBG] Connection 0HNHHU372FV8L established using the following protocol: "Tls12"
2025-12-03 00:33:22.790 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/2 - null null
2025-12-03 00:33:22.793 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/2'
2025-12-03 00:33:22.794 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/2'
2025-12-03 00:33:22.795 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:33:22.796 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:33:22.796 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:33:22.797 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:33:22.798 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:33:22.799 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:33:22.799 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:33:22.800 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:33:22.801 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:33:22.802 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:33:22.803 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:33:22.804 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:33:22.805 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:33:22.806 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:33:22.807 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:33:22.808 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:33:22.808 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:33:22.809 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:33:22.810 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:33:22.811 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:33:22.811 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:33:22.812 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:33:22.813 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:33:22.814 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:33:22.815 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:33:22.816 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:33:22.817 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:33:22.817 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.818 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.819 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:33:22.819 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:33:22.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:33:22.821 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:33:22.824 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:33:22.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.827 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.829 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.832 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.833 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.835 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.837 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.839 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.840 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:33:22.841 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:33:22.841 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.842 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:33:22.843 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.844 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.845 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:33:22.845 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:33:22.846 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:33:22.847 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:33:22.850 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:33:22.851 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.852 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:33:22.853 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:33:22.854 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.854 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:33:22.855 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.856 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.857 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:33:22.857 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:33:22.858 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:33:22.859 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:33:22.861 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:33:22.863 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.864 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.865 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.866 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.867 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.869 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.870 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.872 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.872 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.874 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.875 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.877 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.878 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.881 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.882 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.884 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.885 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.886 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.888 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.888 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.890 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.890 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.892 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:22.894 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:33:22.894 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 31ms reading results.
2025-12-03 00:33:22.896 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.897 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:33:22.898 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:33:22.899 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:33:22.900 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:33:22.900 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:33:22.901 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:33:22.901 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:33:22.905 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 101.777ms
2025-12-03 00:33:22.906 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:33:22.907 +02:00 [DBG] Connection id "0HNHHU372FV8L" completed keep alive response.
2025-12-03 00:33:22.908 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:33:22.909 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:22.910 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:33:22.912 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/2 - 200 null application/json; charset=utf-8 122.7443ms
2025-12-03 00:33:41.582 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/1 - null null
2025-12-03 00:33:41.584 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/branch/1'
2025-12-03 00:33:41.584 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)' with route pattern 'api/Doctor/branch/{branchId}' is valid for the request path '/api/Doctor/branch/1'
2025-12-03 00:33:41.586 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-12-03 00:33:41.586 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:33:41.587 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:33:41.588 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-12-03 00:33:41.593 +02:00 [INF] Route matched with {action = "GetByBranch", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByBranch(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:33:41.595 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:33:41.595 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:33:41.596 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:33:41.597 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:33:41.598 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:33:41.599 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:33:41.600 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:33:41.601 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:33:41.601 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:33:41.602 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:33:41.603 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:33:41.604 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:33:41.604 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:33:41.606 +02:00 [INF] get doctor by Branch called at "2025-12-03T00:33:41.6065774+02:00"
2025-12-03 00:33:41.608 +02:00 [INF] Fetching all doctors for branch ID 1
2025-12-03 00:33:41.609 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:33:41.611 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:33:41.611 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:33:41.612 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.612 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.613 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:33:41.614 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:33:41.614 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:33:41.615 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:33:41.618 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:33:41.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.620 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:33:41.621 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:33:41.622 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.623 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:33:41.626 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Where(d => d.Branches
        .Any(b => b.BranchId == __branchId_0))'
2025-12-03 00:33:41.632 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 00:33:41.633 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 00:33:41.634 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 00:33:41.634 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 00:33:41.646 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 00:33:41.651 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
            8 -> 39
            9 -> 40
            10 -> 41
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            12 -> 52
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d1.BranchesBranchId, d1.DoctorsDoctorId, b0.BranchId, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM DoctorBranches AS d1
            INNER JOIN Branches AS b0 ON d1.BranchesBranchId == b0.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN Schedules AS s0 ON d.DoctorId == s0.DoctorId
        WHERE EXISTS (
            SELECT 1
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            WHERE ((d.DoctorId != NULL) && (d.DoctorId == d0.DoctorsDoctorId)) && (b.BranchId == @__branchId_0))
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 00:33:41.654 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.655 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.656 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:33:41.656 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:33:41.659 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:33:41.660 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-12-03 00:33:41.685 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__branchId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d1].[BranchesBranchId], [d1].[DoctorsDoctorId], [b0].[BranchId], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [DoctorBranches] AS [d1]
    INNER JOIN [Branches] AS [b0] ON [d1].[BranchesBranchId] = [b0].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [d].[DoctorId] = [s0].[DoctorId]
WHERE EXISTS (
    SELECT 1
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
    WHERE [d].[DoctorId] = [d0].[DoctorsDoctorId] AND [b].[BranchId] = @__branchId_0)
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId]
2025-12-03 00:33:41.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.690 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.693 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.698 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.700 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.701 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.703 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.705 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.707 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.709 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:33:41.712 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:33:41.713 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 23ms reading results.
2025-12-03 00:33:41.714 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.714 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:33:41.715 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:33:41.717 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:33:41.717 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:33:41.718 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:33:41.718 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:33:41.719 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:33:41.720 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetByBranch (Hospital) in 120.9985ms
2025-12-03 00:33:41.721 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetByBranch (Hospital)'
2025-12-03 00:33:41.722 +02:00 [DBG] Connection id "0HNHHU372FV8L" completed keep alive response.
2025-12-03 00:33:41.722 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:33:41.723 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:33:41.724 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:33:41.725 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/branch/1 - 200 null application/json; charset=utf-8 143.0116ms
2025-12-03 00:34:02.780 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:02.788 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:02.789 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:02.790 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:02.791 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:02.792 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:02.793 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:02.794 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:02.796 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:02.797 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:02.798 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:02.799 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:02.800 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:02.800 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:02.801 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:02.802 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:02.803 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:02.804 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:02.804 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:02.805 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:02.806 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:02.807 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:02.808 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:02.811 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:02.812 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:02.813 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:02.814 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:02.815 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:02.816 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:02.817 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:02.817 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.818 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.819 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:02.819 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:02.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:02.821 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:02.824 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:02.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.827 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.829 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.832 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.833 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.834 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.835 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.837 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.838 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.840 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:02.841 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:34:02.842 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.843 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:34:02.844 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.845 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.846 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:02.846 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:02.847 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:02.848 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:02.850 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:02.851 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:02.852 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:02.853 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.854 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:02.855 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.856 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.857 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:02.858 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:02.859 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:34:02.860 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:02.862 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:02.864 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.865 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.866 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.867 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.868 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.869 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.870 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.872 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.872 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.875 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.876 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.878 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.878 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.880 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.881 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.882 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.883 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.885 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.886 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.888 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.889 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.891 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:02.892 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:02.893 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 29ms reading results.
2025-12-03 00:34:02.894 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.895 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:02.896 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:02.898 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:02.898 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:02.899 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:02.899 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:02.900 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:02.901 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 100.0817ms
2025-12-03 00:34:02.901 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:02.902 +02:00 [DBG] Connection id "0HNHHU372FV8L" completed keep alive response.
2025-12-03 00:34:02.903 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:02.903 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:02.904 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:02.905 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 125.7227ms
2025-12-03 00:34:15.169 +02:00 [DBG] Connection id "0HNHHU372FV8M" accepted.
2025-12-03 00:34:15.174 +02:00 [DBG] Connection id "0HNHHU372FV8M" started.
2025-12-03 00:34:15.177 +02:00 [DBG] Connection 0HNHHU372FV8M established using the following protocol: "Tls12"
2025-12-03 00:34:15.182 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:15.189 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:15.191 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:15.194 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:15.198 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:15.199 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:15.199 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:15.200 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:15.200 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:15.201 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:15.202 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:15.203 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:15.204 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:15.205 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:15.207 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:15.208 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:15.211 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:15.211 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:15.212 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:15.213 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:15.214 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:15.214 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:15.215 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:15.216 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:15.216 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:15.218 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:15.218 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:15.219 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:15.220 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:15.221 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:15.222 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:15.223 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:15.224 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.226 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.227 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:15.228 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:15.228 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:15.229 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:15.232 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:15.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.234 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.236 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.239 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.241 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.242 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.243 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.244 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.246 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.247 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:15.248 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:34:15.249 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.249 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:15.250 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.251 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.252 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:15.253 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:15.254 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:15.254 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:15.258 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:15.260 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:15.261 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:15.261 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.262 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:15.263 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.264 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.265 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:15.265 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:15.266 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:15.267 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:15.269 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:15.270 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.272 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.274 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.275 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.276 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.277 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.278 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.279 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.280 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.281 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.282 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.284 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.285 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.287 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.287 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.288 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.289 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.291 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.293 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.294 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.295 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.296 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.297 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.298 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.299 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:15.300 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:15.300 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 30ms reading results.
2025-12-03 00:34:15.301 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.302 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:15.303 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:15.304 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:15.304 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:15.305 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:15.305 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:15.306 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:15.307 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 98.9027ms
2025-12-03 00:34:15.308 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:15.309 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:15.310 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:15.311 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:34:15.312 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 129.7145ms
2025-12-03 00:34:20.916 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:20.922 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:20.923 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:20.924 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:20.926 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:20.926 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:20.927 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:20.928 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:20.928 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:20.929 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:20.930 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:20.931 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:20.932 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:20.932 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:20.933 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:20.934 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:20.935 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:20.936 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:20.937 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:20.938 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:20.938 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:20.939 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:20.941 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:20.942 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:20.943 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:20.944 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:20.944 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:20.945 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:20.946 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:20.947 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:20.949 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:20.949 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:20.950 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.951 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.951 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:20.952 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:20.953 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:20.953 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:20.957 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:20.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.960 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.961 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.965 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.966 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.968 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.969 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.970 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.971 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.973 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:20.974 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:34:20.975 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.975 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:20.976 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.977 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.978 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:20.978 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:20.979 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:20.980 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:20.983 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:20.984 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:20.985 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:20.986 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.986 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:20.988 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.989 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:20.990 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:20.990 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:20.991 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:20.992 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:20.994 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:20.995 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.997 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:20.999 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.000 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.001 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.002 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.003 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.004 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.005 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.006 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.007 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.008 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.009 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.010 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.010 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.011 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.012 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.012 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.013 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.014 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.015 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.016 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.018 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.021 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.022 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.023 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.024 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.024 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.025 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.026 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 30ms reading results.
2025-12-03 00:34:21.027 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.027 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.028 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:21.029 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:21.030 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:21.030 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:21.031 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:21.031 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:21.032 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 98.0645ms
2025-12-03 00:34:21.033 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.034 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:21.035 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.036 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:21.037 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 120.542ms
2025-12-03 00:34:21.116 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:21.119 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.120 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.121 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.122 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:21.124 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:21.125 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:21.125 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:21.127 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.128 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:21.129 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:21.131 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:21.133 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:21.135 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:21.136 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:21.137 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.138 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.140 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.142 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:21.143 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.144 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.145 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.146 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.147 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.148 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:21.149 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.150 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.151 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.152 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.154 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:21.155 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:21.156 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:21.159 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.160 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.161 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.162 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.163 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.164 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.167 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.170 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.184 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.191 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.194 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.196 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.198 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.199 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.200 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.201 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.202 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 32ms reading results.
2025-12-03 00:34:21.203 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.204 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.205 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.206 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.207 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.208 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.208 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.209 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.213 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.214 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.215 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:21.216 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.217 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.219 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.220 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.220 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.223 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.225 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.227 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.227 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.228 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.230 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.231 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.232 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.233 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.235 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.235 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.237 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.238 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.240 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.241 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.243 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.244 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.246 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.247 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.249 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.251 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.253 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.254 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.255 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.256 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.257 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.258 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 31ms reading results.
2025-12-03 00:34:21.259 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.260 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.261 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:21.263 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:21.263 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:21.264 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:21.265 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:21.266 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:21.266 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 129.1017ms
2025-12-03 00:34:21.267 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.268 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:21.269 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.270 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:21.271 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 155.0159ms
2025-12-03 00:34:21.471 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:21.474 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.475 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.476 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.477 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:21.478 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:21.478 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:21.479 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:21.479 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.480 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:21.481 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:21.482 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:21.482 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:21.483 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:21.484 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:21.485 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.486 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.487 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.487 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:21.488 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.489 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.490 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.491 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.491 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.492 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:21.493 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.494 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.495 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.496 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.498 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:21.499 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:21.500 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:21.500 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.501 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.502 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.502 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.503 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.504 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.507 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.509 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.511 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.511 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.514 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.515 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.516 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.519 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.520 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.522 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.522 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:34:21.524 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.525 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.526 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.527 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.528 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.528 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.529 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.530 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.532 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.534 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.534 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:21.535 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.536 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.537 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.539 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.539 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.540 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.541 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.541 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.543 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.545 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.546 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.547 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.548 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.548 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.549 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.550 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.551 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.552 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.553 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.554 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.555 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.556 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.558 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.559 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.560 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.560 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.561 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.562 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.563 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.564 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.564 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.566 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.567 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.569 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.570 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.571 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.574 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.575 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 30ms reading results.
2025-12-03 00:34:21.575 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.576 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.579 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:21.580 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:21.580 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:21.581 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:21.581 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:21.582 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:21.583 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 97.5937ms
2025-12-03 00:34:21.584 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.584 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:21.585 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.586 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:34:21.587 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 116.4193ms
2025-12-03 00:34:21.665 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:21.674 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.676 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.679 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.681 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:21.681 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:21.682 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:21.683 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:21.683 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.684 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:21.685 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:21.686 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:21.687 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:21.688 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:21.689 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:21.690 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.692 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.693 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.694 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:21.695 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.696 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.697 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.698 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.699 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.700 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:21.701 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.702 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.703 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.703 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.705 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:21.706 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:21.707 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:21.708 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.709 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.710 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.711 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.712 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.712 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.715 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.717 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.719 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.722 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.723 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.725 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.728 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.729 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.730 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.731 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:34:21.732 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.733 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.734 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.735 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.735 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.736 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.736 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.737 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.740 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.742 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.742 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:21.743 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.744 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.745 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.746 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.746 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.747 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.748 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.748 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.750 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.752 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.753 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.755 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.755 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.757 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.758 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.760 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.761 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.763 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.764 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.765 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.766 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.768 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.768 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.769 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.770 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.772 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.773 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.774 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.776 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.777 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.778 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.779 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.780 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.780 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.781 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.782 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.783 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 31ms reading results.
2025-12-03 00:34:21.784 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.785 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.786 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:21.788 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:21.788 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:21.789 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:21.790 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:21.790 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:21.791 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 101.3989ms
2025-12-03 00:34:21.792 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.793 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:21.794 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.795 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:21.796 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 130.1897ms
2025-12-03 00:34:21.861 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:21.874 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.879 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:21.884 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.885 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:21.885 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:21.886 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:21.886 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:21.887 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.888 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:21.889 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:21.891 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:21.892 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:21.893 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:21.894 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:21.895 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.895 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:21.896 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.898 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:21.899 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.900 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.900 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:21.901 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:21.902 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.902 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:21.903 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.904 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.905 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:21.905 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:21.907 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:21.908 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:21.909 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:21.909 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.910 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.911 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.911 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.912 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.913 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.915 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:21.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.918 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.920 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.922 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.923 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.924 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.925 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.927 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.929 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.931 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.932 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:34:21.933 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.934 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.935 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.936 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.936 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.937 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.938 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.939 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.942 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:21.944 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.945 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:21.946 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.946 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.948 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.948 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.949 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:21.950 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:21.950 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:21.951 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.953 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:21.954 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.956 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.958 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.958 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.960 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.961 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.962 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.963 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.964 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.965 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.967 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.968 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.969 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.970 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.971 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.973 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.974 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.975 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.976 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.977 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.978 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.979 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.980 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.981 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:21.981 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:21.982 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 28ms reading results.
2025-12-03 00:34:21.983 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.984 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:21.985 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:21.986 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:21.986 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:21.987 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:21.987 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:21.988 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:21.989 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 94.1954ms
2025-12-03 00:34:21.990 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:21.991 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:21.992 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:21.993 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:21.993 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 132.3915ms
2025-12-03 00:34:22.057 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:22.062 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.063 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.064 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.065 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:22.065 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:22.065 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:22.066 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:22.069 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.071 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:22.072 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:22.073 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:22.074 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:22.075 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:22.075 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:22.076 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.077 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.078 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.079 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:22.079 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.080 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.081 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.081 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.082 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.083 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:22.084 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.084 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.085 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.086 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.087 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:22.088 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:22.088 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:22.089 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.090 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.090 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.091 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.092 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.092 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.095 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.098 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.100 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.103 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.105 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.106 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.108 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.109 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.109 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.111 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.112 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 13ms reading results.
2025-12-03 00:34:22.112 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.113 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.114 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.115 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.116 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.117 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.117 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.118 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.121 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.122 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.123 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:22.124 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.125 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.126 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.126 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.127 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.128 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.128 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.129 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.131 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.133 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.134 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.136 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.137 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.138 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.139 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.140 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.141 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.142 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.143 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.144 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.145 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.146 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.147 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.150 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.151 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.152 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.154 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.155 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.155 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.157 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.159 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.160 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.161 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.163 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.164 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 31ms reading results.
2025-12-03 00:34:22.165 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.166 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.167 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:22.168 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:22.169 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:22.169 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:22.169 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:22.170 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:22.171 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 94.8653ms
2025-12-03 00:34:22.172 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.173 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:22.174 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.175 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:22.176 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 118.9906ms
2025-12-03 00:34:22.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:22.334 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.335 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.336 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.337 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:22.337 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:22.338 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:22.339 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:22.340 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.341 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:22.343 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:22.343 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:22.344 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:22.345 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:22.346 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:22.347 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.348 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.349 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.350 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:22.351 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.352 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.352 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.353 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.354 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.355 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:22.355 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.356 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.357 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.358 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.359 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:22.361 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:22.361 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:22.362 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.362 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.363 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.364 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.365 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.365 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.368 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.370 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.372 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.375 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.376 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.377 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.379 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.380 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.381 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.382 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.383 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.384 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:34:22.385 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.386 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.387 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.387 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.388 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.389 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.390 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.390 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.394 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.395 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.396 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:22.397 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.398 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.399 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.399 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.400 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.401 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.401 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.402 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.404 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.405 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.406 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.408 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.409 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.411 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.411 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.413 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.414 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.415 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.416 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.417 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.418 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.419 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.420 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.420 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.422 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.423 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.425 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.426 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.428 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.428 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.430 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.431 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.432 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 27ms reading results.
2025-12-03 00:34:22.433 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.433 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.434 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:22.435 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:22.436 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:22.436 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:22.437 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:22.438 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:22.438 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 91.3892ms
2025-12-03 00:34:22.439 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.440 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:22.441 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.442 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:34:22.443 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 110.5772ms
2025-12-03 00:34:22.542 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:22.546 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.546 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.548 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.549 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:22.550 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:22.550 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:22.551 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:22.552 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.552 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:22.554 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:22.555 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:22.556 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:22.558 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:22.560 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:22.561 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.562 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.563 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.564 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:22.564 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.565 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.566 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.567 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.568 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.569 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:22.569 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.570 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.571 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.572 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.573 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:22.574 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:22.575 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:22.575 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.576 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.577 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.578 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.579 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.581 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.584 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.586 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.588 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.592 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.594 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.595 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.597 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.599 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.600 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.601 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:34:22.602 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.603 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.604 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.605 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.606 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.606 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.607 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.608 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.612 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.613 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.614 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:22.615 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.616 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.617 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.617 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.618 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.619 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.620 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.620 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.622 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.623 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.625 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.626 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.627 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.629 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.630 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.631 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.632 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.633 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.634 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.635 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.635 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.636 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.638 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.638 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.640 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.641 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.643 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.644 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.646 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.646 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.647 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.648 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.649 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.650 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 00:34:22.651 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.651 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.652 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:22.654 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:22.654 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:22.655 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:22.655 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:22.656 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:22.656 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 95.5684ms
2025-12-03 00:34:22.658 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.658 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:22.659 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.660 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:22.661 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 118.9655ms
2025-12-03 00:34:22.757 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:34:22.763 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.764 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:34:22.766 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.767 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:34:22.769 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:34:22.771 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:34:22.771 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:34:22.772 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.773 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:34:22.774 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:34:22.775 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:34:22.776 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:34:22.778 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:34:22.779 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:34:22.780 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.781 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:34:22.782 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.784 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:34:22.785 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.786 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.787 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:34:22.788 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:34:22.789 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.790 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:34:22.791 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.792 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.793 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:34:22.794 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:34:22.795 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:34:22.796 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:34:22.796 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:34:22.797 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.799 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.799 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.800 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.800 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.801 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.804 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:34:22.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.807 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.809 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.814 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.815 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.816 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.818 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.821 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.822 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.825 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.826 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 20ms reading results.
2025-12-03 00:34:22.828 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.829 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.830 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.830 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.831 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.832 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.832 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.833 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.837 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:34:22.839 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.839 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:34:22.842 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.843 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:34:22.844 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.845 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.846 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:34:22.846 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:34:22.847 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:34:22.848 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.850 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:34:22.852 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.853 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.854 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.856 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.857 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.860 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.861 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.862 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.862 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.864 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.864 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.866 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.866 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.867 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.868 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.869 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.870 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.871 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.872 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.872 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.875 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.877 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.878 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.879 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.880 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.881 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.882 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.883 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:34:22.884 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:34:22.885 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 00:34:22.887 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.888 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:34:22.889 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:34:22.891 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:34:22.892 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:34:22.893 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:34:22.893 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:34:22.894 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:34:22.895 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 114.5541ms
2025-12-03 00:34:22.895 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:34:22.896 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:34:22.897 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:34:22.898 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:34:22.899 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 141.8369ms
2025-12-03 00:34:24.890 +02:00 [DBG] Connection id "0HNHHU372FV8M" received FIN.
2025-12-03 00:34:24.891 +02:00 [DBG] Connection id "0HNHHU372FV8M" is closed. The last processed stream ID was 19.
2025-12-03 00:34:24.891 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8M completed.
2025-12-03 00:34:24.894 +02:00 [DBG] Connection id "0HNHHU372FV8M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:34:24.905 +02:00 [DBG] Connection id "0HNHHU372FV8M" stopped.
2025-12-03 00:36:14.492 +02:00 [DBG] Connection id "0HNHHU372FV8L" disconnecting.
2025-12-03 00:36:14.498 +02:00 [DBG] Connection id "0HNHHU372FV8L" stopped.
2025-12-03 00:36:14.501 +02:00 [DBG] Connection id "0HNHHU372FV8L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:39:41.905 +02:00 [DBG] Connection id "0HNHHU372FV8N" accepted.
2025-12-03 00:39:41.906 +02:00 [DBG] Connection id "0HNHHU372FV8N" started.
2025-12-03 00:39:41.909 +02:00 [DBG] Connection 0HNHHU372FV8N established using the following protocol: "Tls12"
2025-12-03 00:39:41.911 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:39:41.911 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:39:41.911 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:39:41.914 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:39:41.916 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:39:41.918 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:39:41.919 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:39:41.923 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:39:41.922 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:39:41.920 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:39:41.925 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:39:41.928 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:39:41.929 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:39:41.930 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:39:41.931 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:39:41.932 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:39:41.933 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:39:41.933 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:39:41.934 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:39:41.935 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:39:41.936 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:39:41.937 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:39:41.938 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:39:41.938 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:39:41.939 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:39:41.940 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:39:41.941 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:39:41.942 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:39:41.946 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:39:41.946 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:39:41.948 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:39:41.950 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:39:41.951 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:39:41.953 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:39:41.954 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:39:41.959 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:39:41.958 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:39:41.956 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:39:41.961 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:39:41.962 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:39:41.963 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:39:41.964 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:39:41.965 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:39:41.968 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:39:41.969 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:39:41.970 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:39:41.971 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:39:41.973 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:39:41.975 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:39:41.976 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:39:41.978 +02:00 [INF] get all doctor in system called at "2025-12-03T00:39:41.9787067+02:00"
2025-12-03 00:39:41.979 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:39:41.980 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:39:41.981 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:39:41.982 +02:00 [INF] Get All Branch called at "2025-12-03T00:39:41.9823572+02:00"
2025-12-03 00:39:41.984 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:39:41.984 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:39:41.985 +02:00 [INF] Fetching all branches
2025-12-03 00:39:41.986 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:39:41.989 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:39:41.989 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:39:41.992 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:39:41.993 +02:00 [DBG] Created DbConnection. (7ms).
2025-12-03 00:39:41.993 +02:00 [DBG] Created DbConnection. (4ms).
2025-12-03 00:39:41.993 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:39:41.994 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:41.995 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:41.996 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.005 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.006 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:39:42.007 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:39:42.008 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.009 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:39:42.010 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:39:42.011 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.012 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:39:42.012 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:39:42.014 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:39:42.016 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-03 00:39:42.017 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:39:42.019 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:39:42.020 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-03 00:39:42.023 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:39:42.027 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:39:42.029 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:39:42.030 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:39:42.030 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:39:42.032 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.034 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.035 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.037 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:39:42.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.039 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:39:42.040 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.043 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:39:42.044 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.045 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:39:42.046 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.047 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:39:42.048 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:39:42.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.049 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:39:42.051 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.053 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.054 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:39:42.055 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.056 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.057 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 82.6047ms
2025-12-03 00:39:42.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.060 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.061 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:39:42.063 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.065 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.066 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:39:42.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.069 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.070 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.072 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.073 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.074 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:39:42.079 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.081 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.082 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 171.5177ms
2025-12-03 00:39:42.084 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.086 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.090 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.092 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.095 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.099 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.100 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.101 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.107 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.108 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.111 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.113 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.115 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.116 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.119 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.121 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.123 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.128 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.129 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.132 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.137 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.138 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:39:42.140 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.142 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 90ms reading results.
2025-12-03 00:39:42.145 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.146 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.148 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.149 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:39:42.151 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.152 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:39:42.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.156 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:39:42.158 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.159 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:39:42.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.162 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:39:42.165 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.165 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:39:42.169 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:39:42.168 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.171 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 201.7879ms
2025-12-03 00:39:42.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.185 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:39:42.195 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:39:42.192 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.197 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:42.202 +02:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-12-03 00:39:42.204 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:39:42.205 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 294.5712ms
2025-12-03 00:39:42.207 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 174ms reading results.
2025-12-03 00:39:42.213 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.214 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:39:42.218 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:39:42.221 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:39:42.222 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:39:42.223 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:39:42.225 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:39:42.232 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:39:42.233 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 257.2035ms
2025-12-03 00:39:42.236 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:39:42.238 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:39:42.240 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:42.242 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:39:42.246 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 334.8991ms
2025-12-03 00:39:49.075 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:39:49.078 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:39:49.081 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:39:49.083 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:39:49.084 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:39:49.084 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:39:49.085 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:39:49.085 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:39:49.086 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:39:49.087 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:39:49.089 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:39:49.089 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:39:49.090 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:39:49.091 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:39:49.092 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:39:49.093 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:39:49.094 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:39:49.095 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:39:49.096 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:39:49.097 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:39:49.098 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:39:49.099 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:39:49.100 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:39:49.102 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:39:49.102 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:39:49.103 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:39:49.104 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:39:49.105 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:39:49.105 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:39:49.106 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:39:49.108 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:39:49.108 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:39:49.109 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.110 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.111 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:39:49.112 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:39:49.113 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:39:49.113 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:39:49.116 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:39:49.118 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.119 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.120 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.123 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.125 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.126 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.128 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.129 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.131 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.132 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.133 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:39:49.134 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:39:49.135 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.136 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:39:49.137 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.137 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.138 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:39:49.139 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:39:49.139 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:39:49.140 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:39:49.144 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:39:49.146 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:39:49.149 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:39:49.150 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.151 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:39:49.152 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.153 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.154 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:39:49.154 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:39:49.155 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:39:49.156 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:39:49.158 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:39:49.159 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.161 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.164 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.164 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.166 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.166 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.168 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.169 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.170 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.170 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.171 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.172 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.172 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.173 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.175 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.176 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.179 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.180 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.182 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.184 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.185 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.186 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.188 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:39:49.190 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:39:49.191 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 32ms reading results.
2025-12-03 00:39:49.193 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.194 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:39:49.195 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:39:49.196 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:39:49.197 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:39:49.198 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:39:49.198 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:39:49.199 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:39:49.199 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 106.5059ms
2025-12-03 00:39:49.200 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:39:49.201 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:39:49.202 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:39:49.203 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:39:49.204 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 128.1648ms
2025-12-03 00:39:55.667 +02:00 [DBG] Connection id "0HNHHU372FV8N" received FIN.
2025-12-03 00:39:55.669 +02:00 [DBG] Connection id "0HNHHU372FV8N" is closed. The last processed stream ID was 7.
2025-12-03 00:39:55.669 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8N completed.
2025-12-03 00:39:55.673 +02:00 [DBG] Connection id "0HNHHU372FV8N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:39:55.689 +02:00 [DBG] Connection id "0HNHHU372FV8N" stopped.
2025-12-03 00:48:58.591 +02:00 [DBG] Connection id "0HNHHU372FV8O" accepted.
2025-12-03 00:48:58.596 +02:00 [DBG] Connection id "0HNHHU372FV8O" started.
2025-12-03 00:48:58.600 +02:00 [DBG] Connection 0HNHHU372FV8O established using the following protocol: "Tls12"
2025-12-03 00:48:58.604 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:48:58.604 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:48:58.605 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:48:58.610 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:48:58.614 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:48:58.619 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:48:58.621 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:48:58.623 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:48:58.625 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:48:58.628 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:48:58.633 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:48:58.636 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:48:58.638 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:48:58.640 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:48:58.642 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:48:58.644 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:48:58.645 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:48:58.647 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:48:58.649 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:48:58.650 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:48:58.652 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:48:58.653 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:48:58.655 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:48:58.657 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:48:58.658 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:48:58.660 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:48:58.662 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:48:58.664 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:48:58.666 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:48:58.669 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:48:58.672 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:48:58.680 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:48:58.677 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:48:58.674 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:48:58.682 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:48:58.688 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:48:58.696 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:48:58.700 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:48:58.703 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:48:58.714 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:48:58.709 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:48:58.706 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:48:58.717 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:48:58.720 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:48:58.723 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:48:58.726 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:48:58.729 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:48:58.733 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:48:58.735 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:48:58.739 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:48:58.741 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:48:58.743 +02:00 [INF] Get All Branch called at "2025-12-03T00:48:58.7437534+02:00"
2025-12-03 00:48:58.747 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:48:58.750 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:48:58.752 +02:00 [INF] Fetching all branches
2025-12-03 00:48:58.754 +02:00 [DBG] Created DbConnection. (6ms).
2025-12-03 00:48:58.764 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.762 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:48:58.758 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:48:58.779 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:48:58.780 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.781 +02:00 [INF] get all doctor in system called at "2025-12-03T00:48:58.7818040+02:00"
2025-12-03 00:48:58.783 +02:00 [DBG] Created DbConnection. (4ms).
2025-12-03 00:48:58.803 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:48:58.804 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:48:58.807 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.808 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-12-03 00:48:58.811 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:48:58.815 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-12-03 00:48:58.821 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:48:58.823 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:48:58.823 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.824 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 00:48:58.832 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:48:58.836 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:48:58.834 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.839 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:48:58.844 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:48:58.850 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.851 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:48:58.853 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:48:58.856 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:48:58.859 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-12-03 00:48:58.861 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 00:48:58.862 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:48:58.863 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-12-03 00:48:58.866 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.870 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.873 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:48:58.876 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (10ms).
2025-12-03 00:48:58.879 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.886 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:48:58.888 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.893 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:48:58.895 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.897 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:48:58.899 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.901 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:48:58.904 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.905 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:48:58.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.909 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:48:58.912 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.915 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 188.954ms
2025-12-03 00:48:58.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.922 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:48:58.924 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.927 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:48:58.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.931 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:58.934 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.937 +02:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-12-03 00:48:58.940 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.946 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 341.1983ms
2025-12-03 00:48:58.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.949 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:48:58.959 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.964 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.967 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.977 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.979 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.981 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.985 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.988 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.994 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:58.997 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.000 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.003 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.007 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.010 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.012 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.015 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.017 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.022 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.025 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.027 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.030 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.033 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.035 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.037 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.040 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.042 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.043 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.046 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.049 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.050 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.054 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.056 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.059 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.063 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.067 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.072 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.074 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.076 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.078 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:48:59.081 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.083 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 120ms reading results.
2025-12-03 00:48:59.085 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.088 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:59.090 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.092 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 00:48:59.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:48:59.098 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:48:59.100 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:48:59.104 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:48:59.106 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 236ms reading results.
2025-12-03 00:48:59.108 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:48:59.111 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:59.112 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:48:59.114 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:48:59.115 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:48:59.117 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:48:59.119 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:48:59.123 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:48:59.126 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 375.3012ms
2025-12-03 00:48:59.127 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:48:59.129 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:48:59.131 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:48:59.132 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:48:59.134 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:48:59.136 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:59.138 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:48:59.141 +02:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-12-03 00:48:59.143 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 422.7877ms
2025-12-03 00:48:59.145 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 540.8962ms
2025-12-03 00:48:59.147 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:48:59.155 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:48:59.157 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:48:59.159 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:48:59.161 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 556.9835ms
2025-12-03 00:49:01.555 +02:00 [DBG] Connection id "0HNHHU372FV8O" received FIN.
2025-12-03 00:49:01.557 +02:00 [DBG] Connection id "0HNHHU372FV8O" is closed. The last processed stream ID was 5.
2025-12-03 00:49:01.558 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8O completed.
2025-12-03 00:49:01.560 +02:00 [DBG] Connection id "0HNHHU372FV8O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:49:01.570 +02:00 [DBG] Connection id "0HNHHU372FV8O" stopped.
2025-12-03 00:49:22.987 +02:00 [DBG] Connection id "0HNHHU372FV8P" accepted.
2025-12-03 00:49:22.990 +02:00 [DBG] Connection id "0HNHHU372FV8P" started.
2025-12-03 00:49:22.994 +02:00 [DBG] Connection 0HNHHU372FV8P established using the following protocol: "Tls12"
2025-12-03 00:49:22.997 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:23.002 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:23.004 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:23.007 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:23.009 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:23.010 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:23.012 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:23.013 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:23.015 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:23.016 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:23.021 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:23.024 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:23.027 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:23.035 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:23.039 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:23.042 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:23.045 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:23.054 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:23.060 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:23.063 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:23.066 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:23.070 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:23.072 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:23.075 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:23.080 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:23.081 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:23.083 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.085 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.088 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:23.090 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:23.092 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:49:23.098 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:23.108 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:23.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.116 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.121 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.133 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.139 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.145 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.146 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.149 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.153 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.159 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:23.161 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 47ms reading results.
2025-12-03 00:49:23.164 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.166 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:23.169 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.172 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.174 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:23.176 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:23.178 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:49:23.180 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:23.183 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:23.187 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.191 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.194 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.196 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.198 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.200 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.202 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.206 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.208 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.211 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.213 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.214 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.216 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.219 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.220 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.224 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.226 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.227 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.230 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.235 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.239 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.244 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.249 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.252 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.256 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.258 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:23.262 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:23.265 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 78ms reading results.
2025-12-03 00:49:23.271 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.273 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:49:23.276 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:23.280 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:23.281 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:23.283 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:23.286 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:23.288 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:23.291 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 249.1084ms
2025-12-03 00:49:23.294 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:23.295 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:23.297 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:23.299 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:49:23.302 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 305.5806ms
2025-12-03 00:49:24.338 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:24.342 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:24.344 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:24.346 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:24.350 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:24.356 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:24.359 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:24.360 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:24.362 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:24.363 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:24.366 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:24.372 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:24.374 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:24.377 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:24.379 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:24.382 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:24.387 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:24.391 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:24.395 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:24.401 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:24.412 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:24.422 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:24.424 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:24.426 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:24.430 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:24.432 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:24.433 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.440 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.442 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:24.443 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:24.445 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:24.447 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:24.459 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:24.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.467 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.477 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.494 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.497 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.504 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.512 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.516 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.524 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:24.526 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 61ms reading results.
2025-12-03 00:49:24.529 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.531 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:24.534 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.539 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.540 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:24.541 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:24.543 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:49:24.545 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:24.549 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:24.554 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.556 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.558 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.563 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.565 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.575 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.577 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.580 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.582 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.586 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.588 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.592 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.594 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.598 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.600 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.604 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.606 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.610 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.614 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.618 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.622 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.624 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.628 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:24.632 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:24.634 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 79ms reading results.
2025-12-03 00:49:24.637 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.639 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:24.641 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:24.645 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:24.646 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:24.647 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:24.648 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:24.650 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:24.653 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 270.565ms
2025-12-03 00:49:24.657 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:24.661 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:24.663 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:24.665 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:24.667 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 328.4563ms
2025-12-03 00:49:31.605 +02:00 [DBG] Connection id "0HNHHU372FV8P" received FIN.
2025-12-03 00:49:31.611 +02:00 [DBG] Connection id "0HNHHU372FV8P" is closed. The last processed stream ID was 3.
2025-12-03 00:49:31.612 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8P completed.
2025-12-03 00:49:31.628 +02:00 [DBG] Connection id "0HNHHU372FV8P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:49:31.637 +02:00 [DBG] Connection id "0HNHHU372FV8P" stopped.
2025-12-03 00:49:32.710 +02:00 [DBG] Connection id "0HNHHU372FV8Q" accepted.
2025-12-03 00:49:32.807 +02:00 [DBG] Connection id "0HNHHU372FV8Q" started.
2025-12-03 00:49:32.880 +02:00 [DBG] Connection 0HNHHU372FV8Q established using the following protocol: "Tls12"
2025-12-03 00:49:32.889 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:49:32.944 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:49:32.890 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:49:32.889 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:49:32.948 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:49:32.964 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:49:32.964 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:49:32.969 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:49:32.970 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:49:32.973 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:49:32.976 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:49:32.980 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:49:32.983 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:49:32.986 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:32.988 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:32.991 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:32.992 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:32.994 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:32.999 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:32.997 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:32.995 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:33.000 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:33.003 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:33.008 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:33.011 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:49:33.013 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:49:33.015 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:33.025 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:49:33.030 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:49:33.032 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:49:33.036 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:33.041 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:33.043 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:33.046 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:33.050 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:33.053 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:33.056 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:33.059 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:33.062 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:33.065 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:33.072 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:33.074 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:33.089 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:33.082 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:33.078 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:33.092 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:33.095 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:49:33.098 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:49:33.101 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:33.105 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:49:33.108 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:49:33.109 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:33.114 +02:00 [INF] get all doctor in system called at "2025-12-03T00:49:33.1144989+02:00"
2025-12-03 00:49:33.116 +02:00 [INF] Get All Branch called at "2025-12-03T00:49:33.1166910+02:00"
2025-12-03 00:49:33.120 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:33.122 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:49:33.124 +02:00 [INF] Fetching all branches
2025-12-03 00:49:33.129 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:33.131 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:33.133 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 00:49:33.133 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:33.139 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:33.141 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:33.150 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:33.154 +02:00 [DBG] Created DbConnection. (15ms).
2025-12-03 00:49:33.157 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:33.159 +02:00 [DBG] Created DbConnection. (8ms).
2025-12-03 00:49:33.161 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:33.164 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:33.165 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:33.171 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:33.173 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-12-03 00:49:33.178 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:33.181 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:33.185 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-12-03 00:49:33.189 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:33.192 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2025-12-03 00:49:33.195 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:49:33.198 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-12-03 00:49:33.213 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2025-12-03 00:49:33.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2025-12-03 00:49:33.225 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:49:33.229 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:49:34.564 +02:00 [WRN] As of ""2025-12-02T22:49:34.5494211+00:00"", the heartbeat has been running for ""00:00:01.2529221"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-12-03 00:49:35.839 +02:00 [INF] Executed DbCommand (2,610ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:49:35.843 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:35.844 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:35.846 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:35.847 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:35.849 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:35.854 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:35.854 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:35.856 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:35.857 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:35.859 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:49:35.861 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 2762.4589ms
2025-12-03 00:49:35.863 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:49:35.865 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:35.867 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:35.870 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:49:35.872 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 2982.6738ms
2025-12-03 00:49:35.879 +02:00 [INF] Executed DbCommand (2,654ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:49:35.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.888 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.890 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.892 +02:00 [INF] Executed DbCommand (2,697ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:49:35.892 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.895 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.898 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.899 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.904 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.905 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.909 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.910 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.914 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.915 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.919 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.924 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.925 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.927 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.932 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.933 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.934 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.939 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.942 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.948 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:35.950 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.951 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 65ms reading results.
2025-12-03 00:49:35.952 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.954 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:35.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.956 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:35.957 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.959 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:35.960 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.961 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:35.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.963 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:35.964 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.965 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:35.966 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.966 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:35.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.969 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:49:35.970 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.971 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 2876.1532ms
2025-12-03 00:49:35.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.974 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:49:35.976 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.976 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:35.978 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.979 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:35.980 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.981 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:49:35.983 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.984 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 3094.9423ms
2025-12-03 00:49:35.985 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.990 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.991 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.992 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.993 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:35.995 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:35.996 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 101ms reading results.
2025-12-03 00:49:35.998 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:35.999 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:36.000 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:36.002 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:36.003 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:36.004 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:36.005 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:36.006 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:36.007 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 2905.9914ms
2025-12-03 00:49:36.009 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:49:36.009 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:36.010 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:36.012 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:36.013 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 3123.9391ms
2025-12-03 00:49:39.277 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:39.282 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:39.284 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:39.289 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:39.292 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:39.294 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:39.296 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:39.297 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:39.298 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:39.299 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:39.300 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:39.301 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:39.302 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:39.305 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:39.306 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:39.307 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:39.308 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:39.309 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:39.309 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:39.310 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:39.312 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:39.313 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:39.314 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:39.315 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:39.316 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:39.318 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:39.318 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.319 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.320 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:39.321 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:39.321 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:39.322 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:39.325 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:39.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.329 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.331 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.335 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.338 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.340 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.342 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.344 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.346 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:39.347 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:49:39.348 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.349 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:39.350 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.351 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.352 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:39.352 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:39.353 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:39.354 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:39.357 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:39.358 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.359 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.360 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.361 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.362 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.363 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.364 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.365 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.367 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.368 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.369 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.370 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.371 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.373 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.374 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.376 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.377 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.379 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.381 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.383 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.384 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.385 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.387 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.389 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.390 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.391 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:39.392 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:39.393 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 34ms reading results.
2025-12-03 00:49:39.394 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.395 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:39.396 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:39.397 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:39.398 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:39.398 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:39.399 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:39.399 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:39.401 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 93.695ms
2025-12-03 00:49:39.402 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:39.403 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:39.404 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:39.405 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:49:39.406 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 129.0026ms
2025-12-03 00:49:40.407 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:40.409 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:40.411 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:40.413 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:40.415 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:40.415 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:40.417 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:40.418 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:40.419 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:40.420 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:40.422 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:40.423 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:40.425 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:40.427 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:40.430 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:40.433 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:40.435 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:40.436 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:40.438 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:40.439 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:40.440 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:40.441 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:40.442 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:40.444 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:40.446 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:40.446 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:40.447 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.448 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.449 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:40.450 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:40.452 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:40.453 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:40.456 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:40.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.460 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.463 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.468 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.470 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.472 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.475 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.477 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:40.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 21ms reading results.
2025-12-03 00:49:40.481 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.482 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:40.484 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.486 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.487 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:40.488 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:40.489 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:40.490 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:40.493 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:40.495 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.497 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.499 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.500 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.503 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.504 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.505 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.506 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.507 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.510 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.511 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.513 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.514 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.515 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.516 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.517 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.520 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.522 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.523 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.524 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.526 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.528 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.530 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.533 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:40.537 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:40.538 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 43ms reading results.
2025-12-03 00:49:40.540 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.541 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:40.542 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:40.544 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:40.545 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:40.545 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:40.546 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:40.548 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:40.549 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 115.4477ms
2025-12-03 00:49:40.553 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:40.554 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:40.555 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:40.557 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:40.560 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 152.7833ms
2025-12-03 00:49:41.604 +02:00 [DBG] Connection id "0HNHHU372FV8Q" received FIN.
2025-12-03 00:49:41.607 +02:00 [DBG] Connection id "0HNHHU372FV8Q" is closed. The last processed stream ID was 9.
2025-12-03 00:49:41.609 +02:00 [DBG] Connection id "0HNHHU372FV8Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:49:41.620 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8Q completed.
2025-12-03 00:49:41.623 +02:00 [DBG] Connection id "0HNHHU372FV8Q" stopped.
2025-12-03 00:49:41.982 +02:00 [DBG] Connection id "0HNHHU372FV8R" accepted.
2025-12-03 00:49:41.984 +02:00 [DBG] Connection id "0HNHHU372FV8R" started.
2025-12-03 00:49:41.992 +02:00 [DBG] Connection 0HNHHU372FV8R established using the following protocol: "Tls12"
2025-12-03 00:49:41.996 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:41.998 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:41.999 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:42.001 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.001 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:42.002 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:42.003 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:42.004 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:42.005 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.008 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:42.009 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:42.009 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:42.010 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:42.012 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:42.013 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:42.015 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:42.016 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:42.018 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:42.019 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:42.020 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.021 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.022 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:42.024 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.025 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:42.026 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:42.027 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:42.028 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.029 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.031 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:42.031 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:42.032 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:42.033 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:42.037 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:42.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.040 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.041 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.042 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.043 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.044 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.045 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.046 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.048 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.049 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.051 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.053 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.054 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.055 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.056 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.057 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.058 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:42.059 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:49:42.060 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.061 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:42.062 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.063 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.064 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:42.065 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:42.065 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:42.066 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:42.071 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:42.073 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.074 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.075 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.076 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.077 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.078 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.081 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.082 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.085 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.086 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.088 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.089 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.090 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.091 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.092 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.093 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.094 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.095 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.096 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.099 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.102 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.105 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.106 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.107 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.109 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.111 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:42.111 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 00:49:42.113 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.114 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:42.115 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:42.116 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:42.117 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:42.118 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:42.119 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:42.119 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:42.120 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 104.9658ms
2025-12-03 00:49:42.121 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.122 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:42.123 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.124 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:49:42.125 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 128.4743ms
2025-12-03 00:49:42.669 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:42.674 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:42.675 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:42.676 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.677 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:42.678 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:42.678 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:42.679 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:42.681 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.681 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:42.682 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:42.684 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:42.686 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:42.687 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:42.688 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:42.689 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:42.690 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:42.690 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:42.691 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:42.692 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.693 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.694 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:42.695 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.696 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:42.697 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:42.698 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:42.699 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.700 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.700 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:42.701 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:42.702 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:42.703 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:42.705 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:42.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.709 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.711 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.714 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.718 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.720 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.722 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.724 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.725 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.725 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:42.726 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 18ms reading results.
2025-12-03 00:49:42.728 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.729 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:42.730 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.731 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.732 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:42.732 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:42.734 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:42.735 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:42.737 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:42.738 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.740 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.742 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.743 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.745 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.747 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.749 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.750 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.753 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.754 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.755 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.755 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.756 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.759 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.759 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.762 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.764 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.765 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.768 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.769 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.770 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.770 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.772 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.773 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.774 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:42.775 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 36ms reading results.
2025-12-03 00:49:42.776 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.777 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:42.778 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:42.780 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:42.781 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:42.781 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:42.782 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:42.783 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:42.785 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 96.3236ms
2025-12-03 00:49:42.787 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.788 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:42.790 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.792 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:42.793 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 123.7459ms
2025-12-03 00:49:42.855 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:42.861 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:42.861 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:42.862 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.863 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:42.864 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:42.864 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:42.865 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:42.866 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.866 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:42.868 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:42.871 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:42.874 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:42.875 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:42.876 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:42.877 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:42.879 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:42.880 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:42.881 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:42.882 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.883 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.884 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:42.885 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:42.886 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:42.888 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:42.889 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:42.890 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.890 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.891 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:42.892 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:42.893 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:42.894 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:42.897 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:42.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.902 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.905 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.910 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.912 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.914 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.917 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.922 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:42.922 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 23ms reading results.
2025-12-03 00:49:42.924 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.925 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:42.926 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.928 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.929 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:42.930 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:42.931 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:42.932 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:42.935 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:42.937 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.939 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.941 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.942 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.944 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.945 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.948 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.949 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.953 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.954 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.956 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.957 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.959 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.960 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.962 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.965 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.967 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.970 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.972 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.973 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.974 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.975 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:42.977 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:42.978 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 41ms reading results.
2025-12-03 00:49:42.980 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.981 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:42.982 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:42.984 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:42.985 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:42.985 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:42.986 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:42.987 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:42.988 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 110.7178ms
2025-12-03 00:49:42.990 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:42.991 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:42.992 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:42.993 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:49:42.994 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 138.6526ms
2025-12-03 00:49:43.049 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:43.061 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:43.067 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:43.073 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.076 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:43.078 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:43.079 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:43.080 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:43.080 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.083 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:43.084 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:43.085 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:43.086 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:43.089 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:43.090 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:43.091 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:43.092 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:43.093 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:43.094 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:43.096 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.097 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.097 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:43.098 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.100 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:43.102 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:43.102 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:43.103 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.104 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.105 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:43.106 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:43.107 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:43.108 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:43.112 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:43.115 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.116 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.120 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.124 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.126 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.128 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.129 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.130 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.131 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.132 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.135 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:43.136 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 21ms reading results.
2025-12-03 00:49:43.137 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.138 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:43.139 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.140 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.141 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:43.142 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:43.143 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:43.144 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:43.146 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:43.149 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.151 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.154 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.155 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.157 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.158 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.160 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.161 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.164 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.165 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.166 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.167 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.169 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.170 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.172 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.173 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.176 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.178 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.180 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.182 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.185 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.186 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.189 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.190 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.191 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:43.192 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 43ms reading results.
2025-12-03 00:49:43.193 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.194 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:43.196 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:43.199 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:43.200 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:43.201 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:43.202 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:43.203 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:43.204 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 112.5884ms
2025-12-03 00:49:43.205 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.206 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:43.207 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.209 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:43.210 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 161.1841ms
2025-12-03 00:49:43.247 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:43.254 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:43.255 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:43.257 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.258 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:43.258 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:43.259 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:43.260 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:43.261 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.261 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:43.263 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:43.264 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:43.265 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:43.268 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:43.269 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:43.270 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:43.271 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:43.272 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:43.274 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:43.275 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.276 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.277 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:43.278 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.280 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:43.281 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:43.282 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:43.283 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.284 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.286 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:43.287 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:43.289 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:43.290 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:43.294 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:43.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.298 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.300 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.301 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.306 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.308 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.310 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.311 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.312 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.315 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.318 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:43.320 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 23ms reading results.
2025-12-03 00:49:43.322 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.323 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:43.325 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.326 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.327 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:43.328 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:43.329 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:43.330 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:43.332 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:43.335 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.338 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.340 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.341 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.343 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.344 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.346 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.347 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.348 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.350 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.351 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.352 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.353 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.355 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.356 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.357 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.358 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.359 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.360 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.362 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.363 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.365 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.367 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.369 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.370 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.371 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.373 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.375 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:43.376 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 40ms reading results.
2025-12-03 00:49:43.377 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.378 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:43.380 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:43.382 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:43.382 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:43.384 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:43.384 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:43.385 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:43.386 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 116.4099ms
2025-12-03 00:49:43.388 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.389 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:43.390 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.391 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:43.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 145.3033ms
2025-12-03 00:49:43.466 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:43.473 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:43.476 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:43.478 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.479 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:43.480 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:43.480 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:43.481 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:43.482 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.482 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:43.486 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:43.487 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:43.488 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:43.490 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:43.491 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:43.492 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:43.493 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:43.502 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:43.503 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:43.505 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.505 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.506 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:43.508 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:43.510 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:43.511 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:43.511 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:43.512 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.514 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.514 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:43.515 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:43.516 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:43.517 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:43.523 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:43.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.526 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.529 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.533 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.536 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.538 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.540 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.542 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.544 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:43.545 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:49:43.546 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.547 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:43.549 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.551 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.552 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:43.553 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:43.554 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:43.555 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:43.558 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:43.560 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.562 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.564 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.565 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.567 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.569 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.572 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.573 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.576 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.576 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.580 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.582 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.585 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.586 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.589 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.591 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.594 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.596 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.598 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.599 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.602 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:43.604 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:43.605 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 45ms reading results.
2025-12-03 00:49:43.606 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.607 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:43.608 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:43.610 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:43.611 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:43.613 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:43.614 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:43.615 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:43.616 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 124.0128ms
2025-12-03 00:49:43.618 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:43.620 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:43.621 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:43.622 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:43.623 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 157.1999ms
2025-12-03 00:49:44.376 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:44.380 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:44.381 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:44.383 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.385 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:44.387 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:44.388 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:44.389 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:44.390 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.390 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:44.391 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:44.392 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:44.393 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:44.395 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:44.395 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:44.397 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:44.398 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:44.399 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:44.400 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:44.401 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.402 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.402 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:44.403 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.404 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:44.405 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:44.406 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:44.406 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.407 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.408 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:44.409 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:44.409 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:44.410 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:44.413 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:44.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.416 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.417 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.420 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.423 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.424 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.426 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.428 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.429 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.430 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.431 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:44.432 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:49:44.432 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.433 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:44.435 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.436 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.436 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:44.437 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:44.438 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:44.438 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:44.440 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:44.442 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.442 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.444 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.445 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.446 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.448 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.449 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.451 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.452 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.454 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.455 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.457 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.458 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.460 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.461 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.462 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.463 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.464 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.465 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.468 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.470 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.471 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.472 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.474 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:44.476 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 00:49:44.476 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.477 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:44.478 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:44.480 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:44.480 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:44.481 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:44.481 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:44.482 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:44.483 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 85.4668ms
2025-12-03 00:49:44.485 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.485 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:44.486 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.487 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:44.489 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 112.7504ms
2025-12-03 00:49:44.641 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:44.646 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:44.648 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:44.649 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.649 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:44.650 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:44.652 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:44.653 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:44.654 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.655 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:44.656 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:44.657 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:44.659 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:44.660 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:44.661 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:44.662 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:44.662 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:44.664 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:44.665 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:44.666 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.667 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.668 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:44.669 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.670 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:44.672 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:44.672 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:44.673 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.674 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.675 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:44.676 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:44.676 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:44.677 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:44.680 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:44.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.683 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.685 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.690 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.691 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.693 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.695 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.696 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.698 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:44.699 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:49:44.700 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.701 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:44.703 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.704 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.705 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:44.706 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:44.707 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:44.708 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:44.710 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:44.711 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.713 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.715 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.716 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.718 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.719 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.721 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.722 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.724 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.725 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.725 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.726 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.727 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.729 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.730 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.731 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.733 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.735 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.736 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.737 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.739 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.740 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.741 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.743 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:44.744 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 32ms reading results.
2025-12-03 00:49:44.745 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.746 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:44.747 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:44.748 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:44.749 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:44.750 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:44.750 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:44.751 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:44.752 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 90.6969ms
2025-12-03 00:49:44.753 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.754 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:44.755 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.756 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:49:44.757 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 116.383ms
2025-12-03 00:49:44.869 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:49:44.876 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:44.878 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:49:44.880 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.883 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:44.884 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:44.885 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:44.887 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:44.888 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:44.892 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:44.896 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:44.898 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:44.899 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:44.901 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:44.903 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:44.905 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:44.907 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:44.908 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:44.910 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:44.911 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.913 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.914 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:44.916 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:44.918 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:44.920 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:44.922 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:44.923 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.924 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.925 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:44.926 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:44.926 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:44.928 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:44.933 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:44.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.940 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.942 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.946 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.948 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.949 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.951 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.955 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.958 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.959 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:44.960 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 00:49:44.962 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.963 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:44.964 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.965 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:44.966 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:44.969 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:44.970 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:49:44.972 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:44.975 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:44.977 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.978 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.979 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.982 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.986 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.991 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.992 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.993 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.994 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.995 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.997 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:44.999 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.001 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.002 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.005 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.006 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.008 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.008 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.010 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.011 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.012 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.014 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.015 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.017 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.018 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.020 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.021 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:45.022 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:45.023 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 46ms reading results.
2025-12-03 00:49:45.024 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:45.025 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:45.027 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:45.029 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:45.029 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:45.030 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:45.031 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:45.032 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:45.033 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 128.0578ms
2025-12-03 00:49:45.035 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:49:45.036 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:45.037 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:45.038 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:45.039 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 170.1435ms
2025-12-03 00:49:48.831 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:48.839 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:48.839 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:48.840 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:48.841 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:48.841 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:48.841 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:48.842 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:48.842 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:48.844 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:48.845 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:48.846 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:48.847 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:48.848 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:48.849 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:48.850 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:48.851 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:48.852 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:48.852 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:48.853 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:48.854 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:48.854 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:48.855 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:48.856 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:48.856 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:48.857 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:48.858 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:48.859 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:48.859 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:48.861 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:48.862 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:48.863 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:48.863 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.864 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.865 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:48.865 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:48.866 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:48.867 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:48.870 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:48.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.872 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.873 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.873 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.875 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.876 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.878 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.879 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.881 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.882 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.883 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.884 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.886 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:48.887 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:49:48.887 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.888 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:48.889 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.890 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.890 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:48.891 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:48.892 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:48.892 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:48.898 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:48.899 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:48.900 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:49:48.901 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.901 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:48.902 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.903 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.904 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:48.904 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:48.905 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:48.906 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:48.908 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:48.910 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.912 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.914 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.915 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.916 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.917 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.918 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.920 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.922 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.923 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.924 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.925 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.926 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.927 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.929 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.930 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.931 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.933 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.935 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.935 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.937 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:48.938 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:48.939 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 29ms reading results.
2025-12-03 00:49:48.940 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.941 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:48.942 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:48.944 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:48.944 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:48.944 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:48.945 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:48.946 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:48.946 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 96.8895ms
2025-12-03 00:49:48.947 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:48.948 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:48.950 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:48.951 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:49:48.951 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 119.999ms
2025-12-03 00:49:50.265 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:50.271 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:50.273 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:50.274 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:50.274 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:50.275 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:50.275 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:50.276 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:50.276 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:50.277 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:50.279 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:50.279 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:50.280 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:50.281 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:50.283 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:50.284 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:50.286 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:50.287 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:50.288 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:50.290 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:50.291 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:50.292 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:50.293 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:50.293 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:50.294 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:50.295 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:50.296 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:50.296 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:50.297 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:50.298 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:50.299 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:50.300 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:50.301 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.301 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.302 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:50.303 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:50.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:50.304 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:50.307 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:50.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.320 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.321 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.325 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.328 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.329 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.331 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.333 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.334 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:50.335 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 00:49:50.336 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.337 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:50.339 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.339 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.340 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:50.341 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:50.341 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:50.342 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:50.345 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:50.347 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:50.348 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:49:50.348 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.349 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:50.350 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.351 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.352 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:50.353 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:50.353 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:50.354 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:50.356 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:50.358 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.359 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.360 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.361 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.361 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.363 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.364 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.365 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.366 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.367 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.368 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.369 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.369 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.370 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.371 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.372 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.373 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.375 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.376 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.377 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.378 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.379 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.380 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.381 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.381 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.382 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.385 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:50.387 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:50.388 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 29ms reading results.
2025-12-03 00:49:50.388 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.389 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:50.390 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:50.391 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:50.392 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:50.392 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:50.393 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:50.394 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:50.394 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 109.9472ms
2025-12-03 00:49:50.395 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:50.396 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:50.397 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:50.398 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:49:50.399 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 133.5199ms
2025-12-03 00:49:51.170 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:51.179 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.180 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.181 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.181 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:51.182 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:51.182 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:51.183 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:51.185 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.186 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:51.188 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:51.189 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:51.190 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:51.191 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:51.192 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:51.193 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.194 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.195 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.196 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:51.197 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.197 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.198 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.199 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.200 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.201 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:51.202 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.203 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.204 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.206 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.207 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:51.208 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:51.208 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:51.209 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.210 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.210 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.211 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.212 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.212 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.215 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.218 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.219 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.220 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.221 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.224 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.225 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.227 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.230 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.232 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.234 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.235 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:49:51.235 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.236 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:51.238 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.238 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.239 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.240 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.241 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.241 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.245 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.246 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.247 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:49:51.248 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.249 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:51.251 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.252 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.252 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.253 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.254 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.255 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.257 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.258 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.260 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.261 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.262 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.263 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.264 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.265 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.266 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.268 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.269 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.270 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.271 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.272 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.273 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.274 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.276 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.276 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.278 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.280 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.282 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.284 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.285 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.287 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.288 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.290 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.291 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.291 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.292 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 00:49:51.293 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.295 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:51.296 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:51.298 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:51.298 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:51.298 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:51.299 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:51.300 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:51.301 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 107.7496ms
2025-12-03 00:49:51.303 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.304 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:51.305 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.306 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:51.307 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 137.2367ms
2025-12-03 00:49:51.397 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:51.404 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.406 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.409 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.410 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:51.411 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:51.412 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:51.412 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:51.413 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.414 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:51.415 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:51.416 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:51.417 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:51.418 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:51.419 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:51.421 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.422 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.423 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.424 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:51.425 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.426 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.427 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.428 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.428 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.429 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:51.430 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.431 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.431 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.432 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.434 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:51.436 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:51.437 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:51.438 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.439 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.439 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.440 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.441 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.442 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.444 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.447 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.448 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.449 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.453 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.455 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.456 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.458 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.460 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.461 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.462 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 00:49:51.463 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.464 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:51.465 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.467 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.468 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.469 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.469 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.470 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.474 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.475 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.476 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:49:51.477 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.478 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:51.479 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.479 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.480 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.481 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.482 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.483 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.485 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.487 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.489 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.490 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.491 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.491 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.493 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.494 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.497 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.498 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.500 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.501 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.503 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.504 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.505 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.506 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.507 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.509 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.510 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.515 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.517 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.519 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.520 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.521 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.523 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.525 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.526 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 00:49:51.527 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.528 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:51.529 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:51.530 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:51.531 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:51.531 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:51.532 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:51.533 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:51.534 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 113.1678ms
2025-12-03 00:49:51.535 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.537 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:51.538 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.539 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:51.540 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 142.7292ms
2025-12-03 00:49:51.602 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:51.612 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.615 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.616 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.617 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:51.618 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:51.618 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:51.619 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:51.621 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.623 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:51.624 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:51.625 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:51.626 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:51.627 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:51.628 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:51.629 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.630 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.631 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.632 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:51.633 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.634 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.635 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.636 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.638 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.639 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:51.640 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.641 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.641 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.642 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.644 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:51.646 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:51.646 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:51.647 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.648 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.649 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.650 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.651 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:51.653 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.658 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.661 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.663 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.665 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.665 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.667 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.670 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.672 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.674 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.676 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.678 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.679 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:49:51.680 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.681 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:51.682 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.684 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.686 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.687 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.688 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.689 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.695 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.697 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.698 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:51.699 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.700 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:51.702 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.703 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.704 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.705 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.706 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.707 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.710 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.712 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.714 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.715 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.717 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.718 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.721 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.721 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.724 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.725 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.727 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.728 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.732 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.734 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.736 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.737 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.739 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.741 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.743 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.746 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.748 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.749 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.752 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.755 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.756 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 43ms reading results.
2025-12-03 00:49:51.757 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.758 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:51.759 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:51.760 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:51.761 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:51.762 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:51.763 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:51.764 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:51.765 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 135.5275ms
2025-12-03 00:49:51.766 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.768 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:51.769 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.770 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:51.771 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 169.1218ms
2025-12-03 00:49:51.803 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:51.807 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.808 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:51.809 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.810 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:51.810 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:51.811 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:51.811 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:51.812 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.813 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:51.814 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:51.816 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:51.817 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:51.819 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:51.820 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:51.821 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.821 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:51.822 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.823 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:51.825 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.827 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.828 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:51.829 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:51.829 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.830 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:51.831 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.832 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.834 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:51.834 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:51.836 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:51.837 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:51.838 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:51.839 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.840 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.841 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.842 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.843 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.844 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.847 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:51.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.851 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.853 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.855 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.858 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.860 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.862 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.863 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.864 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.866 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.869 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.870 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:49:51.871 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.872 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:51.874 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.875 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.876 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.877 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.878 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.879 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.882 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:51.885 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.886 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:51.888 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.889 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:51.890 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.891 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.892 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:51.893 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:51.894 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:51.895 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.898 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:51.900 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.902 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.905 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.906 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.908 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.909 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.912 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.913 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.915 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.916 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.919 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.920 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.922 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.923 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.925 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.927 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.929 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.931 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.934 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.935 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.937 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:51.939 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:51.940 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 40ms reading results.
2025-12-03 00:49:51.941 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.942 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:51.943 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:51.945 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:51.946 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:51.946 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:51.947 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:51.949 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:51.952 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 131.1681ms
2025-12-03 00:49:51.953 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:51.954 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:51.955 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:51.956 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:51.957 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 154.1486ms
2025-12-03 00:49:51.998 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:52.007 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.009 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.010 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.011 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:52.012 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:52.013 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:52.013 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:52.014 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.015 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:52.016 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:52.018 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:52.019 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:52.020 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:52.021 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:52.022 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.024 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.025 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.026 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:52.027 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.028 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.029 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.030 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.031 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.032 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:52.033 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.034 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.035 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.036 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.038 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:52.039 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:52.041 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:52.042 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.043 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.044 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.044 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:52.045 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.046 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.050 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.053 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.054 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.056 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.057 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.059 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.061 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.063 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.065 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.067 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.069 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.072 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.072 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:49:52.074 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.074 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:52.076 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.077 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.078 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.079 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:52.080 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.081 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.085 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.089 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.090 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:52.091 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.092 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:52.094 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.095 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.096 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.097 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.098 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.099 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.104 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.108 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.111 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.114 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.115 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.116 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.118 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.119 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.121 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.122 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.124 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.125 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.128 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.129 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.129 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.130 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.132 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.134 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.136 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.138 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.140 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.142 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.143 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.144 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.145 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.149 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.150 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 42ms reading results.
2025-12-03 00:49:52.153 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.154 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.155 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:52.157 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:52.157 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:52.158 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:52.159 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:52.160 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:52.161 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 138.6142ms
2025-12-03 00:49:52.162 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.164 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:52.165 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.166 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:52.168 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 169.8808ms
2025-12-03 00:49:52.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:52.204 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.206 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.210 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.212 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:52.213 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:52.215 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:52.216 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:52.218 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.220 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:52.222 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:52.224 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:52.227 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:52.229 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:52.231 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:52.232 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.234 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.236 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.238 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:52.241 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.248 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.249 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.251 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.253 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.254 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:52.256 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.258 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.260 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.262 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.264 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:52.267 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:52.268 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:52.270 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.271 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.273 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.274 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.276 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.278 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.302 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.308 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.310 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.311 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.313 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.316 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.320 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.322 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.325 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.328 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.331 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.332 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 00:49:52.334 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.335 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.337 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.339 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.340 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.341 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.343 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.344 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.352 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.354 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.355 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:52.356 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.357 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.359 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.361 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.363 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.364 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.365 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.366 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.370 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.372 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.374 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.376 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.378 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.380 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.385 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.387 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.388 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.389 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.391 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.392 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.394 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.395 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.397 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.399 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.401 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.402 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.404 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.405 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.409 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.411 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.414 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.416 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.419 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.420 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.422 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.425 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.426 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 54ms reading results.
2025-12-03 00:49:52.428 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.429 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.431 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:52.434 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:52.434 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:52.435 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:52.436 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:52.437 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:52.439 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 206.8839ms
2025-12-03 00:49:52.440 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:52.441 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.443 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.444 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:52.446 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.447 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.449 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.450 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:49:52.451 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:52.452 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 251.2659ms
2025-12-03 00:49:52.453 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:52.457 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:52.457 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:52.458 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.459 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:52.461 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:52.462 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:52.463 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:52.465 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:52.467 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:52.469 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.470 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.472 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.473 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:52.475 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.476 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.478 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.479 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.480 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.481 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:52.482 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.484 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.486 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.487 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.488 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:52.491 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:52.492 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:52.493 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.494 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.495 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.496 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.498 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.499 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.505 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.509 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.511 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.515 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.518 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.520 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.522 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.525 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.528 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.530 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.532 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 24ms reading results.
2025-12-03 00:49:52.534 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.535 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.536 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.538 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.539 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.540 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:52.541 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.542 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.548 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.551 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.552 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:52.554 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.555 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.557 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.558 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.559 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.560 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:52.561 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.562 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.567 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.571 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.574 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.576 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.578 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.580 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.581 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.584 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.586 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.588 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.589 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.592 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.593 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.596 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.598 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.600 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.603 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.605 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.606 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.608 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.610 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.611 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.614 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.616 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.618 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 47ms reading results.
2025-12-03 00:49:52.620 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.621 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:52.622 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:52.624 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:52.624 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:52.626 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:52.627 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:52.628 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:52.630 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 160.6279ms
2025-12-03 00:49:52.631 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:52.631 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.634 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.636 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:52.637 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.639 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.641 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.643 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 00:49:52.646 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 205.3887ms
2025-12-03 00:49:52.644 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:52.651 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:52.652 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:52.653 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:52.654 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.655 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:52.658 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:52.659 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:52.661 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:52.663 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:52.664 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:52.666 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.668 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.671 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.673 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:52.675 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.676 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.677 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.679 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.680 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.682 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:52.684 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.686 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.688 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.689 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.691 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:52.693 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:52.694 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:52.695 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.697 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.698 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.701 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.704 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-03 00:49:52.706 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.713 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.720 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.723 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.730 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.734 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.736 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.737 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.740 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.743 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.746 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.748 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 30ms reading results.
2025-12-03 00:49:52.752 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.754 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.757 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.759 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.762 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.765 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:49:52.770 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-03 00:49:52.773 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.782 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:52.786 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.789 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:49:52.793 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.794 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.798 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.799 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.802 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.803 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.805 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.806 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.811 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:52.815 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.821 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.827 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.829 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.834 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.836 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.839 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.840 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.844 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.845 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.848 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.849 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.851 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.853 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.854 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.855 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.857 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.860 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.863 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.864 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.866 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.867 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.870 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.871 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.872 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.874 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.878 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:52.879 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 64ms reading results.
2025-12-03 00:49:52.881 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.882 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:52.885 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:52.887 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:52.889 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:52.890 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:52.890 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:52.892 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:52.893 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 226.8407ms
2025-12-03 00:49:52.894 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:52.895 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.898 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.899 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:52.900 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:52.902 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.905 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.906 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-03 00:49:52.907 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:52.909 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 278.0196ms
2025-12-03 00:49:52.910 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:52.915 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:52.916 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:52.918 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:52.920 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:52.922 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:52.923 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:52.925 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:52.927 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:52.929 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:52.931 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.933 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:52.935 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.937 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:52.939 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.940 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.942 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:52.943 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:52.945 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.946 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:52.948 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.950 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.952 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:52.953 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:52.955 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:52.957 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:52.958 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:49:52.960 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.962 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:52.963 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:52.964 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:52.966 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:52.969 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.975 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:52.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.980 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.984 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.985 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.990 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.991 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.992 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.997 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:52.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.000 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.004 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.006 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.008 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 29ms reading results.
2025-12-03 00:49:53.009 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.012 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:49:53.014 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.015 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.017 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.019 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:53.020 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:53.021 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:53.029 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:53.031 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.032 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:49:53.034 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.035 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.037 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.038 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.040 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.040 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:53.042 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:53.044 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:53.047 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:53.050 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.052 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.053 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.055 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.056 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.057 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.059 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.060 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.061 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.064 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.065 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.068 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.069 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.072 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.074 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.076 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.078 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.079 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.080 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.081 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.083 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.085 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.086 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.089 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.090 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.091 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.092 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.095 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.098 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.099 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 49ms reading results.
2025-12-03 00:49:53.101 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.102 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.103 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:53.106 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:53.106 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:53.107 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:53.108 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:53.109 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:53.111 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 179.317ms
2025-12-03 00:49:53.112 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:53.113 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.115 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:53.116 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:53.118 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:53.119 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.121 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.122 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:49:53.123 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:53.124 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 230.0472ms
2025-12-03 00:49:53.125 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:53.129 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:53.129 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:53.130 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.131 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:53.133 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:53.135 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:53.136 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:53.138 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:53.139 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:53.140 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:53.142 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:53.143 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:53.144 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:53.146 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:53.148 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:53.149 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:53.150 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:53.152 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:53.153 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:53.154 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:53.155 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:53.156 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:53.158 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:53.159 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:53.161 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:53.162 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:53.163 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.164 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.165 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.166 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:53.169 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:49:53.170 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:53.174 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:53.178 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.179 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.182 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.190 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.193 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.196 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.198 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.199 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.203 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.205 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.207 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 29ms reading results.
2025-12-03 00:49:53.208 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.209 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.212 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.213 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.214 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.216 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:53.218 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:49:53.220 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:53.226 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:53.229 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.231 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:49:53.233 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.234 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.236 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.238 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.239 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.241 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:49:53.242 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:53.243 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:53.247 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:53.250 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.251 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.252 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.255 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.256 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.257 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.258 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.260 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.262 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.263 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.264 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.265 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.268 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.269 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.270 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.271 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.272 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.274 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.275 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.276 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.279 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.280 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.281 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.285 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.288 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.291 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.293 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.295 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.297 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.299 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.300 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 50ms reading results.
2025-12-03 00:49:53.302 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.303 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.305 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:53.307 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:53.308 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:53.309 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:53.310 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:53.311 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:53.312 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 172.021ms
2025-12-03 00:49:53.314 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.315 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:53.316 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.319 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:49:53.321 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 208.5312ms
2025-12-03 00:49:53.499 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:49:53.507 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:53.510 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:49:53.515 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.519 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:49:53.521 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:49:53.526 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:49:53.528 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:49:53.532 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.534 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:49:53.536 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:49:53.541 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:49:53.543 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:49:53.544 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:49:53.545 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:49:53.547 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:53.548 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:49:53.550 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:53.552 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:49:53.555 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:53.556 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:53.557 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:49:53.558 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:49:53.559 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:53.560 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:49:53.562 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:53.563 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:53.564 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:49:53.566 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:49:53.569 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:49:53.571 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:49:53.572 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:49:53.573 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.574 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.575 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.576 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:53.577 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:53.579 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:53.583 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:49:53.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.588 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.590 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.595 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.598 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.602 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.606 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.608 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.611 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.612 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 25ms reading results.
2025-12-03 00:49:53.614 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.615 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.617 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.618 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.619 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.620 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:53.622 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:53.623 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:53.628 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:49:53.632 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.634 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:49:53.636 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.637 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:49:53.639 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.640 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.642 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:49:53.643 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:49:53.644 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:49:53.646 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:53.649 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:49:53.652 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.655 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.657 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.658 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.661 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.662 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.664 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.665 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.666 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.668 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.669 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.671 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.672 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.674 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.675 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.677 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.680 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.682 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.684 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.686 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.687 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.689 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:49:53.691 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:49:53.693 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 40ms reading results.
2025-12-03 00:49:53.694 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.695 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:49:53.696 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:49:53.698 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:49:53.698 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:49:53.699 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:49:53.699 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:49:53.701 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:49:53.702 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 154.7314ms
2025-12-03 00:49:53.703 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:49:53.704 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:49:53.705 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:49:53.706 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:49:53.707 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 207.9386ms
2025-12-03 00:50:01.626 +02:00 [DBG] Connection id "0HNHHU372FV8R" received FIN.
2025-12-03 00:50:01.627 +02:00 [DBG] Connection id "0HNHHU372FV8R" is closed. The last processed stream ID was 43.
2025-12-03 00:50:01.627 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8R completed.
2025-12-03 00:50:01.629 +02:00 [DBG] Connection id "0HNHHU372FV8R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:50:01.641 +02:00 [DBG] Connection id "0HNHHU372FV8R" stopped.
2025-12-03 00:50:44.389 +02:00 [DBG] Connection id "0HNHHU372FV8S" accepted.
2025-12-03 00:50:44.392 +02:00 [DBG] Connection id "0HNHHU372FV8S" started.
2025-12-03 00:50:44.407 +02:00 [DBG] Connection 0HNHHU372FV8S established using the following protocol: "Tls12"
2025-12-03 00:50:44.413 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 00:50:44.420 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:50:44.422 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:50:44.424 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:44.425 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:44.428 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:44.431 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:50:44.436 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 22.6893ms
2025-12-03 00:50:44.439 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-12-03 00:50:44.445 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:50:44.446 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 00:50:44.449 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:50:44.451 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:44.452 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:44.454 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:44.455 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:44.457 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:50:44.458 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 00:50:44.460 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:44.461 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:44.463 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:44.466 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:44.469 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:44.471 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:50:44.473 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:50:44.475 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:50:44.477 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 00:50:44.480 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:50:44.485 +02:00 [DBG] Connection id "0HNHHU372FV8S", Request id "0HNHHU372FV8S:00000003": started reading request body.
2025-12-03 00:50:44.486 +02:00 [DBG] Connection id "0HNHHU372FV8S", Request id "0HNHHU372FV8S:00000003": done reading request body.
2025-12-03 00:50:44.492 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 00:50:44.494 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:50:44.495 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:50:44.499 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:50:44.505 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:50:44.506 +02:00 [INF] Login called at "2025-12-03T00:50:44.5067845+02:00"
2025-12-03 00:50:44.508 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-12-03 00:50:44.511 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:44.517 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:44.519 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:50:44.521 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.523 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.524 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:44.525 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:44.528 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:50:44.529 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:50:44.543 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:50:44.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:44.553 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:44.557 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 6ms reading results.
2025-12-03 00:50:44.561 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.565 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:50:44.745 +02:00 [DBG] Creating JWT token for user 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 00:50:44.751 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.752 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.754 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:44.755 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:44.756 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:50:44.758 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:50:44.765 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:50:44.768 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:44.769 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:50:44.771 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.772 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:44.778 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.779 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.780 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:44.782 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:44.784 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:50:44.785 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:50:44.800 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:50:44.805 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:44.808 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:50:44.811 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.813 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:50:44.820 +02:00 [DBG] JWT token created for user 50f20790-c7c3-4baa-bee5-da27ac4985c3, expires at "2025-12-02T23:50:44.0000000Z"
2025-12-03 00:50:44.822 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.824 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.825 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:44.827 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:44.829 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:50:44.831 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:50:44.840 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:50:44.843 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:44.844 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:50:44.847 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.851 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 00:50:44.855 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.857 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.859 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:44.860 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:44.862 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:50:44.864 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:50:44.879 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:50:44.885 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:44.888 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:50:44.891 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.892 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:44.898 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:44.902 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:50:44.905 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:50:44.909 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:50:44.911 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:50:44.913 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:50:44.925 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.927 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:44.928 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:44.929 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:44.932 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:50:44.934 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:50:45.030 +02:00 [INF] Executed DbCommand (96ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:50:45.038 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:45.041 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 00:50:45.043 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.045 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:45.050 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.053 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:50:45.061 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-12-03 00:50:45.064 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:45.069 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:45.071 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:45.073 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:45.075 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:45.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 00:50:45.081 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 609.6783ms
2025-12-03 00:50:45.083 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:50:45.085 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:45.087 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.090 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 00:50:45.094 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 655.5053ms
2025-12-03 00:50:45.180 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:50:45.186 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:50:45.190 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:50:45.195 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:50:45.355 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:50:45.357 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:50:45.366 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:50:45.367 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:50:45.371 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:50:45.374 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:50:45.379 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:50:45.382 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:45.385 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:50:45.389 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:50:45.390 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:45.392 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:45.395 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:45.396 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:45.398 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:45.399 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:45.400 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:45.402 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:45.404 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:45.405 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:50:45.406 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:45.408 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:45.410 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:45.412 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:50:45.413 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:50:45.416 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:45.418 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:50:45.420 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:50:45.422 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:45.426 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:45.429 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:45.431 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:45.434 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:45.436 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:45.439 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:45.444 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:45.448 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:45.450 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:45.454 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:45.458 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:45.461 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:45.464 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:45.466 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:45.469 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:45.472 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:50:45.476 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:50:45.479 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:45.481 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:50:45.484 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:50:45.487 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:45.490 +02:00 [INF] Get All Branch called at "2025-12-03T00:50:45.4900406+02:00"
2025-12-03 00:50:45.491 +02:00 [INF] get all doctor in system called at "2025-12-03T00:50:45.4919505+02:00"
2025-12-03 00:50:45.493 +02:00 [DBG] Created DbConnection. (5ms).
2025-12-03 00:50:45.494 +02:00 [INF] Fetching all branches
2025-12-03 00:50:45.495 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:50:45.497 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.499 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:45.500 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:45.501 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.504 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:45.508 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:45.509 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:45.510 +02:00 [DBG] Created DbConnection. (5ms).
2025-12-03 00:50:45.511 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 00:50:45.514 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:50:45.516 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.518 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.520 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-12-03 00:50:45.522 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.524 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.525 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:50:45.528 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:45.530 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:45.536 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-12-03 00:50:45.538 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-12-03 00:50:45.540 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-12-03 00:50:45.542 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-12-03 00:50:45.544 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:50:45.546 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:50:45.554 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:50:45.557 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:45.560 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 00:50:45.562 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.564 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:45.569 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:45.573 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:50:45.573 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:45.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.580 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:45.582 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.584 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:45.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.587 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:45.590 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.592 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:50:45.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.597 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 125.4943ms
2025-12-03 00:50:45.600 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.602 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:50:45.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.606 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:45.609 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.610 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:50:45.611 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.621 +02:00 [DBG] Disposed connection to database '' on server '' (9ms).
2025-12-03 00:50:45.623 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 434.6248ms
2025-12-03 00:50:45.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.642 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.644 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.646 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.655 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.659 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.661 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.666 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.668 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.670 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.673 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.681 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.683 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.688 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.690 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.696 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.698 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.700 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.710 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.712 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.714 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.725 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.735 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.736 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:45.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.741 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 122ms reading results.
2025-12-03 00:50:45.743 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.746 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.751 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 00:50:45.753 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.756 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:45.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.762 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:45.765 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.766 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:45.768 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.770 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:45.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.773 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:45.775 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.777 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:50:45.780 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:45.783 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 306.7476ms
2025-12-03 00:50:45.784 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:45.786 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:50:45.788 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 210ms reading results.
2025-12-03 00:50:45.790 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:45.792 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.794 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.796 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 00:50:45.799 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-03 00:50:45.801 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:45.803 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 617.5784ms
2025-12-03 00:50:45.807 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:45.814 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:45.815 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:45.817 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:45.819 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:45.821 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 359.6978ms
2025-12-03 00:50:45.823 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:50:45.825 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:45.828 +02:00 [DBG] Connection id "0HNHHU372FV8S" received FIN.
2025-12-03 00:50:45.829 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:45.830 +02:00 [DBG] Connection id "0HNHHU372FV8S" is closed. The last processed stream ID was 9.
2025-12-03 00:50:45.833 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-03 00:50:45.836 +02:00 [DBG] Connection id "0HNHHU372FV8S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:50:45.839 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 658.6747ms
2025-12-03 00:50:45.846 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8S completed.
2025-12-03 00:50:45.848 +02:00 [DBG] Connection id "0HNHHU372FV8S" stopped.
2025-12-03 00:50:48.264 +02:00 [DBG] Connection id "0HNHHU372FV8T" accepted.
2025-12-03 00:50:48.267 +02:00 [DBG] Connection id "0HNHHU372FV8T" started.
2025-12-03 00:50:48.270 +02:00 [DBG] Connection 0HNHHU372FV8T established using the following protocol: "Tls12"
2025-12-03 00:50:48.273 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:48.275 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:48.276 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:48.277 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:48.278 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:48.278 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:48.279 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:48.279 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:48.280 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:48.281 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:48.283 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:48.284 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:48.285 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:48.286 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:48.288 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:48.289 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:48.290 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:48.291 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:48.292 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:48.293 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:48.294 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:48.294 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:48.295 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:48.297 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:48.300 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:48.300 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:48.301 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.302 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.302 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:48.303 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:48.304 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:48.305 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:48.308 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:48.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.311 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.313 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.318 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.320 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.321 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.323 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.325 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.326 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:48.329 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 18ms reading results.
2025-12-03 00:50:48.330 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.331 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:48.332 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.334 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.335 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:48.335 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:48.336 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:48.338 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:48.340 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:48.341 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.343 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.345 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.346 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.348 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.349 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.351 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.351 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.352 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.353 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.354 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.355 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.356 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.357 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.359 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.360 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.362 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.363 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.365 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.367 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.369 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.370 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.371 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:48.374 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:48.374 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 00:50:48.375 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.376 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:48.378 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:48.379 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:48.380 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:48.380 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:48.381 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:48.382 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:48.383 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 93.6917ms
2025-12-03 00:50:48.384 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:48.385 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:48.386 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:48.387 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:50:48.388 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 114.8479ms
2025-12-03 00:50:50.749 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:50.756 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:50.757 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:50.758 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:50.758 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:50.759 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:50.759 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:50.760 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:50.760 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:50.761 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:50.762 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:50.763 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:50.764 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:50.765 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:50.767 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:50.768 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:50.769 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:50.769 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:50.770 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:50.771 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:50.772 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:50.774 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:50.775 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:50.776 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:50.777 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:50.778 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:50.778 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.779 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.780 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:50.780 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:50.781 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:50.782 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:50.785 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:50.787 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.788 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.789 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.790 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.791 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.793 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.794 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.795 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.796 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.796 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.798 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.799 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.800 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.802 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:50.803 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:50:50.804 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.804 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:50.806 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.806 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.807 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:50.808 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:50.809 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:50.809 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:50.811 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:50.813 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.814 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.815 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.817 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.818 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.819 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.820 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.822 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.822 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.825 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.826 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.828 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.828 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.830 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.831 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.833 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.835 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.837 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.838 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.840 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.841 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.842 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:50.844 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:50.845 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 32ms reading results.
2025-12-03 00:50:50.846 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.847 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:50.849 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:50.850 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:50.851 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:50.851 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:50.852 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:50.853 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:50.854 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 85.7294ms
2025-12-03 00:50:50.854 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:50.855 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:50.856 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:50.857 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:50:50.858 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 109.133ms
2025-12-03 00:50:51.324 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:51.329 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:51.331 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:51.334 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.335 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:51.335 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:51.336 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:51.337 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:51.337 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.338 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:51.339 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:51.340 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:51.341 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:51.342 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:51.343 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:51.344 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:51.346 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:51.348 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:51.349 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:51.350 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.351 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.351 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:51.352 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.353 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:51.355 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:51.355 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:51.356 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.357 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.358 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:51.359 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:51.359 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:51.360 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:51.363 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:51.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.367 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.369 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.372 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.374 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.376 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.379 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.382 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.384 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:51.385 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 18ms reading results.
2025-12-03 00:50:51.386 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.388 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:51.389 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.390 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:51.392 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:51.393 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:50:51.394 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:51.396 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:51.400 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.402 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.404 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.405 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.406 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.408 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.410 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.411 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.412 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.414 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.416 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.418 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.419 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.420 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.422 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.424 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.426 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.428 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.430 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.432 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.434 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.435 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.437 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:51.437 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 37ms reading results.
2025-12-03 00:50:51.439 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.440 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:51.441 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:51.442 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:51.443 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:51.443 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:51.444 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:51.445 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:51.446 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 101.2083ms
2025-12-03 00:50:51.447 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.448 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:51.449 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.450 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:50:51.451 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 127.7023ms
2025-12-03 00:50:51.549 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:51.555 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:51.557 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:51.558 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.559 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:51.560 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:51.561 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:51.562 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:51.562 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.564 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:51.565 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:51.567 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:51.568 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:51.569 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:51.570 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:51.571 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:51.572 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:51.573 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:51.574 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:51.575 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.576 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.578 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:51.579 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.581 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:51.583 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:51.583 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:51.584 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.585 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.586 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:51.587 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:51.588 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:51.589 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:51.591 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:51.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.595 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.599 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.605 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.606 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.608 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.611 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.613 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.616 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.618 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:51.619 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 25ms reading results.
2025-12-03 00:50:51.620 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.621 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:51.623 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.624 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.625 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:51.626 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:51.628 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:50:51.629 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:51.633 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:51.635 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.637 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.639 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.641 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.643 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.644 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.646 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.648 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.651 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.652 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.654 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.655 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.659 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.660 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.662 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.664 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.665 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.666 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.669 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.671 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.672 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.674 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.676 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:51.677 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 41ms reading results.
2025-12-03 00:50:51.678 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.679 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:51.680 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:51.682 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:51.683 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:51.683 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:51.684 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:51.685 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:51.686 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 114.7367ms
2025-12-03 00:50:51.687 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.688 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:51.689 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.690 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:50:51.691 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 142.5529ms
2025-12-03 00:50:51.756 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:51.762 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:51.763 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:51.766 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.767 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:51.767 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:51.768 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:51.768 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:51.769 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.770 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:51.771 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:51.772 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:51.773 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:51.775 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:51.776 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:51.777 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:51.778 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:51.779 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:51.780 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:51.783 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.784 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.784 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:51.785 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:51.787 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:51.788 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:51.789 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:51.789 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.790 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.791 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:51.792 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:51.793 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:51.794 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:51.798 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:51.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.802 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.803 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.804 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.808 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.809 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.810 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.812 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.815 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.818 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.820 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:51.821 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:50:51.822 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.823 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:51.824 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.825 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.826 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:51.828 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:51.829 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:50:51.830 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:51.833 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:51.834 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.835 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.836 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.838 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.839 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.841 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.842 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.845 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.846 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.849 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.850 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.851 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.852 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.853 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.855 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.856 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.858 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.860 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.862 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.863 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.864 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.866 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.867 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.868 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.870 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:51.872 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:51.873 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 00:50:51.875 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.877 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:51.878 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:51.880 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:51.880 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:51.881 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:51.882 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:51.883 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:51.884 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 107.2ms
2025-12-03 00:50:51.885 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:51.886 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:51.887 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:51.888 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:50:51.890 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 133.5059ms
2025-12-03 00:50:52.524 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:52.531 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:52.532 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:52.535 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:52.536 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:52.536 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:52.537 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:52.538 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:52.539 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:52.541 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:52.542 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:52.543 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:52.544 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:52.545 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:52.545 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:52.546 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:52.548 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:52.549 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:52.550 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:52.551 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:52.551 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:52.552 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:52.554 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:52.555 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:52.557 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:52.557 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:52.558 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.559 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.560 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:52.560 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:52.561 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:52.562 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:52.566 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:52.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.569 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.571 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.575 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.577 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.579 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.581 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.582 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.583 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.585 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:52.587 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 00:50:52.588 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.591 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 00:50:52.592 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.592 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.593 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:52.594 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:52.595 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:52.596 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:52.598 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:52.601 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.602 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.604 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.605 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.606 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.607 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.608 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.610 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.611 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.613 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.614 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.616 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.617 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.619 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.620 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.621 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.623 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.625 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.627 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.629 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.630 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.633 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.635 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:52.636 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 35ms reading results.
2025-12-03 00:50:52.637 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.638 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:52.639 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:52.640 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:52.641 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:52.642 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:52.642 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:52.643 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:52.644 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 97.564ms
2025-12-03 00:50:52.645 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:52.646 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:52.649 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.650 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:50:52.652 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 127.6657ms
2025-12-03 00:50:52.732 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:50:52.738 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:52.738 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:50:52.739 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:52.740 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:50:52.741 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:50:52.741 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:50:52.742 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:50:52.743 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:52.743 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:50:52.745 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:50:52.746 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:50:52.746 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:50:52.749 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:50:52.751 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:50:52.752 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:52.753 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:50:52.754 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:52.755 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:50:52.755 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:52.757 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:52.758 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:50:52.759 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:50:52.760 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:50:52.761 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:50:52.762 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:50:52.763 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.764 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.765 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:52.766 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:52.768 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:50:52.769 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:52.774 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:50:52.776 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.777 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.778 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.779 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.780 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.786 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.787 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.789 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.790 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.791 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.791 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.792 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.793 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.794 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.795 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.796 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:52.798 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 00:50:52.799 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.800 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:50:52.802 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.803 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.804 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:50:52.805 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:50:52.806 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:50:52.806 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:52.809 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:50:52.810 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.812 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.815 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.816 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.818 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.819 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.820 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.821 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.822 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.824 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.825 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.827 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.828 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.830 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.831 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.834 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.835 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.835 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.837 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.839 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.841 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.842 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.844 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.845 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:50:52.846 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:50:52.849 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 39ms reading results.
2025-12-03 00:50:52.852 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.853 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:50:52.855 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:50:52.857 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:50:52.857 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:50:52.858 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:50:52.858 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:50:52.859 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:50:52.860 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 108.4641ms
2025-12-03 00:50:52.861 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:50:52.862 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:50:52.864 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:50:52.866 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:50:52.867 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 135.1807ms
2025-12-03 00:50:55.837 +02:00 [DBG] Connection id "0HNHHU372FV8T" received FIN.
2025-12-03 00:50:55.838 +02:00 [DBG] Connection id "0HNHHU372FV8T" is closed. The last processed stream ID was 13.
2025-12-03 00:50:55.838 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8T completed.
2025-12-03 00:50:55.840 +02:00 [DBG] Connection id "0HNHHU372FV8T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:50:55.843 +02:00 [DBG] Connection id "0HNHHU372FV8T" stopped.
2025-12-03 00:53:22.050 +02:00 [DBG] Connection id "0HNHHU372FV8U" accepted.
2025-12-03 00:53:22.053 +02:00 [DBG] Connection id "0HNHHU372FV8U" started.
2025-12-03 00:53:22.072 +02:00 [DBG] Connection 0HNHHU372FV8U established using the following protocol: "Tls12"
2025-12-03 00:53:22.074 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 00:53:22.077 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:53:22.078 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 00:53:22.079 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:22.080 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:22.080 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:22.081 +02:00 [DBG] The request is a preflight request.
2025-12-03 00:53:22.081 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 7.1468ms
2025-12-03 00:53:22.084 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-12-03 00:53:22.085 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 00:53:22.086 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 00:53:22.087 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:53:22.087 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:22.088 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:22.088 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:22.089 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:53:22.090 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:53:22.090 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 00:53:22.092 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:53:22.093 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:53:22.094 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:53:22.096 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:53:22.097 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:53:22.098 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:53:22.099 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 00:53:22.100 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:53:22.100 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 00:53:22.101 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 00:53:22.102 +02:00 [DBG] Connection id "0HNHHU372FV8U", Request id "0HNHHU372FV8U:00000003": started reading request body.
2025-12-03 00:53:22.103 +02:00 [DBG] Connection id "0HNHHU372FV8U", Request id "0HNHHU372FV8U:00000003": done reading request body.
2025-12-03 00:53:22.103 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 00:53:22.104 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:53:22.105 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:53:22.105 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 00:53:22.106 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 00:53:22.107 +02:00 [INF] Login called at "2025-12-03T00:53:22.1073941+02:00"
2025-12-03 00:53:22.108 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-12-03 00:53:22.109 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:53:22.111 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:53:22.111 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:53:22.113 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.114 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.115 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.116 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:22.116 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.117 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:53:22.122 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 00:53:22.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.124 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.125 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:53:22.126 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.127 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.192 +02:00 [DBG] Creating JWT token for user 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 00:53:22.194 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.196 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.197 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.197 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:22.198 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.199 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:53:22.202 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 00:53:22.203 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.203 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:53:22.204 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.205 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.206 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.206 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.207 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.209 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:53:22.212 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 00:53:22.212 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:53:22.216 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:53:22.218 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.219 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:53:22.219 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.220 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.221 +02:00 [DBG] JWT token created for user 50f20790-c7c3-4baa-bee5-da27ac4985c3, expires at "2025-12-02T23:53:22.0000000Z"
2025-12-03 00:53:22.222 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.223 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.225 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.227 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 00:53:22.228 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:53:22.229 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:53:22.232 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 00:53:22.233 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.234 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:53:22.234 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.235 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.236 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.237 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.238 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.238 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:22.239 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.240 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:53:22.246 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 00:53:22.249 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.249 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:53:22.250 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.251 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.252 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.253 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:53:22.254 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:53:22.254 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 00:53:22.255 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 00:53:22.256 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 00:53:22.257 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.258 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.259 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.260 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:22.261 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.262 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:53:22.281 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 00:53:22.282 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.283 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:53:22.284 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.284 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.285 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.286 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 00:53:22.287 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-12-03 00:53:22.289 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:53:22.290 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:53:22.290 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:53:22.291 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:53:22.292 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:53:22.294 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 00:53:22.295 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 196.7573ms
2025-12-03 00:53:22.296 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 00:53:22.297 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:53:22.297 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.298 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:53:22.299 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 215.3059ms
2025-12-03 00:53:22.336 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 00:53:22.336 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 00:53:22.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 00:53:22.339 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 00:53:22.340 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 00:53:22.342 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:53:22.343 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 00:53:22.344 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 00:53:22.345 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 00:53:22.346 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:53:22.346 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 00:53:22.348 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:53:22.348 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:22.349 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:53:22.350 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:22.350 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:22.351 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:22.351 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:22.352 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:22.353 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:22.353 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:22.354 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:53:22.354 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:22.355 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:53:22.356 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:53:22.356 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:53:22.357 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:53:22.358 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 00:53:22.359 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:53:22.359 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:53:22.361 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:53:22.361 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 00:53:22.363 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:53:22.364 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:53:22.365 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:53:22.366 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:53:22.366 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:53:22.367 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:53:22.368 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:53:22.370 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:53:22.370 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:53:22.371 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:53:22.372 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:53:22.373 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:53:22.374 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:53:22.376 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:53:22.377 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:53:22.379 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:53:22.380 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 00:53:22.381 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:53:22.382 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:53:22.383 +02:00 [INF] Get All Branch called at "2025-12-03T00:53:22.3837027+02:00"
2025-12-03 00:53:22.384 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 00:53:22.385 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:53:22.386 +02:00 [INF] Fetching all branches
2025-12-03 00:53:22.386 +02:00 [INF] get all doctor in system called at "2025-12-03T00:53:22.3869787+02:00"
2025-12-03 00:53:22.388 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:53:22.388 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:53:22.389 +02:00 [INF] Fetching all doctors in the system
2025-12-03 00:53:22.389 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:53:22.390 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:53:22.391 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:53:22.392 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.393 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 00:53:22.395 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:53:22.396 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 00:53:22.396 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.395 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.397 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.398 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.398 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.399 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.399 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.400 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.401 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:22.401 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.403 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:53:22.403 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:22.405 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:53:22.404 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:53:22.402 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 00:53:22.405 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:53:22.408 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:53:22.409 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 00:53:22.413 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.414 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 00:53:22.415 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.415 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.416 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:53:22.418 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:53:22.418 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:53:22.418 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:53:22.419 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:53:22.420 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:53:22.420 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 44.6637ms
2025-12-03 00:53:22.421 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 00:53:22.422 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:53:22.423 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.424 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:53:22.425 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 89.1432ms
2025-12-03 00:53:22.427 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 00:53:22.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.430 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.431 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 00:53:22.431 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.433 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.434 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.434 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.435 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.437 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.438 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.440 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.441 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.442 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.444 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.444 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.447 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.447 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.448 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.449 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.450 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.451 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.454 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.454 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.455 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.459 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.460 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.462 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.463 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.464 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.464 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 34ms reading results.
2025-12-03 00:53:22.466 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.467 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.466 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.468 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:53:22.469 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.470 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:53:22.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.471 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:53:22.472 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.472 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:53:22.473 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.474 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:53:22.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.475 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:53:22.476 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.477 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 96.5763ms
2025-12-03 00:53:22.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.479 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 00:53:22.480 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.480 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:53:22.481 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.482 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.483 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.483 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 00:53:22.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.485 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 149.2013ms
2025-12-03 00:53:22.486 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.489 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.490 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.492 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:22.494 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:22.494 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 61ms reading results.
2025-12-03 00:53:22.495 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.496 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:22.497 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:53:22.498 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:53:22.498 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:53:22.499 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:53:22.499 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:53:22.500 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:53:22.501 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 122.2285ms
2025-12-03 00:53:22.502 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 00:53:22.502 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:53:22.503 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:22.504 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:53:22.505 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 168.272ms
2025-12-03 00:53:24.697 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:53:24.701 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:53:24.701 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:53:24.702 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:53:24.703 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:24.703 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:24.704 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:24.704 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:53:24.705 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:53:24.705 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:53:24.706 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:53:24.707 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:53:24.708 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:53:24.709 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:53:24.710 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:53:24.710 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:53:24.711 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:53:24.712 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:53:24.712 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:53:24.713 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:53:24.715 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:53:24.716 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:53:24.717 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:53:24.718 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:53:24.719 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:53:24.719 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:53:24.720 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.720 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.721 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:24.722 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:24.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:24.723 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:53:24.726 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:53:24.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.729 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.731 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.734 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.736 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.737 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.738 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.739 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.741 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.743 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:24.744 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 00:53:24.745 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.745 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:24.746 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.747 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.748 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:24.748 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:24.749 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:24.750 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:53:24.751 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:53:24.753 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.754 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.755 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.756 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.756 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.757 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.758 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.759 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.760 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.761 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.762 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.763 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.765 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.765 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.767 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.767 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.769 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.770 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.772 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.772 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.773 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.774 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.775 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.776 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.777 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.777 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.778 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:24.779 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:24.779 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 00:53:24.780 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.781 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:24.782 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:53:24.783 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:53:24.783 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:53:24.784 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:53:24.784 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:53:24.785 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:53:24.786 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 75.4279ms
2025-12-03 00:53:24.787 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:53:24.787 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:53:24.788 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:24.789 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:53:24.790 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 93.1082ms
2025-12-03 00:53:25.865 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 00:53:25.870 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:53:25.870 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 00:53:25.871 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:53:25.872 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:53:25.872 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:53:25.873 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:53:25.873 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:53:25.874 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:53:25.875 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:53:25.878 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:53:25.881 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:53:25.882 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:53:25.882 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:53:25.883 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:53:25.884 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:53:25.885 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:53:25.885 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:53:25.886 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:53:25.887 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:53:25.888 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:53:25.888 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:53:25.889 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:53:25.890 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:53:25.892 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:53:25.893 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:53:25.894 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.894 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.896 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:25.896 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:25.897 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:25.898 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:53:25.900 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:53:25.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.902 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.903 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.904 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.905 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.906 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.907 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.908 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.910 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.912 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.913 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.914 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:25.915 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 13ms reading results.
2025-12-03 00:53:25.916 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.916 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:25.918 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.919 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.919 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:53:25.920 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:53:25.921 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:53:25.921 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:53:25.923 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:53:25.924 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.926 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.927 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.928 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.929 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.930 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.931 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.932 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.933 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.934 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.935 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.936 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.938 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.938 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.940 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.941 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.943 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.944 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.946 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.946 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.948 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:53:25.949 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:53:25.950 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 25ms reading results.
2025-12-03 00:53:25.950 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.951 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:53:25.952 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:53:25.953 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:53:25.954 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:53:25.954 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:53:25.954 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:53:25.955 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:53:25.956 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 71.7912ms
2025-12-03 00:53:25.957 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 00:53:25.958 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:53:25.959 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:53:25.960 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:53:25.961 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 95.6687ms
2025-12-03 00:54:06.098 +02:00 [DBG] Connection id "0HNHHU372FV8U" received FIN.
2025-12-03 00:54:06.099 +02:00 [DBG] Connection id "0HNHHU372FV8U" is closed. The last processed stream ID was 13.
2025-12-03 00:54:06.099 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8U completed.
2025-12-03 00:54:06.100 +02:00 [DBG] Connection id "0HNHHU372FV8U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:54:06.110 +02:00 [DBG] Connection id "0HNHHU372FV8U" stopped.
2025-12-03 00:54:29.523 +02:00 [DBG] Connection id "0HNHHU372FV8V" accepted.
2025-12-03 00:54:29.527 +02:00 [DBG] Connection id "0HNHHU372FV8V" started.
2025-12-03 00:54:29.532 +02:00 [DBG] Connection 0HNHHU372FV8V established using the following protocol: "Tls12"
2025-12-03 00:54:29.533 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:54:29.535 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:54:29.535 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:54:29.536 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:54:29.537 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:54:29.537 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:54:29.538 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:54:29.538 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:54:29.539 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:54:29.540 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:54:29.541 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:54:29.542 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:54:29.542 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:54:29.543 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:54:29.544 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:54:29.545 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:54:29.546 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:54:29.547 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:54:29.547 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:54:29.548 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:54:29.549 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:54:29.550 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:54:29.550 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:54:29.551 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:54:29.552 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:54:29.552 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:54:29.553 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:54:29.554 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:54:29.555 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:54:29.557 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:54:29.558 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:54:29.559 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:54:29.559 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.560 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.561 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:54:29.561 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:54:29.562 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:54:29.563 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:54:29.565 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:54:29.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.568 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.570 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.573 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.575 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.576 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.578 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.579 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.580 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:54:29.581 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:54:29.582 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.583 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:54:29.584 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.585 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.586 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:54:29.586 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:54:29.587 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:54:29.588 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:54:29.592 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:54:29.593 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:54:29.594 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:54:29.595 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.595 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:54:29.596 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.597 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.598 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:54:29.599 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:54:29.599 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:54:29.600 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:54:29.602 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:54:29.603 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.605 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.606 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.606 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.607 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.608 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.609 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.609 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.611 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.611 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.613 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.614 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.615 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.616 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.618 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.619 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.621 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.622 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.623 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.625 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.627 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.627 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.629 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:29.630 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:54:29.631 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 27ms reading results.
2025-12-03 00:54:29.632 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.633 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 00:54:29.634 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:54:29.635 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:54:29.636 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:54:29.636 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:54:29.636 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:54:29.637 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:54:29.638 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 92.8639ms
2025-12-03 00:54:29.639 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:54:29.639 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:54:29.640 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:29.641 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:54:29.642 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 109.4476ms
2025-12-03 00:54:30.790 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:54:30.797 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:54:30.800 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:54:30.801 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:54:30.802 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:54:30.802 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 00:54:30.803 +02:00 [INF] CORS policy execution successful.
2025-12-03 00:54:30.803 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:54:30.804 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:54:30.804 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:54:30.807 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:54:30.808 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:54:30.809 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:54:30.810 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:54:30.810 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:54:30.811 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:54:30.812 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:54:30.813 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:54:30.813 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:54:30.815 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:54:30.817 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:54:30.818 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:54:30.818 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:54:30.819 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:54:30.820 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:54:30.821 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:54:30.821 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:54:30.822 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:54:30.823 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:54:30.824 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:54:30.825 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:54:30.826 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:54:30.826 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.827 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.828 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:54:30.828 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:54:30.829 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:54:30.830 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:54:30.833 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:54:30.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.835 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.837 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.841 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.842 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.844 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.845 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.847 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.848 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:54:30.849 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:54:30.850 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.850 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:54:30.851 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.852 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.853 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:54:30.853 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:54:30.854 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:54:30.855 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:54:30.858 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:54:30.860 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:54:30.861 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:54:30.862 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.862 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:54:30.863 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.864 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.865 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:54:30.865 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:54:30.866 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:54:30.866 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:54:30.868 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:54:30.870 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.870 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.871 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.872 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.873 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.874 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.875 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.876 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.877 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.877 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.878 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.879 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.880 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.881 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.882 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.883 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.884 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.885 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.886 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.888 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.890 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.891 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.892 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.894 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.894 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.895 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.896 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:54:30.897 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:54:30.898 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 28ms reading results.
2025-12-03 00:54:30.899 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.899 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:54:30.901 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:54:30.902 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:54:30.903 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:54:30.903 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:54:30.904 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:54:30.905 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:54:30.907 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 95.7304ms
2025-12-03 00:54:30.908 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:54:30.909 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:54:30.909 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:54:30.910 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:54:30.911 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 120.8404ms
2025-12-03 00:54:31.127 +02:00 [DBG] Connection id "0HNHHU372FV8V" received FIN.
2025-12-03 00:54:31.131 +02:00 [DBG] Connection id "0HNHHU372FV8V" is closed. The last processed stream ID was 3.
2025-12-03 00:54:31.131 +02:00 [DBG] The connection queue processing loop for 0HNHHU372FV8V completed.
2025-12-03 00:54:31.134 +02:00 [DBG] Connection id "0HNHHU372FV8V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:54:31.142 +02:00 [DBG] Connection id "0HNHHU372FV8V" stopped.
2025-12-03 00:57:49.647 +02:00 [DBG] Connection id "0HNHHU372FV90" received FIN.
2025-12-03 00:57:49.672 +02:00 [DBG] Connection id "0HNHHU372FV90" accepted.
2025-12-03 00:57:49.675 +02:00 [DBG] Connection id "0HNHHU372FV90" started.
2025-12-03 00:57:49.676 +02:00 [DBG] Connection id "0HNHHU372FV91" accepted.
2025-12-03 00:57:49.680 +02:00 [DBG] Connection id "0HNHHU372FV91" started.
2025-12-03 00:57:49.681 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 00:57:49.692 +02:00 [DBG] Connection 0HNHHU372FV91 established using the following protocol: "Tls12"
2025-12-03 00:57:49.694 +02:00 [DBG] Connection id "0HNHHU372FV90" stopped.
2025-12-03 00:57:49.697 +02:00 [DBG] Connection id "0HNHHU372FV90" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 00:57:49.699 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 00:57:49.703 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:57:49.706 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 00:57:49.707 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:57:49.709 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 00:57:49.710 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 00:57:49.711 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:57:49.712 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 00:57:49.713 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 00:57:49.714 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 00:57:49.716 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 00:57:49.717 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 00:57:49.717 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 00:57:49.718 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:57:49.719 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 00:57:49.720 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:57:49.720 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 00:57:49.721 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:57:49.722 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:57:49.723 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 00:57:49.724 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 00:57:49.725 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:57:49.725 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 00:57:49.726 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:57:49.727 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:57:49.727 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 00:57:49.728 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 00:57:49.729 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 00:57:49.731 +02:00 [DBG] Creating DbConnection.
2025-12-03 00:57:49.731 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 00:57:49.732 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.737 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.738 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:57:49.738 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:57:49.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:57:49.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:57:49.743 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 00:57:49.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.745 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.747 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.751 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.753 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.753 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.754 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.755 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.755 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.757 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.759 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:57:49.759 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-12-03 00:57:49.760 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.761 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:57:49.762 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.763 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.764 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:57:49.764 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:57:49.765 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:57:49.766 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:57:49.769 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 00:57:49.770 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:57:49.771 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 00:57:49.771 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.772 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:57:49.773 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.774 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.775 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 00:57:49.776 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 00:57:49.776 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 00:57:49.777 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:57:49.779 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 00:57:49.781 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.783 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.784 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.785 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.786 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.786 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.787 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.788 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.789 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.789 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.790 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.791 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.791 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.793 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.794 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.794 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.795 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.796 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.798 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.799 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.800 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.801 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.803 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.803 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.804 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.805 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.806 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 00:57:49.808 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 00:57:49.809 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 27ms reading results.
2025-12-03 00:57:49.809 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.810 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 00:57:49.811 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 00:57:49.812 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 00:57:49.813 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 00:57:49.814 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 00:57:49.814 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 00:57:49.816 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Decimal'.
2025-12-03 00:57:49.817 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 99.1114ms
2025-12-03 00:57:49.818 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 00:57:49.819 +02:00 [DBG] Connection id "0HNHHU372FV91" completed keep alive response.
2025-12-03 00:57:49.819 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 00:57:49.820 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 00:57:49.821 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 00:57:49.822 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 122.6988ms
2025-12-03 01:00:01.815 +02:00 [DBG] Connection id "0HNHHU372FV91" disconnecting.
2025-12-03 01:00:01.820 +02:00 [DBG] Connection id "0HNHHU372FV91" stopped.
2025-12-03 01:00:01.821 +02:00 [DBG] Connection id "0HNHHU372FV91" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:01:22.625 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-03 01:01:22.775 +02:00 [DBG] Hosting starting
2025-12-03 01:01:22.797 +02:00 [INF] User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 01:01:22.810 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-171dc15b-9d2d-45d5-9fcb-18badfdae667.xml'.
2025-12-03 01:01:22.824 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-328565d1-c612-402c-9473-6f50dc1bcb2f.xml'.
2025-12-03 01:01:22.826 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3853d745-e818-4ecf-b264-c04445fb406d.xml'.
2025-12-03 01:01:22.828 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3a7083ac-1a8b-48f5-9e81-d3a63254e8eb.xml'.
2025-12-03 01:01:22.830 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-77f0ec14-5c63-448f-b8e4-a2bd27bd6ead.xml'.
2025-12-03 01:01:22.832 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc.xml'.
2025-12-03 01:01:22.833 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-a21099c1-ceb7-4545-b251-882dccb0fb5b.xml'.
2025-12-03 01:01:22.835 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-e626ca21-42a8-439d-97f1-774b663fbc67.xml'.
2025-12-03 01:01:22.844 +02:00 [DBG] Found key {171dc15b-9d2d-45d5-9fcb-18badfdae667}.
2025-12-03 01:01:22.851 +02:00 [DBG] Found key {328565d1-c612-402c-9473-6f50dc1bcb2f}.
2025-12-03 01:01:22.853 +02:00 [DBG] Found key {3853d745-e818-4ecf-b264-c04445fb406d}.
2025-12-03 01:01:22.855 +02:00 [DBG] Found key {3a7083ac-1a8b-48f5-9e81-d3a63254e8eb}.
2025-12-03 01:01:22.856 +02:00 [DBG] Found key {77f0ec14-5c63-448f-b8e4-a2bd27bd6ead}.
2025-12-03 01:01:22.858 +02:00 [DBG] Found key {9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc}.
2025-12-03 01:01:22.859 +02:00 [DBG] Found key {a21099c1-ceb7-4545-b251-882dccb0fb5b}.
2025-12-03 01:01:22.860 +02:00 [DBG] Found key {e626ca21-42a8-439d-97f1-774b663fbc67}.
2025-12-03 01:01:22.868 +02:00 [DBG] Considering key {e626ca21-42a8-439d-97f1-774b663fbc67} with expiration date 2025-12-29 20:28:34Z as default key.
2025-12-03 01:01:22.873 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 01:01:22.879 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-03 01:01:22.881 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 01:01:22.889 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-03 01:01:22.892 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-03 01:01:22.894 +02:00 [DBG] Using key {e626ca21-42a8-439d-97f1-774b663fbc67} as the default key.
2025-12-03 01:01:22.896 +02:00 [DBG] Key ring with default key {e626ca21-42a8-439d-97f1-774b663fbc67} was loaded during application startup.
2025-12-03 01:01:23.045 +02:00 [INF] Now listening on: https://localhost:7217
2025-12-03 01:01:23.046 +02:00 [INF] Now listening on: http://localhost:5163
2025-12-03 01:01:23.047 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-12-03 01:01:23.049 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-03 01:01:23.050 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-03 01:01:23.052 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-03 01:01:23.175 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 01:01:23.177 +02:00 [INF] Hosting environment: Development
2025-12-03 01:01:23.179 +02:00 [INF] Content root path: D:\Work\HospitalWebSite\Hospital\Hospital
2025-12-03 01:01:23.181 +02:00 [DBG] Hosting started
2025-12-03 01:01:23.187 +02:00 [DBG] Connection id "0HNHHUQRCSBOB" accepted.
2025-12-03 01:01:23.191 +02:00 [DBG] Connection id "0HNHHUQRCSBOB" started.
2025-12-03 01:01:23.192 +02:00 [DBG] Connection id "0HNHHUQRCSBOC" accepted.
2025-12-03 01:01:23.195 +02:00 [DBG] Connection id "0HNHHUQRCSBOC" started.
2025-12-03 01:01:23.222 +02:00 [DBG] Connection id "0HNHHUQRCSBOC" received FIN.
2025-12-03 01:01:23.222 +02:00 [DBG] Connection id "0HNHHUQRCSBOB" received FIN.
2025-12-03 01:01:23.237 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 01:01:23.237 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 01:01:23.281 +02:00 [DBG] Connection id "0HNHHUQRCSBOB" stopped.
2025-12-03 01:01:23.283 +02:00 [DBG] Connection id "0HNHHUQRCSBOC" stopped.
2025-12-03 01:01:23.289 +02:00 [DBG] Connection id "0HNHHUQRCSBOB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:01:23.289 +02:00 [DBG] Connection id "0HNHHUQRCSBOC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:01:23.379 +02:00 [DBG] Connection id "0HNHHUQRCSBOD" accepted.
2025-12-03 01:01:23.403 +02:00 [DBG] Connection id "0HNHHUQRCSBOD" started.
2025-12-03 01:01:23.491 +02:00 [DBG] Connection 0HNHHUQRCSBOD established using the following protocol: "Tls12"
2025-12-03 01:01:23.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-12-03 01:01:23.716 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-03 01:01:23.766 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-03 01:01:23.769 +02:00 [DBG] Request did not match any endpoints
2025-12-03 01:01:23.859 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-03 01:01:23.863 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-03 01:01:23.892 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-03 01:01:23.895 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-03 01:01:23.910 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 326.3747ms
2025-12-03 01:01:23.914 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-12-03 01:01:23.940 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 26.6685ms
2025-12-03 01:01:24.776 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-12-03 01:01:24.856 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.8879ms
2025-12-03 01:01:26.830 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-12-03 01:01:26.837 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-03 01:01:26.839 +02:00 [DBG] Request did not match any endpoints
2025-12-03 01:01:26.900 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1068ms
2025-12-03 01:01:42.790 +02:00 [DBG] Connection id "0HNHHUQRCSBOE" accepted.
2025-12-03 01:01:42.794 +02:00 [DBG] Connection id "0HNHHUQRCSBOE" started.
2025-12-03 01:01:42.802 +02:00 [DBG] Connection 0HNHHUQRCSBOE established using the following protocol: "Tls12"
2025-12-03 01:01:42.807 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:01:42.814 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:42.819 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:42.822 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:42.827 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:01:42.828 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:01:42.829 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:01:42.847 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:01:42.851 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:42.880 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:01:42.887 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:01:42.889 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:01:42.891 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:01:42.892 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:01:42.893 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:01:42.895 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:43.062 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-03 01:01:43.105 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:43.121 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:43.123 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:01:43.126 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:43.127 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:43.127 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:43.129 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:43.130 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:43.131 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:01:43.132 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:43.133 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:43.133 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:43.135 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:43.828 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-12-03 01:01:43.833 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-12-03 01:01:43.838 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-12-03 01:01:43.842 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-12-03 01:01:43.843 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-12-03 01:01:43.999 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 01:01:44.007 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 01:01:44.257 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:01:44.336 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-12-03 01:01:44.405 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:01:44.410 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:01:44.413 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 01:01:44.416 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 01:01:44.657 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 01:01:44.684 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:01:44.726 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:01:44.762 +02:00 [DBG] Created DbConnection. (30ms).
2025-12-03 01:01:44.769 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.048 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.051 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:45.058 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 01:01:45.064 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-12-03 01:01:45.080 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:45.141 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:45.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.325 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.381 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.467 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.484 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.501 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.511 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.515 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.521 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:45.529 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 369ms reading results.
2025-12-03 01:01:45.534 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.538 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 01:01:45.541 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-12-03 01:01:45.546 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:01:45.548 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.549 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.550 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:45.551 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:45.552 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:45.554 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:45.558 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:45.560 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:45.561 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 01:01:45.561 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.562 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:45.567 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.DoctorId == __doctorId_0)
    .Include(a => a.Patient)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 01:01:45.569 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 01:01:45.571 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 01:01:45.573 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 01:01:45.586 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Branch.Address (string) MaxLength(250), 17], [Property: Branch.BranchName (string) Required MaxLength(150), 18], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: Branch.Description (string), 20], [Property: Branch.Email (string) MaxLength(200), 21], [Property: Branch.ImageURL (string) MaxLength(300), 22], [Property: Branch.Latitude (double?), 23], [Property: Branch.Longitude (double?), 24], [Property: Branch.Phone (string) MaxLength(25), 25], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Payment.Amount (decimal) Required, 28], [Property: Payment.AppointmentId (int) Required FK Index, 29], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Payment.Currency (string) Required MaxLength(3), 31], [Property: Payment.GatewayResponse (string), 32], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 33], [Property: Payment.PaymobOrderId (long?), 34], [Property: Payment.PaymobTransactionId (long?), 35], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 36], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId
        WHERE a.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:01:45.592 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.593 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.594 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:45.594 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:45.595 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:45.596 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:45.599 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:45.610 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.638 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.656 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.661 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.666 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.670 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.672 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.673 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.674 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.675 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.677 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.678 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.680 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.681 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.687 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.702 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.705 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.707 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.709 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.710 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.711 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.715 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:45.716 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 114ms reading results.
2025-12-03 01:01:45.716 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.717 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:45.721 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:01:45.724 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:01:45.724 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:01:45.725 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:01:45.726 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:01:45.727 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:01:45.737 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:01:45.737 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 2840.9249ms
2025-12-03 01:01:45.740 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:45.741 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:45.741 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:45.743 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:01:45.743 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:45.745 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:01:45.746 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:01:45.747 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:01:45.747 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.749 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:01:45.749 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:01:45.750 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:45.752 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 2944.4986ms
2025-12-03 01:01:45.753 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:01:45.757 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:01:45.758 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:01:45.759 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:01:45.760 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:01:45.761 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:01:45.762 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:45.763 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:45.764 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:45.765 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:01:45.766 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:45.767 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:45.767 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:45.768 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:45.769 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:45.770 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:01:45.771 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:45.772 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:45.772 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:45.774 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:45.835 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:01:45.844 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:01:45.847 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 01:01:45.850 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.852 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.854 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:45.855 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:45.856 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:45.857 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:45.861 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:45.866 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.868 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.870 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.873 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.875 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.878 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.881 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.885 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.888 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.890 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.891 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:45.893 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 27ms reading results.
2025-12-03 01:01:45.894 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.895 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:45.897 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.898 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.899 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:45.900 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:45.901 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:45.902 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:45.906 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:45.908 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:45.909 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:01:45.910 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.912 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:45.913 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.915 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.916 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:45.917 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:45.918 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:01:45.919 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:45.922 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:45.925 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.927 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.930 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.931 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.933 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.934 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.937 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.938 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.940 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.941 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.944 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.945 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.949 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.950 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.952 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.953 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.954 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.956 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.959 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.970 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.978 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.980 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:45.983 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:45.984 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 58ms reading results.
2025-12-03 01:01:45.985 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:45.986 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:45.987 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:01:45.989 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:01:45.990 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:01:45.991 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:01:45.992 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:01:45.993 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:01:45.994 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 232.6282ms
2025-12-03 01:01:45.996 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:01:45.996 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:45.998 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:45.999 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:01:46.000 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:46.001 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.003 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.004 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:01:46.005 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:01:46.007 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 270.0191ms
2025-12-03 01:01:46.007 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:01:46.010 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:01:46.012 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:01:46.013 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.014 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:01:46.016 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:01:46.017 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:01:46.018 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:01:46.020 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:01:46.021 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:01:46.022 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:46.028 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:46.029 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:46.030 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:01:46.031 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.033 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.034 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:46.036 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.037 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:46.039 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:01:46.041 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.042 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.043 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:46.045 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.055 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:01:46.058 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:01:46.059 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:01:46.060 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.062 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.063 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.063 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.064 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.065 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:46.071 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:46.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.076 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.077 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.078 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.079 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.083 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.085 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.088 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.091 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.093 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.096 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.097 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 01:01:46.098 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.099 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:46.100 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.101 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.102 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.103 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.105 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:46.109 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:46.110 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.112 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:01:46.113 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.114 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:46.115 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.116 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.117 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.118 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.119 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.120 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:46.123 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:46.125 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.127 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.129 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.130 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.131 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.132 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.133 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.134 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.137 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.138 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.140 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.141 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.143 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.144 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.147 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.148 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.150 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.153 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.155 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.157 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.160 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.161 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.163 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.165 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.166 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 40ms reading results.
2025-12-03 01:01:46.167 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.168 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:46.169 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:01:46.171 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:01:46.172 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:01:46.172 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:01:46.173 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:01:46.174 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:01:46.176 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 153.5289ms
2025-12-03 01:01:46.177 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:01:46.177 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.179 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:46.180 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:01:46.181 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:46.182 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.183 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.184 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:01:46.185 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:01:46.187 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 190.8256ms
2025-12-03 01:01:46.187 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:01:46.190 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:01:46.191 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:01:46.192 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.193 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:01:46.195 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:01:46.196 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:01:46.197 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:01:46.199 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:01:46.199 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:01:46.201 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:46.202 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:46.203 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:46.203 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:01:46.204 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.205 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.206 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:46.206 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.207 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:46.208 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:01:46.209 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.210 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.210 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:46.211 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.213 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:01:46.214 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:01:46.215 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:01:46.216 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.217 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.217 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.218 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.219 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.220 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:46.223 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:46.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.229 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.231 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.235 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.237 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.239 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.242 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.243 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.244 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.247 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.248 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 01:01:46.250 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.252 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:46.254 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.256 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.257 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.259 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.261 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:01:46.262 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:46.266 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:46.268 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.269 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:01:46.271 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.274 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:01:46.275 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.277 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.278 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.280 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.281 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:01:46.283 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:46.287 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:46.291 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.293 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.296 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.296 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.298 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.299 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.301 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.302 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.304 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.306 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.308 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.309 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.311 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.312 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.315 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.317 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.319 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.321 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.323 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.324 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.326 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.328 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.329 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 01:01:46.330 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.331 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:46.332 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:01:46.334 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:01:46.334 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:01:46.335 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:01:46.336 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:01:46.337 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:01:46.339 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 138.0886ms
2025-12-03 01:01:46.340 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:01:46.340 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.342 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:46.344 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:01:46.344 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:46.346 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.347 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.348 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:01:46.349 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:01:46.350 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 172.9665ms
2025-12-03 01:01:46.351 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:01:46.354 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:01:46.355 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:01:46.356 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.357 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:01:46.358 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:01:46.360 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:01:46.361 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:01:46.362 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:01:46.364 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:01:46.365 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:46.366 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:46.367 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:46.368 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:01:46.369 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.370 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.371 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:46.372 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:46.373 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:46.374 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:01:46.375 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.376 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.377 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:46.378 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:46.379 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:01:46.381 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:01:46.382 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:01:46.383 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.384 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.385 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.386 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.388 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:01:46.389 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:46.393 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:46.396 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.398 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.399 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.400 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.402 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.404 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.406 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.408 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.411 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.413 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.415 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.416 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 20ms reading results.
2025-12-03 01:01:46.418 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.419 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:46.420 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.421 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.422 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.423 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.424 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.425 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:46.428 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:46.431 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.431 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:01:46.433 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.434 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:46.435 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.437 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.438 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:46.438 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:46.439 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:46.440 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:46.443 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:46.446 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.448 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.450 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.451 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.453 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.454 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.455 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.456 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.458 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.459 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.460 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.462 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.464 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.464 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.466 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.468 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.470 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.472 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.474 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.475 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.476 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:46.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:46.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 01:01:46.480 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.481 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:46.482 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:01:46.484 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:01:46.484 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:01:46.485 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:01:46.485 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:01:46.486 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:01:46.487 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 122.6375ms
2025-12-03 01:01:46.488 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:46.489 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:01:46.490 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:46.491 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:01:46.492 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 152.1518ms
2025-12-03 01:01:46.839 +02:00 [DBG] Connection id "0HNHHUQRCSBOE" received FIN.
2025-12-03 01:01:46.843 +02:00 [DBG] Connection id "0HNHHUQRCSBOE" is closed. The last processed stream ID was 9.
2025-12-03 01:01:46.843 +02:00 [DBG] The connection queue processing loop for 0HNHHUQRCSBOE completed.
2025-12-03 01:01:46.848 +02:00 [DBG] Connection id "0HNHHUQRCSBOE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:01:46.852 +02:00 [DBG] Connection id "0HNHHUQRCSBOE" stopped.
2025-12-03 01:01:53.822 +02:00 [DBG] Connection id "0HNHHUQRCSBOF" accepted.
2025-12-03 01:01:53.826 +02:00 [DBG] Connection id "0HNHHUQRCSBOF" started.
2025-12-03 01:01:53.834 +02:00 [DBG] Connection 0HNHHUQRCSBOF established using the following protocol: "Tls12"
2025-12-03 01:01:53.840 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:01:53.844 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:53.844 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:01:53.847 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:53.847 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:01:53.848 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:01:53.849 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:01:53.849 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:01:53.850 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:53.851 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:01:53.852 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:01:53.854 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:01:53.855 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:01:53.856 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:01:53.857 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:01:53.858 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:53.859 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:01:53.860 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:53.861 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:01:53.862 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:53.862 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:53.863 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:01:53.864 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:01:53.865 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:53.866 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:01:53.867 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:53.867 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:53.868 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:01:53.869 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:01:53.872 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:01:53.874 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:01:53.875 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:01:53.876 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.876 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.877 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:53.878 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:53.878 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:53.879 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:53.883 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:01:53.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.888 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.890 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.894 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.895 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.897 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.897 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.898 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.899 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.901 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.903 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.905 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:53.906 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-12-03 01:01:53.907 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.907 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:53.908 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.909 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.910 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:53.911 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:53.912 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:53.912 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:53.916 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:01:53.917 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:53.918 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 01:01:53.919 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.920 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:01:53.921 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.922 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.923 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:01:53.923 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:01:53.924 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:01:53.925 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:53.928 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:01:53.930 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.932 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.934 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.935 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.937 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.938 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.940 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.941 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.943 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.944 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.946 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.947 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.949 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.950 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.953 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.955 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.957 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.959 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.962 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.963 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.965 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:01:53.967 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:01:53.968 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-12-03 01:01:53.969 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.971 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:01:53.972 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:01:53.974 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:01:53.974 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:01:53.975 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:01:53.976 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:01:53.977 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:01:53.978 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 120.5669ms
2025-12-03 01:01:53.979 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:01:53.980 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:01:53.981 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:01:53.982 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:01:53.984 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 143.6241ms
2025-12-03 01:01:56.843 +02:00 [DBG] Connection id "0HNHHUQRCSBOF" received FIN.
2025-12-03 01:01:56.844 +02:00 [DBG] Connection id "0HNHHUQRCSBOF" is closed. The last processed stream ID was 1.
2025-12-03 01:01:56.844 +02:00 [DBG] The connection queue processing loop for 0HNHHUQRCSBOF completed.
2025-12-03 01:01:56.847 +02:00 [DBG] Connection id "0HNHHUQRCSBOF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:01:56.858 +02:00 [DBG] Connection id "0HNHHUQRCSBOF" stopped.
2025-12-03 01:03:14.342 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-03 01:03:14.453 +02:00 [DBG] Hosting starting
2025-12-03 01:03:14.465 +02:00 [INF] User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 01:03:14.474 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-171dc15b-9d2d-45d5-9fcb-18badfdae667.xml'.
2025-12-03 01:03:14.479 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-328565d1-c612-402c-9473-6f50dc1bcb2f.xml'.
2025-12-03 01:03:14.481 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3853d745-e818-4ecf-b264-c04445fb406d.xml'.
2025-12-03 01:03:14.482 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3a7083ac-1a8b-48f5-9e81-d3a63254e8eb.xml'.
2025-12-03 01:03:14.483 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-77f0ec14-5c63-448f-b8e4-a2bd27bd6ead.xml'.
2025-12-03 01:03:14.484 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc.xml'.
2025-12-03 01:03:14.485 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-a21099c1-ceb7-4545-b251-882dccb0fb5b.xml'.
2025-12-03 01:03:14.486 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-e626ca21-42a8-439d-97f1-774b663fbc67.xml'.
2025-12-03 01:03:14.490 +02:00 [DBG] Found key {171dc15b-9d2d-45d5-9fcb-18badfdae667}.
2025-12-03 01:03:14.494 +02:00 [DBG] Found key {328565d1-c612-402c-9473-6f50dc1bcb2f}.
2025-12-03 01:03:14.496 +02:00 [DBG] Found key {3853d745-e818-4ecf-b264-c04445fb406d}.
2025-12-03 01:03:14.496 +02:00 [DBG] Found key {3a7083ac-1a8b-48f5-9e81-d3a63254e8eb}.
2025-12-03 01:03:14.497 +02:00 [DBG] Found key {77f0ec14-5c63-448f-b8e4-a2bd27bd6ead}.
2025-12-03 01:03:14.498 +02:00 [DBG] Found key {9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc}.
2025-12-03 01:03:14.500 +02:00 [DBG] Found key {a21099c1-ceb7-4545-b251-882dccb0fb5b}.
2025-12-03 01:03:14.501 +02:00 [DBG] Found key {e626ca21-42a8-439d-97f1-774b663fbc67}.
2025-12-03 01:03:14.508 +02:00 [DBG] Considering key {e626ca21-42a8-439d-97f1-774b663fbc67} with expiration date 2025-12-29 20:28:34Z as default key.
2025-12-03 01:03:14.512 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 01:03:14.519 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-03 01:03:14.521 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 01:03:14.528 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-03 01:03:14.530 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-03 01:03:14.532 +02:00 [DBG] Using key {e626ca21-42a8-439d-97f1-774b663fbc67} as the default key.
2025-12-03 01:03:14.534 +02:00 [DBG] Key ring with default key {e626ca21-42a8-439d-97f1-774b663fbc67} was loaded during application startup.
2025-12-03 01:03:14.622 +02:00 [INF] Now listening on: https://localhost:7217
2025-12-03 01:03:14.623 +02:00 [INF] Now listening on: http://localhost:5163
2025-12-03 01:03:14.624 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-12-03 01:03:14.624 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-03 01:03:14.625 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-03 01:03:14.625 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-03 01:03:14.701 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 01:03:14.701 +02:00 [INF] Hosting environment: Development
2025-12-03 01:03:14.702 +02:00 [INF] Content root path: D:\Work\HospitalWebSite\Hospital\Hospital
2025-12-03 01:03:14.703 +02:00 [DBG] Hosting started
2025-12-03 01:03:14.962 +02:00 [DBG] Connection id "0HNHHURSMRC3G" received FIN.
2025-12-03 01:03:14.969 +02:00 [DBG] Connection id "0HNHHURSMRC3G" accepted.
2025-12-03 01:03:14.973 +02:00 [DBG] Connection id "0HNHHURSMRC3G" started.
2025-12-03 01:03:14.986 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 01:03:15.006 +02:00 [DBG] Connection id "0HNHHURSMRC3H" accepted.
2025-12-03 01:03:15.007 +02:00 [DBG] Connection id "0HNHHURSMRC3H" started.
2025-12-03 01:03:15.010 +02:00 [DBG] Connection id "0HNHHURSMRC3G" stopped.
2025-12-03 01:03:15.014 +02:00 [DBG] Connection id "0HNHHURSMRC3G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:03:15.037 +02:00 [DBG] Connection 0HNHHURSMRC3H established using the following protocol: "Tls12"
2025-12-03 01:03:15.073 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-12-03 01:03:15.131 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-03 01:03:15.154 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-03 01:03:15.156 +02:00 [DBG] Request did not match any endpoints
2025-12-03 01:03:15.199 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-03 01:03:15.203 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-03 01:03:15.216 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-03 01:03:15.218 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-03 01:03:15.221 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 149.1883ms
2025-12-03 01:03:15.541 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-12-03 01:03:15.545 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 4.3777ms
2025-12-03 01:03:15.547 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-12-03 01:03:15.568 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.3152ms
2025-12-03 01:03:16.750 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-12-03 01:03:16.753 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-03 01:03:16.754 +02:00 [DBG] Request did not match any endpoints
2025-12-03 01:03:16.795 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.2479ms
2025-12-03 01:03:42.770 +02:00 [DBG] Connection id "0HNHHURSMRC3I" accepted.
2025-12-03 01:03:42.772 +02:00 [DBG] Connection id "0HNHHURSMRC3I" started.
2025-12-03 01:03:42.780 +02:00 [DBG] Connection 0HNHHURSMRC3I established using the following protocol: "Tls12"
2025-12-03 01:03:42.783 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 01:03:42.789 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:03:42.794 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:03:42.797 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:03:42.801 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:42.803 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:42.805 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:42.822 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:42.825 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:03:42.848 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:03:42.852 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:42.854 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:42.856 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:42.857 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:42.858 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:42.861 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:42.971 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-03 01:03:43.016 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:43.025 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:03:43.031 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:03:43.033 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:03:43.037 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:03:43.038 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:03:43.039 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:03:43.840 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-12-03 01:03:43.843 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-12-03 01:03:43.845 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-12-03 01:03:43.847 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-12-03 01:03:43.849 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-12-03 01:03:44.056 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 01:03:44.060 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 01:03:44.373 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:44.476 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-12-03 01:03:44.560 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:03:44.563 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:03:44.566 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 01:03:44.569 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 01:03:44.877 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 01:03:44.919 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:03:44.978 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:45.004 +02:00 [DBG] Created DbConnection. (23ms).
2025-12-03 01:03:45.012 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.285 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.292 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:45.298 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-03 01:03:45.306 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-12-03 01:03:45.317 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:03:45.365 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:03:45.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.520 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.579 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.696 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.710 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.715 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.719 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.722 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.727 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:45.733 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 358ms reading results.
2025-12-03 01:03:45.736 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.740 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (4ms).
2025-12-03 01:03:45.746 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.DoctorId == __doctorId_0)
    .Include(a => a.Patient)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 01:03:45.749 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 01:03:45.750 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 01:03:45.751 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 01:03:45.762 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Branch.Address (string) MaxLength(250), 17], [Property: Branch.BranchName (string) Required MaxLength(150), 18], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: Branch.Description (string), 20], [Property: Branch.Email (string) MaxLength(200), 21], [Property: Branch.ImageURL (string) MaxLength(300), 22], [Property: Branch.Latitude (double?), 23], [Property: Branch.Longitude (double?), 24], [Property: Branch.Phone (string) MaxLength(25), 25], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Payment.Amount (decimal) Required, 28], [Property: Payment.AppointmentId (int) Required FK Index, 29], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Payment.Currency (string) Required MaxLength(3), 31], [Property: Payment.GatewayResponse (string), 32], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 33], [Property: Payment.PaymobOrderId (long?), 34], [Property: Payment.PaymobTransactionId (long?), 35], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 36], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId
        WHERE a.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:03:45.767 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.769 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.770 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:45.770 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:45.771 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:03:45.772 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:03:45.776 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:03:45.788 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.791 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.815 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.828 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.830 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.832 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.835 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.837 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.838 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.841 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.843 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.845 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.846 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.848 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.849 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.856 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.858 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.873 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.875 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.877 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.880 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.882 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.883 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.885 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:45.888 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:45.889 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 111ms reading results.
2025-12-03 01:03:45.891 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.893 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:03:45.900 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:45.903 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:45.903 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:45.904 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:45.905 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:45.906 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:03:45.919 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 01:03:45.921 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 3058.2723ms
2025-12-03 01:03:45.923 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:03:45.923 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:03:45.925 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:03:45.926 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:45.926 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:03:45.928 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:45.929 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:45.929 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:45.930 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:45.931 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:45.932 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:03:45.932 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:03:45.934 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 3150.3447ms
2025-12-03 01:03:45.935 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:03:45.938 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:45.939 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:45.941 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:45.943 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:45.944 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:45.946 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:45.949 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:45.951 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:03:45.952 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:03:45.953 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:03:45.954 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:03:45.955 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:03:45.956 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:03:46.025 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:46.035 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:46.037 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:03:46.037 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.038 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.039 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:46.040 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:46.040 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:03:46.041 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:03:46.046 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:03:46.051 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.053 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.054 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.055 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.055 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.056 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.057 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.058 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.059 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.060 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.062 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.063 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.064 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.065 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.067 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:46.068 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 17ms reading results.
2025-12-03 01:03:46.069 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.070 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:03:46.071 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.072 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.073 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:46.074 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:46.075 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:03:46.076 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:03:46.079 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:03:46.081 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.083 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.085 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.086 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.088 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.089 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.090 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.092 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.093 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.094 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.096 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.097 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.099 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.100 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.102 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.104 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.105 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.106 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.107 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.109 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.110 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.111 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.112 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:46.113 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:46.114 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 01:03:46.115 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.116 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:03:46.117 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:46.118 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:46.119 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:46.119 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:46.120 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:46.121 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:03:46.122 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 176.244ms
2025-12-03 01:03:46.123 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:03:46.124 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:46.125 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:46.126 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:03:46.127 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 207.923ms
2025-12-03 01:03:47.063 +02:00 [DBG] Connection id "0HNHHURSMRC3I" received FIN.
2025-12-03 01:03:47.066 +02:00 [DBG] The connection queue processing loop for 0HNHHURSMRC3I completed.
2025-12-03 01:03:47.066 +02:00 [DBG] Connection id "0HNHHURSMRC3I" is closed. The last processed stream ID was 3.
2025-12-03 01:03:47.069 +02:00 [DBG] Connection id "0HNHHURSMRC3I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:03:47.079 +02:00 [DBG] Connection id "0HNHHURSMRC3I" stopped.
2025-12-03 01:03:48.066 +02:00 [DBG] Connection id "0HNHHURSMRC3J" accepted.
2025-12-03 01:03:48.069 +02:00 [DBG] Connection id "0HNHHURSMRC3J" started.
2025-12-03 01:03:48.074 +02:00 [DBG] Connection 0HNHHURSMRC3J established using the following protocol: "Tls12"
2025-12-03 01:03:48.078 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:03:48.083 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:03:48.083 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:03:48.085 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:48.086 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:48.087 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:48.088 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:48.090 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:48.091 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:48.097 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:03:48.099 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:48.101 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:48.102 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:48.104 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:48.105 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:48.108 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:48.113 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:48.128 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:48.133 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 01:03:48.135 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 01:03:48.136 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-12-03 01:03:48.138 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:03:48.139 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:03:48.141 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 01:03:48.143 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 01:03:48.168 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            4 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Specialization.Description (string), 51], [Property: Specialization.ImageURL (string) MaxLength(300), 52], [Property: Specialization.Name (string) Required MaxLength(120), 53], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 54] }
            5 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 55], [Property: Branch.Address (string) MaxLength(250), 56], [Property: Branch.BranchName (string) Required MaxLength(150), 57], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 58], [Property: Branch.Description (string), 59], [Property: Branch.Email (string) MaxLength(200), 60], [Property: Branch.ImageURL (string) MaxLength(300), 61], [Property: Branch.Latitude (double?), 62], [Property: Branch.Longitude (double?), 63], [Property: Branch.Phone (string) MaxLength(25), 64], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 65] }
            6 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 66], [Property: Payment.Amount (decimal) Required, 67], [Property: Payment.AppointmentId (int) Required FK Index, 68], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 69], [Property: Payment.Currency (string) Required MaxLength(3), 70], [Property: Payment.GatewayResponse (string), 71], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 72], [Property: Payment.PaymobOrderId (long?), 73], [Property: Payment.PaymobTransactionId (long?), 74], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 75], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 76] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:03:48.177 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:48.178 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:03:48.179 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:48.181 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:48.182 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:48.185 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:03:48.186 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:03:48.187 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:03:48.201 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:03:48.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.206 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.207 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.208 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.209 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.210 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.211 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.212 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.213 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.217 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.218 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.220 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.220 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.221 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.222 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.224 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.226 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.227 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.229 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.229 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.232 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.232 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.234 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.236 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.238 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.240 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.242 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.243 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.243 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.245 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:48.246 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:48.247 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 42ms reading results.
2025-12-03 01:03:48.248 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:48.249 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:03:48.251 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:48.252 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:48.253 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:48.253 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:48.254 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:48.254 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:03:48.255 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 147.8975ms
2025-12-03 01:03:48.256 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:48.257 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:48.258 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:48.259 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:03:48.259 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 181.605ms
2025-12-03 01:03:50.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:03:50.342 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:03:50.344 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:03:50.346 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:50.348 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:50.348 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:50.350 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:50.350 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:50.351 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:50.352 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:03:50.353 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:50.354 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:50.355 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:50.356 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:50.358 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:50.359 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:50.360 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:50.362 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:50.363 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:50.364 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:03:50.365 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:50.366 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:50.367 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:50.368 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:50.368 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:03:50.369 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:03:50.381 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:03:50.385 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.386 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.387 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.388 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.390 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.392 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.393 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.395 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.396 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.397 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.398 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.399 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.400 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.401 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.402 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.403 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.404 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.407 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.407 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.409 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.410 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.412 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.413 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.417 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.419 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.422 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.424 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.427 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.428 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.430 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:50.432 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:50.433 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 49ms reading results.
2025-12-03 01:03:50.434 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:50.435 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:03:50.436 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:50.438 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:50.438 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:50.439 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:50.439 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:50.440 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:03:50.441 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 82.4686ms
2025-12-03 01:03:50.442 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:50.443 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:50.444 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:50.444 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:03:50.445 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 108.6535ms
2025-12-03 01:03:55.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:03:55.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 01:03:55.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 01:03:55.055 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:03:55.056 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 01:03:55.058 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 01:03:55.060 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:03:55.061 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 01:03:55.062 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 01:03:55.064 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:55.065 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 01:03:55.066 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:03:55.067 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:55.069 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:03:55.070 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:55.070 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:55.071 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:55.072 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:55.072 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:55.073 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:55.074 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:55.075 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:55.076 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:55.077 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:55.078 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:55.078 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:55.081 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:03:55.080 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:03:55.079 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:03:55.094 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 01:03:55.093 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:55.097 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:55.096 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:55.098 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 01:03:55.099 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:55.101 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:55.103 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:55.104 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:55.105 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:55.106 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:55.107 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:55.108 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:55.109 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:03:55.110 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:55.111 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:55.112 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:03:55.114 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:03:55.115 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:03:55.117 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:03:55.119 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:55.120 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:03:55.122 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:55.123 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:03:55.124 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.125 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.126 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:55.126 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:55.127 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:03:55.128 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:03:55.142 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:03:55.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.146 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.149 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.151 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.153 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.155 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.157 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.158 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.160 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.161 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.163 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.164 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.166 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.167 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.170 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.171 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.172 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.173 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.174 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.176 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.178 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.180 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.183 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.185 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.186 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.188 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.190 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:55.192 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 46ms reading results.
2025-12-03 01:03:55.193 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.194 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:03:55.195 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:55.197 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:55.198 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:55.199 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:55.200 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:55.201 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:03:55.202 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 91.6361ms
2025-12-03 01:03:55.203 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:03:55.204 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:55.206 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.207 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:03:55.208 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 155.8034ms
2025-12-03 01:03:55.307 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:03:55.310 +02:00 [INF] Get All Branch called at "2025-12-03T01:03:55.3101124+02:00"
2025-12-03 01:03:55.313 +02:00 [INF] Fetching all branches
2025-12-03 01:03:55.316 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:55.318 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-12-03 01:03:55.324 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:03:55.327 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:55.327 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:03:55.328 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.329 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:03:55.329 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.332 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:55.332 +02:00 [INF] get all doctor in system called at "2025-12-03T01:03:55.3325440+02:00"
2025-12-03 01:03:55.333 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:55.334 +02:00 [INF] Fetching all doctors in the system
2025-12-03 01:03:55.334 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:03:55.336 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:03:55.337 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:03:55.339 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:03:55.340 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .ThenInclude(s => s.Branch)'
2025-12-03 01:03:55.342 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:55.343 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:03:55.343 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:03:55.344 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:03:55.345 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.346 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 01:03:55.348 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:03:55.349 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 01:03:55.352 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-12-03 01:03:55.360 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:55.362 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:55.363 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:55.364 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:55.365 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:55.366 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:03:55.371 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 01:03:55.381 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 260.5566ms
2025-12-03 01:03:55.382 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
            8 -> 39
            9 -> 40
            10 -> 41
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            12 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: Branch.Address (string) MaxLength(250), 62], [Property: Branch.BranchName (string) Required MaxLength(150), 63], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: Branch.Description (string), 65], [Property: Branch.Email (string) MaxLength(200), 66], [Property: Branch.ImageURL (string) MaxLength(300), 67], [Property: Branch.Latitude (double?), 68], [Property: Branch.Longitude (double?), 69], [Property: Branch.Phone (string) MaxLength(25), 70], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 71] }
            13 -> 52
            14 -> 61
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.ScheduleId, t0.BranchId, t0.CreatedAt, t0.DayOfWeek, t0.DoctorId, t0.EndTime, t0.Shift, t0.StartTime, t0.UpdatedAt, t0.BranchId0, t0.Address, t0.BranchName, t0.CreatedAt0, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt0
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN 
        (
            SELECT s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt AS CreatedAt0, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt AS UpdatedAt0
            FROM Schedules AS s0
            INNER JOIN Branches AS b0 ON s0.BranchId == b0.BranchId
        ) AS t0 ON d.DoctorId == t0.DoctorId
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC, t0.ScheduleId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:03:55.382 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:03:55.389 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:55.389 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:03:55.390 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.391 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:03:55.392 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:03:55.393 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.394 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 341.1437ms
2025-12-03 01:03:55.395 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.399 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:03:55.399 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:03:55.401 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:03:55.401 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:03:55.419 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:03:55.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.424 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.426 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.430 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.431 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.432 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.433 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.434 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.435 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.437 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.442 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.444 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.447 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:03:55.456 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:03:55.457 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 34ms reading results.
2025-12-03 01:03:55.458 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.460 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:03:55.475 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:03:55.477 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:03:55.478 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:03:55.479 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:03:55.479 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:03:55.481 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:03:55.497 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 382.3237ms
2025-12-03 01:03:55.499 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:03:55.501 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:03:55.502 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:03:55.503 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:03:55.504 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 451.7605ms
2025-12-03 01:03:57.083 +02:00 [DBG] Connection id "0HNHHURSMRC3J" received FIN.
2025-12-03 01:03:57.088 +02:00 [DBG] Connection id "0HNHHURSMRC3J" is closed. The last processed stream ID was 9.
2025-12-03 01:03:57.088 +02:00 [DBG] Connection id "0HNHHURSMRC3J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:03:57.094 +02:00 [DBG] The connection queue processing loop for 0HNHHURSMRC3J completed.
2025-12-03 01:03:57.095 +02:00 [DBG] Connection id "0HNHHURSMRC3J" stopped.
2025-12-03 01:03:59.969 +02:00 [DBG] Connection id "0HNHHURSMRC3K" accepted.
2025-12-03 01:03:59.972 +02:00 [DBG] Connection id "0HNHHURSMRC3K" started.
2025-12-03 01:03:59.975 +02:00 [DBG] Connection 0HNHHURSMRC3K established using the following protocol: "Tls12"
2025-12-03 01:03:59.977 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/2 - null null
2025-12-03 01:03:59.979 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/branch/2'
2025-12-03 01:03:59.981 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/branch/{branchId}' is valid for the request path '/api/TotalRevenue/branch/2'
2025-12-03 01:03:59.983 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:03:59.985 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:03:59.986 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:03:59.987 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:03:59.989 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:03:59.990 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:03:59.994 +02:00 [INF] Route matched with {action = "GetTotalRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInSpecificBranch(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:03:59.995 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:03:59.996 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:03:59.999 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:04:00.000 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:04:00.001 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:04:00.002 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:04:00.004 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:04:00.005 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:04:00.006 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:04:00.007 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:04:00.008 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:04:00.009 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:04:00.010 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:04:00.014 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:04:00.016 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-12-03 01:04:00.022 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:04:00.025 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:04:00.026 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:04:00.027 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.028 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.029 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:04:00.031 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:04:00.032 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:04:00.033 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:04:00.037 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:04:00.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.041 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:04:00.042 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:04:00.043 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.044 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:04:00.046 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.047 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.049 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:04:00.050 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:04:00.052 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:04:00.053 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:04:00.066 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:04:00.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.072 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.074 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.076 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.078 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.079 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.081 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.084 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.085 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.086 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.087 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.088 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.090 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.091 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.093 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.094 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.097 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.098 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.100 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.101 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.103 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.106 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.108 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.109 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.110 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.111 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.112 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.113 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.115 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.116 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:04:00.117 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:04:00.119 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 48ms reading results.
2025-12-03 01:04:00.120 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.121 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:04:00.123 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:04:00.125 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:04:00.125 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:04:00.126 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:04:00.127 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:04:00.128 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:04:00.129 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital) in 126.5745ms
2025-12-03 01:04:00.130 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:04:00.131 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:04:00.132 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:04:00.133 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:04:00.134 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/2 - 200 null application/json; charset=utf-8 157.5141ms
2025-12-03 01:04:07.094 +02:00 [DBG] Connection id "0HNHHURSMRC3K" received FIN.
2025-12-03 01:04:07.096 +02:00 [DBG] Connection id "0HNHHURSMRC3K" is closed. The last processed stream ID was 1.
2025-12-03 01:04:07.097 +02:00 [DBG] The connection queue processing loop for 0HNHHURSMRC3K completed.
2025-12-03 01:04:07.100 +02:00 [DBG] Connection id "0HNHHURSMRC3K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:04:07.109 +02:00 [DBG] Connection id "0HNHHURSMRC3K" stopped.
2025-12-03 01:05:28.987 +02:00 [DBG] Connection id "0HNHHURSMRC3H" is closing.
2025-12-03 01:05:28.992 +02:00 [DBG] Connection id "0HNHHURSMRC3H" is closed. The last processed stream ID was 7.
2025-12-03 01:05:28.999 +02:00 [DBG] Connection id "0HNHHURSMRC3H" received FIN.
2025-12-03 01:05:29.002 +02:00 [DBG] The connection queue processing loop for 0HNHHURSMRC3H completed.
2025-12-03 01:05:29.002 +02:00 [DBG] Connection id "0HNHHURSMRC3H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:05:29.017 +02:00 [DBG] Connection id "0HNHHURSMRC3H" stopped.
2025-12-03 01:08:05.839 +02:00 [DBG] Connection id "0HNHHURSMRC3L" accepted.
2025-12-03 01:08:05.841 +02:00 [DBG] Connection id "0HNHHURSMRC3L" started.
2025-12-03 01:08:05.848 +02:00 [DBG] Connection 0HNHHURSMRC3L established using the following protocol: "Tls12"
2025-12-03 01:08:05.850 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:08:05.853 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:08:05.854 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:08:05.857 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:08:05.861 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:08:05.862 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:08:05.864 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:08:05.866 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:08:05.868 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:08:05.869 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:08:05.872 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:08:05.875 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:08:05.878 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:08:05.880 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:08:05.883 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:08:05.887 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:08:05.889 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:08:05.892 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:08:05.896 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:08:05.898 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:08:05.899 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:05.901 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:05.904 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:08:05.904 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:08:05.906 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:08:05.908 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:08:05.926 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:08:05.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.930 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.932 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.934 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.936 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.939 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.941 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.942 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.944 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.946 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.948 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.949 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.952 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.953 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.955 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.956 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.958 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.960 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.962 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.964 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.966 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.969 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.970 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.971 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.972 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.974 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:05.977 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:08:05.978 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 48ms reading results.
2025-12-03 01:08:05.979 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:05.980 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:08:05.981 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:08:05.983 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:08:05.984 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:08:05.984 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:08:05.985 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:08:05.986 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:08:05.987 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 100.4372ms
2025-12-03 01:08:05.988 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:08:05.989 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:08:05.990 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:05.991 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:08:05.993 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 142.8709ms
2025-12-03 01:08:09.280 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 01:08:09.283 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:08:09.284 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:08:09.286 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:08:09.287 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:08:09.288 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:08:09.289 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:08:09.290 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:08:09.291 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:08:09.292 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:08:09.293 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:08:09.295 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:08:09.296 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:08:09.298 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:08:09.301 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:08:09.304 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:08:09.305 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:08:09.306 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:08:09.307 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:08:09.308 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:08:09.309 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:08:09.310 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:08:09.311 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:08:09.312 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:08:09.314 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:08:09.315 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:08:09.316 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.317 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.318 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:08:09.319 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:08:09.320 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:08:09.321 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:08:09.326 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:08:09.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.332 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.333 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.337 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.339 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.341 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.343 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.345 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.346 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.346 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:08:09.347 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-12-03 01:08:09.348 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.349 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:08:09.351 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.352 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.353 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:08:09.353 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:08:09.354 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:08:09.356 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:08:09.358 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:08:09.361 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.363 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.365 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.367 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.369 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.370 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.373 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.374 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.376 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.377 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.379 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.380 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.383 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.385 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.388 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.390 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.393 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.395 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.396 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.398 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.399 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.400 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.403 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:09.406 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:08:09.407 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 45ms reading results.
2025-12-03 01:08:09.408 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.409 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:08:09.410 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:08:09.413 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:08:09.414 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:08:09.415 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:08:09.415 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:08:09.416 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:08:09.417 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 113.8558ms
2025-12-03 01:08:09.418 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:08:09.420 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:08:09.421 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:09.422 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:08:09.423 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 142.3865ms
2025-12-03 01:08:12.507 +02:00 [DBG] Connection id "0HNHHURSMRC3L" received FIN.
2025-12-03 01:08:12.510 +02:00 [DBG] Connection id "0HNHHURSMRC3L" is closed. The last processed stream ID was 3.
2025-12-03 01:08:12.510 +02:00 [DBG] The connection queue processing loop for 0HNHHURSMRC3L completed.
2025-12-03 01:08:12.511 +02:00 [DBG] Connection id "0HNHHURSMRC3L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:08:12.529 +02:00 [DBG] Connection id "0HNHHURSMRC3L" stopped.
2025-12-03 01:08:13.247 +02:00 [DBG] Connection id "0HNHHURSMRC3M" accepted.
2025-12-03 01:08:13.248 +02:00 [DBG] Connection id "0HNHHURSMRC3M" started.
2025-12-03 01:08:13.250 +02:00 [DBG] Connection 0HNHHURSMRC3M established using the following protocol: "Tls12"
2025-12-03 01:08:13.251 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:08:13.254 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:08:13.255 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:08:13.256 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:08:13.257 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:08:13.258 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:08:13.259 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:08:13.259 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:08:13.260 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:08:13.261 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:08:13.262 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:08:13.263 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:08:13.265 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:08:13.266 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:08:13.267 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:08:13.269 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:08:13.271 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:08:13.272 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:08:13.274 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:08:13.275 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:08:13.275 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:13.277 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:13.278 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:08:13.279 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:08:13.280 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:08:13.282 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:08:13.293 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:08:13.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.297 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.300 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.301 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.302 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.304 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.307 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.309 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.310 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.311 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.311 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.312 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.313 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.314 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.315 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.317 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.317 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.319 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.320 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.322 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.323 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.324 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.326 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.328 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.330 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.332 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.333 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.334 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:08:13.336 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:08:13.337 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 40ms reading results.
2025-12-03 01:08:13.338 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:13.339 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:08:13.340 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:08:13.341 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:08:13.342 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:08:13.343 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:08:13.343 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:08:13.344 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:08:13.345 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 76.6727ms
2025-12-03 01:08:13.347 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:08:13.347 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:08:13.348 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:08:13.349 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:08:13.350 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 98.7475ms
2025-12-03 01:08:22.513 +02:00 [DBG] Connection id "0HNHHURSMRC3M" received FIN.
2025-12-03 01:08:22.515 +02:00 [DBG] Connection id "0HNHHURSMRC3M" is closed. The last processed stream ID was 1.
2025-12-03 01:08:22.515 +02:00 [DBG] The connection queue processing loop for 0HNHHURSMRC3M completed.
2025-12-03 01:08:22.517 +02:00 [DBG] Connection id "0HNHHURSMRC3M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:08:22.529 +02:00 [DBG] Connection id "0HNHHURSMRC3M" stopped.
2025-12-03 01:23:15.783 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-03 01:23:15.873 +02:00 [DBG] Hosting starting
2025-12-03 01:23:15.883 +02:00 [INF] User profile is available. Using 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 01:23:15.893 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-171dc15b-9d2d-45d5-9fcb-18badfdae667.xml'.
2025-12-03 01:23:15.898 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-328565d1-c612-402c-9473-6f50dc1bcb2f.xml'.
2025-12-03 01:23:15.900 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3853d745-e818-4ecf-b264-c04445fb406d.xml'.
2025-12-03 01:23:15.901 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-3a7083ac-1a8b-48f5-9e81-d3a63254e8eb.xml'.
2025-12-03 01:23:15.902 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-77f0ec14-5c63-448f-b8e4-a2bd27bd6ead.xml'.
2025-12-03 01:23:15.903 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc.xml'.
2025-12-03 01:23:15.904 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-a21099c1-ceb7-4545-b251-882dccb0fb5b.xml'.
2025-12-03 01:23:15.905 +02:00 [DBG] Reading data from file 'C:\Users\lenovo\AppData\Local\ASP.NET\DataProtection-Keys\key-e626ca21-42a8-439d-97f1-774b663fbc67.xml'.
2025-12-03 01:23:15.910 +02:00 [DBG] Found key {171dc15b-9d2d-45d5-9fcb-18badfdae667}.
2025-12-03 01:23:15.913 +02:00 [DBG] Found key {328565d1-c612-402c-9473-6f50dc1bcb2f}.
2025-12-03 01:23:15.915 +02:00 [DBG] Found key {3853d745-e818-4ecf-b264-c04445fb406d}.
2025-12-03 01:23:15.915 +02:00 [DBG] Found key {3a7083ac-1a8b-48f5-9e81-d3a63254e8eb}.
2025-12-03 01:23:15.916 +02:00 [DBG] Found key {77f0ec14-5c63-448f-b8e4-a2bd27bd6ead}.
2025-12-03 01:23:15.917 +02:00 [DBG] Found key {9dbb93dc-f5ef-4a99-a449-d7a8256ebfcc}.
2025-12-03 01:23:15.918 +02:00 [DBG] Found key {a21099c1-ceb7-4545-b251-882dccb0fb5b}.
2025-12-03 01:23:15.919 +02:00 [DBG] Found key {e626ca21-42a8-439d-97f1-774b663fbc67}.
2025-12-03 01:23:15.924 +02:00 [DBG] Considering key {e626ca21-42a8-439d-97f1-774b663fbc67} with expiration date 2025-12-29 20:28:34Z as default key.
2025-12-03 01:23:15.927 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 01:23:15.930 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-03 01:23:15.932 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-03 01:23:15.938 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-03 01:23:15.940 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-03 01:23:15.942 +02:00 [DBG] Using key {e626ca21-42a8-439d-97f1-774b663fbc67} as the default key.
2025-12-03 01:23:15.943 +02:00 [DBG] Key ring with default key {e626ca21-42a8-439d-97f1-774b663fbc67} was loaded during application startup.
2025-12-03 01:23:16.011 +02:00 [INF] Now listening on: https://localhost:7217
2025-12-03 01:23:16.012 +02:00 [INF] Now listening on: http://localhost:5163
2025-12-03 01:23:16.013 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-12-03 01:23:16.013 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-03 01:23:16.014 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-03 01:23:16.015 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-03 01:23:16.087 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 01:23:16.088 +02:00 [INF] Hosting environment: Development
2025-12-03 01:23:16.089 +02:00 [INF] Content root path: D:\Work\HospitalWebSite\Hospital\Hospital
2025-12-03 01:23:16.090 +02:00 [DBG] Hosting started
2025-12-03 01:23:16.166 +02:00 [DBG] Connection id "0HNHHV72MDL2Q" accepted.
2025-12-03 01:23:16.166 +02:00 [DBG] Connection id "0HNHHV72MDL2R" accepted.
2025-12-03 01:23:16.168 +02:00 [DBG] Connection id "0HNHHV72MDL2Q" started.
2025-12-03 01:23:16.168 +02:00 [DBG] Connection id "0HNHHV72MDL2R" started.
2025-12-03 01:23:16.189 +02:00 [DBG] Connection id "0HNHHV72MDL2R" received FIN.
2025-12-03 01:23:16.189 +02:00 [DBG] Connection id "0HNHHV72MDL2Q" received FIN.
2025-12-03 01:23:16.200 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 01:23:16.200 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-03 01:23:16.242 +02:00 [DBG] Connection id "0HNHHV72MDL2R" stopped.
2025-12-03 01:23:16.242 +02:00 [DBG] Connection id "0HNHHV72MDL2Q" stopped.
2025-12-03 01:23:16.245 +02:00 [DBG] Connection id "0HNHHV72MDL2R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:23:16.245 +02:00 [DBG] Connection id "0HNHHV72MDL2Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:23:16.432 +02:00 [DBG] Connection id "0HNHHV72MDL2S" accepted.
2025-12-03 01:23:16.435 +02:00 [DBG] Connection id "0HNHHV72MDL2S" started.
2025-12-03 01:23:16.491 +02:00 [DBG] Connection 0HNHHV72MDL2S established using the following protocol: "Tls12"
2025-12-03 01:23:16.555 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-12-03 01:23:16.661 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-03 01:23:16.699 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-03 01:23:16.703 +02:00 [DBG] Request did not match any endpoints
2025-12-03 01:23:16.759 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-03 01:23:16.775 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-03 01:23:16.802 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-03 01:23:16.811 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-03 01:23:16.820 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 266.8612ms
2025-12-03 01:23:17.404 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-12-03 01:23:17.404 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-12-03 01:23:17.411 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 7.0184ms
2025-12-03 01:23:17.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.4652ms
2025-12-03 01:23:18.793 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-12-03 01:23:18.800 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-03 01:23:18.802 +02:00 [DBG] Request did not match any endpoints
2025-12-03 01:23:18.852 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.7838ms
2025-12-03 01:23:40.138 +02:00 [DBG] Connection id "0HNHHV72MDL2T" accepted.
2025-12-03 01:23:40.143 +02:00 [DBG] Connection id "0HNHHV72MDL2T" started.
2025-12-03 01:23:40.151 +02:00 [DBG] Connection 0HNHHV72MDL2T established using the following protocol: "Tls12"
2025-12-03 01:23:40.155 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-12-03 01:23:40.161 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 01:23:40.163 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 01:23:40.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:23:40.169 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:23:40.170 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:23:40.172 +02:00 [DBG] The request is a preflight request.
2025-12-03 01:23:40.174 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 18.8516ms
2025-12-03 01:23:40.177 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 53
2025-12-03 01:23:40.181 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-03 01:23:40.185 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-03 01:23:40.186 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 01:23:40.187 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:23:40.188 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:23:40.189 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:23:40.206 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:23:40.212 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 01:23:40.237 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 01:23:40.244 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:23:40.246 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:23:40.247 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:23:40.250 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:23:40.250 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:23:40.253 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:23:40.349 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-03 01:23:40.382 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:23:40.391 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 01:23:40.395 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-12-03 01:23:40.397 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-03 01:23:40.405 +02:00 [DBG] Connection id "0HNHHV72MDL2T", Request id "0HNHHV72MDL2T:00000003": started reading request body.
2025-12-03 01:23:40.406 +02:00 [DBG] Connection id "0HNHHV72MDL2T", Request id "0HNHHV72MDL2T:00000003": done reading request body.
2025-12-03 01:23:40.413 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-12-03 01:23:40.416 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 01:23:40.418 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 01:23:40.419 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-12-03 01:23:40.424 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-12-03 01:23:40.426 +02:00 [INF] Login called at "2025-12-03T01:23:40.4265842+02:00"
2025-12-03 01:23:40.429 +02:00 [INF] Login attempt for email: admin@Hospital.com
2025-12-03 01:23:40.870 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-12-03 01:23:40.874 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-12-03 01:23:40.878 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-12-03 01:23:40.879 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-12-03 01:23:40.880 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-12-03 01:23:40.975 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 01:23:40.979 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-12-03 01:23:41.126 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:23:41.194 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-12-03 01:23:41.323 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:23:41.353 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:23:41.373 +02:00 [DBG] Created DbConnection. (19ms).
2025-12-03 01:23:41.378 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.573 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.578 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:41.585 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:23:41.592 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-12-03 01:23:41.599 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 01:23:41.708 +02:00 [INF] Executed DbCommand (109ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-12-03 01:23:41.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:41.807 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:41.816 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 100ms reading results.
2025-12-03 01:23:41.821 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.827 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (6ms).
2025-12-03 01:23:41.906 +02:00 [DBG] Creating JWT token for user 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:23:41.915 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-12-03 01:23:41.943 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:23:41.948 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.953 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.954 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:41.954 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:23:41.955 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:23:41.957 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 01:23:41.965 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-12-03 01:23:41.968 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:41.968 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:23:41.969 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.970 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:23:41.977 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-12-03 01:23:41.990 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:23:41.992 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.993 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:41.994 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:41.995 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:23:41.995 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:23:41.996 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 01:23:42.015 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 01:23:42.019 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.020 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:23:42.021 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.022 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:23:42.026 +02:00 [DBG] JWT token created for user 50f20790-c7c3-4baa-bee5-da27ac4985c3, expires at "2025-12-03T00:23:42.0000000Z"
2025-12-03 01:23:42.029 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.030 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.031 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:42.033 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:23:42.035 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:23:42.035 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 01:23:42.041 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-12-03 01:23:42.042 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.043 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 0ms reading results.
2025-12-03 01:23:42.044 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.045 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:23:42.050 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-12-03 01:23:42.057 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:23:42.059 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.060 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.061 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:42.062 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:23:42.062 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:23:42.064 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 01:23:42.070 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-12-03 01:23:42.073 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.073 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:23:42.074 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.075 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:23:42.086 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.089 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 01:23:42.096 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 01:23:42.106 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-12-03 01:23:42.109 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-12-03 01:23:42.110 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-12-03 01:23:42.159 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.163 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.168 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:42.171 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:23:42.176 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-03 01:23:42.177 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 01:23:42.207 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-12-03 01:23:42.215 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.217 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 5ms reading results.
2025-12-03 01:23:42.220 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.221 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:23:42.225 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.227 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-12-03 01:23:42.240 +02:00 [INF] User admin@Hospital.com logged in successfully with roles: Admin
2025-12-03 01:23:42.243 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:23:42.245 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:23:42.245 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:23:42.246 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:23:42.248 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:23:42.249 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-12-03 01:23:42.263 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 2009.1517ms
2025-12-03 01:23:42.267 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-12-03 01:23:42.269 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:23:42.273 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.276 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:23:42.277 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 2100.1787ms
2025-12-03 01:23:42.327 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 01:23:42.328 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 01:23:42.328 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:23:42.331 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 01:23:42.333 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 01:23:42.335 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:23:42.337 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 01:23:42.337 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 01:23:42.338 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:23:42.340 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 01:23:42.341 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:23:42.343 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:23:42.344 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:23:42.345 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:23:42.345 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:23:42.346 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:23:42.348 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:23:42.348 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:23:42.348 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:23:42.349 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:23:42.350 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:23:42.351 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:23:42.352 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:23:42.353 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:23:42.353 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:23:42.353 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:23:42.355 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:23:42.356 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:23:42.358 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 01:23:42.359 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:23:42.359 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 01:23:42.359 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:23:42.360 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:23:42.361 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:23:42.363 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:23:42.364 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:23:42.365 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:23:42.366 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:23:42.368 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:23:42.369 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:23:42.370 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:23:42.371 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:23:42.373 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:23:42.374 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:23:42.375 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:23:42.376 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:23:42.377 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:23:42.379 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:23:42.381 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:23:42.384 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:23:42.429 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:23:42.435 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 01:23:42.443 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 01:23:42.444 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-12-03 01:23:42.445 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:23:42.447 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:23:42.448 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 01:23:42.450 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 01:23:42.477 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 26], [Property: User.AccessFailedCount (int) Required, 27], [Property: User.ConcurrencyStamp (string) Concurrency, 28], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.DateOfBirth (DateOnly?), 30], [Property: User.Email (string) Index MaxLength(256), 31], [Property: User.EmailConfirmed (bool) Required, 32], [Property: User.FullName (string) Required MaxLength(150), 33], [Property: User.Gender (GenderType?) MaxLength(10), 34], [Property: User.LockoutEnabled (bool) Required, 35], [Property: User.LockoutEnd (DateTimeOffset?), 36], [Property: User.NormalizedEmail (string) Index MaxLength(256), 37], [Property: User.NormalizedUserName (string) Index MaxLength(256), 38], [Property: User.PasswordHash (string), 39], [Property: User.PhoneNumber (string), 40], [Property: User.PhoneNumberConfirmed (bool) Required, 41], [Property: User.RefreshToken (string), 42], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 43], [Property: User.Role (string) Required MaxLength(50), 44], [Property: User.SecurityStamp (string), 45], [Property: User.TwoFactorEnabled (bool) Required, 46], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: User.UserName (string) MaxLength(256), 48] }
            4 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: Specialization.Description (string), 51], [Property: Specialization.ImageURL (string) MaxLength(300), 52], [Property: Specialization.Name (string) Required MaxLength(120), 53], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 54] }
            5 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 55], [Property: Branch.Address (string) MaxLength(250), 56], [Property: Branch.BranchName (string) Required MaxLength(150), 57], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 58], [Property: Branch.Description (string), 59], [Property: Branch.Email (string) MaxLength(200), 60], [Property: Branch.ImageURL (string) MaxLength(300), 61], [Property: Branch.Latitude (double?), 62], [Property: Branch.Longitude (double?), 63], [Property: Branch.Phone (string) MaxLength(25), 64], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 65] }
            6 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 66], [Property: Payment.Amount (decimal) Required, 67], [Property: Payment.AppointmentId (int) Required FK Index, 68], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 69], [Property: Payment.Currency (string) Required MaxLength(3), 70], [Property: Payment.GatewayResponse (string), 71], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 72], [Property: Payment.PaymobOrderId (long?), 73], [Property: Payment.PaymobTransactionId (long?), 74], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 75], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 76] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:23:42.483 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:23:42.484 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:23:42.485 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.486 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.486 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:42.487 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:23:42.488 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:23:42.489 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:23:42.504 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:23:42.517 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.529 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:23:42.532 +02:00 [INF] Get All Branch called at "2025-12-03T01:23:42.5321210+02:00"
2025-12-03 01:23:42.532 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:23:42.533 +02:00 [INF] Fetching all branches
2025-12-03 01:23:42.534 +02:00 [INF] get all doctor in system called at "2025-12-03T01:23:42.5344284+02:00"
2025-12-03 01:23:42.536 +02:00 [INF] Fetching all doctors in the system
2025-12-03 01:23:42.540 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.542 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:23:42.542 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:23:42.545 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-12-03 01:23:42.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.546 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .ThenInclude(s => s.Branch)'
2025-12-03 01:23:42.549 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:23:42.549 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:23:42.550 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:23:42.552 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:23:42.553 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:23:42.553 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.554 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 01:23:42.556 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 01:23:42.558 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.558 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-12-03 01:23:42.560 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.561 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:42.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.561 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:23:42.563 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:23:42.564 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:23:42.567 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:23:42.569 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.570 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:23:42.570 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.571 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:23:42.576 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.581 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:23:42.582 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.583 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:23:42.585 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:23:42.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.585 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:23:42.587 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:23:42.588 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:23:42.596 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 01:23:42.597 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 222.5166ms
2025-12-03 01:23:42.599 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:23:42.599 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:23:42.600 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.601 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:23:42.603 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 274.6393ms
2025-12-03 01:23:42.606 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
            8 -> 39
            9 -> 40
            10 -> 41
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            12 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: Branch.Address (string) MaxLength(250), 62], [Property: Branch.BranchName (string) Required MaxLength(150), 63], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: Branch.Description (string), 65], [Property: Branch.Email (string) MaxLength(200), 66], [Property: Branch.ImageURL (string) MaxLength(300), 67], [Property: Branch.Latitude (double?), 68], [Property: Branch.Longitude (double?), 69], [Property: Branch.Phone (string) MaxLength(25), 70], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 71] }
            13 -> 52
            14 -> 61
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.ScheduleId, t0.BranchId, t0.CreatedAt, t0.DayOfWeek, t0.DoctorId, t0.EndTime, t0.Shift, t0.StartTime, t0.UpdatedAt, t0.BranchId0, t0.Address, t0.BranchName, t0.CreatedAt0, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt0
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN 
        (
            SELECT s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt AS CreatedAt0, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt AS UpdatedAt0
            FROM Schedules AS s0
            INNER JOIN Branches AS b0 ON s0.BranchId == b0.BranchId
        ) AS t0 ON d.DoctorId == t0.DoctorId
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC, t0.ScheduleId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:23:42.606 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.612 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:23:42.613 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:23:42.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.613 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.615 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.616 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:23:42.617 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:23:42.617 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:23:42.618 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:23:42.630 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.631 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.633 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.635 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.639 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.640 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.642 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.643 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.645 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:23:42.645 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.649 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.650 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.653 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.654 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.654 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.662 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.672 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.678 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.680 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.681 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.682 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.685 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.686 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.687 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.689 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.691 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.692 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.695 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.696 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 190ms reading results.
2025-12-03 01:23:42.697 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.698 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.700 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:23:42.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.703 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:23:42.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:23:42.705 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:23:42.707 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:23:42.706 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:23:42.707 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:23:42.708 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 59ms reading results.
2025-12-03 01:23:42.708 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:23:42.709 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.710 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:23:42.711 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:23:42.716 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 334.8196ms
2025-12-03 01:23:42.717 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:23:42.718 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:23:42.719 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.720 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:23:42.721 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 392.4351ms
2025-12-03 01:23:42.722 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:23:42.724 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:23:42.725 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:23:42.725 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:23:42.726 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:23:42.727 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:23:42.739 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 359.8778ms
2025-12-03 01:23:42.740 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:23:42.741 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:23:42.742 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:23:42.743 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:23:42.744 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 416.7939ms
2025-12-03 01:24:02.974 +02:00 [DBG] Connection id "0HNHHV72MDL2S" received FIN.
2025-12-03 01:24:02.978 +02:00 [DBG] Connection id "0HNHHV72MDL2S" is closed. The last processed stream ID was 7.
2025-12-03 01:24:02.978 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL2S completed.
2025-12-03 01:24:02.980 +02:00 [DBG] Connection id "0HNHHV72MDL2S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:24:02.988 +02:00 [DBG] Connection id "0HNHHV72MDL2S" stopped.
2025-12-03 01:24:16.616 +02:00 [DBG] Connection id "0HNHHV72MDL2T" received FIN.
2025-12-03 01:24:16.621 +02:00 [DBG] Connection id "0HNHHV72MDL2T" is closed. The last processed stream ID was 9.
2025-12-03 01:24:16.621 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL2T completed.
2025-12-03 01:24:16.624 +02:00 [DBG] Connection id "0HNHHV72MDL2T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:24:16.630 +02:00 [DBG] Connection id "0HNHHV72MDL2T" stopped.
2025-12-03 01:25:00.567 +02:00 [DBG] Connection id "0HNHHV72MDL2U" accepted.
2025-12-03 01:25:00.571 +02:00 [DBG] Connection id "0HNHHV72MDL2U" started.
2025-12-03 01:25:00.576 +02:00 [DBG] Connection 0HNHHV72MDL2U established using the following protocol: "Tls12"
2025-12-03 01:25:00.580 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 01:25:00.584 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:25:00.585 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:25:00.586 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:00.588 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:00.589 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:00.590 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:00.590 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:00.591 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:00.598 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:00.600 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:00.602 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:00.603 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:00.604 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:00.605 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:00.606 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:00.608 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:00.609 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:00.610 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:00.612 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:00.612 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:00.613 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:00.614 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:00.618 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:00.621 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-12-03 01:25:00.622 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-12-03 01:25:00.623 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-12-03 01:25:00.624 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-12-03 01:25:00.624 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-12-03 01:25:00.641 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-03 01:25:00.649 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:25:00.659 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:00.659 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:00.660 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.661 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.663 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:00.664 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:00.665 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:00.666 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:00.671 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:00.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.674 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.677 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.680 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.683 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.684 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.687 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.688 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.690 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:00.691 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 17ms reading results.
2025-12-03 01:25:00.692 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.693 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:00.695 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.DoctorId == __doctorId_0)
    .Include(a => a.Patient)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-12-03 01:25:00.698 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-12-03 01:25:00.699 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-12-03 01:25:00.700 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-12-03 01:25:00.709 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Branch.Address (string) MaxLength(250), 17], [Property: Branch.BranchName (string) Required MaxLength(150), 18], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: Branch.Description (string), 20], [Property: Branch.Email (string) MaxLength(200), 21], [Property: Branch.ImageURL (string) MaxLength(300), 22], [Property: Branch.Latitude (double?), 23], [Property: Branch.Longitude (double?), 24], [Property: Branch.Phone (string) MaxLength(25), 25], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Payment.Amount (decimal) Required, 28], [Property: Payment.AppointmentId (int) Required FK Index, 29], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Payment.Currency (string) Required MaxLength(3), 31], [Property: Payment.GatewayResponse (string), 32], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 33], [Property: Payment.PaymobOrderId (long?), 34], [Property: Payment.PaymobTransactionId (long?), 35], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 36], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId
        WHERE a.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-12-03 01:25:00.712 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.713 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.714 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:00.715 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:00.715 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:00.716 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:00.721 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:00.724 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.725 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.726 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.728 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.729 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.730 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.731 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.733 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.734 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.736 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.737 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.738 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.739 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.742 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.742 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.744 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.746 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.749 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.750 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.752 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.753 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.755 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:00.757 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:00.758 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 33ms reading results.
2025-12-03 01:25:00.758 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.759 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:00.761 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:00.763 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:00.764 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:00.764 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:00.765 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:00.766 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:00.767 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 160.9471ms
2025-12-03 01:25:00.768 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:00.769 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:00.770 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:00.771 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:25:00.772 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 191.8615ms
2025-12-03 01:25:03.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 01:25:03.484 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:25:03.485 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:25:03.487 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:03.488 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:03.488 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:03.489 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:03.490 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:03.491 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:03.492 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:03.494 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:03.495 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:03.496 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:03.498 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:03.499 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:03.500 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:03.504 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:03.505 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:03.506 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:03.508 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:03.509 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:03.510 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:03.511 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:03.513 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:03.515 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:03.515 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:03.517 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.518 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.519 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:03.519 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:03.520 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:03.521 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:03.526 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:03.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.532 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.534 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.539 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.541 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.543 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.545 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.547 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.548 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.551 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:03.552 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 01:25:03.553 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.554 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:03.555 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.556 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.557 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:03.558 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:03.559 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:03.560 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:03.563 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:03.565 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.567 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.569 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.570 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.573 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.574 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.575 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.577 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.579 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.580 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.582 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.583 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.585 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.587 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.588 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.590 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.592 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.594 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.595 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.598 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.598 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.600 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:03.602 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:03.603 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 37ms reading results.
2025-12-03 01:25:03.603 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.604 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:03.605 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:03.607 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:03.608 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:03.608 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:03.609 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:03.610 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:03.611 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 110.4793ms
2025-12-03 01:25:03.612 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:03.613 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:03.613 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:03.614 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:25:03.615 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 133.8064ms
2025-12-03 01:25:06.680 +02:00 [DBG] Connection id "0HNHHV72MDL2U" received FIN.
2025-12-03 01:25:06.683 +02:00 [DBG] Connection id "0HNHHV72MDL2U" is closed. The last processed stream ID was 3.
2025-12-03 01:25:06.683 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL2U completed.
2025-12-03 01:25:06.685 +02:00 [DBG] Connection id "0HNHHV72MDL2U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:25:06.694 +02:00 [DBG] Connection id "0HNHHV72MDL2U" stopped.
2025-12-03 01:25:07.308 +02:00 [DBG] Connection id "0HNHHV72MDL2V" accepted.
2025-12-03 01:25:07.309 +02:00 [DBG] Connection id "0HNHHV72MDL2V" started.
2025-12-03 01:25:07.312 +02:00 [DBG] Connection 0HNHHV72MDL2V established using the following protocol: "Tls12"
2025-12-03 01:25:07.314 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:25:07.319 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:25:07.322 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:25:07.326 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:07.338 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:07.341 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:07.344 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:07.348 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:07.350 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:07.356 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:07.358 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:07.360 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:07.361 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:07.363 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:07.365 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:07.367 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:07.368 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:07.369 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:07.370 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:07.373 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:07.374 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:07.374 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:07.376 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:07.377 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:07.378 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:25:07.379 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:07.380 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:07.381 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:07.382 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:07.385 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:07.388 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:07.388 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:07.389 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.390 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:07.392 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:07.393 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:07.394 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:07.399 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:07.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.405 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.407 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.412 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.413 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.415 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.418 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.419 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.428 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.461 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:07.462 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 59ms reading results.
2025-12-03 01:25:07.463 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.464 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:07.467 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-12-03 01:25:07.473 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-03 01:25:07.475 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.501 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.508 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:07.508 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:07.509 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:07.510 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:07.518 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:07.520 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:07.521 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:25:07.546 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.549 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:25:07.551 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.552 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.553 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:07.553 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:07.555 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:07.556 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:07.561 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:07.564 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.567 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.569 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.570 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.572 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.573 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.575 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.576 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.580 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.582 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.584 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.585 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.588 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.589 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.592 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.595 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.600 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.603 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.605 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.607 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.609 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.614 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:07.621 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:07.622 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 58ms reading results.
2025-12-03 01:25:07.624 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.624 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:07.626 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:07.628 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:07.628 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:07.629 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:07.630 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:07.631 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:07.632 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 265.1793ms
2025-12-03 01:25:07.633 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:07.634 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:07.635 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:07.636 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:25:07.637 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 323.3798ms
2025-12-03 01:25:09.450 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:25:09.454 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:25:09.454 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:25:09.456 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:09.458 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:09.458 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:09.460 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:09.461 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:09.462 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:09.463 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:09.465 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:09.465 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:09.467 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:09.468 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:09.469 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:09.470 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:09.471 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:09.471 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:09.472 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:09.474 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:09.475 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:09.476 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:09.478 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:09.479 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:09.479 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:25:09.480 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:09.481 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:09.482 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:09.483 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:09.484 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:09.485 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:09.486 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:09.487 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.488 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.488 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:09.489 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:09.490 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:09.491 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:09.498 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:09.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.502 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.504 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.505 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.509 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.511 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.513 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.515 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.517 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.518 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:09.519 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 18ms reading results.
2025-12-03 01:25:09.520 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.521 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:09.522 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.523 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.524 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:09.524 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:09.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:09.527 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:09.532 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:09.535 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:09.536 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:25:09.537 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.538 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:09.539 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.540 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.540 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:09.541 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:09.542 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:09.543 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:09.545 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:09.547 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.549 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.551 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.552 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.554 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.554 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.555 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.556 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.558 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.559 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.560 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.561 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.562 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.564 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.566 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.568 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.569 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.570 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.572 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.574 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.575 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.578 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.579 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.580 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.581 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:09.582 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:09.583 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 35ms reading results.
2025-12-03 01:25:09.584 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.584 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:09.585 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:09.587 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:09.588 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:09.588 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:09.589 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:09.589 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:09.590 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 120.8612ms
2025-12-03 01:25:09.591 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:09.592 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:09.593 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:09.594 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:25:09.595 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 145.7037ms
2025-12-03 01:25:16.687 +02:00 [DBG] Connection id "0HNHHV72MDL2V" received FIN.
2025-12-03 01:25:16.688 +02:00 [DBG] Connection id "0HNHHV72MDL2V" is closed. The last processed stream ID was 3.
2025-12-03 01:25:16.689 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL2V completed.
2025-12-03 01:25:16.692 +02:00 [DBG] Connection id "0HNHHV72MDL2V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:25:16.701 +02:00 [DBG] Connection id "0HNHHV72MDL2V" stopped.
2025-12-03 01:25:18.461 +02:00 [DBG] Connection id "0HNHHV72MDL30" accepted.
2025-12-03 01:25:18.465 +02:00 [DBG] Connection id "0HNHHV72MDL30" started.
2025-12-03 01:25:18.467 +02:00 [DBG] Connection 0HNHHV72MDL30 established using the following protocol: "Tls12"
2025-12-03 01:25:18.470 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/2 - null null
2025-12-03 01:25:18.473 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/2'
2025-12-03 01:25:18.473 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/2'
2025-12-03 01:25:18.475 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:18.476 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:18.477 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:18.479 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:18.480 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:18.481 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:18.483 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:18.486 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:18.487 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:18.488 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:18.490 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:18.491 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:18.492 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:18.493 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:18.495 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:18.496 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:18.499 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:18.502 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:18.502 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:18.503 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:18.504 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:18.505 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:25:18.507 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:18.509 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:18.510 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:18.511 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:18.514 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:18.517 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:18.518 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:25:18.519 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.520 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.521 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:18.522 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:18.523 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:18.524 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:18.531 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:18.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.536 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.541 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.548 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.549 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.550 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.552 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.555 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.556 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.557 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.558 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.560 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:18.561 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 26ms reading results.
2025-12-03 01:25:18.562 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.563 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:18.565 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.566 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.567 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:18.568 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:18.569 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:18.570 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:18.575 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:18.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.579 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:18.581 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:25:18.582 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.583 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:18.585 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.586 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.587 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:18.588 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:18.590 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:18.591 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:18.595 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:18.598 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.602 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.605 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.607 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.608 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.609 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.610 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.613 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.614 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.617 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.618 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.621 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.622 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.624 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.626 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.627 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.628 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.631 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.633 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.636 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.640 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.641 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.643 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:18.646 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:18.648 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 49ms reading results.
2025-12-03 01:25:18.649 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.650 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:18.652 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:18.654 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:18.655 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:18.656 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:18.657 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:18.659 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:18.661 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 168.7229ms
2025-12-03 01:25:18.662 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:18.664 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:18.665 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:18.669 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 01:25:18.671 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/2 - 200 null application/json; charset=utf-8 201.2112ms
2025-12-03 01:25:26.703 +02:00 [DBG] Connection id "0HNHHV72MDL30" received FIN.
2025-12-03 01:25:26.707 +02:00 [DBG] Connection id "0HNHHV72MDL30" is closed. The last processed stream ID was 1.
2025-12-03 01:25:26.707 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL30 completed.
2025-12-03 01:25:26.711 +02:00 [DBG] Connection id "0HNHHV72MDL30" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:25:26.717 +02:00 [DBG] Connection id "0HNHHV72MDL30" stopped.
2025-12-03 01:25:47.383 +02:00 [DBG] Connection id "0HNHHV72MDL31" accepted.
2025-12-03 01:25:47.384 +02:00 [DBG] Connection id "0HNHHV72MDL31" started.
2025-12-03 01:25:47.389 +02:00 [DBG] Connection 0HNHHV72MDL31 established using the following protocol: "Tls12"
2025-12-03 01:25:47.392 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/2 - null null
2025-12-03 01:25:47.395 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/branch/2'
2025-12-03 01:25:47.397 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/branch/{branchId}' is valid for the request path '/api/TotalRevenue/branch/2'
2025-12-03 01:25:47.399 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:47.400 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:47.401 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:47.401 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:47.402 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:47.404 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:47.409 +02:00 [INF] Route matched with {action = "GetTotalRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInSpecificBranch(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:47.413 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:47.415 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:47.419 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:47.422 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:47.423 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:47.425 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:47.426 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:47.428 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:47.429 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:25:47.430 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:47.431 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:47.432 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:47.434 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:47.437 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:47.441 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:47.441 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:47.442 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.443 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.444 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:47.445 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:47.447 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:47.448 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:47.457 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:47.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.461 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:47.463 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:25:47.465 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.466 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:47.468 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.469 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.470 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:47.471 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:47.472 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:47.474 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:25:47.500 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:25:47.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.506 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.509 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.511 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.513 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.515 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.520 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.522 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.523 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.529 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.530 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.535 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.538 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.542 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.544 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.549 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.551 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.556 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.559 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.563 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.569 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.573 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.579 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.581 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.584 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.587 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.593 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:47.599 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:47.601 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 96ms reading results.
2025-12-03 01:25:47.604 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.606 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:47.610 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:47.613 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:47.615 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:47.616 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:47.619 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:47.621 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:47.624 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital) in 198.7329ms
2025-12-03 01:25:47.627 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:47.629 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:47.630 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:47.633 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:25:47.635 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/2 - 200 null application/json; charset=utf-8 242.6909ms
2025-12-03 01:25:49.366 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:25:49.371 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:25:49.373 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:25:49.375 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:25:49.377 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:49.378 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:49.379 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:49.380 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:49.381 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:25:49.381 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:49.383 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:49.385 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:49.389 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:49.391 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:49.394 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:49.396 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:49.399 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:49.400 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:49.402 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:49.403 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:25:49.404 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:49.406 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:49.408 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:49.409 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:49.410 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:49.412 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:25:49.440 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:25:49.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.453 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.455 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.458 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.460 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.462 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.463 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.465 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.467 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.469 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.471 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.474 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.476 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.479 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.480 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.482 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.483 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.485 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.486 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.489 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.490 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.493 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.494 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.496 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.499 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.500 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.501 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.504 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.505 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.509 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:49.511 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:49.513 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 62ms reading results.
2025-12-03 01:25:49.514 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:49.515 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:49.517 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:49.519 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:49.520 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:49.521 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:49.522 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:49.523 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:49.524 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 128.0541ms
2025-12-03 01:25:49.526 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:25:49.527 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:49.529 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:49.530 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:25:49.532 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 165.5203ms
2025-12-03 01:25:50.671 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:25:50.675 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:25:50.677 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:25:50.679 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:25:50.682 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:50.682 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:50.686 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:50.689 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:50.690 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:25:50.692 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:50.695 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:50.697 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:50.698 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:50.702 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:50.704 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:50.706 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:50.708 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:50.711 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:50.714 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:50.715 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-03 01:25:50.716 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:50.717 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:50.718 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:50.719 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:50.720 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:50.721 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:25:51.070 +02:00 [INF] Executed DbCommand (349ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:25:51.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.079 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.081 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.083 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.085 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.088 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.091 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.095 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.097 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.100 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.101 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.104 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.107 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.109 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.111 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.113 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.117 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.119 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.122 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.124 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.128 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.129 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.131 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.132 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.135 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.139 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.143 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.147 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.149 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.157 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:51.161 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:51.164 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 89ms reading results.
2025-12-03 01:25:51.167 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:51.169 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:51.172 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:51.175 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:51.176 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:51.178 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:51.179 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:51.180 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:51.182 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 475.9534ms
2025-12-03 01:25:51.185 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:25:51.187 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:51.188 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:51.190 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:25:51.192 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 520.3508ms
2025-12-03 01:25:53.581 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - null null
2025-12-03 01:25:53.589 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:25:53.591 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/all-branches' is valid for the request path '/api/TotalRevenue/doctor/1/all-branches'
2025-12-03 01:25:53.594 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:53.595 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:53.596 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:53.597 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:53.598 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:53.600 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:53.601 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetDoctorRevenueInAllBranches(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:53.604 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:53.606 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:53.607 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:53.610 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:53.611 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:53.612 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:53.614 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:53.615 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:53.617 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:53.619 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:53.620 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:53.621 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:53.623 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:53.625 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:53.628 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:53.629 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:53.630 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.632 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.634 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:53.635 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:53.639 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-03 01:25:53.640 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:53.647 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:53.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.654 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.657 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.661 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.663 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.666 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.669 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.673 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.676 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.680 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:53.682 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 29ms reading results.
2025-12-03 01:25:53.684 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.685 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:53.687 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.689 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.690 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:53.691 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:53.693 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:53.695 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:53.700 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:53.704 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.708 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.712 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.713 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.715 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.716 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.718 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.721 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.722 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.726 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.727 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.730 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.731 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.734 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.736 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.740 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.744 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.748 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.751 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.755 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.758 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.763 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:53.766 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:53.768 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 63ms reading results.
2025-12-03 01:25:53.770 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.772 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:53.774 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:53.779 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:53.780 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:53.781 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:53.783 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:53.785 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:53.788 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital) in 175.5125ms
2025-12-03 01:25:53.792 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInAllBranches (Hospital)'
2025-12-03 01:25:53.796 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:53.800 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:53.802 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:25:53.804 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/all-branches - 200 null application/json; charset=utf-8 223.4289ms
2025-12-03 01:25:55.508 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - null null
2025-12-03 01:25:55.513 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:25:55.516 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/doctor/{doctorId}/branch/{branchId}' is valid for the request path '/api/TotalRevenue/doctor/1/branch/1'
2025-12-03 01:25:55.519 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:55.521 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:55.524 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:55.526 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:55.527 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:55.530 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:55.532 +02:00 [INF] Route matched with {action = "GetDoctorRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Object]] GetDoctorRevenueInSpecificBranch(Int32, Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:55.534 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:55.536 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:55.538 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:55.539 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:55.541 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:55.543 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:55.544 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:55.545 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:55.546 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-12-03 01:25:55.547 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:55.548 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:55.549 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-12-03 01:25:55.550 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-12-03 01:25:55.551 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:55.552 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:25:55.553 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:55.555 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:55.556 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:55.558 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:55.560 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:55.562 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:55.563 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:55.563 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.564 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.565 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:55.566 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:55.567 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:55.568 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:55.574 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-12-03 01:25:55.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.579 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.581 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.582 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.587 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.590 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.592 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.594 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.597 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.599 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:55.601 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 22ms reading results.
2025-12-03 01:25:55.602 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.603 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:25:55.604 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.605 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.606 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:55.607 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:25:55.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:55.609 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:55.613 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:55.615 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:55.617 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:25:55.618 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.619 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:55.621 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.623 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.624 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:55.625 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:55.627 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:55.628 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:55.632 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
WHERE [a].[DoctorId] = @__doctorId_0
2025-12-03 01:25:55.636 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.639 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.642 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.643 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.646 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.647 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.650 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.651 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.654 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.655 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.658 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.660 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.661 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.663 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.664 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.666 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.668 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.670 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.672 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.675 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.679 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.680 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.682 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:55.685 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:55.687 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 50ms reading results.
2025-12-03 01:25:55.688 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.689 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:55.691 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:25:55.693 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:25:55.695 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:25:55.696 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:25:55.697 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:25:55.699 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:25:55.700 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital) in 157.9028ms
2025-12-03 01:25:55.703 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetDoctorRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:55.705 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:25:55.706 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:55.707 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:25:55.710 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/doctor/1/branch/1 - 200 null application/json; charset=utf-8 201.985ms
2025-12-03 01:25:56.752 +02:00 [DBG] Connection id "0HNHHV72MDL31" received FIN.
2025-12-03 01:25:56.754 +02:00 [DBG] Connection id "0HNHHV72MDL31" is closed. The last processed stream ID was 9.
2025-12-03 01:25:56.754 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL31 completed.
2025-12-03 01:25:56.757 +02:00 [DBG] Connection id "0HNHHV72MDL31" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:25:56.767 +02:00 [DBG] Connection id "0HNHHV72MDL31" stopped.
2025-12-03 01:25:59.905 +02:00 [DBG] Connection id "0HNHHV72MDL32" accepted.
2025-12-03 01:25:59.907 +02:00 [DBG] Connection id "0HNHHV72MDL32" started.
2025-12-03 01:25:59.910 +02:00 [DBG] Connection 0HNHHV72MDL32 established using the following protocol: "Tls12"
2025-12-03 01:25:59.913 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/1 - null null
2025-12-03 01:25:59.918 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/branch/1'
2025-12-03 01:25:59.921 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/branch/{branchId}' is valid for the request path '/api/TotalRevenue/branch/1'
2025-12-03 01:25:59.923 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:59.925 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:25:59.926 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:25:59.928 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:25:59.930 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:25:59.931 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:25:59.932 +02:00 [INF] Route matched with {action = "GetTotalRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInSpecificBranch(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:25:59.933 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:25:59.935 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:25:59.937 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:25:59.939 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:25:59.940 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:25:59.942 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:59.944 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:25:59.945 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:59.946 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:25:59.948 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:59.949 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:59.950 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:25:59.951 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:25:59.953 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:25:59.955 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:25:59.956 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:25:59.957 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:59.958 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:59.960 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:59.961 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:59.962 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:59.963 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:59.968 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:25:59.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:25:59.972 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:25:59.973 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:25:59.975 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:59.977 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:25:59.979 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:59.981 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:25:59.982 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:25:59.983 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:25:59.984 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:25:59.986 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:26:00.010 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:26:00.014 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.016 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.018 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.019 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.021 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.023 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.024 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.026 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.028 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.029 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.031 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.032 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.034 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.035 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.039 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.041 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.042 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.043 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.045 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.046 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.048 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.049 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.051 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.052 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.054 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.055 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.057 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.059 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.060 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.063 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.066 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.069 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.071 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.072 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.074 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:00.077 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:26:00.078 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 64ms reading results.
2025-12-03 01:26:00.080 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:00.081 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:26:00.084 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:26:00.087 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:26:00.087 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:26:00.088 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:26:00.089 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:26:00.091 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:26:00.092 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital) in 150.1095ms
2025-12-03 01:26:00.094 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:26:00.095 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:26:00.097 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:00.099 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:26:00.101 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/1 - 200 null application/json; charset=utf-8 187.9335ms
2025-12-03 01:26:02.996 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/1 - null null
2025-12-03 01:26:03.001 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/branch/1'
2025-12-03 01:26:03.004 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)' with route pattern 'api/TotalRevenue/branch/{branchId}' is valid for the request path '/api/TotalRevenue/branch/1'
2025-12-03 01:26:03.006 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:26:03.007 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:26:03.008 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:26:03.009 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:26:03.010 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:26:03.011 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:26:03.012 +02:00 [INF] Route matched with {action = "GetTotalRevenueInSpecificBranch", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInSpecificBranch(Int32) on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:26:03.013 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:26:03.014 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:26:03.016 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:26:03.018 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:26:03.019 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:26:03.020 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:26:03.022 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:26:03.023 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:26:03.024 +02:00 [DBG] Attempting to bind parameter 'branchId' of type 'System.Int32' using the name 'branchId' in request data ...
2025-12-03 01:26:03.025 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:26:03.027 +02:00 [DBG] Done attempting to bind parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:26:03.028 +02:00 [DBG] Attempting to validate the bound parameter 'branchId' of type 'System.Int32' ...
2025-12-03 01:26:03.029 +02:00 [DBG] Done attempting to validate the bound parameter 'branchId' of type 'System.Int32'.
2025-12-03 01:26:03.031 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:26:03.032 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:26:03.033 +02:00 [DBG] Created DbConnection. (0ms).
2025-12-03 01:26:03.034 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.035 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.036 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:26:03.037 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:26:03.039 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:26:03.040 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:26:03.044 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-12-03 01:26:03.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.049 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:26:03.050 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 1ms reading results.
2025-12-03 01:26:03.051 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.052 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:26:03.053 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.054 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.055 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:26:03.055 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:26:03.057 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-12-03 01:26:03.058 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:26:03.073 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:26:03.077 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.077 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.078 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.079 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.081 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.083 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.087 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.088 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.090 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.091 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.094 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.095 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.097 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.098 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.100 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.101 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.104 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.104 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.106 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.107 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.109 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.111 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.113 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.115 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.117 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.120 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:26:03.123 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:26:03.124 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 47ms reading results.
2025-12-03 01:26:03.125 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.126 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:26:03.127 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:26:03.129 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:26:03.130 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:26:03.131 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:26:03.131 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:26:03.132 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:26:03.134 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital) in 113.0651ms
2025-12-03 01:26:03.135 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInSpecificBranch (Hospital)'
2025-12-03 01:26:03.137 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:26:03.138 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:26:03.139 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:26:03.140 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/branch/1 - 200 null application/json; charset=utf-8 143.6645ms
2025-12-03 01:26:06.760 +02:00 [DBG] Connection id "0HNHHV72MDL32" received FIN.
2025-12-03 01:26:06.764 +02:00 [DBG] Connection id "0HNHHV72MDL32" is closed. The last processed stream ID was 3.
2025-12-03 01:26:06.767 +02:00 [DBG] Connection id "0HNHHV72MDL32" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:26:06.764 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL32 completed.
2025-12-03 01:26:06.769 +02:00 [DBG] Connection id "0HNHHV72MDL32" stopped.
2025-12-03 01:30:31.729 +02:00 [DBG] Connection id "0HNHHV72MDL33" accepted.
2025-12-03 01:30:31.732 +02:00 [DBG] Connection id "0HNHHV72MDL33" started.
2025-12-03 01:30:31.734 +02:00 [DBG] Connection 0HNHHV72MDL33 established using the following protocol: "Tls12"
2025-12-03 01:30:31.738 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:30:31.740 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:30:31.741 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 01:30:31.742 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:30:31.743 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:30:31.744 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:30:31.745 +02:00 [DBG] The request is a preflight request.
2025-12-03 01:30:31.746 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - 204 null null 8.0373ms
2025-12-03 01:30:31.747 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 01:30:31.748 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 01:30:31.749 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:30:31.752 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:30:31.758 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 01:30:31.758 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 01:30:31.759 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:30:31.761 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:30:31.763 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 01:30:31.764 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 01:30:31.765 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:30:31.766 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-12-03 01:30:31.768 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 01:30:31.770 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:30:31.771 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:30:31.772 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:30:31.773 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:30:31.775 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:30:31.776 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:30:31.779 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:30:31.778 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:30:31.778 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:30:31.777 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:30:31.782 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:30:31.783 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:30:31.784 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:30:31.785 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:30:31.786 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:30:31.787 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:30:31.788 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:30:31.788 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:30:31.789 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:30:31.790 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:30:31.791 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:30:31.792 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:30:31.800 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:30:31.794 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 01:30:31.806 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:30:31.805 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:30:31.793 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:30:31.807 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:30:31.809 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:30:31.814 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:30:31.815 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:30:31.809 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 01:30:31.811 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:30:31.817 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:30:31.819 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:30:31.821 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:30:31.823 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:30:31.824 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:30:31.825 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:30:31.828 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:30:31.828 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:30:31.829 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:30:31.831 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:30:31.834 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:30:31.835 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:30:31.835 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:30:31.836 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:30:31.837 +02:00 [INF] Get All Branch called at "2025-12-03T01:30:31.8375460+02:00"
2025-12-03 01:30:31.838 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:30:31.839 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.840 +02:00 [INF] Fetching all branches
2025-12-03 01:30:31.843 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:30:31.844 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:30:31.846 +02:00 [INF] get all doctor in system called at "2025-12-03T01:30:31.8463802+02:00"
2025-12-03 01:30:31.845 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:30:31.847 +02:00 [INF] Fetching all doctors in the system
2025-12-03 01:30:31.848 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 01:30:31.849 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.850 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:30:31.850 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.851 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:30:31.853 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:30:31.854 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:30:31.855 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:30:31.856 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-03 01:30:31.857 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.857 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.858 +02:00 [DBG] Successfully validated the token.
2025-12-03 01:30:31.858 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:30:31.859 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:30:31.861 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-03 01:30:31.863 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.866 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:30:31.864 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-12-03 01:30:31.867 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-12-03 01:30:31.868 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-12-03 01:30:31.869 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:30:31.870 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:30:31.871 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:30:31.872 +02:00 [DBG] Authorization was successful.
2025-12-03 01:30:31.874 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:30:31.875 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:30:31.878 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:30:31.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.882 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:30:31.884 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.885 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 2ms reading results.
2025-12-03 01:30:31.885 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 01:30:31.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.887 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.889 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:30:31.890 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.891 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 01:30:31.891 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:30:31.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.894 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:30:31.894 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:30:31.895 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.897 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:30:31.899 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:30:31.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.900 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:30:31.902 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:30:31.903 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:30:31.903 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.904 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:30:31.905 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:30:31.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.909 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:30:31.911 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:30:31.912 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.912 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.913 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:30:31.915 +02:00 [INF] GetAdminData called at "2025-12-03T01:30:31.9154808+02:00"
2025-12-03 01:30:31.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.918 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 89.1503ms
2025-12-03 01:30:31.920 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.921 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.922 +02:00 [INF] Fetching user details for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:30:31.922 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:30:31.923 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.924 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.925 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:30:31.925 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:30:31.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.928 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.931 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __userId_0)'
2025-12-03 01:30:31.932 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.933 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-03 01:30:31.934 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.938 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 190.2013ms
2025-12-03 01:30:31.937 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.940 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.940 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
        SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM Users AS u
        WHERE u.Id == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2025-12-03 01:30:31.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.948 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.949 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.950 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.950 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:30:31.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.952 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:30:31.953 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.954 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.955 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.957 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.959 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.959 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.961 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:30:31.962 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.964 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:30:31.965 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.966 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.967 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-03 01:30:31.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.970 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:30:31.971 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.974 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.977 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:30:31.977 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.978 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.981 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:30:31.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.984 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 76ms reading results.
2025-12-03 01:30:31.984 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:30:31.986 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.986 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.987 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-12-03 01:30:31.988 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.988 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:30:31.990 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:31.991 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.992 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:30:31.992 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:30:31.993 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.995 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:30:31.997 +02:00 [INF] User details retrieved successfully for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:30:31.998 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:31.999 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:30:31.999 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:30:32.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:32.001 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:30:32.003 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:30:32.004 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:32.005 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:30:32.006 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:30:32.007 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:32.008 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:30:32.008 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:30:32.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:32.011 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 173.397ms
2025-12-03 01:30:32.012 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:30:32.014 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:32.015 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:30:32.016 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Admin.AdminDto'.
2025-12-03 01:30:32.017 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:30:32.018 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:30:32.021 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:30:32.021 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:32.023 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 142ms reading results.
2025-12-03 01:30:32.023 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 117.6385ms
2025-12-03 01:30:32.024 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:30:32.025 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:32.027 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:30:32.028 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 280.5696ms
2025-12-03 01:30:32.028 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 01:30:32.029 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:30:32.034 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:30:32.035 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:32.037 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:30:32.038 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 01:30:32.039 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:30:32.041 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 288.2697ms
2025-12-03 01:30:32.041 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:30:32.044 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:30:32.045 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:30:32.047 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 229.7898ms
2025-12-03 01:30:32.048 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:30:32.049 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:30:32.050 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:30:32.051 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:30:32.052 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 303.4357ms
2025-12-03 01:30:32.180 +02:00 [DBG] Connection id "0HNHHV72MDL33" received FIN.
2025-12-03 01:30:32.181 +02:00 [DBG] Connection id "0HNHHV72MDL33" is closed. The last processed stream ID was 9.
2025-12-03 01:30:32.182 +02:00 [DBG] Connection id "0HNHHV72MDL33" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:30:32.184 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL33 completed.
2025-12-03 01:30:32.184 +02:00 [DBG] Connection id "0HNHHV72MDL33" stopped.
2025-12-03 01:31:10.479 +02:00 [DBG] Connection id "0HNHHV72MDL34" accepted.
2025-12-03 01:31:10.482 +02:00 [DBG] Connection id "0HNHHV72MDL34" started.
2025-12-03 01:31:10.485 +02:00 [DBG] Connection 0HNHHV72MDL34 established using the following protocol: "Tls12"
2025-12-03 01:31:10.488 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:31:10.491 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:10.492 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 01:31:10.492 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 01:31:10.492 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:31:10.493 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 01:31:10.495 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 01:31:10.498 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 01:31:10.501 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:31:10.503 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:10.504 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 01:31:10.506 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 01:31:10.508 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:31:10.509 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:10.512 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 01:31:10.521 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:10.517 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:10.519 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:10.515 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:10.522 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:10.524 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:10.524 +02:00 [DBG] The request is a preflight request.
2025-12-03 01:31:10.526 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:10.526 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:10.528 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:10.529 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - 204 null null 40.6173ms
2025-12-03 01:31:10.531 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:10.532 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:10.533 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:10.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:31:10.539 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:10.540 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:10.541 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:10.543 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:10.544 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:10.545 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:10.547 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:10.548 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:10.550 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:10.551 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 01:31:10.552 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:31:10.553 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:10.554 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 01:31:10.556 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:10.558 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:10.559 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:10.562 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:10.565 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:10.566 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:10.568 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:10.568 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:10.569 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:10.570 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:10.572 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:10.574 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:10.577 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:10.580 +02:00 [DBG] Successfully validated the token.
2025-12-03 01:31:10.580 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:10.583 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:10.585 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:10.586 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-03 01:31:10.588 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:10.589 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:10.591 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:31:10.594 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:31:10.595 +02:00 [DBG] Authorization was successful.
2025-12-03 01:31:10.597 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:31:10.599 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:31:10.601 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:10.601 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:31:10.608 +02:00 [INF] Get All Branch called at "2025-12-03T01:31:10.6080240+02:00"
2025-12-03 01:31:10.609 +02:00 [INF] Fetching all branches
2025-12-03 01:31:10.604 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:10.605 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 01:31:10.611 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:10.613 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:10.615 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:10.618 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:10.619 +02:00 [DBG] Created DbConnection. (5ms).
2025-12-03 01:31:10.621 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:10.622 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 01:31:10.623 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.625 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:10.625 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:31:10.626 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.628 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.630 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:10.632 +02:00 [INF] get all doctor in system called at "2025-12-03T01:31:10.6321605+02:00"
2025-12-03 01:31:10.634 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.635 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:10.642 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-12-03 01:31:10.638 +02:00 [INF] Fetching all doctors in the system
2025-12-03 01:31:10.640 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:10.637 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:10.643 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-03 01:31:10.646 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-12-03 01:31:10.647 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:10.648 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:31:10.650 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:31:10.651 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-12-03 01:31:10.654 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:10.655 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:31:10.660 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:31:10.661 +02:00 [DBG] Created DbConnection. (7ms).
2025-12-03 01:31:10.663 +02:00 [INF] GetAdminData called at "2025-12-03T01:31:10.6632469+02:00"
2025-12-03 01:31:10.668 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.669 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:31:10.669 +02:00 [INF] Fetching user details for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:31:10.670 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.673 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:10.678 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 01:31:10.676 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:10.675 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:10.679 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:31:10.679 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.680 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:31:10.683 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:10.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.688 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (8ms).
2025-12-03 01:31:10.689 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-12-03 01:31:10.690 +02:00 [DBG] Created DbConnection. (6ms).
2025-12-03 01:31:10.691 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.692 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:10.694 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:31:10.695 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.700 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:10.704 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.706 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.707 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:10.708 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:10.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.711 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:10.712 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:31:10.714 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.715 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:10.716 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 01:31:10.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.719 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:31:10.721 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:31:10.722 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.724 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 129.4738ms
2025-12-03 01:31:10.729 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:31:10.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.731 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:10.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.734 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:31:10.734 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.735 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:10.737 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:10.743 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.747 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.748 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-12-03 01:31:10.749 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.751 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.752 +02:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-12-03 01:31:10.754 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.758 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.760 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 268.0384ms
2025-12-03 01:31:10.762 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (7ms).
2025-12-03 01:31:10.763 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.770 +02:00 [INF] User details retrieved successfully for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:31:10.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.772 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.773 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:10.775 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.777 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.780 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:10.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.783 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.784 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:10.785 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.787 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.788 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:10.791 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.793 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.794 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:10.796 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.799 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Admin.AdminDto'.
2025-12-03 01:31:10.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.802 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.803 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 155.2881ms
2025-12-03 01:31:10.805 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.807 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.808 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:10.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.813 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:10.814 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.816 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.817 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.820 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.821 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-03 01:31:10.823 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.826 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 289.6387ms
2025-12-03 01:31:10.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.829 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.833 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.834 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.835 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.839 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.841 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.845 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.850 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:10.851 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.852 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 109ms reading results.
2025-12-03 01:31:10.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.855 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.856 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.857 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:31:10.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.860 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:10.861 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.863 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:10.864 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.865 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:10.867 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.868 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:10.869 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.869 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:10.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:10.872 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:31:10.873 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:10.875 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 277.5252ms
2025-12-03 01:31:10.876 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 188ms reading results.
2025-12-03 01:31:10.877 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:10.879 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.880 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:10.882 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 01:31:10.883 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.885 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:10.886 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:31:10.889 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:10.890 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 398.4208ms
2025-12-03 01:31:10.891 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:10.895 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:10.895 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:10.897 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:31:10.899 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 307.5175ms
2025-12-03 01:31:10.900 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:10.901 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:10.902 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:10.903 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:31:10.905 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 412.3051ms
2025-12-03 01:31:17.251 +02:00 [DBG] Connection id "0HNHHV72MDL34" received FIN.
2025-12-03 01:31:17.255 +02:00 [DBG] Connection id "0HNHHV72MDL34" is closed. The last processed stream ID was 9.
2025-12-03 01:31:17.255 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL34 completed.
2025-12-03 01:31:17.257 +02:00 [DBG] Connection id "0HNHHV72MDL34" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:31:17.267 +02:00 [DBG] Connection id "0HNHHV72MDL34" stopped.
2025-12-03 01:31:30.998 +02:00 [DBG] Connection id "0HNHHV72MDL35" accepted.
2025-12-03 01:31:30.999 +02:00 [DBG] Connection id "0HNHHV72MDL35" started.
2025-12-03 01:31:31.002 +02:00 [DBG] Connection 0HNHHV72MDL35 established using the following protocol: "Tls12"
2025-12-03 01:31:31.003 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:31:31.003 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 01:31:31.004 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:31:31.004 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 01:31:31.005 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:31.007 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 01:31:31.009 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:31:31.010 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 01:31:31.011 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 01:31:31.012 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 01:31:31.013 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:31:31.014 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 01:31:31.015 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:31.016 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 01:31:31.018 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:31.019 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:31.020 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:31.022 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:31.023 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:31.023 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:31.025 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:31.025 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:31.026 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:31.027 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:31.027 +02:00 [DBG] The request is a preflight request.
2025-12-03 01:31:31.028 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:31.029 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:31.030 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:31.031 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - 204 null null 27.7361ms
2025-12-03 01:31:31.032 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:31.033 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:31.033 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:31.034 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:31:31.036 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:31.037 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:31.037 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:31.039 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:31.039 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:31.040 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:31:31.040 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 01:31:31.041 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:31.042 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 01:31:31.043 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:31.045 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:31.046 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:31.048 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:31.049 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:31.050 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:31.051 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:31.051 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:31.052 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:31.053 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:31.054 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:31.055 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:31.056 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:31.057 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:31.058 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:31.059 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:31.060 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:31.062 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:31.063 +02:00 [DBG] Successfully validated the token.
2025-12-03 01:31:31.064 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:31.066 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:31:31.067 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:31:31.067 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-03 01:31:31.068 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:31:31.069 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:31:31.070 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:31:31.071 +02:00 [DBG] Authorization was successful.
2025-12-03 01:31:31.071 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:31:31.072 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:31.073 +02:00 [INF] Get All Branch called at "2025-12-03T01:31:31.0730602+02:00"
2025-12-03 01:31:31.073 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:31.074 +02:00 [INF] get all doctor in system called at "2025-12-03T01:31:31.0743281+02:00"
2025-12-03 01:31:31.075 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:31.076 +02:00 [INF] Fetching all branches
2025-12-03 01:31:31.077 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 01:31:31.078 +02:00 [INF] Fetching all doctors in the system
2025-12-03 01:31:31.078 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:31:31.079 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:31.080 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:31.082 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:31.082 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.083 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:31.084 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:31.085 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:31.086 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.086 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 01:31:31.087 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:31.088 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:31:31.088 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:31.089 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.090 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:31.091 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.091 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:31:31.092 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.093 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:31.094 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.095 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-03 01:31:31.096 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:31.097 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:31:31.098 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:31.099 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:31:31.100 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:31:31.101 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:31:31.101 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:31:31.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 01:31:31.105 +02:00 [INF] GetAdminData called at "2025-12-03T01:31:31.1050761+02:00"
2025-12-03 01:31:31.105 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-12-03 01:31:31.106 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:31:31.107 +02:00 [INF] Fetching user details for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:31:31.108 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:31:31.110 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:31:31.110 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:31.111 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:31:31.114 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:31.115 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:31.118 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.118 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 4ms reading results.
2025-12-03 01:31:31.119 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 01:31:31.120 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.121 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.121 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.123 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:31:31.124 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.125 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:31:31.125 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.127 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:31.128 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:31.132 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.138 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:31.140 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2025-12-03 01:31:31.142 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.143 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.143 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:31.144 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-12-03 01:31:31.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.146 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.147 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:31.148 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:31:31.149 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.150 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.150 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:31.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.153 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:31:31.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.154 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:31:31.155 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.158 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.159 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 92.1679ms
2025-12-03 01:31:31.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.161 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:31.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.163 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:31.164 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.165 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 8ms reading results.
2025-12-03 01:31:31.166 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.167 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:31.168 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.169 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.170 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.170 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.171 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.173 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 01:31:31.173 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.174 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 01:31:31.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.176 +02:00 [INF] User details retrieved successfully for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:31:31.177 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.178 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 174.4665ms
2025-12-03 01:31:31.179 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.180 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:31.180 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.185 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:31.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.187 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.187 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:31.188 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.189 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:31.190 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.191 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.192 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:31.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.194 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Admin.AdminDto'.
2025-12-03 01:31:31.195 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.196 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.197 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 99.7879ms
2025-12-03 01:31:31.198 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.200 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.201 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:31.202 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.203 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.203 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:31.204 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.206 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.207 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.209 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:31:31.210 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.210 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.211 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 176.7801ms
2025-12-03 01:31:31.212 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.213 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:31.215 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.216 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 84ms reading results.
2025-12-03 01:31:31.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.218 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.219 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.220 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:31:31.221 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.222 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:31.223 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.224 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:31.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.225 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:31.226 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.227 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:31.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.229 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:31.229 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.230 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:31:31.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.232 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 164.0915ms
2025-12-03 01:31:31.234 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.236 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.235 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:31.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.238 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:31.239 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.240 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:31.242 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:31:31.244 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:31.245 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 241.5378ms
2025-12-03 01:31:31.246 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 128ms reading results.
2025-12-03 01:31:31.250 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.251 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-12-03 01:31:31.252 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:31.254 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:31.254 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:31.255 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:31.256 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:31.257 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:31:31.258 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 192.3831ms
2025-12-03 01:31:31.259 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:31.260 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:31.261 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:31.262 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-12-03 01:31:31.263 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 259.6614ms
2025-12-03 01:31:37.292 +02:00 [DBG] Connection id "0HNHHV72MDL35" received FIN.
2025-12-03 01:31:37.292 +02:00 [DBG] Connection id "0HNHHV72MDL35" is closed. The last processed stream ID was 9.
2025-12-03 01:31:37.293 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL35 completed.
2025-12-03 01:31:37.293 +02:00 [DBG] Connection id "0HNHHV72MDL35" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:31:37.306 +02:00 [DBG] Connection id "0HNHHV72MDL35" stopped.
2025-12-03 01:31:44.412 +02:00 [DBG] Connection id "0HNHHV72MDL36" accepted.
2025-12-03 01:31:44.413 +02:00 [DBG] Connection id "0HNHHV72MDL36" started.
2025-12-03 01:31:44.417 +02:00 [DBG] Connection 0HNHHV72MDL36 established using the following protocol: "Tls12"
2025-12-03 01:31:44.418 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/all - null null
2025-12-03 01:31:44.419 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - null null
2025-12-03 01:31:44.418 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:31:44.418 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-12-03 01:31:44.422 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-12-03 01:31:44.425 +02:00 [DBG] 1 candidate(s) found for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:31:44.429 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:44.433 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-12-03 01:31:44.435 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-12-03 01:31:44.436 +02:00 [DBG] Endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)' with route pattern 'api/TotalRevenue/all-branches' is valid for the request path '/api/TotalRevenue/all-branches'
2025-12-03 01:31:44.437 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-12-03 01:31:44.440 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-12-03 01:31:44.443 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-12-03 01:31:44.445 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:44.446 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:44.449 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:44.450 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:44.451 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:44.452 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:44.452 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:44.453 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:44.453 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:44.454 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:44.455 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:44.455 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:44.456 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:44.457 +02:00 [DBG] The request is a preflight request.
2025-12-03 01:31:44.457 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:44.458 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:44.459 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:44.459 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/getAdminData - 204 null null 40.665ms
2025-12-03 01:31:44.460 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:44.461 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-03 01:31:44.461 +02:00 [INF] Executing endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:44.463 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - null null
2025-12-03 01:31:44.464 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:44.465 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:44.466 +02:00 [INF] Route matched with {action = "GetTotalRevenueInAllBranches", controller = "TotalRevenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Decimal]] GetTotalRevenueInAllBranches() on controller Hospital.Controllers.TotalRevenueController (Hospital).
2025-12-03 01:31:44.467 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:44.468 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-12-03 01:31:44.469 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-12-03 01:31:44.470 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:44.471 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)' with route pattern 'api/Auth/getAdminData' is valid for the request path '/api/Auth/getAdminData'
2025-12-03 01:31:44.473 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:44.474 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:44.475 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:44.478 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:44.479 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:44.480 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:44.481 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:44.482 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-03 01:31:44.483 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:44.484 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:44.485 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:44.486 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-12-03 01:31:44.487 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:44.489 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:44.490 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:44.490 +02:00 [INF] CORS policy execution successful.
2025-12-03 01:31:44.491 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:44.492 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:44.493 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:31:44.494 +02:00 [DBG] Successfully validated the token.
2025-12-03 01:31:44.495 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:31:44.496 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:31:44.497 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.TotalRevenueController (Hospital)
2025-12-03 01:31:44.497 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-03 01:31:44.498 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-12-03 01:31:44.499 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-12-03 01:31:44.500 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:44.500 +02:00 [DBG] Authorization was successful.
2025-12-03 01:31:44.501 +02:00 [INF] Get All Branch called at "2025-12-03T01:31:44.5016295+02:00"
2025-12-03 01:31:44.502 +02:00 [INF] get all doctor in system called at "2025-12-03T01:31:44.5023586+02:00"
2025-12-03 01:31:44.503 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:44.504 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:44.504 +02:00 [INF] Fetching all branches
2025-12-03 01:31:44.505 +02:00 [INF] Fetching all doctors in the system
2025-12-03 01:31:44.506 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:31:44.507 +02:00 [INF] Route matched with {action = "GetAdminData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAdminData() on controller Hospital.Controllers.AuthController (Hospital).
2025-12-03 01:31:44.508 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:44.508 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:44.509 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.510 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-03 01:31:44.512 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:44.513 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:44.514 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.514 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-03 01:31:44.515 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-03 01:31:44.515 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:31:44.516 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:44.517 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-03 01:31:44.518 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.519 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.519 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-03 01:31:44.520 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-03 01:31:44.521 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.522 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.523 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-03 01:31:44.524 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-03 01:31:44.525 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:44.526 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:44.527 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:31:44.528 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:31:44.528 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:31:44.529 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-03 01:31:44.533 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-12-03 01:31:44.533 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-03 01:31:44.534 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-03 01:31:44.535 +02:00 [INF] GetAdminData called at "2025-12-03T01:31:44.5353408+02:00"
2025-12-03 01:31:44.536 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:31:44.537 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:31:44.537 +02:00 [INF] Fetching user details for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:31:44.541 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-12-03 01:31:44.541 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-12-03 01:31:44.545 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-12-03 01:31:44.547 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.548 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:44.550 +02:00 [DBG] Creating DbConnection.
2025-12-03 01:31:44.551 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.551 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 3ms reading results.
2025-12-03 01:31:44.552 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-03 01:31:44.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.554 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.555 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.556 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.557 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:31:44.558 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.559 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.559 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-12-03 01:31:44.560 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:44.560 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-03 01:31:44.561 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.564 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.566 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:44.567 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-12-03 01:31:44.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.569 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.569 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:44.570 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-12-03 01:31:44.571 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.573 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:44.574 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:31:44.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.576 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.580 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-03 01:31:44.579 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.577 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:44.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.581 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.582 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.583 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:31:44.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.585 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:44.586 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.587 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 92.4583ms
2025-12-03 01:31:44.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.589 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 7ms reading results.
2025-12-03 01:31:44.590 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.591 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-12-03 01:31:44.592 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.592 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.594 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:44.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.596 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (3ms).
2025-12-03 01:31:44.597 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.598 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.599 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.600 +02:00 [INF] User details retrieved successfully for userId: 50f20790-c7c3-4baa-bee5-da27ac4985c3
2025-12-03 01:31:44.601 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.603 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:44.602 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-03 01:31:44.605 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.606 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.607 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:44.608 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 189.6306ms
2025-12-03 01:31:44.609 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.610 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:44.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.614 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.615 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:44.616 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.618 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:44.619 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.620 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Admin.AdminDto'.
2025-12-03 01:31:44.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.623 +02:00 [INF] Executed action Hospital.Controllers.AuthController.GetAdminData (Hospital) in 95.4626ms
2025-12-03 01:31:44.624 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.626 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.GetAdminData (Hospital)'
2025-12-03 01:31:44.627 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.628 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.629 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:44.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.632 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.633 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.635 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:31:44.636 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.638 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Auth/getAdminData - 200 null application/json; charset=utf-8 175.1012ms
2025-12-03 01:31:44.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.644 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.646 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:44.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.648 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 83ms reading results.
2025-12-03 01:31:44.650 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.650 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.652 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-12-03 01:31:44.653 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.654 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:44.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.657 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:44.658 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.659 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:44.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.661 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:44.662 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.662 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:44.663 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.664 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 01:31:44.665 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.667 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 170.9775ms
2025-12-03 01:31:44.668 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.669 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-12-03 01:31:44.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-03 01:31:44.671 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:44.672 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-12-03 01:31:44.673 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.674 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 127ms reading results.
2025-12-03 01:31:44.675 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-03 01:31:44.678 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.679 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 260.6731ms
2025-12-03 01:31:44.680 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (2ms).
2025-12-03 01:31:44.684 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-03 01:31:44.687 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-03 01:31:44.687 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-03 01:31:44.688 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-03 01:31:44.688 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-03 01:31:44.690 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`1[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 01:31:44.691 +02:00 [INF] Executed action Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital) in 197.558ms
2025-12-03 01:31:44.692 +02:00 [INF] Executed endpoint 'Hospital.Controllers.TotalRevenueController.GetTotalRevenueInAllBranches (Hospital)'
2025-12-03 01:31:44.693 +02:00 [DBG] 'AppDbContext' disposed.
2025-12-03 01:31:44.695 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-12-03 01:31:44.696 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-03 01:31:44.697 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/TotalRevenue/all-branches - 200 null application/json; charset=utf-8 278.7754ms
2025-12-03 01:31:47.302 +02:00 [DBG] Connection id "0HNHHV72MDL36" received FIN.
2025-12-03 01:31:47.304 +02:00 [DBG] Connection id "0HNHHV72MDL36" is closed. The last processed stream ID was 9.
2025-12-03 01:31:47.305 +02:00 [DBG] The connection queue processing loop for 0HNHHV72MDL36 completed.
2025-12-03 01:31:47.306 +02:00 [DBG] Connection id "0HNHHV72MDL36" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-03 01:31:47.314 +02:00 [DBG] Connection id "0HNHHV72MDL36" stopped.
